window.__require=function t(e,o,n){function r(a,c){if(!o[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var u="function"==typeof __require&&__require;if(!c&&u)return u(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var s=o[a]={exports:{}};e[a][0].call(s.exports,function(t){return r(e[a][1][t]||t)},s,s.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({AbGroup:[function(t,e,o){"use strict";cc._RF.push(e,"05bcfUFgLFMBZJRWcKC++75","AbGroup");var n=t,r=e,i=o;cc._RF.push(r,"05bcfUFgLFMBZJRWcKC++75","AbGroup");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("LogUtil"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._group=null,e}return c(e,t),Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"AbGroup"},enumerable:!1,configurable:!0}),e.prototype.defaultData=function(){return this.data={group:e.GROUP_A},this.data},e.prototype.changeGroup=function(){var t=this._group==e.GROUP_A?e.GROUP_B:e.GROUP_A;this.data.group=t,this._group=t,this.saveLocalStorage()},e.prototype.getGroup=function(){if(!this._group){var t=void 0,e=window.$fgroup;if(e){var o=e.fgroup;console.log("\u5f3a\u5236\u5206\u914d\u7ec4\u522b",o),o&&"none"!=o&&(t=o)}else this.loadLocalStorage(),t=this.data.group;l.default.logGreen("group",t),this._group=t}return this._group},e.GROUP_A="a",e.GROUP_B="b",e}(n("RunDataHelper").RunDataBase);i.default=u,cc._RF.pop(),cc._RF.pop()},{}],Api:[function(t,e,o){"use strict";cc._RF.push(e,"aa83eVc4cZIeI5lYT/VQcYu","Api");var n=t,r=e,i=o;cc._RF.push(r,"96dfbhkAX1NermNHMom3eGk","Api"),Object.defineProperty(i,"__esModule",{value:!0}),i.serverTime=i.getOpenid=i.report=i.click=void 0;var a=n("Request"),c=n("config"),l=n("md5");i.click=function(t,e,o,n){void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),void 0===n&&(n=function(){}),a.default.post({url:c.DOMAIN+"/common/app-track/click",data:t,dataType:"json",success:e,fail:o,complete:n})},i.report=function(t,e,o,n){void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),void 0===n&&(n=function(){}),a.default.post({url:c.DOMAIN+"/common/user-op/op-merge-report?trace_id="+l.md5((Math.round(Date.now()/1e3)+1e3*Math.random()).toString()),data:t,dataType:"json",success:e,fail:o,complete:n})},i.getOpenid=function(t,e,o,n){void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),void 0===n&&(n=function(){}),a.default.post({url:c.DOMAIN+"/common/tt/session/sign_in",data:t,dataType:"json",success:e,fail:o,complete:n})},i.serverTime=function(t,e,o){void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),a.default.get({url:c.DOMAIN+"/common/common/time",dataType:"json",success:t,fail:e,complete:o})},cc._RF.pop(),cc._RF.pop()},{}],AreaIceRain:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"8a00cHswqBNnLJ4e4x3zRgu","AreaIceRain");var r=t,i=e,a=o;cc._RF.push(i,"8a00cHswqBNnLJ4e4x3zRgu","AreaIceRain");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Factory"),d=r("MathUtil"),y=r("GameGlobaled"),h=r("MonsterManager"),m=r("Bullet"),b=cc._decorator,v=b.ccclass,g=b.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodePrefab=null,e.position=null,e.range=0,e.list=[],e.completeCount=0,e.round=3,e.roundRainCount=5,e.interval=.08,e.roundInterval=.8,e.queue=[],e}return l(e,t),e.prototype.create=function(t){return s(this,void 0,void 0,function(){var e,o;return p(this,function(n){switch(n.label){case 0:return[4,f.default.instance.create(this.nodePrefab)];case 1:return(e=n.sent()).parent=this.node,e.setPosition(t.pos),e.scale=d.default.randomRange(.5,.7),o=e.getComponent(sp.Skeleton),t.event&&o.setEventListener(this.onDamage.bind(this)),o.setCompleteListener(this.onComplete.bind(this)),o.timeScale=y.default.speed,o.setSkin(Math.ceil(3*Math.random()).toString()),o.setAnimation(0,"animation",!1),this.list.push(o),[2,e]}})})},e.prototype.createRound=function(t){void 0===t&&(t=0);for(var e=[],o=2*Math.PI/this.roundRainCount,n=0;n<this.roundRainCount;n++)if(0===n)e.push(cc.Vec2.ZERO);else{var r=.3*this.range+Math.random()*this.range*.7;e.push(cc.Vec2.UP.mul(r).rotate(o*n))}for(e.sort(function(t,e){return e.y-t.y}),n=0;n<this.roundRainCount;n++)this.queue.push({delay:t+this.interval*n,pos:e[n],event:0===n})},e.prototype.onDamage=function(){for(var t=0;t<h.default.instance.listAll.length;t++){var e=h.default.instance.listAll[t];e.isDead||e.node.position.sub(this.position).mag()<=this.range&&this.hit(e)}},e.prototype.onComplete=function(){var t=this.list[0];t.setCompleteListener(null),t.setEventListener(null),f.default.instance.remove(t.node),this.list.shift(),this.completeCount++,this.completeCount>=this.round*this.roundRainCount&&this.remove()},e.prototype.init=function(e,o){t.prototype.init.call(this),this.node.setPosition(e),this.position=e,this.range=o,this.completeCount=0;for(var n=0;n<this.round;n++)this.createRound(n*this.roundInterval)},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.list.forEach(function(t){t.setCompleteListener(null),t.setEventListener(null),f.default.instance.remove(t.node)})},e.prototype.logicUpdate=function(e){if(this.isEnable){t.prototype.logicUpdate.call(this,e);for(var o=0;o<this.queue.length;o++)this.queue[o].delay-=e,this.queue[o].delay<=0&&(this.create(this.queue[o]),this.queue.splice(o,1),o--)}},e.prototype.onLoad=function(){},e.prototype.start=function(){},u([g({type:cc.Node,displayName:"\u51b0\u96e8\u9884\u5236\u4f53"})],e.prototype,"nodePrefab",void 0),u([v],e)}(m.default);a.default=_,cc._RF.pop(),cc._RF.pop()},{}],Area:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"9e6detqUHZGlJ1XGqkXNe+B","Area");var r=t,i=e,a=o;cc._RF.push(i,"9e6detqUHZGlJ1XGqkXNe+B","Area");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Bullet"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.start=function(){},u([f],e)}(s.default));a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Arrayincludes:[function(t,e){"use strict";cc._RF.push(e,"5a2dcJ5tq1MYpObCKQqAUiQ","Arrayincludes"),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),n=o.length>>>0;if(0==n)return!1;for(var r,i,a=0|e,c=Math.max(0<=a?a:n-Math.abs(a),0);c<n;){if((r=o[c])===(i=t)||"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))return!0;c++}return!1}}),cc._RF.pop()},{}],ArrowTower:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7b50dYqdFhP3JTmMNN/GC4W","ArrowTower");var r=t,i=e,a=o;cc._RF.push(i,"7b50dYqdFhP3JTmMNN/GC4W","ArrowTower");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.ArrowTower=void 0;var s=r("Tower"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),u([f],e)}(s.default));a.ArrowTower=d,cc._RF.pop(),cc._RF.pop()},{}],AssetBundleHelper:[function(t,e,o){"use strict";cc._RF.push(e,"bff2c5XXc5Hh4odFXcRRxR+","AssetBundleHelper");var n=e,r=o;cc._RF.push(n,"bff2c5XXc5Hh4odFXcRRxR+","AssetBundleHelper");var i=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},a=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function t(){}return t.init=function(t){this.bundlesDir=t},t.getScene=function(t,e){return void 0===e&&(e="Root"),i(this,void 0,Promise,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,this.getAssetBundles(e)];case 1:return o=n.sent(),[2,new Promise(function(e){o.loadScene(t,function(t,o){e(o)})})]}})})},t.runScene=function(t,e){return void 0===e&&(e="Root"),i(this,void 0,Promise,function(){var o,n=this;return a(this,function(r){switch(r.label){case 0:return[4,this.getAssetBundles(e)];case 1:return o=r.sent(),[2,new Promise(function(e){o.loadScene(t,function(t,o){cc.director.runScene(o,null,function(){return i(n,void 0,void 0,function(){return a(this,function(){return e(null),[2]})})})})})]}})})},t.clonePrefab=function(t,e){return void 0===e&&(e="Root"),i(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,this.getAsset(cc.Prefab,t,e)];case 1:return o=n.sent(),[2,cc.instantiate(o)]}})})},t.getAsset=function(t,e,o){return void 0===o&&(o="Root"),i(this,void 0,Promise,function(){var n;return a(this,function(r){switch(r.label){case 0:return[4,this.getAssetBundles(o)];case 1:return n=r.sent(),[2,new Promise(function(o){n.load(e,t,function(t,e){o(e)})})]}})})},t.loadAssetBundles=function(t){return i(this,void 0,Promise,function(){var e=this;return a(this,function(){return[2,new Promise(function(o,n){var r=cc.assetManager.getBundle(t);if(r)return e.assetBundles[t]=r,void o(r);var i={};if(""!==e.bundlesDir){var a=JSON.parse(cc.sys.localStorage.getItem("HotUpdateBundles"));a&&(i.version=a[t])}cc.assetManager.loadBundle(e.bundlesDir+t,i,function(r,i){r?(cc.error(r),n(null)):(e.assetBundles[t]=i,o(i))})})]})})},t.getAssetBundles=function(t){return void 0===t&&(t="Root"),i(this,void 0,void 0,function(){var e;return a(this,function(o){switch(o.label){case 0:return(e=this.assetBundles[t])?[2,e]:[4,this.loadAssetBundles(t)];case 1:return[2,o.sent()]}})})},t.setSpriteFrame=function(t,e,o){return void 0===o&&(o="Root"),i(this,void 0,void 0,function(){var n=this;return a(this,function(){return t?cc.sys.BYTEDANCE_GAME===cc.sys.platform&&"Img"===o?[2,this.setHttpSpriteFrame(t,e)]:[2,new Promise(function(r){return i(n,void 0,void 0,function(){return a(this,function(){return t.spriteFrame&&t.spriteFrame.name===e?[2,r(t.spriteFrame)]:(t.spriteFrame=null,t.name=e,this.getAsset(cc.SpriteFrame,e,o).then(function(o){o?t.name===e?(t.spriteFrame=o,t.spriteFrame.name=e,r(o)):console.log("spriteframe had reset"):console.log("spriteframe not found: "+e)}),[2])})})})]:[2]})})},t.setHttpSpriteFrame=function(t,e){return i(this,void 0,void 0,function(){var o;return a(this,function(){return o="https://mixpet-1255466057.cos.ap-shanghai.myqcloud.com/Compound/"+e+".jpg",[2,new Promise(function(e,n){t.spriteFrame=null,cc.assetManager.loadRemote(o,function(o,r){if(o)cc.error(o),n(null);else{var i=new cc.SpriteFrame(r);t.spriteFrame=i,e(i)}})})]})})},t.assetBundles={},t.bundlesDir="",t}();r.default=c,cc._RF.pop(),cc._RF.pop()},{}],AttValue:[function(t,e,o){"use strict";cc._RF.push(e,"093f3Hxlk5CGajG9HyEAhak","AttValue");var n=e,r=o;cc._RF.push(n,"093f3Hxlk5CGajG9HyEAhak","AttValue");var i,a=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.AttValueWithMax=r.AttValue=void 0;var c=function(){function t(t){void 0===t&&(t=null),this.value=0,this.base=0,this.perAddList={},this.valAddList={},this.funcChange=null,this.funcChange=t}return t.prototype.init=function(t){this.base=this.value=t,this.refresh(),this.funcChange&&this.funcChange(this.value)},t.prototype.cleanup=function(){this.value=this.base,this.perAddList={},this.valAddList={},this.funcChange&&this.funcChange(this.value)},t.prototype.setValue=function(t){this.value=Math.max(0,t),this.funcChange&&this.funcChange(this.value)},t.prototype.addValue=function(t){this.value+=t,this.funcChange&&this.funcChange(this.value)},t.prototype.subValue=function(t){this.value=Math.max(0,this.value-t),this.funcChange&&this.funcChange(this.value)},t.prototype.addPre=function(t){this.value=Math.ceil(this.value+this.base*t/100),this.funcChange&&this.funcChange(this.value)},t.prototype.valuePerUp=function(t,e){var o=""+t;this.perAddList.hasOwnProperty(o)?this.perAddList[o]+=e:this.perAddList[o]=e,this.refresh()},t.prototype.valuePerUpRemove=function(t){delete this.perAddList[""+t],this.refresh()},t.prototype.valueValUp=function(t,e){var o=""+t;this.valAddList.hasOwnProperty(o)?this.valAddList[o]+=e:this.valAddList[o]=e,this.refresh()},t.prototype.valueValUpRemove=function(t){delete this.valAddList[""+t],this.refresh()},t.prototype.refresh=function(){for(var t in this.value=this.base,this.valAddList)this.value+=this.valAddList[t];var e=0;for(var t in this.perAddList)e+=this.perAddList[t];this.value+=this.base*e/100,this.funcChange&&this.funcChange(this.value)},t}();r.AttValue=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.max=0,e}return a(e,t),e.prototype.init=function(t){this.base=this.max=this.value=t},e.prototype.cleanup=function(){this.value=this.max,this.perAddList={},this.valAddList={},this.funcChange&&this.funcChange(this.value)},e.prototype.setValue=function(e){t.prototype.setValue.call(this,e),this.value=Math.min(this.max,this.value),this.funcChange&&this.funcChange(this.value)},e.prototype.addValue=function(e){t.prototype.addValue.call(this,e),this.value=Math.min(this.max,this.value),this.funcChange&&this.funcChange(this.value)},e.prototype.subValue=function(e){t.prototype.subValue.call(this,e),this.value=Math.min(this.max,this.value),this.funcChange&&this.funcChange(this.value)},e.prototype.addPre=function(e){t.prototype.addPre.call(this,e),this.value=Math.min(this.max,Math.ceil(this.value+this.max*e/100)),this.funcChange&&this.funcChange(this.value)},e.prototype.refresh=function(){var t=0;for(var e in this.perAddList)t+=this.perAddList[e];var o=this.value/this.max;this.max=Math.ceil(this.base*(1+t/100)),this.value=Math.ceil(this.max*o),this.funcChange&&this.funcChange(this.value)},e}(c);r.AttValueWithMax=l,cc._RF.pop(),cc._RF.pop()},{}],AutoBlink:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"67c03a5YPpNSYr5Qw+1xXJz","AutoBlink");var r=t,i=e,a=o;cc._RF.push(i,"67c03a5YPpNSYr5Qw+1xXJz","AutoBlink");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("TweenComponent"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniTime=.2,e.hold=0,e.wait=0,e}return l(e,t),e.prototype.getTween=function(){return cc.tween(this.node).repeatForever(cc.tween(this.node).to(this.aniTime,{opacity:255}).delay(this.hold).to(this.aniTime,{opacity:0}).delay(this.wait))},e.prototype.onLoad=function(){this.node.opacity=0},u([d({displayName:"\u52a8\u753b\u65f6\u95f4"})],e.prototype,"aniTime",void 0),u([d({displayName:"\u7ef4\u6301\u65f6\u95f4"})],e.prototype,"hold",void 0),u([d({displayName:"\u8df3\u52a8\u7b49\u5f85"})],e.prototype,"wait",void 0),u([f,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f13\u52a8/\u81ea\u52a8\u95ea\u70c1")],e)}(s.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],AutoHeart:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"fe7eba0/+NNgJJhZNuySYy0","AutoHeart");var r=t,i=e,a=o;cc._RF.push(i,"fe7eba0/+NNgJJhZNuySYy0","AutoHeart");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("TweenComponent"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniTime=.2,e.scale=1.2,e.hold=0,e.wait=0,e.minScaleX=0,e.minScaleY=0,e}return l(e,t),e.prototype.getTween=function(){return cc.tween(this.node).repeatForever(cc.tween(this.node).to(this.aniTime,{scaleX:this.minScaleX,scaleY:this.minScaleY}).delay(this.hold).to(this.aniTime,{scale:this.minScaleX*this.scale,scaleY:this.minScaleY*this.scale}).delay(this.wait))},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.minScaleX=this.node.scaleX,this.minScaleY=this.node.scaleY},u([d({displayName:"\u52a8\u753b\u65f6\u95f4"})],e.prototype,"aniTime",void 0),u([d({displayName:"\u6700\u5927\u7f29\u653e"})],e.prototype,"scale",void 0),u([d({displayName:"\u7ef4\u6301\u65f6\u95f4"})],e.prototype,"hold",void 0),u([d({displayName:"\u8df3\u52a8\u7b49\u5f85"})],e.prototype,"wait",void 0),u([f,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f13\u52a8/\u81ea\u52a8\u5fc3\u8df3")],e)}(s.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],AutoJump:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"27bfcXYZzlBD4mh50a+DFhr","AutoJump");var r=t,i=e,a=o;cc._RF.push(i,"27bfcXYZzlBD4mh50a+DFhr","AutoJump");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("TweenComponent"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniTime=.2,e.jumpOffsetY=30,e.jumpWait=0,e.isScale=!0,e.scaleValue=.8,e.posY=0,e.scaleInit=1,e}return l(e,t),e.prototype.getTween=function(){var t=this.isScale?this.scaleValue:this.scaleInit;return this.isScale?cc.tween(this.node).repeatForever(cc.tween(this.node).to(this.aniTime,{scale:t,y:this.posY+this.jumpOffsetY}).to(this.aniTime,{scale:1,y:this.posY}).delay(this.jumpWait)):cc.tween(this.node).repeatForever(cc.tween(this.node).to(this.aniTime,{scale:t,y:this.posY+this.jumpOffsetY}).to(this.aniTime,{scale:t,y:this.posY}).delay(this.jumpWait))},e.prototype.onLoad=function(){this.posY=this.node.y,this.scaleInit=this.node.scale},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.node.scale=this.scaleInit},u([d({displayName:"\u52a8\u753b\u65f6\u95f4"})],e.prototype,"aniTime",void 0),u([d({displayName:"\u8df3\u52a8\u504f\u79fb\u91cf"})],e.prototype,"jumpOffsetY",void 0),u([d({displayName:"\u8df3\u52a8\u7b49\u5f85"})],e.prototype,"jumpWait",void 0),u([d({displayName:"\u662f\u5426\u7f29\u653e"})],e.prototype,"isScale",void 0),u([d({displayName:"scale\u7f29\u653e\u6bd4\u4f8b"})],e.prototype,"scaleValue",void 0),u([f,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f13\u52a8/\u81ea\u52a8\u8df3\u52a8")],e)}(s.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],AutoMove:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"70b7bUxS/FOwbg3N0WPrHHY","AutoMove");var r=e,i=o;cc._RF.push(r,"70b7bUxS/FOwbg3N0WPrHHY","AutoMove");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=(u.executeInEditMode,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speedScale=.1,e.sprite=null,e.texture=null,e}return c(e,t),e.prototype.refresh=function(){var t=this.sprite.spriteFrame.getOriginalSize(),e=this.sprite.spriteFrame.uv,o=(this.sprite.spriteFrame.uvSliced,this.sprite.spriteFrame._capInsets),n=this.sprite.getMaterial(0),r=this.texture.width/this.node.width,i=this.texture.height/this.node.height;n.setProperty("speed",this.speedScale),n.setProperty("scale",[r,i]),n.setProperty("uv",[e[0],e[6],e[7],e[1]]),n.setProperty("u",[o[0]/t.width,1-o[2]/t.width,o[0]/this.node.width,1-o[2]/this.node.width]),n.setProperty("v",[o[1]/t.height,1-o[3]/t.height,o[1]/this.node.height,1-o[3]/this.node.height])},e.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite),this.texture=this.sprite.spriteFrame.getTexture()},e.prototype.start=function(){this.scheduleOnce(this.refresh.bind(this),.1)},e.prototype.update=function(){},l([p({displayName:"\u901f\u5ea6\u7f29\u653e"})],e.prototype,"speedScale",void 0),l([s],e)}(cc.Component));i.default=f,cc._RF.pop(),cc._RF.pop()},{}],AutoRock:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"77f36JgSRhL/5ljl1wSL3hc","AutoRock");var r=t,i=e,a=o;cc._RF.push(i,"77f36JgSRhL/5ljl1wSL3hc","AutoRock");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("TweenComponent"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniTime=.2,e.angle=30,e.interval=0,e}return l(e,t),e.prototype.getTween=function(){var t=this.aniTime/4;return cc.tween(this.node).repeatForever(cc.tween(this.node).set({angle:0}).to(t,{angle:.5*-this.angle}).to(2*t,{angle:.5*this.angle}).to(t,{angle:0}).delay(this.interval))},u([d({displayName:"\u52a8\u753b\u65f6\u95f4"})],e.prototype,"aniTime",void 0),u([d({displayName:"\u89d2\u5ea6",min:0,max:180})],e.prototype,"angle",void 0),u([d({displayName:"\u95f4\u9694"})],e.prototype,"interval",void 0),u([f,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f13\u52a8/\u81ea\u52a8\u6447\u6446")],e)}(s.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],AutoRotate:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b84451dqF9Ijr7hJ84WyQLW","AutoRotate");var r=t,i=e,a=o;cc._RF.push(i,"b84451dqF9Ijr7hJ84WyQLW","AutoRotate");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("TweenComponent"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.step=10,e}return l(e,t),e.prototype.getTween=function(){var t=100/Math.abs(this.step);return cc.tween(this.node).repeatForever(cc.tween(this.node).set({angle:0}).to(t,{angle:360*(this.step>0?1:-1)}))},u([d({displayName:"\u65cb\u8f6c\u504f\u79fb\u91cf"})],e.prototype,"step",void 0),u([f,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f13\u52a8/\u81ea\u52a8\u65cb\u8f6c")],e)}(s.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],BagData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e3e578KDq9H5I56gipUPFrr","BagData");var r=t,i=e,a=o;cc._RF.push(i,"e3e578KDq9H5I56gipUPFrr","BagData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(a,"__esModule",{value:!0});var p=r("EventConfig"),f=r("EventHelper"),d=r("RunDataHelper"),y=r("DailyTaskData"),h=r("PowerData"),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultData=function(){return{items:{}}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"BagData"},enumerable:!1,configurable:!0}),e.prototype.onInit=function(){d.DataHelper.addRefreshListener(h.default,this.onPowerRefresh,this)},e.prototype.onPowerRefresh=function(){d.DataHelper.emitRefreshEvent(e)},e.prototype.getAllItem=function(){return s(Object.values(this.data.items),[this.getItem(50003)])},e.prototype.getItemCount=function(t){var e;return 50003===t?d.DataHelper.getData(h.default).power:(null===(e=this.data.items[t])||void 0===e?void 0:e.count)||0},e.prototype.getItem=function(t){return 50003===t?{id:50003,count:d.DataHelper.getData(h.default).power}:this.data.items.hasOwnProperty(t)?this.data.items[t]:null},e.prototype.setItemCount=function(t,e){if(50003===t){var o=d.DataHelper.getData(h.default).addPower(e);return f.default.emit(p.default.refreshTop),{id:t,count:o}}return this.data.items.hasOwnProperty(t)||(this.data.items[t]={id:t,count:0}),this.data.items[t].count=e,50001!==t&&50002!==t||f.default.emit(p.default.refreshTop),f.default.emit(p.default.refreshMainRed,"tower"),this.data.items[t]},e.prototype.addItemCount=function(t,e){if(50003===t){var o=d.DataHelper.getData(h.default).addPower(e);return f.default.emit(p.default.refreshTop),{id:t,count:o}}return this.data.items.hasOwnProperty(t)||(this.data.items[t]={id:t,count:0}),this.data.items[t].count+=e,50001!==t&&50002!==t||f.default.emit(p.default.refreshTop),f.default.emit(p.default.refreshMainRed,"tower"),this.data.items[t]},e.prototype.subItemCount=function(t,e){if(50003===t){var o=d.DataHelper.getData(h.default).subPower(e);return d.DataHelper.getData(y.default).addTaskProgress(y.TaskType.ConsumeStamina,e),f.default.emit(p.default.refreshTop),{id:t,count:o}}if(this.data.items[t])return this.data.items[t].count-=e,50001!==t&&50002!==t||f.default.emit(p.default.refreshTop),f.default.emit(p.default.refreshMainRed,"tower"),this.data.items[t]},u([d.DirtyData],e.prototype,"setItemCount",null),u([d.DirtyData],e.prototype,"addItemCount",null),u([d.DirtyData],e.prototype,"subItemCount",null),e}(d.RunDataBase);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],BaseTower:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"cffa7jD8PJF5qd9s0DfNCGJ","BaseTower");var r=t,i=e,a=o;cc._RF.push(i,"cffa7jD8PJF5qd9s0DfNCGJ","BaseTower");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.BaseTower=void 0;var s=r("GameGlobaled"),p=r("DamageManager"),f=r("Monster"),d=r("Tower"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeKillAll=null,e.tweenKillAll=null,e}return l(e,t),e.prototype.killAll=function(t){var e=this;return this.tweenKillAll?-1:(this.tweenKillAll=cc.tween(this.nodeKillAll).set({scale:.1,opacity:0,active:!0}).to(1,{scale:10,opacity:255}).call(function(){e.tweenKillAll=null,e.nodeKillAll.active=!1,t&&t()}).start(s.default.speed),1)},e.prototype.onCollisionEnter=function(t){var e=t.getComponent(f.default);if(e){var o=e.onHurt(e.data.hp.value);p.default.instance.create(o,e.bodyPosition)}},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.nodeKillAll.active=!1},u([m({type:cc.Node,displayName:"\u7edd\u6740\u573a\u57df"})],e.prototype,"nodeKillAll",void 0),u([h],e)}(d.default);a.BaseTower=b,cc._RF.pop(),cc._RF.pop()},{}],BattleFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"8b128kzl2tEPpUsX90BnmBy","BattleFrame");var r=t,i=e,a=o;cc._RF.push(i,"8b128kzl2tEPpUsX90BnmBy","BattleFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("ContentScroll"),d=r("ImageLoader"),y=r("MateralsLoader"),h=r("EventConfig"),m=r("GameDefine"),b=r("sdbStage"),v=r("AbGroup"),g=r("EventHelper"),_=r("FrameHelper"),w=r("RunDataHelper"),S=r("StaticDBHelper"),R=r("BagData"),O=r("DailyTaskData"),P=r("GameData"),F=r("GuideData"),T=r("StageData"),D=r("Version"),k=r("YWCloundHelper"),C=r("GameFrame"),L=r("HeroRewardFrame"),B=r("ContinueFrame"),j=r("DailyTaskFrame"),x=r("GMFrame"),I=r("GameLoadingFrame"),N=r("MainFrame"),A=r("SetFrame"),M=r("SweepFrame"),E=r("BuyTVFrame"),H=r("BoxItem"),G=r("ItemSelectLv"),U=cc._decorator,V=U.ccclass,W=U.menu,z=U.property,K=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.sectionList=null,e.sectionName=null,e.passCount=null,e.startNode=null,e.sweepNode=null,e.sweepCount=null,e.sweepMaterial=null,e.subBtn=null,e.addBtn=null,e.boxItems=[],e.testBtn=null,e.abLab=null,e.leftRedNode=null,e.rightRedNode=null,e.nodeReward=null,e.gmBtnNode=null,e.nodeTaskStory=null,e.gmClickCount=10,e.unLockSection=-1,e.selectSection=-1,e.scrollData=[],e.tweenList=[],e.isPlaying=!1,e}return l(e,t),e.prototype.onClickDailyTask=function(){_.default.showFrame(j.default)},e.prototype.onClickSweep=function(){_.default.showFrame(M.default)},e.prototype.onClickTaskStory=function(){_.default.showFrame(L.default)},e.prototype.onClickSet=function(){_.default.showFrame(A.default)},e.prototype.onClickSub=function(){this.selectSection<2||(this.selectSection--,this.sectionList.scrollToIndex(this.selectSection),this.refresh())},e.prototype.onClickAdd=function(){this.selectSection>=this.scrollData.length||(this.selectSection++,this.sectionList.scrollToIndex(this.selectSection),this.refresh())},e.prototype.onItemCreate=function(t,e){t.getComponent(G.default).initItem(this.scrollData[e],e<this.unLockSection)},e.prototype.contentItem=function(t){this.selectSection=t,this.refresh()},e.prototype.onItemClick=function(t){var e=t.getUserData();this.sectionList.isClick=!0,this.sectionList.scrollToIndex(e+1,!1)},e.prototype.onClickStart=function(){return s(this,void 0,void 0,function(){var t,e;return p(this,function(o){switch(o.label){case 0:return t=this.scrollData[this.sectionList.index-1],e=S.default.getConfig("LevelConsumption"),w.DataHelper.getData(R.default).getItemCount(m.default.ItemPower)<e?(_.default.showFrame(E.default),[2]):[4,_.default.showFrame(I.default)];case 1:return o.sent(),[4,_.default.showFrame(C.default,t)];case 2:return o.sent(),_.default.hideFrame(N.default),w.DataHelper.getData(R.default).subItemCount(m.default.ItemPower,e),w.DataHelper.getData(O.default).addTaskProgress(O.TaskType.MainLine),k.default.save(),[2]}})})},e.prototype.onClickBack=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onClickTip=function(){},e.prototype.onClickClose=function(){this.hideFrame()},e.prototype.onChangeStaticDB=function(){w.DataHelper.getData(v.default).changeGroup(),this.abLab.string=w.DataHelper.getData(v.default).getGroup()},e.prototype.reload=function(){return s(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this.beforeShow()];case 1:return t.sent(),this.sectionList.scrollToIndex(this.unLockSection,!0,!1,0),[2]}})})},e.prototype.refresh=function(){var t=w.DataHelper.getData(T.default),e=this.scrollData[this.selectSection-1];this.abLab.string=w.DataHelper.getData(v.default).getGroup(),this.subBtn.node.active=this.selectSection>1,this.addBtn.node.active=this.selectSection<this.scrollData.length,this.sectionName.string=e.stage+"."+e.name,this.passCount.string="\u6700\u9ad8\u575a\u6301\u5230\u7b2c"+t.getPassCount(this.selectSection)+"\u591c";var o=this.selectSection<=this.unLockSection||!!D.getUrlParam("unlock");if(this.startNode.getComponent(cc.Button).interactable=o,this.sweepNode.active=!0,S.default.getData(b.default,this.selectSection).reward0.length<2)this.nodeReward.active=!1;else{this.nodeReward.active=!0;for(var n=0;n<this.boxItems.length;n++)this.boxItems[n].init(this.selectSection,n)}this.refreshRed(),this.playAnimation()},e.prototype.playAnimation=function(){cc.Tween.stopAllByTarget(this.sectionName.node),cc.tween(this.sectionName.node).stop().set({opacity:0,scale:1,y:-30}).delay(.1).to(.3,{opacity:255,scale:1.1,y:10},{easing:"backOut"}).to(.1,{scale:1}).start(),cc.Tween.stopAllByTarget(this.startNode),this.startNode.active&&cc.tween(this.startNode).stop().set({opacity:0,x:100,y:20}).delay(.3).to(.3,{opacity:255,x:0,y:0,scale:1},{easing:"backOut"}).to(.15,{scale:1}).start(),cc.Tween.stopAllByTarget(this.sweepNode),this.sweepNode.active&&cc.tween(this.sweepNode).stop().set({opacity:0,x:-100,y:20}).to(.3,{opacity:255,x:0,y:0,scale:1},{easing:"backOut"}).to(.15,{scale:1}).start(),[this.leftRedNode,this.rightRedNode].forEach(function(t){cc.Tween.stopAllByTarget(t),t.active&&cc.tween(t).stop().set({opacity:0}).delay(.1).to(.2,{opacity:255,scale:1.2}).to(.1,{scale:1}).start()});for(var t=0;t<this.boxItems.length;t++){var e=this.boxItems[t].node;cc.Tween.stopAllByTarget(e),cc.tween(e).stop().set({scale:.8}).delay(.1*t).to(.3,{scale:1.15},{easing:"backOut"}).to(.1,{scale:1},{easing:"sineOut"}).start()}},e.prototype.refreshRed=function(){this.leftRedNode.active=!1,this.rightRedNode.active=!1;for(var t=w.DataHelper.getData(T.default).getEnableRewardList(),e=0;e<t.length;e++){var o=t[e];o>this.selectSection?this.rightRedNode.active=!0:o<this.selectSection&&(this.leftRedNode.active=!0)}},e.prototype.onClickGM=function(){cc.sys.WECHAT_GAME!==cc.sys.platform&&cc.sys.BYTEDANCE_GAME!==cc.sys.platform&&(this.gmClickCount=Math.max(this.gmClickCount-1,0),this.gmClickCount<=0&&_.default.showFrame(x.default))},e.prototype.onKey=function(t){cc.sys.WECHAT_GAME!==cc.sys.platform&&cc.sys.BYTEDANCE_GAME!==cc.sys.platform&&t.keyCode===cc.macro.KEY.p&&_.default.showFrame(x.default)},e.prototype.refreshStoryBtn=function(){this.nodeTaskStory.active=!1},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){var t,e;return p(this,function(){for(e in this.unLockSection=w.DataHelper.getData(T.default).unlock,this.selectSection<0&&(this.selectSection=this.unLockSection),this.scrollData=[],t=S.default.getTable(b.default))"0"!==e&&(+e>this.unLockSection+2&&!D.getUrlParam("unlock")||this.scrollData.push(t[e]));return this.sectionList.createItemsByLength(this.scrollData.length),this.refresh(),this.refreshStoryBtn(),g.default.emit(h.default.refreshMainRed,"tower"),g.default.emit(h.default.refreshMainRed,"shop"),g.default.emit(h.default.refreshMainRed,"hero"),g.default.emit(h.default.refreshMainRed,"battle"),g.default.emit(h.default.refreshMainRed,"sweep"),g.default.emit(h.default.refreshMainRed,"dailyTask"),[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(){return this.sectionList.scrollToIndex(this.unLockSection,!0,!1,0),t=this.scrollData[this.sectionList.index-1],w.DataHelper.getData(P.default).isAnyData&&w.DataHelper.getData(F.default).isFinished&&_.default.showFrame(B.default,t),this.playAnimation(),[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.sectionList.onItemCreate(this.onItemCreate.bind(this)),this.sectionList.node.on(f.default.ComponentEvent,this.contentItem,this),this.node.on("ItemSelectLv",this.onItemClick,this),g.default.on(h.default.GuideBattle,this.onClickStart,this),this.gmBtnNode.on(cc.Node.EventType.TOUCH_END,this.onClickGM,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKey,this),g.default.on(h.default.TaskStoryReward,this.refreshStoryBtn,this)},e.prototype.start=function(){},e.frameInfo={name:"BattleFrame",type:_.FrameType.Full,bundleName:"Root",prefabName:"Prefab/Frame/BattleFrame",zIndex:2},u([z({type:d.default,displayName:"\u80cc\u666f"})],e.prototype,"bg",void 0),u([z({type:f.default,displayName:"\u5173\u5361\u5217\u8868"})],e.prototype,"sectionList",void 0),u([z({type:cc.Label,displayName:"\u7ae0\u8282\u540d\u79f0"})],e.prototype,"sectionName",void 0),u([z({type:cc.Label,displayName:"\u901a\u8fc7\u6570"})],e.prototype,"passCount",void 0),u([z({type:cc.Node,displayName:"\u5f00\u59cb\u8282\u70b9"})],e.prototype,"startNode",void 0),u([z({type:cc.Node,displayName:"\u626b\u8361\u8282\u70b9"})],e.prototype,"sweepNode",void 0),u([z({type:cc.Label,displayName:"\u626b\u8361\u6b21\u6570"})],e.prototype,"sweepCount",void 0),u([z({type:y.default,displayName:"\u626b\u8361\u6309\u94ae\u80cc\u666f"})],e.prototype,"sweepMaterial",void 0),u([z({type:cc.Button,displayName:"\u51cf\u6309\u94ae"})],e.prototype,"subBtn",void 0),u([z({type:cc.Button,displayName:"\u52a0\u6309\u94ae"})],e.prototype,"addBtn",void 0),u([z({type:H.default,displayName:"\u5b9d\u7bb1"})],e.prototype,"boxItems",void 0),u([z({type:cc.Node,displayName:"\u6d4b\u8bd5\u6309\u94ae"})],e.prototype,"testBtn",void 0),u([z({type:cc.Label,displayName:"\u6d4b\u8bd5\u6570\u636e\u5207\u6362"})],e.prototype,"abLab",void 0),u([z({type:cc.Node,displayName:"\u5de6\u7ea2\u70b9"})],e.prototype,"leftRedNode",void 0),u([z({type:cc.Node,displayName:"\u53f3\u7ea2\u70b9"})],e.prototype,"rightRedNode",void 0),u([z({type:cc.Node,displayName:"\u5b9d\u7bb1\u8282\u70b9"})],e.prototype,"nodeReward",void 0),u([z({type:cc.Node,displayName:"GM\u6309\u94ae\u8282\u70b9"})],e.prototype,"gmBtnNode",void 0),u([z({type:cc.Node,displayName:"\u5267\u60c5\u4efb\u52a1"})],e.prototype,"nodeTaskStory",void 0),u([V,W("\u754c\u9762/BattleFrame \u6218\u6597\u9009\u5173\u754c\u9762")],e)}(_.FrameBase);a.default=K,cc._RF.pop(),cc._RF.pop()},{}],BattleManager:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7ec9baUXCJORqqEqPQF+Ry1","BattleManager");var r=t,i=e,a=o;cc._RF.push(i,"7ec9baUXCJORqqEqPQF+Ry1","BattleManager");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("GameDefine"),f=r("sdbMonster"),d=r("sdbRound"),y=r("EventHelper"),h=r("StaticDBHelper"),m=r("GameGlobaled"),b=r("CreateTask"),v=r("LightManager"),g=r("RendererManager"),_=r("BulletManager"),w=r("EffectManager"),S=r("HpManager"),R=r("MonsterManager"),O=r("TowerManager"),P=cc._decorator,F=P.ccclass,T=P.property,D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletManager=null,e.buildingMgr=null,e.monsterManager=null,e.rendererManager=null,e.effectManager=null,e.hpManager=null,e.effectMonsterDie=null,e.effectDeadStain=null,e.nodeDeadStain=null,e.stageType=0,e.stage=0,e.round=0,e.paths=[],e._isRunning=!1,e.createTasks=[],e.pathsRandomMap=[],e.battleLife=90,e.battleTime=0,e.isBattleOverTime=!1,e.hadSpacil=!1,e.hadBoss=!1,e}return l(e,t),Object.defineProperty(e.prototype,"hadSpacilOrBoss",{get:function(){return this.hadSpacil||this.hadBoss},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"battleTimeProgress",{get:function(){return Math.min(this.battleTime/this.battleLife,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"battleTimeRemain",{get:function(){return Math.max(this.battleLife-this.battleTime,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTaskFinish",{get:function(){return!this.createTasks.some(function(t){return!t.isFinish})},enumerable:!1,configurable:!0}),e.prototype.startBattle=function(t,e,o,n){this.stageType=e,this.stage=o,this.round=n,this.setPaths(t),this._isRunning=!0,this.buildingMgr.reset(),this.battleTime=0,this.isBattleOverTime=!1,this.createTasks=[],this.hadSpacil=!1,this.hadBoss=!1;for(var r=h.default.filterData(d.default,{type:e,stage:o,round:n}),i=0;i<r.length;i++){var a=h.default.getData(f.default,r[i].monster);a.type===p.MonsterType.Special?this.hadSpacil=!0:a.type===p.MonsterType.Boss&&(this.hadBoss=!0);var c=new b.default(r[i].interval/1e3,this.onCreateTask.bind(this),r[i]);c.start(r[i].count,r[i].time),this.createTasks.push(c)}},e.prototype.onCreateTask=function(t,e){var o=this.paths[e.spawn];o&&this.monsterManager.create(e.monster,e.atk/100,e.hp/100,o)},e.prototype.onMonsterDead=function(t){this.monsterManager.remove(t),this.effectManager.create(this.effectDeadStain,t.node.position,this.nodeDeadStain).then(function(t){t.scale=.7})},e.prototype.setPaths=function(t){this.paths=[],this.pathsRandomMap=[];for(var e=0;e<t.length;e++)this.paths.push(t[e].map(function(t){return cc.v2(m.default.boardStartPos.x+(t.x+.5)*m.default.gridSize,m.default.boardStartPos.y+(t.y+.5)*m.default.gridSize)})),this.pathsRandomMap.push(e);this.pathsRandomMap.sort(function(){return Math.random()-.5})},e.prototype.cleanup=function(){this.createTasks=[],this.monsterManager.cleanup(),this.bulletManager.cleanup(),this.buildingMgr.cleanup(),this.effectManager.cleanup(),this.hpManager.cleanup(),this.battleTime=0,this._isRunning=!1},e.prototype.reset=function(){this.createTasks=[],this.monsterManager.cleanup(),this.hpManager.cleanup(),this.bulletManager.cleanup(),this.buildingMgr.reset(),this.effectManager.cleanup(),this.battleTime=0,this._isRunning=!1},e.prototype.logicUpdate=function(t){if(this._isRunning){this.bulletManager.logicUpdate(t),this.buildingMgr.logicUpdate(t),this.monsterManager.logicUpdate(t),this.hpManager.logicUpdate(t),this.rendererManager.logicUpdate(t),this.effectManager.logicUpdate(t),v.default.instance.logicUpdate(t),this.createTasks.forEach(function(e){return e.logicUpdate(t)}),this.battleTime+=t;var e=this.battleTime>=this.battleLife,o=this.isTaskFinish&&this.monsterManager.isEmpty;(this.hadSpacilOrBoss?o:e||o)&&(this.isBattleOverTime=!0,this.createTasks.forEach(function(t){return t.stop()}),O.default.instance.base.killAll(function(){y.default.emit(s.default.RoundPass)}))}},e.prototype.stopBattle=function(){this._isRunning=!1},e.prototype.onLoad=function(){y.default.on(s.default.MonsterDead,this.onMonsterDead,this)},e.prototype.start=function(){},u([T({type:_.default,displayName:"\u5b50\u5f39\u7ba1\u7406\u5668"})],e.prototype,"bulletManager",void 0),u([T({type:O.default,displayName:"\u5efa\u7b51\u7ba1\u7406\u5668"})],e.prototype,"buildingMgr",void 0),u([T({type:R.default,displayName:"\u602a\u7269\u7ba1\u7406\u5668"})],e.prototype,"monsterManager",void 0),u([T({type:g.default,displayName:"\u6e32\u67d3\u7ba1\u7406\u5668"})],e.prototype,"rendererManager",void 0),u([T({type:w.default,displayName:"\u7279\u6548\u7ba1\u7406\u5668"})],e.prototype,"effectManager",void 0),u([T({type:S.default,displayName:"\u8840\u6761\u7ba1\u7406\u5668"})],e.prototype,"hpManager",void 0),u([T({type:cc.Prefab,displayName:"\u602a\u7269\u6b7b\u4ea1\u7279\u6548"})],e.prototype,"effectMonsterDie",void 0),u([T({type:cc.Prefab,displayName:"\u6b7b\u4ea1\u6c61\u6e0d"})],e.prototype,"effectDeadStain",void 0),u([T({type:cc.Node,displayName:"\u6b7b\u4ea1\u6c61\u6e0d\u8282\u70b9"})],e.prototype,"nodeDeadStain",void 0),u([F],e)}(cc.Component);a.default=D,cc._RF.pop(),cc._RF.pop()},{}],BetweenMove:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"588b4VC8GNO/4OA25V218OX","BetweenMove");var r=t,i=e,a=o;cc._RF.push(i,"588b4VC8GNO/4OA25V218OX","BetweenMove");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("TimeUtil"),d=cc._decorator,y=d.ccclass,h=d.property,m=d.menu,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offset=cc.Vec2.ZERO,e.time=1,e.startPos=cc.Vec3.ZERO,e.endPos=cc.Vec3.ZERO,e.tween=null,e.isInited=!1,e.isMoveTo=!1,e}return l(e,t),e.prototype.initPos=function(){this.isInited=!0,this.startPos=this.node.position,this.endPos=this.startPos.add(cc.v3(this.offset))},e.prototype.moveTo=function(t){return void 0===t&&(t=!1),s(this,void 0,void 0,function(){var e=this;return p(this,function(){return this.isInited?(this.isMoveTo=!0,t?(this.tween&&this.tween.stop(),this.tween=null,this.node.position=this.endPos,[2]):[2,new Promise(function(t){e.tween&&e.tween.stop(),e.tween=cc.tween(e.node).set({position:e.startPos}).to(e.time,{position:e.endPos}).call(function(){e.tween=null,t(null)}).start()})]):[2]})})},e.prototype.moveBack=function(t){return void 0===t&&(t=!1),s(this,void 0,void 0,function(){var e=this;return p(this,function(){return this.isInited?(this.isMoveTo=!1,t?(this.tween&&this.tween.stop(),this.tween=null,this.node.position=this.startPos,[2]):[2,new Promise(function(t){e.tween&&e.tween.stop(),e.tween=cc.tween(e.node).set({position:e.endPos}).to(e.time,{position:e.startPos}).call(function(){e.tween=null,t(null)}).start()})]):[2]})})},e.prototype.onLoad=function(){var t=this;f.default.delay(1).then(function(){t.initPos()})},e.prototype.start=function(){},u([h({displayName:"\u504f\u79fb\u91cf"})],e.prototype,"offset",void 0),u([h({displayName:"\u65f6\u95f4"})],e.prototype,"time",void 0),u([y,m("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f13\u52a8/\u4e24\u70b9\u95f4\u79fb\u52a8")],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],BoardCalculator:[function(t,e,o){"use strict";cc._RF.push(e,"138838/dyxOgp0cN9p7SJyu","BoardCalculator");var n=t,r=e,i=o;cc._RF.push(r,"138838/dyxOgp0cN9p7SJyu","BoardCalculator"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("GameDefine"),c=n("BoardData"),l=function(){function t(){}return t.calculateBuildingGridStatus=function(t,e,o){for(var n=[],r=[],i=!0,a=0;a<e.length;a++)for(var l=0;l<e[a].length;l++)if(0!=e[a][l]&&o.isVaild(t.x+l,t.y+a)){var u=o.getCell(t.x+l,t.y+a);u.cellType!==c.CellType.FOUNDATION&&u.cellType!==c.CellType.TOWER&&(i=!1)}for(a=0;a<e.length;a++)for(l=0;l<e[a].length;l++)0!=e[a][l]&&(i?n.push(cc.v2(t.x+l,t.y+a)):r.push(cc.v2(t.x+l,t.y+a)));return{enableList:n,disableList:r}},t.calculateFoundationGridStatus=function(t,e,o){for(var n=[],r=[],i=a.FOUNDATION_CONFIGS[e].map,l=0;l<i.length;l++)for(var u=0;u<i[l].length;u++)0!=i[l][u]&&o.isVaild(t.x+u,t.y+l)&&(o.getCell(t.x+u,t.y+l).cellType===c.CellType.EMPTY?n.push(cc.v2(t.x+u,t.y+l)):r.push(cc.v2(t.x+u,t.y+l)));return{enableList:n,disableList:r}},t}();i.default=l,cc._RF.pop(),cc._RF.pop()},{}],BoardData:[function(t,e,o){"use strict";cc._RF.push(e,"44533iuEeZN/7d9XabZIx9o","BoardData");var n=t,r=e,i=o;cc._RF.push(r,"44533iuEeZN/7d9XabZIx9o","BoardData");var a=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},c=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.CellType=void 0;var l,u=n("AssetBundleHelper"),s=n("LogUtil"),p=n("GameGlobaled"),f=n("GameDefine");(function(t){t[t.EMPTY=0]="EMPTY",t[t.OBSTACLE=1]="OBSTACLE",t[t.FOUNDATION=2]="FOUNDATION",t[t.TOWER=3]="TOWER",t[t.BASE=4]="BASE",t[t.GRASS=5]="GRASS",t[t.SPAWN=6]="SPAWN"})(l=i.CellType||(i.CellType={}));var d=function(){function t(){this.data=[],this.basePos=null,this.spawnPoints=[]}return t.prototype.initData=function(t){return a(this,void 0,void 0,function(){var e,o,n,r,i,a,f,d,y,h;return c(this,function(c){switch(c.label){case 0:for(this.basePos=null,this.spawnPoints=[],i=0;i<p.default.boardSize.width;i++)for(this.data[i]=[],e=0;e<p.default.boardSize.height;e++)this.data[i][e]={cellType:l.EMPTY};return[4,u.default.getAsset(cc.TextAsset,t)];case 1:if(!(o=c.sent()))return s.default.error("LevelData "+t+" not found"),[2];for(n=o.text.split("#"),r=[l.EMPTY,l.BASE,l.FOUNDATION,l.OBSTACLE,l.GRASS,l.SPAWN],i=0;i<n.length&&(a=n[i].split(",").map(Number),f=a[0],d=a[1],y=a[2]);i++)(h=r[y])===l.BASE?this.basePos=cc.v2(f,d):h===l.SPAWN&&this.spawnPoints.push(cc.v2(f,d)),this.data[f][d]={cellType:h};return this.spawnPoints.sort(function(t,e){return t.y===e.y?t.x-e.x:e.y-t.y}),this.basePos||s.default.error("LevelData "+t+" basePos is null"),[2]}})})},t.prototype.clone=function(){for(var e=new t,o=0;o<p.default.boardSize.width;o++){e.data[o]=[];for(var n=0;n<p.default.boardSize.height;n++)e.data[o][n]={cellType:this.data[o][n].cellType,uid:this.data[o][n].uid,id:this.data[o][n].id,level:this.data[o][n].level}}return e.basePos=this.basePos,e},t.prototype.toJson=function(){return JSON.stringify(this.data)},t.prototype.setByJson=function(t){this.data=JSON.parse(t)},t.prototype.getCell=function(t,e){return this.isVaild(t,e)?this.data[t][e]:null},t.prototype.setCell=function(t,e,o){this.data[t][e]={cellType:o}},t.prototype.setBuilding=function(t,e,o,n,r){this.data[t][e]={cellType:l.TOWER,uid:o,id:n,level:r}},t.prototype.isVaild=function(t,e){return!(t<0||t>=p.default.boardSize.width||e<0||e>=p.default.boardSize.height)},t.prototype.tryFoundationPut=function(t,e,o){for(var n=f.FOUNDATION_CONFIGS[o].map,r=0;r<n.length;r++)for(var i=0;i<n[r].length;i++)if(0!=n[r][i]){if(!this.isVaild(t+i,e+r))return!1;if(this.getCell(t+i,e+r).cellType!==l.EMPTY)return!1}return!0},t.prototype.foundationPut=function(t,e,o){for(var n=f.FOUNDATION_CONFIGS[o].map,r=0;r<n.length;r++)for(var i=0;i<n[r].length;i++)0!=n[r][i]&&this.setCell(t+i,e+r,l.FOUNDATION)},t.prototype.tryBuildingLevelup=function(t,e,o,n,r){if(r==p.default.buildingMaxLevel)return-1;for(var i=f.TOWER_CONFIGS[n],a=-1,c=0;c<i.length;c++)for(var u=0;u<i[c].length;u++)if(0!=i[c][u]){if(!this.isVaild(t+u,e+c))return-1;var s=this.getCell(t+u,e+c);if(-1==a&&(a=s.uid),s.cellType!==l.TOWER||s.id!==n||s.level!==r||s.uid!==a)return-1;if(o==s.uid)return-1}return a},t.prototype.tryBuildingMove=function(t,e,o,n){for(var r=f.TOWER_CONFIGS[n],i=0;i<r.length;i++)for(var a=0;a<r[i].length;a++)if(0!=r[i][a]){if(!this.isVaild(t+a,e+i))return!1;var c=this.getCell(t+a,e+i);if(c.cellType===l.TOWER){if(o!==c.uid)return!1}else if(c.cellType!==l.FOUNDATION)return!1}return!0},t.prototype.tryBuildingPut=function(t,e,o){for(var n=f.TOWER_CONFIGS[o],r=0;r<n.length;r++)for(var i=0;i<n[r].length;i++)if(0!=n[r][i]){if(!this.isVaild(t+i,e+r))return!1;var a=this.getCell(t+i,e+r);if(a.cellType===l.TOWER){if(a.id===f.TowerId.BASE)return!1}else if(a.cellType!==l.FOUNDATION)return!1}return!0},t.prototype.buildingPut=function(t,e,o,n,r){for(var i=f.TOWER_CONFIGS[n],a={},c=0;c<i.length;c++)for(var u=0;u<i[c].length;u++)if(0!=i[c][u]){var s=this.getCell(t+u,e+c);s.cellType===l.TOWER&&s.uid!==o&&(a[s.uid]={buildingType:s.id,buildingLevel:s.level}),this.setBuilding(t+u,e+c,o,n,r)}return a},t.prototype.buildingRemove=function(t){for(var e=null,o=-1,n=0;n<this.data.length;n++)for(var r=0;r<this.data[n].length;r++)this.data[n][r].uid==t&&(e||(e=this.data[n][r].id,o=this.data[n][r].level),this.setCell(n,r,l.FOUNDATION));return{buildingType:e,buildingLevel:o}},t}();i.default=d,cc._RF.pop(),cc._RF.pop()},{}],BoardRendererItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"50024nO435EvogbuTUSP2Au","BoardRendererItem");var r=t,i=e,a=o;cc._RF.push(i,"50024nO435EvogbuTUSP2Au","BoardRendererItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s,p=r("GameGlobaled"),f=cc._decorator,d=f.ccclass;f.property,function(t){t[t.U=1]="U",t[t.R=2]="R",t[t.D=4]="D",t[t.L=8]="L",t[t.UR=16]="UR",t[t.DR=32]="DR",t[t.DL=64]="DL",t[t.UL=128]="UL"}(s||(s={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=null,e.top=null,e.right=null,e.bottom=null,e.left=null,e.parent=null,e.x=0,e.y=0,e}return l(e,t),e.prototype.init=function(t,e,o,n,r){this.parent=t,this.x=e,this.y=o;var i=cc.v2(p.default.boardStartPos.x+(e+.5)*p.default.gridSize,p.default.boardStartPos.y+(o+.5)*p.default.gridSize);return this.center=(new cc.Node).addComponent(cc.Sprite),this.center.spriteFrame=n,this.center.node.setPosition(i),this.center.node.parent=this.parent,this.top=(new cc.Node).addComponent(cc.Sprite),this.top.spriteFrame=r,this.top.node.setPosition(i.x,i.y+p.default.gridSize/2-5),this.top.node.parent=this.parent,this.top.node.angle=90,this.right=(new cc.Node).addComponent(cc.Sprite),this.right.spriteFrame=r,this.right.node.setPosition(i.x+p.default.gridSize/2-5,i.y),this.right.node.parent=this.parent,this.right.node.angle=0,this.bottom=(new cc.Node).addComponent(cc.Sprite),this.bottom.spriteFrame=r,this.bottom.node.setPosition(i.x,i.y-p.default.gridSize/2+5),this.bottom.node.parent=this.parent,this.bottom.node.angle=90,this.bottom.node.scaleX=-1,this.left=(new cc.Node).addComponent(cc.Sprite),this.left.spriteFrame=r,this.left.node.setPosition(i.x-p.default.gridSize/2+5,i.y),this.left.node.parent=this.parent,this.left.node.angle=0,this.left.node.scaleX=-1,this.hide(),this},e.prototype.hide=function(){this.center.node.active=!1,this.top.node.active=!1,this.right.node.active=!1,this.bottom.node.active=!1,this.left.node.active=!1},e.prototype.setDir=function(t){void 0===t&&(t=0),this.top.node.active=(t&s.U)>0,this.right.node.active=(t&s.R)>0,this.bottom.node.active=(t&s.D)>0,this.left.node.active=(t&s.L)>0,this.center.node.active=!1},e.prototype.setCenter=function(){this.center.node.active=!0,this.top.node.active=!1,this.right.node.active=!1,this.bottom.node.active=!1,this.left.node.active=!1},e.prototype.start=function(){},u([d],e)}(cc.Component);a.default=y,cc._RF.pop(),cc._RF.pop()},{}],BoardRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"71b73RrooBPhYYXF8p8V2L1","BoardRenderer");var r=t,i=e,a=o;cc._RF.push(i,"71b73RrooBPhYYXF8p8V2L1","BoardRenderer");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0}),a.GroundData=void 0;var f,d=r("Factory"),y=r("MathUtil"),h=r("GameGlobaled"),m=r("BoardData"),b=r("ChessRenderer"),v=r("RendererManager"),g=cc._decorator,_=g.ccclass,w=g.property;(function(t){t[t.U=1]="U",t[t.R=2]="R",t[t.D=4]="D",t[t.L=8]="L",t[t.UR=16]="UR",t[t.DR=32]="DR",t[t.DL=64]="DL",t[t.UL=128]="UL"})(f||(f={}));var S=function(){function t(){this.node=null,this.center=null,this.UR=null,this.DR=null,this.DL=null,this.UL=null,this.parent=null,this.x=0,this.y=0,this.sfBoxList=null,this.sfAngleList=null,this.centerPos=null,this.size=0}return t.prototype.checkNode=function(){this.node||(this.node=new cc.Node(this.x+"_"+this.y),this.node.parent=this.parent,this.node.setPosition(this.centerPos))},t.prototype.checkCenter=function(){this.center||(this.checkNode(),this.center=new cc.Node("Center").addComponent(cc.Sprite),this.center.spriteFrame=y.default.randomArray(this.sfBoxList),this.center.node.parent=this.node)},t.prototype.checkDR=function(){this.DR||(this.checkNode(),this.DR=new cc.Node("DR").addComponent(cc.Sprite),this.DR.spriteFrame=this.sfAngleList[0],this.DR.node.setPosition(this.size,-this.size),this.DR.node.parent=this.node)},t.prototype.checkDL=function(){this.DL||(this.checkNode(),this.DL=new cc.Node("DL").addComponent(cc.Sprite),this.DL.spriteFrame=this.sfAngleList[0],this.DL.node.setPosition(-this.size,-this.size),this.DL.node.parent=this.node)},t.prototype.checkUL=function(){this.UL||(this.checkNode(),this.UL=new cc.Node("UL").addComponent(cc.Sprite),this.UL.spriteFrame=this.sfAngleList[0],this.UL.node.setPosition(-this.size,this.size),this.UL.node.parent=this.node)},t.prototype.checkUR=function(){this.UR||(this.checkNode(),this.UR=new cc.Node("UR").addComponent(cc.Sprite),this.UR.spriteFrame=this.sfAngleList[0],this.UR.node.setPosition(this.size,this.size),this.UR.node.parent=this.node)},t.prototype.init=function(t,e,o,n,r){return this.parent=t,this.x=e,this.y=o,this.sfBoxList=n,this.sfAngleList=r,this.centerPos=cc.v2(h.default.boardStartPos.x+(e+.5)*h.default.gridSize,h.default.boardStartPos.y+(o+.5)*h.default.gridSize),this.size=h.default.gridSize/4,this.hide(),this},t.prototype.hide=function(){this.center&&(this.center.node.active=!1),this.UL&&(this.UL.node.active=!1),this.UR&&(this.UR.node.active=!1),this.DL&&(this.DL.node.active=!1),this.DR&&(this.DR.node.active=!1)},t.prototype.setDir=function(t){void 0===t&&(t=0),this.hide(),0!==t&&((t&f.U||t&f.R||t&f.UR)&&(this.checkUR(),this.UR.node.active=!0,t&f.U&&t&f.R?(this.UR.spriteFrame=this.sfAngleList[2],this.UR.node.angle=90):t&f.U?(this.UR.spriteFrame=this.sfAngleList[0],this.UR.node.angle=90):t&f.R?(this.UR.spriteFrame=this.sfAngleList[0],this.UR.node.angle=0):(this.UR.spriteFrame=this.sfAngleList[1],this.UR.node.angle=90)),(t&f.D||t&f.R||t&f.DR)&&(this.checkDR(),this.DR.node.active=!0,t&f.D&&t&f.R?(this.DR.spriteFrame=this.sfAngleList[2],this.DR.node.angle=0):t&f.D?(this.DR.spriteFrame=this.sfAngleList[0],this.DR.node.angle=-90):t&f.R?(this.DR.spriteFrame=this.sfAngleList[0],this.DR.node.angle=0):(this.DR.spriteFrame=this.sfAngleList[1],this.DR.node.angle=0)),(t&f.U||t&f.L||t&f.UL)&&(this.checkUL(),this.UL.node.active=!0,t&f.U&&t&f.L?(this.UL.spriteFrame=this.sfAngleList[2],this.UL.node.angle=180):t&f.U?(this.UL.spriteFrame=this.sfAngleList[0],this.UL.node.angle=90):t&f.L?(this.UL.spriteFrame=this.sfAngleList[0],this.UL.node.angle=180):(this.UL.spriteFrame=this.sfAngleList[1],this.UL.node.angle=180)),(t&f.D||t&f.L||t&f.DL)&&(this.checkDL(),this.DL.node.active=!0,t&f.D&&t&f.L?(this.DL.spriteFrame=this.sfAngleList[2],this.DL.node.angle=-90):t&f.D?(this.DL.spriteFrame=this.sfAngleList[0],this.DL.node.angle=-90):t&f.L?(this.DL.spriteFrame=this.sfAngleList[0],this.DL.node.angle=180):(this.DL.spriteFrame=this.sfAngleList[1],this.DL.node.angle=-90)))},t.prototype.setCenter=function(){this.hide(),this.checkCenter(),this.center.node.active=!0},t}(),R=function(){function t(){this.spriteFrame=null,this.weight=1,this.zIndex=0}return u([w({type:cc.SpriteFrame,displayName:"\u8d44\u6e90"})],t.prototype,"spriteFrame",void 0),u([w({displayName:"\u6743\u91cd",step:1})],t.prototype,"weight",void 0),u([w({displayName:"\u5c42\u7ea7",step:1})],t.prototype,"zIndex",void 0),u([_("GroundData")],t)}();a.GroundData=R;var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgColor=cc.Color.WHITE,e.sfTipNromal=null,e.sfTipEnable=null,e.sfTipDisable=null,e.nodeFoundation=null,e.nodeGround=null,e.prefabSpawn=null,e.prefabObstacle=null,e.prefabGrass=null,e.groundDataList=[],e.sfAngleList=[],e.sfBox=[],e.sfGround=null,e.sfBg=[],e.battleStage=null,e.graphics=null,e.boardData=null,e.boardItems=null,e.tips=[],e.rendererList=[],e.nodeGroundList=[],e.pathLengthLabels=new Map,e.nodeTip=null,e}return l(e,t),e.prototype.setNodeTip=function(t){this.nodeTip=t},Object.defineProperty(e.prototype,"sfTop",{get:function(){return this.sfBg[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sfBottom",{get:function(){return this.sfBg[1]},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){if(this.boardData=t,this.battleStage=e,this.node.zIndex=10,null==this.boardItems){this.boardItems=[],this.rendererList=[];for(var o=-1;o<h.default.boardSize.width+1;o++){this.boardItems[o]=[],this.rendererList[o]=[];for(var n=-1;n<h.default.boardSize.height+1;n++)this.boardItems[o][n]=(new S).init(this.nodeFoundation,o,n,this.sfBox,this.sfAngleList),this.rendererList[o][n]=[]}for(o=0;o<h.default.boardSize.width;o++)for(this.tips.push([]),n=0;n<h.default.boardSize.height;n++)this.tips[o][n]=this.createEmpty(o,n),this.tips[o][n].node.active=!1}this.resetGroundAll();for(var r=[],i=0;i<h.default.boardSize.width;i++)for(var a=0;a<h.default.boardSize.height;a++){var c=this.boardData.getCell(i,a);c.cellType===m.CellType.OBSTACLE?r.push(this.createObstacle(i,a)):c.cellType===m.CellType.GRASS?r.push(this.createGrass(i,a)):c.cellType===m.CellType.SPAWN&&r.push(this.createSpawn(i,a))}Promise.all(r).then(function(){v.default.instance.logicUpdate(0)})},e.prototype.createEmpty=function(t,e){var o=new cc.Node;o.parent=this.nodeTip,o.zIndex=10,o.setPosition(h.default.boardStartPos.x+(t+.5)*h.default.gridSize,h.default.boardStartPos.y+(e+.5)*h.default.gridSize);var n=o.addComponent(cc.Sprite);return n.spriteFrame=this.sfTipNromal,o.group=this.node.group,n},e.prototype.createObstacle=function(t,e){return s(this,void 0,void 0,function(){var o,n;return p(this,function(r){switch(r.label){case 0:return[4,d.default.instance.create(this.prefabObstacle)];case 1:return(o=r.sent()).parent=this.battleStage,o.zIndex=20,n=o.getComponent(b.default),o.setPosition(h.default.boardStartPos.x+(t+.5)*h.default.gridSize,h.default.boardStartPos.y+(e+.5)*h.default.gridSize),o.scale=h.default.gridSize/n.node.width,this.rendererList[t][e].push(n),[2,o]}})})},e.prototype.createSpawn=function(t,e){return s(this,void 0,void 0,function(){var o,n;return p(this,function(r){switch(r.label){case 0:return[4,d.default.instance.create(this.prefabSpawn)];case 1:return(o=r.sent()).parent=this.battleStage,o.setPosition(h.default.boardStartPos.x+(t+.5)*h.default.gridSize,h.default.boardStartPos.y+(e+.5)*h.default.gridSize),n=o.getComponent(b.default),v.default.instance.registerRenderer(n),this.rendererList[t][e].push(n),[2,o]}})})},e.prototype.createGrass=function(t,e){return s(this,void 0,void 0,function(){var o,n,r,i,a;return p(this,function(c){switch(c.label){case 0:o=cc.v2(h.default.boardStartPos.x+(t+.5)*h.default.gridSize,h.default.boardStartPos.y+(e+.5)*h.default.gridSize-10),n=[cc.v2(o.x-25,o.y+25),cc.v2(o.x+25,o.y+25),cc.v2(o.x,o.y),cc.v2(o.x-25,o.y-25),cc.v2(o.x+25,o.y-25)],r=0,c.label=1;case 1:return r<n.length?[4,d.default.instance.create(this.prefabGrass)]:[3,4];case 2:(i=c.sent()).parent=v.default.instance.nodeStage,a=i.getComponent(b.default),i.setPosition(n[r]),a.init(),i.scale=1.2*h.default.boardScale,this.rendererList[t][e].push(a),v.default.instance.registerRenderer(a),c.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.createGround=function(t,e,o,n){var r=new cc.Node;return r.name=t+"_"+e,r.parent=this.nodeGround,r.zIndex=o,r.setPosition(h.default.boardStartPos.x+(t+.5)*h.default.gridSize,h.default.boardStartPos.y+(e+.5)*h.default.gridSize),r.addComponent(cc.Sprite).spriteFrame=n,r},e.prototype.resetGroundAll=function(){this.cleanupGround();for(var t=0,e=0;e<this.groundDataList.length;e++)t+=this.groundDataList[e].weight;for(h.default.boardScale,this.node.getBoundingBoxToWorld(),e=-0;e<h.default.boardSize.width+0;e++)for(var o=-0;o<h.default.boardSize.height+0;o++)for(var n=y.default.random()*t,r=0;r<this.groundDataList.length;r++)if((n-=this.groundDataList[r].weight)<=0){var i=this.groundDataList[r];this.nodeGroundList.push(this.createGround(e,o,i.zIndex,i.spriteFrame));break}},e.prototype.cleanup=function(){this.cleanupObstacleAndGrass(),this.cleanupGround()},e.prototype.cleanupObstacleAndGrass=function(){for(var t=0;t<this.rendererList.length;t++)for(var e=0;e<this.rendererList[t].length;e++){for(var o=0;o<this.rendererList[t][e].length;o++){var n=this.rendererList[t][e][o];v.default.instance.unregisterRenderer(n),d.default.instance.remove(n.node)}this.rendererList[t][e]=[]}},e.prototype.cleanupGround=function(){for(var t=0;t<this.nodeGroundList.length;t++)this.nodeGroundList[t].destroy();this.nodeGroundList=[]},e.prototype.updatePathLengthLabels=function(t){var e=this;this.pathLengthLabels.forEach(function(t){return t.destroy()}),this.pathLengthLabels.clear(),t.forEach(function(t){if(0!==t.length){var o=t[0],n=o.x+","+o.y;if(!e.pathLengthLabels.has(n)){var r=e.createPathLengthLabel();r.parent=e.battleStage,r.setPosition(h.default.boardStartPos.x+(o.x+.5)*h.default.gridSize,h.default.boardStartPos.y+(o.y+.5)*h.default.gridSize+50),r.getComponent(cc.Label).string=""+t.length,e.pathLengthLabels.set(n,r)}}})},e.prototype.createPathLengthLabel=function(){var t=new cc.Node("PathLengthLabel"),e=t.addComponent(cc.Label);e.fontSize=20,e.lineHeight=20,e.horizontalAlign=cc.Label.HorizontalAlign.CENTER,e.verticalAlign=cc.Label.VerticalAlign.CENTER,t.color=cc.Color.WHITE;var o=t.addComponent(cc.LabelOutline);return o.color=cc.Color.BLACK,o.width=2,t},e.prototype.draw=function(){for(var t=this,e=function(e,o){var n=t.boardData.getCell(e,o);return!!n&&(n.cellType===m.CellType.FOUNDATION||n.cellType===m.CellType.TOWER)},o=-1;o<h.default.boardSize.width+1;o++)for(var n=-1;n<h.default.boardSize.height+1;n++){if(e(o,n))this.boardItems[o][n].setCenter();else{var r=0;e(o,n+1)&&(r|=f.U),e(o+1,n)&&(r|=f.R),e(o,n-1)&&(r|=f.D),e(o-1,n)&&(r|=f.L),e(o+1,n+1)&&(r|=f.UR),e(o+1,n-1)&&(r|=f.DR),e(o-1,n-1)&&(r|=f.DL),e(o-1,n+1)&&(r|=f.UL),this.boardItems[o][n].setDir(r)}var i=this.boardData.getCell(o,n);if(i&&i.cellType===m.CellType.EMPTY){for(var a=0;a<this.rendererList[o][n].length;a++){var c=this.rendererList[o][n][a];v.default.instance.unregisterRenderer(c),d.default.instance.remove(c.node)}this.rendererList[o][n]=[]}}},e.prototype.showTip=function(t,e,o,n){for(var r=t,i=function(t){for(var e=function(e){var o=!!n&&n.some(function(o){return o.x===t&&o.y===e}),i=a.boardData.getCell(t,e);a.tips[t][e].node.active=o||i.cellType===r,a.tips[t][e].node.color=cc.Color.WHITE,a.tips[t][e].spriteFrame=a.sfTipNromal},o=0;o<h.default.boardSize.height;o++)e(o)},a=this,c=0;c<h.default.boardSize.width;c++)i(c);for(var l=0;l<e.length;l++)this.tips[e[l].x]&&this.tips[e[l].x][e[l].y]&&(this.tips[e[l].x][e[l].y].spriteFrame=this.sfTipEnable,this.tips[e[l].x][e[l].y].node.active=!0);for(l=0;l<o.length;l++)this.tips[o[l].x]&&this.tips[o[l].x][o[l].y]&&(this.tips[o[l].x][o[l].y].spriteFrame=this.sfTipDisable,this.tips[o[l].x][o[l].y].node.active=!0)},e.prototype.hideTip=function(){for(var t=0;t<h.default.boardSize.width;t++)for(var e=0;e<h.default.boardSize.height;e++)this.tips[t][e].node.active=!1},e.prototype.getCellColor=function(t){switch(t){case m.CellType.EMPTY:return new cc.Color(0,0,0,0);case m.CellType.OBSTACLE:return new cc.Color(100,100,100,255);case m.CellType.FOUNDATION:return new cc.Color(255,220,150,255);case m.CellType.TOWER:return new cc.Color(200,150,150,255);case m.CellType.BASE:return new cc.Color(150,200,150,255);case m.CellType.GRASS:return new cc.Color(150,255,150,255);case m.CellType.SPAWN:return new cc.Color(255,50,50,255);default:return new cc.Color(255,255,255,255)}},e.prototype.drawGrid=function(){this.graphics.lineWidth=4,this.graphics.strokeColor=new cc.Color(150,150,150,255);for(var t=0;t<h.default.boardSize.width;t++)for(var e=0;e<h.default.boardSize.height;e++){var o=this.boardData.getCell(t,e).cellType;if([m.CellType.BASE].includes(o)){this.graphics.fillColor=this.getCellColor(o);var n=h.default.boardStartPos.x+t*h.default.gridSize,r=h.default.boardStartPos.y+e*h.default.gridSize;this.graphics.rect(n,r,h.default.gridSize,h.default.gridSize),this.graphics.fill(),this.graphics.stroke()}}},e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){this.pathLengthLabels.forEach(function(t){return t.destroy()}),this.pathLengthLabels.clear()},e.prototype.start=function(){},e.prototype.update=function(){},u([w({displayName:"\u80cc\u666f\u989c\u8272"})],e.prototype,"bgColor",void 0),u([w({type:cc.SpriteFrame,displayName:"\u63d0\u793a\u56fe"})],e.prototype,"sfTipNromal",void 0),u([w({type:cc.SpriteFrame,displayName:"\u63d0\u793a\u56fe - \u5141\u8bb8"})],e.prototype,"sfTipEnable",void 0),u([w({type:cc.SpriteFrame,displayName:"\u63d0\u793a\u56fe - \u4e0d\u5141\u8bb8"})],e.prototype,"sfTipDisable",void 0),u([w({type:cc.Node,displayName:"\u5730\u57fa\u8282\u70b9"})],e.prototype,"nodeFoundation",void 0),u([w({type:cc.Node,displayName:"\u5730\u9762\u8282\u70b9"})],e.prototype,"nodeGround",void 0),u([w({type:cc.Prefab,displayName:"\u51fa\u751f\u70b9\u9884\u5236\u4f53"})],e.prototype,"prefabSpawn",void 0),u([w({type:cc.Prefab,displayName:"\u969c\u788d\u7269\u9884\u5236\u4f53"})],e.prototype,"prefabObstacle",void 0),u([w({type:cc.Prefab,displayName:"\u8349\u9884\u5236\u4f53"})],e.prototype,"prefabGrass",void 0),u([w({type:R,displayName:"\u5730\u677f\u8d44\u6e90"})],e.prototype,"groundDataList",void 0),u([w({type:cc.SpriteFrame,displayName:"\u89d2"})],e.prototype,"sfAngleList",void 0),u([w({type:cc.SpriteFrame,displayName:"\u5757"})],e.prototype,"sfBox",void 0),u([w({type:cc.SpriteFrame,displayName:"\u5730\u57fa"})],e.prototype,"sfGround",void 0),u([w({type:cc.SpriteFrame,displayName:"\u80cc\u666f"})],e.prototype,"sfBg",void 0),u([w({type:cc.Node,displayName:"\u63d0\u793a\u8282\u70b9"})],e.prototype,"nodeTip",void 0),u([_],e)}(cc.Component);a.default=O,cc._RF.pop(),cc._RF.pop()},{}],BossMonster:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"8eb11wnmLFCCYRgsJ5BDiw6","BossMonster");var r=t,i=e,a=o;cc._RF.push(i,"8eb11wnmLFCCYRgsJ5BDiw6","BossMonster");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Monster"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rageMode=!1,e.rageTimer=0,e.RAGE_DURATION=3,e}return l(e,t),e.prototype.logicUpdate=function(e){t.prototype.logicUpdate.call(this,e),this.rageMode&&(this.rageTimer+=e,this.rageTimer>=this.RAGE_DURATION&&this.die())},e.prototype.onAttack=function(){},u([f],e)}(s.default));a.default=d,cc._RF.pop(),cc._RF.pop()},{}],BossTip:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"8365bwPrZJPT7c68QIPDkBG","BossTip");var r=e,i=o;cc._RF.push(r,"8365bwPrZJPT7c68QIPDkBG","BossTip");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.word=null,e.outline=null,e.tweenBg=null,e.tweenWord=null,e}return c(e,t),e.prototype.show=function(t){var e=this;void 0===t&&(t=2),this.node.active=!0,this.outline.active=!1,this.tweenBg&&this.tweenBg.stop(),this.tweenWord&&this.tweenWord.stop(),this.tweenBg=cc.tween(this.bg).set({opacity:0,scale:1.1}).to(.5,{opacity:255,scale:1},{easing:cc.easing.quartIn}).delay(t).to(.1,{opacity:0}).call(function(){e.tweenBg=null}).start(),this.tweenWord=cc.tween(this.word).set({opacity:0,scale:2}).delay(.3).to(.2,{opacity:255,scale:1},{easing:cc.easing.backInOut}).call(function(){e.outline.active=!0}).delay(t).to(.1,{opacity:0}).call(function(){e.tweenWord=null,e.node.active=!1}).start()},e.prototype.start=function(){},l([p({type:cc.Node,displayName:"\u80cc\u666f"})],e.prototype,"bg",void 0),l([p({type:cc.Node,displayName:"\u6587\u5b57"})],e.prototype,"word",void 0),l([p({type:cc.Node,displayName:"\u8fb9\u6846"})],e.prototype,"outline",void 0),l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],Boss:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"09a00amCslFurtEcrTkw65/","Boss");var r=t,i=e,a=o;cc._RF.push(i,"09a00amCslFurtEcrTkw65/","Boss");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("EventHelper"),f=r("ChessRenderer"),d=r("Monster"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onLoad=function(){var t=this;this.renderer.listenAnimationComplete(f.AnimationNames.Die,function(){p.default.emit(s.default.MonsterDead,t)}),this.renderer.listenAnimationComplete(f.AnimationNames.Attack,function(){t.renderer.setAnimation(f.AnimationNames.Stand)}),this.renderer.listenAnimationEvent(f.AnimationEvents.Attack,this.onAttack.bind(this)),this.collider=this.node.getComponent(cc.BoxCollider)},u([h],e)}(d.default));a.default=m,cc._RF.pop(),cc._RF.pop()},{}],BottomBtn:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"efd9aaEbMdPM5o1hxBSyovg","BottomBtn");var r=t,i=e,a=o;cc._RF.push(i,"efd9aaEbMdPM5o1hxBSyovg","BottomBtn");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.BottomBtnType=void 0;var s,p=r("BattleFrame"),f=r("HeroFrame"),d=r("ShopFrame"),y=r("TowerFrame"),h=cc._decorator,m=h.ccclass,b=h.property;(function(t){t[t.Shop=0]="Shop",t[t.Hero=1]="Hero",t[t.Battle=2]="Battle",t[t.Card=3]="Card",t[t.Gift=4]="Gift"})(s=a.BottomBtnType||(a.BottomBtnType={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=s.Battle,e.btn=null,e.selectedNode=null,e.defaultNode=null,e.redNode=null,e}return l(e,t),Object.defineProperty(e.prototype,"frame",{get:function(){switch(this.type){case s.Battle:return p.default;case s.Card:return y.default;case s.Hero:return f.default;case s.Shop:return d.default;default:return null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnType",{get:function(){return this.type},enumerable:!1,configurable:!0}),e.prototype.setSelect=function(t){this.selectedNode.active=t,this.defaultNode.active=!t,this.btn.interactable=!t},e.prototype.setRedActive=function(t){this.redNode.active=t},e.prototype.onLoad=function(){},e.prototype.start=function(){},u([b({type:cc.Enum(s)})],e.prototype,"type",void 0),u([b({type:cc.Button,displayName:"\u6309\u94ae"})],e.prototype,"btn",void 0),u([b({type:cc.Node,displayName:"\u9009\u4e2d\u8282\u70b9"})],e.prototype,"selectedNode",void 0),u([b({type:cc.Node,displayName:"\u9ed8\u8ba4\u8282\u70b9"})],e.prototype,"defaultNode",void 0),u([b({type:cc.Node,displayName:"\u7ea2\u70b9\u8282\u70b9"})],e.prototype,"redNode",void 0),u([m],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],BoxInfoFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"afa83c8qcJIB4Agk0cPfAIn","BoxInfoFrame");var r=t,i=e,a=o;cc._RF.push(i,"afa83c8qcJIB4Agk0cPfAIn","BoxInfoFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("FrameHelper"),d=r("StaticDBHelper"),y=r("sdbBoxLv"),h=cc._decorator,m=h.ccclass,b=h.menu,v=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelLv=null,e.labelGold=null,e.labelFragment=null,e.boxLv=1,e.maxBoxLv=0,e}return l(e,t),e.prototype.onClickClose=function(){this.hideFrame()},e.prototype.onClickLeft=function(){this.boxLv--,this.refresh()},e.prototype.onClickRight=function(){this.boxLv++,this.refresh()},e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){return p(this,function(){return this.boxLv=t,this.refresh(),[2,!0]})})},e.prototype.refresh=function(){this.boxLv<1?this.boxLv=1:this.boxLv>this.maxBoxLv&&(this.boxLv=this.maxBoxLv);var t=d.default.filterData(y.default,{lv:this.boxLv})[0];this.labelLv.string="\u7b49\u7ea7"+t.lv,this.labelGold.string=t.coinCount.toString(),this.labelFragment.string=t.comCount.toString()},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:return e.sent(),this.maxBoxLv=Object.keys(d.default.getTable(y.default)).length,[2]}})})},e.prototype.start=function(){},e.frameInfo={name:"BoxInfoFrame",type:f.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/ShopFrame/BoxInfoFrame",zIndex:9},u([v({type:cc.Label,displayName:"\u5b9d\u7bb1\u7b49\u7ea7"})],e.prototype,"labelLv",void 0),u([v({type:cc.Label,displayName:"\u5956\u52b1\u91d1\u5e01\u6570\u91cf"})],e.prototype,"labelGold",void 0),u([v({type:cc.Label,displayName:"\u5956\u52b1\u788e\u7247\u6570\u91cf"})],e.prototype,"labelFragment",void 0),u([m,b("\u754c\u9762/BoxInfoFrame \u5b9d\u7bb1\u4fe1\u606f\u754c\u9762")],e)}(f.FrameBase);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],BoxItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2e9aezqLGNMHYzvqFVQiFHS","BoxItem");var r=t,i=e,a=o;cc._RF.push(i,"2e9aezqLGNMHYzvqFVQiFHS","BoxItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ImageLoader"),p=r("EventConfig"),f=r("sdbStage"),d=r("EventHelper"),y=r("FrameHelper"),h=r("LangHelper"),m=r("RunDataHelper"),b=r("StaticDBHelper"),v=r("StageData"),g=r("GetItemFrame"),_=r("BoxTipNode"),w=cc._decorator,S=w.ccclass,R=w.property,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redNode=null,e.levelLabel=null,e.iconLoader=null,e.isRed=!1,e.isGot=!1,e.section=0,e.index=0,e.sectionData=null,e.rewardData=null,e}return l(e,t),e.prototype.init=function(t,e){this.section=t,this.index=e,this.sectionData=b.default.getData(f.default,t),this.rewardData=this.sectionData["reward"+e],this.refresh()},e.prototype.refresh=function(){this.isRed=m.DataHelper.getData(v.default).isPassIndex(this.section,this.rewardData[0]),this.isGot=m.DataHelper.getData(v.default).isGetReward(this.section,this.index),this.redNode.active=this.isRed&&!this.isGot,this.iconLoader.select(this.isGot?1:0),this.levelLabel.string=h.default.formatStr("ui.42",{lv:this.rewardData[0]}),this.node.stopAllActions(),this.node.angle=0,this.isRed&&!this.isGot&&this.startShake()},e.prototype.startShake=function(){this.shakeTween(8).start()},e.prototype.shakeTween=function(t){var e=this;return t<2?cc.tween(this.node).call(function(){e.scheduleOnce(function(){e.startShake()},1)}):cc.tween(this.node).sequence(cc.tween().by(.1,{angle:t},{easing:cc.easing.quadInOut}).by(.1,{angle:-2*t},{easing:cc.easing.quadInOut}).by(.1,{angle:t},{easing:cc.easing.quadInOut}).to(.1,{angle:0},{easing:cc.easing.quadInOut}),cc.tween().delay(1).call(function(){e.shakeTween(.9*t).start()}))},e.prototype.onCickBox=function(){if(this.isRed&&!this.isGot){var t=m.DataHelper.getData(v.default).GetReward(this.section,this.index);t.length>0&&(y.default.showFrame(g.default,g.default.GetType.item,t),this.refresh(),d.default.emit(p.default.refreshMainRed,"hero"),d.default.emit(p.default.refreshMainRed,"battle"))}else if(!this.isRed&&!this.isGot){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0));d.default.emit(_.default.SHOW_BOXTIP_EVENT,this.section,this.index,e)}},e.prototype.start=function(){},u([R({type:cc.Node,displayName:"\u7ea2\u70b9"})],e.prototype,"redNode",void 0),u([R({type:cc.Label,displayName:"\u5956\u52b1\u5173\u5361"})],e.prototype,"levelLabel",void 0),u([R({type:s.default,displayName:"\u5956\u52b1\u56fe\u6807"})],e.prototype,"iconLoader",void 0),u([S],e)}(cc.Component);a.default=O,cc._RF.pop(),cc._RF.pop()},{}],BoxNode:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"82446N71PtIfYGqnAZzLHeT","BoxNode");var r=t,i=e,a=o;cc._RF.push(i,"82446N71PtIfYGqnAZzLHeT","BoxNode");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("GameDefine"),f=r("sdbBoxLv"),d=r("sdbShop"),y=r("EventHelper"),h=r("FrameHelper"),m=r("LangHelper"),b=r("PlatformHelper"),v=r("RunDataHelper"),g=r("StaticDBHelper"),_=r("BagData"),w=r("DailyData"),S=r("DailyTaskData"),R=r("TowerData"),O=r("TipsFrame"),P=r("GetItemFrame"),F=r("BoxInfoFrame"),T=r("OpenBoxFrame"),D=cc._decorator,k=D.ccclass,C=D.property,L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxLvLb=null,e.boxExpLb=null,e.boxExpProBar=null,e.boxCommonCostLb=null,e.boxCommonCostIcon=null,e.boxCommonFreeTimeLb=null,e.boxPremiumCostLb=null,e.boxPremiumVideoBtn=null,e.boxCommonRed=null,e.boxIcon=null,e.comShop=null,e.premShop=null,e.boxLvData=null,e}var o;return l(e,t),o=e,e.prototype.refreshBoxRed=function(){this.boxCommonRed.active=v.DataHelper.getData(w.default).isFreeComBox},e.prototype.onClickBoxInfo=function(){h.default.showFrame(F.default,this.boxLvData.lv)},e.prototype.onClickBox=function(){},e.prototype.onClickComBuy=function(){var t=this,e=v.DataHelper.getData(_.default).getItemCount(p.default.ItemDiamondId);v.DataHelper.getData(w.default).isFreeComBox?this.openBox(!1,function(){v.DataHelper.getData(w.default).setComBoxFreeGetTime((new Date).getTime()),t.refreshBoxRed()}):this.comShop.cost>e?h.default.showFrame(O.default,6):this.openBox(!1,function(){v.DataHelper.getData(_.default).subItemCount(p.default.ItemDiamondId,t.comShop.cost)})},e.prototype.onClickPremBuy=function(){var t=this,e=v.DataHelper.getData(_.default).getItemCount(p.default.ItemDiamondId);this.premShop.cost>e?h.default.showFrame(O.default,6):this.openBox(!0,function(){v.DataHelper.getData(_.default).subItemCount(p.default.ItemDiamondId,t.premShop.cost)})},e.prototype.onClickPremVideo=function(){var t=this;b.PlatformHelper.video("ShopPremBox",function(){t.openBox(!1,function(){v.DataHelper.getData(w.default).reducePremBoxVideoTimes()})})},e.prototype.openBox=function(t,e){var n=this;v.DataHelper.getData(S.default).addTaskProgress(S.TaskType.DrawBox),h.default.showFrame(T.default,function(){e&&e();var r=[],i=n.boxLvData.comCount*(t?10:1),a=n.boxLvData.coinCount*(t?10:1);r.push({id:p.default.ItemCoinId,count:a});for(var c=v.DataHelper.getData(R.default).getUnlockTowers(),l=0;l<i;l++){var u=c[Math.floor(Math.random()*c.length)];r.hasOwnProperty(u.id)?r[u.id].count+=1:r[u.id]={id:u.id,count:1}}for(var f in h.default.showFrame(P.default,P.default.GetType.item,Object.values(r)),r)v.DataHelper.getData(_.default).addItemCount(r[f].id,r[f].count);v.DataHelper.getData(_.default).addItemCount(p.default.ItemBoxExpId,o.ONCE_BOX_EXP*(t?10:1)),n.refreshBoxLv(),y.default.emit(s.default.refreshMainRed,"shop"),y.default.emit(s.default.refreshMainRed,"tower")})},e.prototype.refreshBoxLv=function(){var t=v.DataHelper.getData(w.default).isFreeComBox;this.refreshBoxRed(),this.boxCommonCostLb.string=t?m.default.getStr("shop.16"):this.comShop.cost.toString(),this.boxPremiumCostLb.string=this.premShop.cost.toString(),this.boxCommonCostIcon.active=!t,this.boxPremiumVideoBtn.interactable=v.DataHelper.getData(w.default).premBoxVideoTimes>0;var e=v.DataHelper.getData(_.default).getItem(p.default.ItemBoxExpId),o=null==e?{lv:1,exp:0}:this.getBoxLv(e.count),n=Object.keys(g.default.getTable(f.default)).length-1,r=o.lv>=n;this.boxLvData=g.default.filterData(f.default,{lv:o.lv})[0],this.boxLvLb.string="\u7b49\u7ea7:"+o.lv,this.boxExpProBar.progress=o.exp/this.boxLvData.exp,this.boxExpLb.string=r?m.default.getStr("btn.12"):o.exp+"/"+this.boxLvData.exp},e.prototype.getBoxLv=function(t){var e={lv:1,exp:t},o=g.default.getTable(f.default);for(var n in o){if(!(e.exp-o[n].exp>=0))break;if(0==o[n].exp)return e;e.lv++,e.exp-=o[n].exp}return e},e.prototype.start=function(){},e.prototype.onLoad=function(){this.comShop=g.default.getData(d.default,40004),this.premShop=g.default.getData(d.default,40005),y.default.on(s.default.CommonBoxOpen,this.onClickComBuy,this),y.default.on(s.default.PremBoxOpen,this.onClickPremBuy,this),y.default.on(s.default.VideoBuyPremBox,this.onClickPremVideo,this),y.default.on(s.default.OpenBox,this.openBox,this)},e.prototype.update=function(){},e.ONCE_BOX_EXP=50,u([C({type:cc.Label,displayName:"\u5b9d\u7bb1\u7b49\u7ea7"})],e.prototype,"boxLvLb",void 0),u([C({type:cc.Label,displayName:"\u5b9d\u7bb1\u7ecf\u9a8c\u8fdb\u5ea6"})],e.prototype,"boxExpLb",void 0),u([C({type:cc.ProgressBar,displayName:"\u5b9d\u7bb1\u7ecf\u9a8c\u8fdb\u5ea6\u6761"})],e.prototype,"boxExpProBar",void 0),u([C({type:cc.Label,displayName:"\u666e\u901a\u5b9d\u7bb1\u6d88\u8017"})],e.prototype,"boxCommonCostLb",void 0),u([C({type:cc.Node,displayName:"\u666e\u901a\u5b9d\u7bb1\u6d88\u8017Icon"})],e.prototype,"boxCommonCostIcon",void 0),u([C({type:cc.Label,displayName:"\u518d\u6b21\u514d\u8d39\u5237\u65b0\u65f6\u95f4"})],e.prototype,"boxCommonFreeTimeLb",void 0),u([C({type:cc.Label,displayName:"\u7cbe\u81f4\u5b9d\u7bb1\u6d88\u8017"})],e.prototype,"boxPremiumCostLb",void 0),u([C({type:cc.Button,displayName:"\u7cbe\u81f4\u5b9d\u7bb1\u89c6\u9891\u6309\u94ae"})],e.prototype,"boxPremiumVideoBtn",void 0),u([C({type:cc.Node,displayName:"\u666e\u901a\u5b9d\u7bb1\u514d\u8d39\u7ea2\u70b9"})],e.prototype,"boxCommonRed",void 0),u([C({type:cc.Node,displayName:"\u5b9d\u7bb1"})],e.prototype,"boxIcon",void 0),o=u([k],e)}(cc.Component);a.default=L,cc._RF.pop(),cc._RF.pop()},{}],BoxTipNode:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"61943c2MwtPZ69m9Hmdkux4","BoxTipNode");var r=t,i=e,a=o;cc._RF.push(i,"61943c2MwtPZ69m9Hmdkux4","BoxTipNode");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ImageLoader"),p=r("GameDefine"),f=r("sdbStage"),d=r("EventHelper"),y=r("StaticDBHelper"),h=cc._decorator,m=h.ccclass,b=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveNode=null,e.layoutNode=null,e}var o;return l(e,t),o=e,e.prototype.onClickClose=function(){this.node.active=!1},e.prototype.showBoxTip=function(t,e,o){var n=y.default.getData(f.default,t)["reward"+e];if(n&&0!=n.length){var r=this.moveNode.parent.convertToNodeSpaceAR(o);this.moveNode.position=r,this.node.active=!0;for(var i=0;i<this.layoutNode.children.length;i++)this.layoutNode.children[i].active=!1;var a=[p.default.ItemCoinId,p.default.ItemDiamondId,p.default.ItemHeroGemId,p.default.ItemPower];for(i=1;i<n.length;i++){var c=n[i],l=c[0],u=c[1],d=this.layoutNode.children[i-1];d.active=!0;var h=d.getComponentInChildren(s.default),m=a.indexOf(l);h.select(m>=0?m:4),d.getComponentInChildren(cc.Label).string=u.toString()}}},e.prototype.onLoad=function(){this.node.active=!1,d.default.on(o.SHOW_BOXTIP_EVENT,this.showBoxTip,this)},e.SHOW_BOXTIP_EVENT="SHOW_BOXTIP_EVENT",u([b({type:cc.Node,displayName:"\u79fb\u52a8\u8282\u70b9"})],e.prototype,"moveNode",void 0),u([b({type:cc.Node,displayName:"\u5217\u8868\u8282\u70b9"})],e.prototype,"layoutNode",void 0),o=u([m],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],BtnLayout:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"bceb1jq8vNLOJZdhWgBroAj","BtnLayout");var r=t,i=e,a=o;cc._RF.push(i,"bceb1jq8vNLOJZdhWgBroAj","BtnLayout");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameDefine"),p=r("FrameHelper"),f=r("PlatformHelper"),d=r("ByAddToDeskFrame"),y=r("ByDanceFrame"),h=r("ByShareFrame"),m=cc._decorator,b=m.ccclass,v=m.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.byteNode=null,e.addToDesktopNode=null,e.shareNode=null,e.wxClubNode=null,e}return l(e,t),e.prototype.onClickByte=function(){p.default.showFrame(y.default)},e.prototype.onClickAddToDesktop=function(){p.default.showFrame(d.default)},e.prototype.onClickShare=function(){p.default.showFrame(h.default)},e.prototype.onClickDailyTask=function(){},e.prototype.onLoad=function(){var t=this;this.byteNode.active=!1,this.addToDesktopNode.active=!1,this.shareNode.active=!1,this.wxClubNode.active=cc.sys.platform===cc.sys.WECHAT_GAME,cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(this.addToDesktopNode.active=!0,this.shareNode.active=!0,f.PlatformHelper.checkScene(function(){t.byteNode.active=!0}))},e.prototype.update=function(){},e.checkSceneReward=[{id:s.default.ItemDiamondId,count:100},{id:s.default.ItemPower,count:10}],e.addToDesktopReward=[{id:s.default.ItemDiamondId,count:100}],e.shareReward=[{id:s.default.ItemCoinId,count:200},{id:s.default.ItemDiamondId,count:100}],u([v({type:cc.Node,displayName:"\u4fa7\u8fb9\u5956\u52b1"})],e.prototype,"byteNode",void 0),u([v({type:cc.Node,displayName:"\u6dfb\u52a0\u5230\u684c\u9762"})],e.prototype,"addToDesktopNode",void 0),u([v({type:cc.Node,displayName:"\u5206\u4eab\u6709\u793c"})],e.prototype,"shareNode",void 0),u([v({type:cc.Node,displayName:"\u6e38\u620f\u5708"})],e.prototype,"wxClubNode",void 0),u([b],e)}(cc.Component);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],BtnSound:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d99dc9D1WxFFp0u9VpjmQJi","BtnSound");var r=e,i=o;cc._RF.push(r,"d99dc9D1WxFFp0u9VpjmQJi","BtnSound");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=(u.requireComponent,u.menu),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbOn=null,e.lbOff=null,e.nodeOn=null,e.nodeOff=null,e.colorOn=new cc.Color,e.colorOff=new cc.Color,e}return c(e,t),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this.nodeOn.active},enumerable:!1,configurable:!0}),e.prototype.setSound=function(t){this.nodeOn.active=t,this.nodeOff.active=!t,this.lbOn.color=t?this.colorOn:this.colorOff,this.lbOff.color=t?this.colorOff:this.colorOn},e.prototype.onClickOn=function(){this.setSound(!0)},e.prototype.onClickOff=function(){this.setSound(!1)},l([p({type:cc.Node,displayName:"\u5f00"})],e.prototype,"lbOn",void 0),l([p({type:cc.Node,displayName:"\u5173"})],e.prototype,"lbOff",void 0),l([p({type:cc.Node,displayName:"\u5f00\u80cc\u666f"})],e.prototype,"nodeOn",void 0),l([p({type:cc.Node,displayName:"\u5173\u80cc\u666f"})],e.prototype,"nodeOff",void 0),l([p({displayName:"\u542f\u7528\u65f6\u989c\u8272"})],e.prototype,"colorOn",void 0),l([p({displayName:"\u7981\u7528\u65f6\u989c\u8272"})],e.prototype,"colorOff",void 0),l([s,f("\u81ea\u5b9a\u4e49\u63a7\u4ef6/Setting \u97f3\u4e50\u6309\u94ae")],e)}(cc.Component);i.default=d,cc._RF.pop(),cc._RF.pop()},{}],Buff_CD:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"702e4meeGVFpaelEvtir5gt","Buff_CD");var r=t,i=e,a=o;cc._RF.push(i,"702e4meeGVFpaelEvtir5gt","Buff_CD");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Buff"),p=r("SkillFactory"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.up=0,e}return l(e,t),e.prototype.tidyParam=function(e){t.prototype.tidyParam.call(this,e);var o=e.split("&");this.up=parseInt(o[0]),this.life=parseInt(o[1])},e.prototype.onJoinFirst=function(){t.prototype.onJoinFirst.call(this),this.owner.data.as.valuePerUp(this.key,this.up)},e.prototype.onRemove=function(){t.prototype.onRemove.call(this),this.owner.data.as.valuePerUpRemove(this.key)},u([p.skillClass("Buff_CD")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Buff_Cirt:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"1ef4d4pLWpJUKaKvZ2J7J4u","Buff_Cirt");var r=t,i=e,a=o;cc._RF.push(i,"1ef4d4pLWpJUKaKvZ2J7J4u","Buff_Cirt");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Debuff"),p=r("SkillFactory"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.critRate=0,e}return l(e,t),e.prototype.tidyParam=function(e){t.prototype.tidyParam.call(this,e),this.critRate=this.param,this.life=3},e.prototype.onBullet=function(t){t.critRate+=this.critRate/100},u([p.skillClass("Buff_Cirt")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Buff:[function(t,e,o){"use strict";cc._RF.push(e,"b60f94RyMlDkI7BWgwQ+S2C","Buff");var n=t,r=e,i=o;cc._RF.push(r,"b60f94RyMlDkI7BWgwQ+S2C","Buff");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.life=0,e.interval=0,e.timeLife=0,e.timeInterval=0,e.countAdd=0,e.countExecute=0,e.isEnable=!1,e}return c(e,t),e.prototype.tidyParam=function(e){t.prototype.tidyParam.call(this,e),this.life=0,this.interval=0},e.prototype.onRejoin=function(){this.timeLife=0},e.prototype.onJoinFirst=function(){this.timeLife=0,this.timeInterval=this.interval,this.isEnable=!0},e.prototype.onRemove=function(){this.isEnable=!1,this.owner.removeSkill(this.key)},e.prototype.onExecute=function(){},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.life=0,this.interval=0,this.countAdd=0,this.countExecute=0,this.timeLife=0,this.timeInterval=0,this.isEnable=!1},e.prototype.onJoin=function(){this.countAdd++,this.countAdd>1?this.onRejoin():this.onJoinFirst()},e.prototype.logicUpdate=function(t){this.interval<=0?(this.timeLife+=t,this.life>0?this.timeLife>=this.life&&this.onRemove():(this.onExecute(),this.onRemove())):(this.timeInterval+=t,this.timeInterval>=this.interval&&(this.countExecute++,this.onExecute(),this.timeLife+=this.interval,this.timeInterval-=this.interval,this.life>-1&&this.timeLife>=this.life&&this.onRemove()))},e}(n("Skill").default);i.default=l,cc._RF.pop(),cc._RF.pop()},{}],BulletBase:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0116af6gzBKSKBV3rkdSMob","BulletBase");var r=t,i=e,a=o;cc._RF.push(i,"0116af6gzBKSKBV3rkdSMob","BulletBase");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MathUtil"),p=r("Bullet"),f=cc._decorator,d=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetUid=0,e.dir=cc.Vec2.ZERO,e.angleSpd=0,e.angleStep=0,e.lastPos=null,e.life=0,e}return l(e,t),e.prototype.init=function(e,o){t.prototype.init.call(this),this.target=e,this.targetUid=e.uid,this.dir=o,this.angleSpd=0;var n=this.target.bodyPosition.sub(this.node.position);this.angleStep=1e5/n.len(),this.life=0},e.prototype.logicUpdate=function(t){if(this.isEnable){if(!cc.isValid(this.target)||this.target.isDead||this.targetUid!==this.target.uid){if(!this.lastPos)return void this.remove();this.target=null}else this.lastPos=this.target.bodyPosition;this.life+=t,this.angleSpd+=this.angleStep*t;var e=this.lastPos.sub(this.node.position),o=e.normalize(),n=s.default.getRadianByAngle(this.angleSpd*t),r=this.dir.signAngle(cc.v2(o));Math.abs(r)>n?this.dir.rotateSelf(n*(r>0?1:-1)):this.dir=cc.v2(o);var i=this.dir.mul(this.speed*t);this.node.x+=i.x,this.node.y+=i.y,this.node.angle=s.default.getAngleByDir(this.dir),i.len()>=e.len()-10&&this.life>.1&&this.remove()}},u([d],e)}(p.default));a.default=y,cc._RF.pop(),cc._RF.pop()},{}],BulletBat:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"4147bOtZkdDd7t6Lebcc+wg","BulletBat");var r=t,i=e,a=o;cc._RF.push(i,"4147bOtZkdDd7t6Lebcc+wg","BulletBat");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("EventHelper"),f=r("MathUtil"),d=r("GameGlobaled"),y=r("MonsterManager"),h=r("Bullet"),m=cc._decorator,b=m.ccclass,v=m.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spineBat=null,e.attackCounts=0,e.attackDist=100,e.walkDist=100,e.AtkCD=.25,e.cdTime=0,e.attackTween=null,e.dir=cc.Vec2.ZERO,e.angleSpd=0,e.isPerching=!0,e.isSpawning=!0,e._spawnIndex=0,e.addAtackOnKill=!1,e._takeOffCallback=null,e}return l(e,t),e.prototype.init=function(e,o,n,r,i,a){var c=this;t.prototype.init.call(this),this.target=e,this.attackCounts=o,this._spawnIndex=n,this._takeOffCallback=i,this.cdTime=this.AtkCD,this.attackDist=a,this.addAtackOnKill=r,this.isPerching=!0,this.dir=cc.Vec2.UP.rotate(Math.random()*Math.PI*2),this.updateFacing(),this.playAnimation("wait",!0),this.node.scale=0,cc.tween(this.node).to(1.3,{scale:1}).call(function(){c.isSpawning=!1}).start(d.default.speed)},e.prototype.updateFacing=function(){var t=Math.abs(this.spineBat.node.scaleX);this.spineBat.node.scaleX=this.dir.x>0?-t:t},e.prototype.playAnimation=function(t,e){return this.spineBat.timeScale=d.default.speed,this.spineBat.setAnimation(0,t,e)},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.attackTween&&(this.attackTween.stop(),this.attackTween=null),this.node.scale=1,this.isPerching=!0,this.isSpawning=!0},e.prototype._takeOff=function(){this.isPerching=!1,this._takeOffCallback(this._spawnIndex)},e.prototype.logicUpdate=function(t){var e=this;if(this.isEnable&&!this.isSpawning)if(this.isPerching){var o=y.default.instance.listAll.filter(function(t){return t.node.position.sub(e.node.position).mag()<=e.attackDist});o.length>0&&(this.target=f.default.randomArray(o),this._takeOff())}else if(this.attackCounts<=0)this.remove();else if(this.cdTime<this.AtkCD&&(this.cdTime+=t),!this.attackTween){if(!this.target){var n=y.default.instance.listAll.filter(function(t){return t.node.position.sub(e.node.position).mag()<=e.walkDist});if(n.length>0)this.target=f.default.randomArray(n);else{var r=y.default.instance.listAll.filter(function(t){return t.node.position.sub(e.node.position).mag()<=e.attackDist});r.length>0?this.target=f.default.randomArray(r):(this.target=f.default.randomArray(y.default.instance.listAll),this.target&&(this.dir=cc.v2(this.target.node.position.sub(this.node.position).normalize()),this.dir.rotateSelf(f.default.getRadianByAngle(f.default.randomInt(0,360)))))}}if(this.target){var i=this.target.node.position.sub(this.node.position),a=i.normalize();if(!(Math.floor(i.mag())<=this.walkDist)){this.angleSpd+=this.speed/200;var c=f.default.getRadianByAngle(this.angleSpd*t),l=this.dir.signAngle(cc.v2(a));Math.abs(l)>c?this.dir.rotateSelf(c*(l>0?1:-1)):this.dir=cc.v2(a);var u=this.dir.mul(this.speed*t);return this.node.x+=u.x,this.node.y+=u.y,void this.updateFacing()}if(this.cdTime>=this.AtkCD){var s=this.target.node.position.clone(),p=this.target.node.position.add(a.mul(80)),h=Math.min(.2,this.AtkCD);return this.attackTween=cc.tween(this.node).to(.5*h,{x:s.x,y:s.y,scale:.5}).call(function(){e.hit(e.target),e.target=null,e.attackCounts--}).to(.5*h,{x:p.x,y:p.y,scale:1}).call(function(){e.attackTween=null}).start(d.default.speed),void(this.cdTime=0)}this.angleSpd=this.speed/10}else u=this.dir.mul(this.speed*t),this.node.x+=u.x,this.node.y+=u.y,this.updateFacing()}},e.prototype.onKill=function(){this.addAtackOnKill&&(this.attackCounts+=2)},e.prototype.onGameSpeedChange=function(t){this.node.activeInHierarchy&&this.spineBat&&(this.spineBat.timeScale=t)},e.prototype.onLoad=function(){p.default.on(s.default.GameSpeedChange,this.onGameSpeedChange,this)},u([v({type:sp.Skeleton,displayName:"\u8759\u8760\u52a8\u753b"})],e.prototype,"spineBat",void 0),u([b],e)}(h.default);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],BulletFanEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"186a4B9Z0BEkaqFYRl8XIiV","BulletFanEx");var r=t,i=e,a=o;cc._RF.push(i,"186a4B9Z0BEkaqFYRl8XIiV","BulletFanEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MathUtil"),p=r("BulletFan"),f=cc._decorator,d=f.ccclass,y=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.init=function(e,o,n){void 0===n&&(n=0),t.prototype.init.call(this,e,0,-1,o,n)},e.prototype.logicUpdate=function(t){if(this.isEnable){var e=s.default.getRadianByAngle(this.speedRotate*this.speedScale)*t;this.distance+=this.speed*t,this.setAngle(this.angle+e),this.distance>=Math.max(cc.winSize.width,cc.winSize.height)&&this.remove()}},u([d],e)}(p.default));a.default=y,cc._RF.pop(),cc._RF.pop()},{}],BulletFan:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"db0a3IQsMhCg7tHN+BrTeL4","BulletFan");var r=t,i=e,a=o;cc._RF.push(i,"db0a3IQsMhCg7tHN+BrTeL4","BulletFan");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MathUtil"),p=r("Bullet"),f=cc._decorator,d=f.ccclass,y=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speedRotate=600,e.distance=0,e.angle=0,e.center=null,e.lifeAngle=0,e.isForever=!1,e.speedScale=1,e.curTurn=0,e.onTurnCallback=null,e}return l(e,t),e.prototype.init=function(e,o,n,r,i){void 0===i&&(i=0),t.prototype.init.call(this),this.center=e,this.distance=o,this.speedScale=r,n<=0?this.isForever=!0:this.lifeAngle=n*Math.PI*2,this.angle=i,this.penetrate=-1,this.curTurn=0,this.setAngle(this.angle)},e.prototype.listenTurn=function(t){this.onTurnCallback=t},e.prototype.cleanup=function(){this.onTurnCallback=null},e.prototype.setAngle=function(t){this.angle=t;var e=this.center.add(cc.Vec2.RIGHT.rotate(t).mul(this.distance));this.node.setPosition(e);var o=Math.floor(this.angle/(2*Math.PI));this.curTurn!=o&&(this.curTurn=o,this.onTurnCallback&&this.onTurnCallback())},e.prototype.logicUpdate=function(t){if(this.isEnable){var e=s.default.getRadianByAngle(this.speedRotate*this.speedScale)*t;this.lifeAngle-=e,this.setAngle(this.angle+e),!this.isForever&&this.lifeAngle<=0&&this.remove()}},u([y({displayName:"\u65cb\u8f6c\u901f\u5ea6"})],e.prototype,"speedRotate",void 0),u([d],e)}(p.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],BulletFireBall:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"bd83c/WvOJEKJ54RuudWkwx","BulletFireBall");var r=t,i=e,a=o;cc._RF.push(i,"bd83c/WvOJEKJ54RuudWkwx","BulletFireBall");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s,p=r("EffectManager"),f=r("MonsterManager"),d=r("Bullet"),y=cc._decorator,h=y.ccclass,m=y.property;(function(t){t[t.Flying=0]="Flying",t[t.Exploded=1]="Exploded",t[t.Bouncing=2]="Bouncing"})(s||(s={}));var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectFireBoom=null,e.jumpHeight=200,e.bounceJumpHeight=100,e.bounceRadius=200,e.aoeRadius=90,e.state=s.Flying,e.startPos=cc.Vec2.ZERO,e.targetPos=cc.Vec2.ZERO,e.flyTime=0,e.totalFlyTime=.65,e.bounceCount=0,e.hitEntities=new Set,e.addBounceOnKill=!1,e.aoeRangePercent=0,e}return l(e,t),e.prototype.init=function(e,o,n,r){t.prototype.init.call(this),this.state=s.Flying,this.startPos=cc.v2(this.node.position),this.targetPos=cc.v2(e.node.position),this.flyTime=0,this.hitEntities.clear(),this.bounceCount=o,this.addBounceOnKill=n,this.aoeRangePercent=r},e.prototype.cleanup=function(){this.hitEntities.clear()},e.prototype.aoe=function(){var t=this,e=this.aoeRadius*(1+.01*this.aoeRangePercent);p.default.instance.create(this.effectFireBoom,this.node.position),f.default.instance.listAll.forEach(function(o){o.node.position.sub(t.node.position).mag()<=e&&(t.hitEntities.has(o)||(t.hitEntities.add(o),t.hit(o)))})},e.prototype.findFarthestTarget=function(){var t=this,e=null,o=0;return f.default.instance.listAll.forEach(function(n){if(n&&cc.isValid(n)&&!n.isDead){var r=n.node.position.sub(t.node.position).mag();r<=t.bounceRadius&&r>o&&(e=n,o=r)}}),e},e.prototype.logicUpdate=function(t){if(this.isEnable)if(this.state===s.Flying){this.flyTime+=t;var e=Math.min(this.flyTime/this.totalFlyTime,1),o=this.startPos.lerp(this.targetPos,e),n=Math.sin(e*Math.PI)*this.jumpHeight;o.y+=n,this.node.setPosition(o),e>=1&&(this.state=s.Exploded,this.aoe())}else if(this.state===s.Exploded){this.bounceCount<=0&&this.remove();var r=this.findFarthestTarget();r&&this.bounceCount>0?(this.state=s.Bouncing,this.startPos=cc.v2(this.node.position),this.targetPos=cc.v2(r.node.position),this.flyTime=0):this.bounceCount=0}else this.state===s.Bouncing&&(this.flyTime+=t,e=Math.min(this.flyTime/(.5*this.totalFlyTime),1),o=this.startPos.lerp(this.targetPos,e),n=Math.sin(e*Math.PI)*this.bounceJumpHeight,o.y+=n,this.node.setPosition(o),e>=1&&(this.state=s.Exploded,this.aoe(),this.bounceCount--))},e.prototype.onKill=function(){this.addBounceOnKill&&this.bounceCount++},u([m({type:cc.Prefab,displayName:"\u7206\u70b8(\u706b)"})],e.prototype,"effectFireBoom",void 0),u([m],e.prototype,"jumpHeight",void 0),u([m],e.prototype,"bounceJumpHeight",void 0),u([h],e)}(d.default);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],BulletFlameEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"fe12drcdulBHpG1qvSkrWQ4","BulletFlameEx");var r=t,i=e,a=o;cc._RF.push(i,"fe12drcdulBHpG1qvSkrWQ4","BulletFlameEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("BulletStraight"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isGrow=!1,e.growSpeed=2,e}return l(e,t),e.prototype.init=function(e,o,n){void 0===n&&(n=0),t.prototype.init.call(this,e,-1,n),this.isGrow=o>0},e.prototype.logicUpdate=function(e){this.isEnable&&(t.prototype.logicUpdate.call(this,e),this.isGrow&&(this.node.scale+=this.growSpeed*e))},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.node.scale=1},u([f],e)}(s.default));a.default=d,cc._RF.pop(),cc._RF.pop()},{}],BulletFlameNone:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ad391rN6i9C44gpC4b6GAy4","BulletFlameNone");var r=t,i=e,a=o;cc._RF.push(i,"ad391rN6i9C44gpC4b6GAy4","BulletFlameNone");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("BulletStraight"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.life=0,e.time=0,e.min=0,e.max=0,e}return l(e,t),e.prototype.init=function(e,o){t.prototype.init.call(this,e,-1,o),this.life=o/this.speed,this.time=0,this.min=40/this.node.width,this.max=140/this.node.width},e.prototype.setScale=function(t){this.node.scale=this.min+(this.max-this.min)*t},e.prototype.logicUpdate=function(e){this.isEnable&&(t.prototype.logicUpdate.call(this,e),this.time+=e,this.setScale(this.time/this.life))},u([f],e)}(s.default));a.default=d,cc._RF.pop(),cc._RF.pop()},{}],BulletFlame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"384f78te/FOh6HEIoJ+fTdF","BulletFlame");var r=t,i=e,a=o;cc._RF.push(i,"384f78te/FOh6HEIoJ+fTdF","BulletFlame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MathUtil"),p=r("Bullet"),f=cc._decorator,d=f.ccclass,y=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.init=function(e,o){t.prototype.init.call(this),this.particleList.forEach(function(t){t.scaleLife(o.value/o.base)}),this.setAngle(s.default.getAngleByDir(e)-90)},e.prototype.setAngle=function(t){this.particleList.forEach(function(e){e.node.angle=t})},e.prototype.setPositionByWorld=function(t){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(t))},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.particleList.forEach(function(t){t.cleanup()})},e.prototype.logicUpdate=function(){},e.prototype.onLoad=function(){},u([d],e)}(p.default));a.default=y,cc._RF.pop(),cc._RF.pop()},{}],BulletFlashEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"11cf8f9PotFzLQA6SHuKs1l","BulletFlashEx");var r=t,i=e,a=o;cc._RF.push(i,"11cf8f9PotFzLQA6SHuKs1l","BulletFlashEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("FbfAnimation"),p=r("Bullet"),f=cc._decorator,d=f.ccclass,y=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.thunderbolt=null,e.life=.7,e.lifeTime=0,e.ad=0,e.targetPosition=null,e}return l(e,t),e.prototype.init=function(e,o){t.prototype.init.call(this),this.target=e,this.target?this.targetPosition=this.target.node.position:this.targetPosition=o,this.node.position=this.targetPosition,this.thunderbolt.play()},e.prototype.onComplete=function(){this.hit(this.target),this.remove()},e.prototype.onLoad=function(){this.thunderbolt.onComplete(this.onComplete.bind(this))},u([y({type:s.default,displayName:"\u843d\u96f7"})],e.prototype,"thunderbolt",void 0),u([d],e)}(p.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],BulletFlashLeidian:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"599f7KRRMpJyY6jBl6ZVEgV","BulletFlashLeidian");var r=t,i=e,a=o;cc._RF.push(i,"599f7KRRMpJyY6jBl6ZVEgV","BulletFlashLeidian");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.BulletFlashLeidian=void 0;var s=r("GameGlobaled"),p=r("Bullet"),f=cc._decorator,d=f.ccclass,y=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeList=[],e.collider=null,e.distance=0,e.tweenList=[],e.finishCount=0,e}return l(e,t),e.prototype.init=function(e){var o=this;t.prototype.init.call(this),this.distance=e,this.collider.radius=0,this.penetrate=-1,this.finishCount=0;for(var n=2*e/(this.nodeList[0].width-40),r=.8*this.distance/this.speed,i=0;i<this.nodeList.length;i++)this.tweenList.push(cc.tween(this.nodeList[i]).set({scale:.2,opacity:0}).delay(.1*i).to(r,{scale:n,opacity:255}).to(.1,{opacity:0}).call(function(){o.finishCount++,o.finishCount>=o.nodeList.length&&o.remove()}).start(s.default.speed));this.collider.radius=.2*this.nodeList[0].width/2},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.collider.radius=0;for(var e=0;e<this.tweenList.length;e++)this.tweenList[e].stop();for(this.tweenList=[],e=0;e<this.nodeList.length;e++)this.nodeList[e].scale=0},e.prototype.logicUpdate=function(e){this.isEnable&&(t.prototype.logicUpdate.call(this,e),this.collider.radius=Math.min(this.collider.radius+e*this.speed,this.distance))},u([y({type:cc.Node,displayName:"\u96f7\u7535\u573a\u57df"})],e.prototype,"nodeList",void 0),u([y({type:cc.CircleCollider,displayName:"\u5b50\u5f39\u78b0\u649e\u4f53"})],e.prototype,"collider",void 0),u([d],e)}(p.default);a.BulletFlashLeidian=h,cc._RF.pop(),cc._RF.pop()},{}],BulletFlash:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"377f7Xxu9RNHbe1IvI1EMzh","BulletFlash");var r=t,i=e,a=o;cc._RF.push(i,"377f7Xxu9RNHbe1IvI1EMzh","BulletFlash");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("MathUtil"),d=r("BulletManager"),y=r("MonsterManager"),h=r("Bullet"),m=cc._decorator,b=m.ccclass,v=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.life=.3,e.lifeTime=0,e.transmitTime=.2,e.transmitCount=0,e.transmitList=[],e.ad=500,e.owner=null,e.ownerPosition=null,e.targetPosition=null,e.targetPositionWorld=null,e.jumpMaxDistance=200,e}return l(e,t),e.prototype.init=function(e,o,n,r,i){void 0===i&&(i=[]),t.prototype.init.call(this),this.owner=e,this.ownerPosition=o,this.target=n,this.transmitCount=r-1,this.transmitList=i,this.transmitList.push(this.target),this.lifeTime=0,this.refresh(),this.hit(n)},e.prototype.refresh=function(){this.owner&&!this.owner.isDead?this.ownerPosition=this.owner.bodyPosition:this.owner=null,this.target&&!this.target.isDead?(this.targetPosition=this.target.bodyPosition,this.targetPositionWorld=this.target.bodyPositionToWorld):this.target=null,this.node.position=this.ownerPosition;var t=this.targetPosition.sub(this.ownerPosition);this.node.angle=f.default.getAngleByDir(t);var e=Math.max(cc.winSize.width,cc.winSize.height),o=this.node.getComponent(cc.BoxCollider);this.node.width=o.size.width=t.len(),o.offset.x=e/2},e.prototype.findFarthestTarget=function(t){var e=this;void 0===t&&(t=[]);var o=[];return y.default.instance.listAll.forEach(function(n){if(n&&cc.isValid(n)&&!n.isDead&&!(t.indexOf(n)>=0)){var r=n.node.position.sub(e.targetPosition).mag();r<=e.jumpMaxDistance&&o.push({monster:n,distance:r})}}),o.length<1?null:(o.sort(function(t,e){return e.distance-t.distance}),o[0].monster)},e.prototype.createBullet=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(o){switch(o.label){case 0:return[4,d.default.instance.create(this.node,this.targetPositionWorld)];case 1:return(e=o.sent())?(e.setData(this.attackData),e.setHitFunc(this.onHit),e.init(this.target,this.targetPosition,t,this.transmitCount,this.transmitList),[2]):[2]}})})},e.prototype.logicUpdate=function(e){if(t.prototype.logicUpdate.call(this,e),this.refresh(),this.lifeTime+=e,this.lifeTime>this.life)this.remove();else if(this.isEnable&&this.transmitCount>0&&this.lifeTime>this.transmitTime){var o=this.findFarthestTarget(this.transmitList);o&&this.createBullet(o),this.isEnable=!1}},u([b],e)}(h.default));a.default=v,cc._RF.pop(),cc._RF.pop()},{}],BulletIceBall:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6b83fB7zblKe5ynhg25iaIC","BulletIceBall");var r=t,i=e,a=o;cc._RF.push(i,"6b83fB7zblKe5ynhg25iaIC","BulletIceBall");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0}),a.BulletIceBall=void 0;var f=r("Skill"),d=r("BulletManager"),y=r("BulletStraight"),h=cc._decorator,m=h.ccclass,b=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iceSpikePrefab=null,e.sptImg=null,e.spawnInterval=.1,e.spawnCount=6,e.timeAccumulator=0,e.countI=30*Math.random()>>0,e.radius=20,e}return l(e,t),e.prototype.cleanup=function(){this.timeAccumulator=0,this.countI=30*Math.random()>>0,t.prototype.cleanup.call(this)},e.prototype.logicUpdate=function(e){if(this.isEnable){if(t.prototype.logicUpdate.call(this,e),this.timeAccumulator+=e,this.timeAccumulator>=this.spawnInterval){if(Math.random()<.7)return;this.countI++,this.timeAccumulator=0,this.spawnSingleSpike(37*this.countI,this.radius)}this.sptImg.node.angle+=100*e}},e.prototype.onMaxDistance=function(){this.spawnSpikes()},e.prototype.spawnSpikes=function(){for(var t=360/this.spawnCount,e=60*Math.random(),o=0;o<this.spawnCount;o++){var n=o*t;this.spawnSingleSpike(37*this.countI+n+e,this.radius)}},e.prototype.spawnSingleSpike=function(t,e){var o=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),n=t*Math.PI/180,r=cc.v2(o.x+Math.cos(n)*e,o.y+Math.sin(n)*e),i=cc.v2(-Math.sin(n),Math.cos(n));return this.createSpike(this.iceSpikePrefab,this.getSpikeAttackData(this.attackData),this.onHit,r,i)},e.prototype.getSpikeAttackData=function(t){var e=new f.AttackData(t.entityData);return e.damage=.1*this.attackData.damage,e},e.prototype.createSpike=function(t,e,o,n,r){return s(this,void 0,void 0,function(){var i;return p(this,function(a){switch(a.label){case 0:return[4,d.default.instance.create(t,n)];case 1:return(i=a.sent())?(i.setData(e),i.setHitFunc(o),i.init(r,this.penetrate,300),[2,i]):[2,null]}})})},u([b(cc.Prefab)],e.prototype,"iceSpikePrefab",void 0),u([b({type:cc.Sprite,displayName:"\u56fe\u7247"})],e.prototype,"sptImg",void 0),u([m],e)}(y.default);a.BulletIceBall=v,cc._RF.pop(),cc._RF.pop()},{}],BulletLight:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0047dlpQ2RDJJ9ZJPAs2Zxq","BulletLight");var r=t,i=e,a=o;cc._RF.push(i,"0047dlpQ2RDJJ9ZJPAs2Zxq","BulletLight");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f,d,y=r("EventConfig"),h=r("EventHelper"),m=r("MathUtil"),b=r("GameGlobaled"),v=r("Entity"),g=r("Skill"),_=r("Bullet"),w=cc._decorator,S=w.ccclass,R=w.property;(function(t){t[t.Normal=0]="Normal",t[t.Residue=1]="Residue"})(f||(f={})),function(t){t[t.Show=0]="Show",t[t.Hold=1]="Hold",t[t.Hide=2]="Hide"}(d||(d={}));var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.light=null,e.life=0,e.lifeEx=0,e.lifeTime=0,e.mode=f.Normal,e.collisionList=[],e.residueDamageCount=0,e.residueDamageStep=.3,e.rotateSpeed=0,e.bulletSize=1,e.rotateAngle=0,e.holdTime=0,e.hideTime=0,e.state=d.Show,e.tween=null,e.attackDataSave=null,e.funcFinish=null,e}return l(e,t),e.prototype.init=function(e,o,n,r,i){t.prototype.init.call(this),this.node.angle=m.default.getAngleByDir(e),this.lifeEx=o*this.residueDamageStep,this.residueDamageCount=o,this.bulletSize=r,this.funcFinish=i,this.lifeTime=0,this.rotateAngle=this.node.angle+n,this.holdTime=.1,this.state=d.Show,this.tween&&(this.tween.stop(),this.tween=null),this.lifeEx>0?(this.life=.5+this.lifeEx,this.holdTime=.1):this.life=.9,0!==n?(this.holdTime=.1,this.hideTime=.3,this.rotateSpeed=n/this.hideTime):(this.rotateSpeed=0,this.hideTime=.4),this.penetrate=-1,this.mode=f.Normal,this.light.enabled=!1,this.showLight()},e.prototype.setData=function(t){this.attackData=t,this.attackDataSave=this.attackData},e.prototype.showLight=function(){return s(this,void 0,void 0,function(){var t,e=this;return p(this,function(){return t=0!==this.rotateSpeed?.05:.2,this.tween=cc.tween(this.light.node).set({scaleY:0,opacity:0}).to(.4,{scaleY:this.bulletSize,opacity:255},{easing:cc.easing.quintIn}).call(function(){e.light.enabled=!0}).delay(t).call(function(){e.state=d.Hold,e.lifeEx>0?(e.mode=f.Residue,e.attackData=new g.AttackData(e.attackData.entityData),e.attackData.damage=.1*e.attackDataSave.damage,e.holdLight(e.lifeEx)):e.holdLight(e.holdTime)}).start(b.default.speed),[2]})})},e.prototype.holdLight=function(t){return void 0===t&&(t=0),s(this,void 0,void 0,function(){var e,o,n=this;return p(this,function(){if(this.tween=cc.tween(this.light.node),this.residueDamageCount>0)for(e=t/this.residueDamageCount/2,o=0;o<this.residueDamageCount;o++)this.tween.to(e,{scaleY:.6*this.bulletSize}).to(e,{scaleY:this.bulletSize}).call(function(){n.collisionList.forEach(function(t){n.hit(t.getComponent(v.default))})});else this.tween.delay(t);return this.tween.call(function(){0!==n.rotateSpeed&&(n.attackData=new g.AttackData(n.attackData.entityData),n.attackData.damage=.5*n.attackDataSave.damage),n.state=d.Hide,n.hideLight(n.hideTime)}).start(b.default.speed),[2]})})},e.prototype.hideLight=function(t){return void 0===t&&(t=0),s(this,void 0,void 0,function(){var e=this;return p(this,function(){return cc.tween(this.light.node).set({scaleY:this.bulletSize,opacity:255}).to(t,{scaleY:0,opacity:0},{easing:cc.easing.quintIn}).call(function(){e.light.enabled=!1,e.remove(),e.funcFinish&&e.funcFinish()}).start(b.default.speed),[2]})})},e.prototype.cleanup=function(){this.collisionList=[],this.node.opacity=255},e.prototype.logicUpdate=function(t){this.isEnable&&this.state===d.Hide&&0!==this.rotateSpeed&&(this.rotateSpeed>0?this.node.angle=Math.min(this.rotateAngle,this.node.angle+this.rotateSpeed*t):this.node.angle=Math.max(this.rotateAngle,this.node.angle+this.rotateSpeed*t))},e.prototype.onCollisionEnter=function(e,o){t.prototype.onCollisionEnter.call(this,e,o),this.collisionList.push(e.node)},e.prototype.onCollisionExit=function(t){var e=this.collisionList.indexOf(t.node);e>=0&&this.collisionList.splice(e,1)},e.prototype.onGameSpeedChange=function(t){this.node.activeInHierarchy&&this.tween&&this.tween.timeScale(t)},e.prototype.onLoad=function(){h.default.on(y.default.GameSpeedChange,this.onGameSpeedChange,this)},u([R({type:cc.Collider,displayName:"\u78b0\u649e\u4f53"})],e.prototype,"light",void 0),u([S],e)}(_.default);a.default=O,cc._RF.pop(),cc._RF.pop()},{}],BulletManager:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"3b4f3vGNIBGQ7/wY9NsUmRP","BulletManager");var r=t,i=e,a=o;cc._RF.push(i,"3b4f3vGNIBGQ7/wY9NsUmRP","BulletManager");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("EventConfig"),d=r("EventHelper"),y=r("Factory"),h=r("TimeUtil"),m=r("UuidUtil"),b=r("GameGlobaled"),v=r("Bullet"),g=cc._decorator,_=g.ccclass,w=g.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.list=[],e.listBlur=[],e.removeList=[],e.createFlag=m.default.create(),e.indexMap={},e}var o;return l(e,t),o=e,e.prototype.getIndex=function(t){if(null==this.indexMap[t]){var e=0;for(var o in this.indexMap)this.indexMap[o]>e&&(e=this.indexMap[o]);this.indexMap[t]=e+1}return this.indexMap[t]},e.prototype.createBlur=function(t,e,o,n){return s(this,void 0,void 0,function(){var r,i;return p(this,function(a){switch(a.label){case 0:return r=this.createFlag,e=this.parent.convertToNodeSpaceAR(e),[4,y.default.instance.create(t)];case 1:return(i=a.sent())?r!==this.createFlag?(cc.log("remove await bullet"),y.default.instance.remove(i),[2,null]):(i.parent=this.parent,i.setPosition(e),i.zIndex=-this.getIndex(i.name),i.opacity=255,i.angle=o,i.scaleX=t.scaleX,i.scaleY=t.scaleY,this.listBlur.push({node:i,life:n,time:0}),[2]):[2,null]}})})},e.prototype.create=function(t,e){return s(this,void 0,void 0,function(){var o,n,r;return p(this,function(i){switch(i.label){case 0:return o=this.createFlag,e=this.parent.convertToNodeSpaceAR(e),[4,y.default.instance.create(t)];case 1:if(!(n=i.sent()))return[2,null];i.label=2;case 2:return b.default.speed<=0?[4,h.default.delay(.1)]:[3,4];case 3:return i.sent(),[3,2];case 4:return o!==this.createFlag?(cc.log("remove await bullet"),y.default.instance.remove(n),[2,null]):(n.parent=this.parent,n.zIndex=this.getIndex(t.name),n.setPosition(e),r=n.getComponent(v.default),this.list.push(r),[2,r])}})})},e.prototype.remove=function(t){this.removeList.includes(t)?cc.log("bullet already in removeList"):this.removeList.push(t)},e.prototype.cleanup=function(){this.createFlag=m.default.create(),this.list.forEach(function(t){t.cleanup(),y.default.instance.remove(t.node)}),this.list=[],this.listBlur.forEach(function(t){y.default.instance.remove(t.node)}),this.listBlur=[],this.removeList=[]},e.prototype.logicUpdate=function(t){this.list.forEach(function(e){e.logicUpdate(t)});for(var e=0;e<this.removeList.length;e++){(n=this.removeList[e]).cleanup();var o=this.list.indexOf(n);-1!==o?(y.default.instance.remove(n.node),this.list.splice(o,1)):cc.log("bullet not found in list")}for(this.removeList=[],e=0;e<this.listBlur.length;e++){var n;(n=this.listBlur[e]).time+=t,n.node.opacity=255*(1-n.time/n.life),n.time>=n.life&&(y.default.instance.remove(n.node),this.listBlur.splice(e,1),e--)}},e.prototype.onLoad=function(){o.instance=this,d.default.on(f.default.CreateBullet,this.create,this),d.default.on(f.default.RemoveBullet,this.remove,this)},e.prototype.start=function(){},e.instance=null,u([w({type:cc.Node,displayName:"\u7236\u8282\u70b9"})],e.prototype,"parent",void 0),o=u([_],e)}(cc.Component);a.default=S,cc._RF.pop(),cc._RF.pop()},{}],BulletPoisonJudu:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e8c22qeQa1Eb4O2jlxJw30i","BulletPoisonJudu");var r=t,i=e,a=o;cc._RF.push(i,"e8c22qeQa1Eb4O2jlxJw30i","BulletPoisonJudu");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0}),a.BulletPoisonJudu=void 0;var f=r("BulletManager"),d=r("Bullet"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabJudu=null,e.collider=null,e.distance=0,e}return l(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.distance=e,this.collider.radius=0,this.createBullets(),this.penetrate=-1},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.collider.radius=0},e.prototype.createBullets=function(){return s(this,void 0,void 0,function(){var t,e,o,n,r;return p(this,function(i){switch(i.label){case 0:t=16,e=2*Math.PI/t,o=cc.Vec2.UP,n=0,i.label=1;case 1:return n<t?(o.rotateSelf(e*n),[4,f.default.instance.create(this.prefabJudu,this.node.convertToWorldSpaceAR(cc.Vec2.ZERO))]):[3,4];case 2:if(!(r=i.sent()))return[2];r.init(o,-1,this.distance),r.speed=this.speed,i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.logicUpdate=function(e){this.isEnable&&(t.prototype.logicUpdate.call(this,e),this.collider.radius+=e*this.speed,this.collider.radius>=this.distance&&this.remove())},u([m({type:cc.Prefab,displayName:"\u5267\u6bd2\u65b0\u661f"})],e.prototype,"prefabJudu",void 0),u([m({type:cc.CircleCollider,displayName:"\u5b50\u5f39\u78b0\u649e\u4f53"})],e.prototype,"collider",void 0),u([h],e)}(d.default);a.BulletPoisonJudu=b,cc._RF.pop(),cc._RF.pop()},{}],BulletPoison:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"62e293+q4JFD4oUYGKbo0bV","BulletPoison");var r=t,i=e,a=o;cc._RF.push(i,"62e293+q4JFD4oUYGKbo0bV","BulletPoison");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.BulletPoison=void 0;var s=r("BulletTrack"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxZ=0,e}return l(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.maxZ=Math.min(1.2*this.node.position.sub(e.node.position).len(),200)},e.prototype.setPosition=function(t){var e=this.maxZ*Math.sin(this.passTime/this.useTime*Math.PI),o=cc.Vec2.lerp(this.node.position,this.startPosition,t,this.passTime/this.useTime);o.y+=e,this.node.position=o},e.prototype.logicUpdate=function(e){this.isEnable&&(t.prototype.logicUpdate.call(this,e),this.node.angle+=180*e)},u([f],e)}(s.default));a.BulletPoison=d,cc._RF.pop(),cc._RF.pop()},{}],BulletStraight:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5c575j6B3JJFLnU+RzqF+mW","BulletStraight");var r=t,i=e,a=o;cc._RF.push(i,"5c575j6B3JJFLnU+RzqF+mW","BulletStraight");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MathUtil"),p=r("Bullet"),f=cc._decorator,d=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dir=cc.Vec3.ZERO,e.maxDistance=0,e.distance=0,e.startPosition=cc.Vec3.ZERO,e}return l(e,t),e.prototype.init=function(e,o,n){var r=this;void 0===n&&(n=0),t.prototype.init.call(this),this.dir=cc.v3(e.x,e.y,0).normalize(),this.node.angle=s.default.getAngleByDir(this.dir),this.maxDistance=0==n?Math.max(cc.winSize.width,cc.winSize.height):Math.min(n,Math.max(cc.winSize.width,cc.winSize.height)),this.distance=0,this.setPenetrate(o),this.startPosition=this.node.position,this.particleList.forEach(function(t){t.particle.startSpin=t.particle.endSpin=-r.node.angle})},e.prototype.logicUpdate=function(t){this.isEnable&&(this.distance+=this.speed*t,this.node.setPosition(this.startPosition.add(this.dir.mul(this.distance))),this.distance>this.maxDistance&&(this.onMaxDistance(),this.remove()))},e.prototype.onMaxDistance=function(){},u([d],e)}(p.default));a.default=y,cc._RF.pop(),cc._RF.pop()},{}],BulletSword:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6bae5RE4XJAQrE48mEFnzrQ","BulletSword");var r=t,i=e,a=o;cc._RF.push(i,"6bae5RE4XJAQrE48mEFnzrQ","BulletSword");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MathUtil"),p=r("BulletManager"),f=r("MonsterManager"),d=r("Entity"),y=r("Bullet"),h=cc._decorator,m=h.ccclass,b=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blurNode=null,e.life=0,e.dir=cc.Vec2.ZERO,e.angleSpd=0,e.killAddLife=0,e.flightTime=0,e.originalDamage=0,e.damageIncreaseRate=0,e.maxBonus=1,e.blurStep=.15,e.blurLife=.5,e.blurTimeTemp=0,e}return l(e,t),e.prototype.init=function(e,o,n,r){t.prototype.init.call(this),this.life=e,this.penetrate=-1,this.dir=cc.Vec2.UP.rotate(Math.random()*Math.PI*2),this.angleSpd=this.speed/10,this.killAddLife=o,this.damageIncreaseRate=n,this.maxBonus=r,this.originalDamage=this.attackData.damage,this.resetAngleSpd(),this.blurTimeTemp=0},e.prototype.resetAngleSpd=function(){this.angleSpd=this.speed/10},e.prototype.logicUpdate=function(t){if(this.isEnable)if(this.life-=t,this.life<0)this.remove();else{if(this.damageIncreaseRate>0){this.flightTime+=t;var e=Math.min(this.flightTime*this.damageIncreaseRate,this.maxBonus);this.attackData.damage=this.originalDamage*(1+e)}if(this.target&&this.target.isDead&&(this.target=null,this.resetAngleSpd()),this.target||(this.target=s.default.randomArray(f.default.instance.listAll)),this.target){this.angleSpd+=this.speed/200;var o=this.target.node.position.sub(this.node.position).normalize(),n=s.default.getRadianByAngle(this.angleSpd*t),r=this.dir.signAngle(cc.v2(o));Math.abs(r)>n?this.dir.rotateSelf(n*(r>0?1:-1)):this.dir=cc.v2(o)}var i=this.dir.mul(this.speed*t);this.node.x+=i.x,this.node.y+=i.y,this.node.angle=s.default.getAngleByDir(this.dir),this.blurTimeTemp+=t,this.blurTimeTemp>this.blurStep&&(this.blurTimeTemp-=this.blurStep,p.default.instance.createBlur(this.blurNode,this.blurNode.convertToWorldSpaceAR(cc.Vec2.ZERO),this.node.angle+this.blurNode.angle,this.blurLife))}},e.prototype.onKill=function(){this.life+=this.killAddLife},e.prototype.onCollisionEnter=function(e,o){e.node.getComponent(d.default)===this.target&&(this.target=null,this.resetAngleSpd()),t.prototype.onCollisionEnter.call(this,e,o)},u([b({type:cc.Node,displayName:"\u6b8b\u5f71\u4e3b\u4f53"})],e.prototype,"blurNode",void 0),u([m],e)}(y.default);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],BulletTrack:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7a9090ESWtH8pQTUzalpHJ2","BulletTrack");var r=t,i=e,a=o;cc._RF.push(i,"7a9090ESWtH8pQTUzalpHJ2","BulletTrack");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MathUtil"),p=r("Bullet"),f=cc._decorator,d=f.ccclass,y=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastPos=null,e.useTime=0,e.passTime=0,e.startPosition=null,e.isEnableArrow=!0,e.targetUid=0,e}return l(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.target=e,this.targetUid=e.uid,this.startPosition=this.node.position.clone();var o=cc.Vec3.distance(this.node.position,e.bodyPosition);this.useTime=o/this.speed,this.passTime=0},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.lastPos=null},e.prototype.setPosition=function(t){this.node.position=cc.Vec2.lerp(this.node.position,this.startPosition,t,this.passTime/this.useTime),this.isEnableArrow&&(this.node.angle=s.default.getAngleByDir(this.node.position.sub(this.startPosition)))},e.prototype.logicUpdate=function(t){if(this.isEnable){var e=null;if(this.passTime=Math.min(this.passTime+t,this.useTime),this.passTime>=this.useTime)return this.hit(this.target),void this.remove();if(!cc.isValid(this.target)||this.target.isDead||this.targetUid!==this.target.uid){if(!this.lastPos)return void this.remove();this.target=null,e=this.lastPos}else e=this.target.bodyPosition,this.lastPos=e;this.setPosition(e)}},u([y({displayName:"\u662f\u5426\u59cb\u7ec8\u5bf9\u51c6\u76ee\u6807"})],e.prototype,"isEnableArrow",void 0),u([d],e)}(p.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],Bullet:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f09a6NvP/dJ/7ln/A9eX+Gk","Bullet");var r=t,i=e,a=o;cc._RF.push(i,"f09a6NvP/dJ/7ln/A9eX+Gk","Bullet");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Particle"),p=r("EventConfig"),f=r("EventHelper"),d=r("EffectManager"),y=r("Entity"),h=r("Skill"),m=cc._decorator,b=m.ccclass,v=m.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=600,e.hitEffect=null,e.target=null,e.attackData=null,e.onHit=null,e.param=null,e.penetrate=0,e.count=0,e.isEnable=!1,e.onRemoveCallback=null,e.particleList=[],e}return l(e,t),e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.isEnable=!0,this.node,this.particleList=this.node.getComponentsInChildren(s.default),this.particleList.forEach(function(t){return t.play()})},e.prototype.listenRemove=function(t){this.onRemoveCallback=t},e.prototype.setTarget=function(t){this.target=t},e.prototype.setData=function(t){this.attackData=t},e.prototype.setHitFunc=function(t){this.onHit=t},e.prototype.setPenetrate=function(t){this.attackData&&this.attackData.hasKey(h.AttackDataKey.InfinitePenetrate)?this.penetrate=-1:this.penetrate=t},e.prototype.onKill=function(){},e.prototype.hit=function(t){this.isEnable&&t&&!t.isDead&&(this.onHit&&this.onHit(t,this.node.position,this.attackData),this.hitEffect&&d.default.instance.create(this.hitEffect,t.bodyPosition,null,360*Math.random()),t.isDead&&this.onKill())},e.prototype.cleanup=function(){this.target=null,this.attackData=null,this.param=null,this.count=0,this.onHit=null,this.particleList.forEach(function(t){return t.cleanup()})},e.prototype.remove=function(){this.isEnable=!1,f.default.emit(p.default.RemoveBullet,this),this.onRemoveCallback&&this.onRemoveCallback(this)},e.prototype.onCollisionEnter=function(t){this.isEnable&&(this.hit(t.node.getComponent(y.default)),this.count++,this.count>this.penetrate&&this.penetrate>=0&&this.remove())},e.prototype.logicUpdate=function(){},u([v({displayName:"\u98de\u884c\u901f\u5ea6"})],e.prototype,"speed",void 0),u([v({type:cc.Prefab,displayName:"\u7740\u5f39\u7279\u6548"})],e.prototype,"hitEffect",void 0),u([b],e)}(cc.Component);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],ButtonCommon:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d42c4Qr0RpJoKePTNBT0yU/","ButtonCommon");var r=t,i=e,a=o;cc._RF.push(i,"d42c4Qr0RpJoKePTNBT0yU/","ButtonCommon");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(a,"__esModule",{value:!0});var p=r("SoundHelper"),f=r("MateralsLoader"),d=cc._decorator,y=d.ccclass,h=d.property,m=d.requireComponent,b=d.menu,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.soundFileName="Click",e.enableZoom=!0,e.materalsLoader=null,e.zoomPixel=5,e.btn=null,e.event=null,e}return l(e,t),e.prototype.onBtnClick=function(t){for(var e,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];p.default.playUiSfx("click"),""!==this.soundFileName&&p.default.playUiSfx(this.soundFileName),this.event&&(e=cc.Component.EventHandler).emitEvents.apply(e,s([[this.event],t],o))},e.prototype.setGary=function(t){this.materalsLoader&&this.materalsLoader.select(t?1:0)},e.prototype.onLoad=function(){this.btn=this.getComponent(cc.Button),this.enableZoom&&(this.btn.transition=cc.Button.Transition.SCALE,this.btn.zoomScale=1-Math.max(this.zoomPixel/this.node.width,this.zoomPixel/this.node.height)),this.btn.clickEvents.length>0&&(this.event=this.btn.clickEvents[0],this.btn.clickEvents=[new cc.Component.EventHandler],this.btn.clickEvents[0].target=this.node,this.btn.clickEvents[0].component="ButtonCommon",this.btn.clickEvents[0].handler="onBtnClick",this.btn.clickEvents[0].customEventData=this.event.customEventData)},e.prototype.start=function(){},e.prototype.update=function(){},u([h({displayName:"\u97f3\u6548"})],e.prototype,"soundFileName",void 0),u([h({displayName:"\u5f00\u542f\u7f29\u653e"})],e.prototype,"enableZoom",void 0),u([h({type:f.default,displayName:"\u6750\u8d28"})],e.prototype,"materalsLoader",void 0),u([y,b("\u81ea\u5b9a\u4e49\u63a7\u4ef6/Button \u901a\u7528\u6309\u94ae"),m(cc.Button)],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],ButtonSound:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"440b9VGH7ZJa73JwVzBLvSO","ButtonSound");var r=t,i=e,a=o;cc._RF.push(i,"440b9VGH7ZJa73JwVzBLvSO","ButtonSound");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(a,"__esModule",{value:!0});var p=r("SoundHelper"),f=cc._decorator,d=f.ccclass,y=f.property,h=f.requireComponent,m=f.menu,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.soundFileName="",e.btn=null,e.event=null,e}return l(e,t),e.prototype.onBtnClick=function(t){for(var e,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];p.default.playUiSfx(this.soundFileName),this.event&&(e=cc.Component.EventHandler).emitEvents.apply(e,s([[this.event],t],o))},e.prototype.onLoad=function(){this.btn=this.node.getComponent(cc.Button)},e.prototype.start=function(){this.btn=this.getComponent(cc.Button),this.event=this.btn.clickEvents[0],this.btn.clickEvents=[new cc.Component.EventHandler],this.btn.clickEvents[0].target=this.node,this.btn.clickEvents[0].component="ButtonSound",this.btn.clickEvents[0].handler="onBtnClick",this.btn.clickEvents[0].customEventData=this.event.customEventData},e.prototype.update=function(){},u([y({displayName:"\u6587\u4ef6\u540d"})],e.prototype,"soundFileName",void 0),u([d,m("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u6309\u94ae\u97f3\u6548"),h(cc.Button)],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],BuyTVFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d333cwt6J5ANaEsl2bRAdnB","BuyTVFrame");var r=t,i=e,a=o;cc._RF.push(i,"d333cwt6J5ANaEsl2bRAdnB","BuyTVFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameDefine"),d=r("FrameHelper"),y=r("LangHelper"),h=r("PlatformHelper"),m=r("RunDataHelper"),b=r("StaticDBHelper"),v=r("BagData"),g=r("DailyData"),_=r("TipsFrame"),w=r("GetItemFrame"),S=cc._decorator,R=S.ccclass,O=S.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.videoCount=null,e.diamPirce=null,e.videoGetNum=null,e.diamGetNum=null,e}return l(e,t),e.prototype.onVideClick=function(){var t=this;m.DataHelper.getData(g.default).videoBuyTVCount>0?h.PlatformHelper.video("BuyTV",function(){m.DataHelper.getData(g.default).reduceVideoBuyTVTimes(),m.DataHelper.getData(v.default).addItemCount(f.default.ItemPower,b.default.getConfig("videoBuyTVAddCount")),t.videoCount.string=y.default.getStr("ui.21")+"("+m.DataHelper.getData(g.default).videoBuyTVCount+")";var e=[];e.push({id:f.default.ItemPower,count:b.default.getConfig("videoBuyTVAddCount")}),d.default.showFrame(w.default,w.default.GetType.item,e)}):d.default.showFrame(_.default,11)},e.prototype.onDiamClick=function(){if(m.DataHelper.getData(v.default).getItemCount(f.default.ItemDiamondId)<b.default.getConfig("buyTVDiamCount"))d.default.showFrame(_.default,6);else if(m.DataHelper.getData(g.default).diamBuyTVCount>0){m.DataHelper.getData(g.default).reduceDiamBuyTVTimes(),m.DataHelper.getData(v.default).addItemCount(f.default.ItemPower,b.default.getConfig("buyTVAddCount")),m.DataHelper.getData(v.default).subItemCount(f.default.ItemDiamondId,100),this.diamPirce.string=b.default.getConfig("buyTVDiamCount")+"("+m.DataHelper.getData(g.default).diamBuyTVCount+")";var t=[];t.push({id:f.default.ItemPower,count:b.default.getConfig("buyTVAddCount")}),d.default.showFrame(w.default,w.default.GetType.item,t)}else d.default.showFrame(_.default,11)},e.prototype.onClickClose=function(){this.hideFrame()},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.videoCount.string=y.default.getStr("ui.21")+"("+m.DataHelper.getData(g.default).videoBuyTVCount+")",this.diamPirce.string=b.default.getConfig("buyTVDiamCount")+"("+m.DataHelper.getData(g.default).diamBuyTVCount+")",[2,!0]})})},e.prototype.start=function(){},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.videoGetNum.string="X"+b.default.getConfig("videoBuyTVAddCount"),this.diamGetNum.string="X"+b.default.getConfig("buyTVAddCount")},e.frameInfo={name:"BuyTVFrame",type:d.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/ShopFrame/BuyTVFrame",zIndex:9},u([O({type:cc.Label,displayName:"\u89c6\u9891\u6b21\u6570"})],e.prototype,"videoCount",void 0),u([O({type:cc.Label,displayName:"\u94bb\u77f3\u4ef7\u683c"})],e.prototype,"diamPirce",void 0),u([O({type:cc.Label,displayName:"\u89c6\u9891\u83b7\u5f97"})],e.prototype,"videoGetNum",void 0),u([O({type:cc.Label,displayName:"\u94bb\u77f3\u83b7\u5f97"})],e.prototype,"diamGetNum",void 0),u([R],e)}(d.FrameBase);a.default=P,cc._RF.pop(),cc._RF.pop()},{}],ByAddToDeskFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"8613bDnkSlDJoRB2TsS75DY","ByAddToDeskFrame");var r=t,i=e,a=o;cc._RF.push(i,"8613bDnkSlDJoRB2TsS75DY","ByAddToDeskFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("FrameHelper"),d=r("PlatformHelper"),y=r("RunDataHelper"),h=r("BagData"),m=r("DailyData"),b=r("BtnLayout"),v=r("GetItemFrame"),g=cc._decorator,_=g.ccclass,w=g.menu,S=g.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.diamCount=null,e.addToDesktop=null,e.rewardGet=null,e}return l(e,t),e.prototype.onClickClose=function(){this.hideFrame()},e.prototype.onClickAddToDesktop=function(){var t=this;d.PlatformHelper.addToDesktop(function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f");for(var e=0;e<b.default.addToDesktopReward.length;e++)y.DataHelper.getData(h.default).addItemCount(b.default.addToDesktopReward[e].id,b.default.addToDesktopReward[e].count);f.default.showFrame(v.default,v.default.GetType.item,b.default.addToDesktopReward),y.DataHelper.getData(m.default).AddToDesktop(),t.addToDesktop.active=!1,t.rewardGet.active=!0})},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(){return this.diamCount.string=b.default.addToDesktopReward[0].count.toString(),t=y.DataHelper.getData(m.default).addToDesk>0,this.addToDesktop.active=!t,this.rewardGet.active=t,[2,!0]})})},e.frameInfo={name:"ByAddToDeskFrame",type:f.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/ByteDance/ByAddToDeskFrame",zIndex:5},u([S({type:cc.Label,displayName:"\u94bb\u77f3\u5956\u52b1\u6570\u91cf"})],e.prototype,"diamCount",void 0),u([S({type:cc.Node,displayName:"\u6dfb\u52a0\u684c\u9762"})],e.prototype,"addToDesktop",void 0),u([S({type:cc.Node,displayName:"\u5956\u52b1\u5df2\u9886\u53d6"})],e.prototype,"rewardGet",void 0),u([_,w("\u754c\u9762/ByAddToDeskFrame \u6dfb\u52a0\u5de6\u9762\u754c\u9762")],e)}(f.FrameBase);a.default=R,cc._RF.pop(),cc._RF.pop()},{}],ByDanceFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"69e45qQewBPv5Z+CSX2w7wk","ByDanceFrame");var r=t,i=e,a=o;cc._RF.push(i,"69e45qQewBPv5Z+CSX2w7wk","ByDanceFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("MateralsLoader"),d=r("FrameHelper"),y=r("PlatformHelper"),h=r("RunDataHelper"),m=r("BagData"),b=r("DailyData"),v=r("TipsFrame"),g=r("BtnLayout"),_=r("GetItemFrame"),w=cc._decorator,S=w.ccclass,R=w.menu,O=w.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnName=null,e.diamCount=null,e.powerCount=null,e.btnLoader=null,e.checkType=0,e}return l(e,t),e.prototype.onClickClose=function(){this.hideFrame()},e.prototype.onClickReward=function(){var t=this;if(0!=this.checkType)if(2!=this.checkType){this.checkType=2,h.DataHelper.getData(b.default).SetByteRewardType(this.checkType),this.btnName.string="\u5df2\u9886\u53d6",this.btnLoader.select(1);for(var e=0;e<g.default.checkSceneReward.length;e++)h.DataHelper.getData(m.default).addItemCount(g.default.checkSceneReward[e].id,g.default.checkSceneReward[e].count);d.default.showFrame(_.default,_.default.GetType.item,g.default.checkSceneReward)}else d.default.showFrame(v.default,"\u5df2\u7ecf\u9886\u53d6\u8fc7\u5956\u52b1\u4e86");else y.PlatformHelper.navigateToScene(function(){console.log("\u524d\u5f80\u4fa7\u8fb9\u680f\u6210\u529f"),t.checkType=1,h.DataHelper.getData(b.default).SetByteRewardType(t.checkType),t.btnName.string="\u9886\u53d6\u5956\u52b1"})},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.checkType=h.DataHelper.getData(b.default).byteRewardType,this.btnName.string=0==this.checkType?"\u524d\u5f80\u4fa7\u8fb9\u680f":1==this.checkType?"\u9886\u53d6\u5956\u52b1":"\u5df2\u9886\u53d6",this.btnLoader.select(2==this.checkType?1:0),this.diamCount.string=g.default.checkSceneReward[0].count.toString(),this.powerCount.string=g.default.checkSceneReward[1].count.toString(),[2,!0]})})},e.frameInfo={name:"ByDanceFrame",type:d.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/ByteDance/ByDanceFrame",zIndex:5},u([O({type:cc.Label,displayName:"\u6309\u94ae\u540d\u79f0"})],e.prototype,"btnName",void 0),u([O({type:cc.Label,displayName:"\u94bb\u77f3\u5956\u52b1\u6570\u91cf"})],e.prototype,"diamCount",void 0),u([O({type:cc.Label,displayName:"\u4f53\u529b\u5956\u52b1\u6570\u91cf"})],e.prototype,"powerCount",void 0),u([O({type:f.default,displayName:"\u6309\u94ae\u6750\u8d28"})],e.prototype,"btnLoader",void 0),u([S,R("\u754c\u9762/ByDanceFrame \u4fa7\u8fb9\u680f\u754c\u9762")],e)}(d.FrameBase);a.default=P,cc._RF.pop(),cc._RF.pop()},{}],ByShareFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c3032PwvvxEgJpRd7s6EHRk","ByShareFrame");var r=t,i=e,a=o;cc._RF.push(i,"c3032PwvvxEgJpRd7s6EHRk","ByShareFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("MateralsLoader"),d=r("FrameHelper"),y=r("PlatformHelper"),h=r("RunDataHelper"),m=r("BagData"),b=r("DailyData"),v=r("TipsFrame"),g=r("BtnLayout"),_=r("GetItemFrame"),w=cc._decorator,S=w.ccclass,R=w.menu,O=w.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnName=null,e.coinCount=null,e.diamCount=null,e.btnLoader=null,e.checkType=0,e}return l(e,t),e.prototype.onClickClose=function(){this.hideFrame()},e.prototype.onClickReward=function(){var t=this;h.DataHelper.getData(b.default).byteShareTimes>=2&&d.default.showFrame(v.default,"\u4eca\u65e5\u5206\u4eab\u5956\u52b1\u5df2\u65e0\u5956\u52b1"),y.PlatformHelper.shareToFriend(function(){if(console.log("\u5206\u4eab\u6210\u529f"),!(h.DataHelper.getData(b.default).byteShareTimes>=2)){h.DataHelper.getData(b.default).AddByteShareTimes(),t.btnLoader.select(h.DataHelper.getData(b.default).byteShareTimes>=2?1:0);for(var e=0;e<g.default.shareReward.length;e++)h.DataHelper.getData(m.default).addItemCount(g.default.shareReward[e].id,g.default.shareReward[e].count);d.default.showFrame(_.default,_.default.GetType.item,g.default.shareReward),t.btnName.string="\u5206\u4eab\u9886\u5956("+h.DataHelper.getData(b.default).byteShareTimes+"/2)"}})},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.btnName.string="\u5206\u4eab\u9886\u5956("+h.DataHelper.getData(b.default).byteShareTimes+"/2)",this.btnLoader.select(h.DataHelper.getData(b.default).byteShareTimes>=2?1:0),this.coinCount.string=g.default.shareReward[0].count.toString(),this.diamCount.string=g.default.shareReward[1].count.toString(),[2,!0]})})},e.frameInfo={name:"ByShareFrame",type:d.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/ByteDance/ByShareFrame",zIndex:5},u([O({type:cc.Label,displayName:"\u6309\u94ae\u540d\u79f0"})],e.prototype,"btnName",void 0),u([O({type:cc.Label,displayName:"\u91d1\u5e01\u5956\u52b1\u6570\u91cf"})],e.prototype,"coinCount",void 0),u([O({type:cc.Label,displayName:"\u94bb\u77f3\u5956\u52b1\u6570\u91cf"})],e.prototype,"diamCount",void 0),u([O({type:f.default,displayName:"\u6309\u94ae\u6750\u8d28"})],e.prototype,"btnLoader",void 0),u([S,R("\u754c\u9762/ByShareFrame \u5206\u4eab\u6709\u793c\u754c\u9762")],e)}(d.FrameBase);a.default=P,cc._RF.pop(),cc._RF.pop()},{}],ByteDance:[function(t,e,o){"use strict";cc._RF.push(e,"45088LLH+tIgbWI1hTRnl4s","ByteDance");var n=t,r=e,i=o;cc._RF.push(r,"45088LLH+tIgbWI1hTRnl4s","ByteDance");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("ttPostbackCtl"),u=n("TipsFrame"),s=n("FrameHelper"),p=n("PlatformHelper"),f=["\u636e\u8bf4\u53ea\u67091%\u7684\u73a9\u5bb6\u80fd\u901a\u5173\u7b2c10\u5173\uff0c\u4f60\u80fd\u505a\u5230\u5417\uff1f","\u4fdd\u536b\u6211\u65b9\u96c5\u5178\u5a1c\uff01","\u7b56\u7565\u4e0e\u667a\u6167\u7684\u8003\u9a8c\uff0c\u7b49\u4f60\u6765\u6311\u6218\uff01","\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u5854\u9632\u6e38\u620f\uff0c\u70e7\u8111\u53c8\u597d\u73a9\uff01","\u9ad8\u667a\u5546\u624d\u80fd\u8fc7\u5173\u7684\u5854\u9632\u6e38\u620f"],d=["4u5nbmv6jl7ae71gbn"],y=function(t){function e(){var e=t.call(this)||this;return e.isInit=!1,e.videos=[],e.callbackSuccess=null,e.callbackFail=null,e.callbackCancel=null,e.callbackOnShow=null,e.videoIndex=0,e.banners=[],e.interstitials=[],e.gameRecorder=null,e.totalRecord=300,e.minRecord=3,e.recordTime=0,e.recordTimer=null,e.videoPath=null,e.recentAdTime=new Date,e.isRecordWait=!1,e}return c(e,t),e.prototype.init=function(){var t=this;return this.isInit?this:(this.isInit=!0,l.default.GetInstance().init(),d.forEach(function(e){var o=tt.createRewardedVideoAd({adUnitId:e,multiton:!1,multitonRewardMsg:[],multitonRewardTimes:1,progressTip:!1});l.default.GetInstance().adRequest("\u6fc0\u52b1\u89c6\u9891"),o&&(o.onClose(function(e){e.isEnded?(l.default.GetInstance().adImpressionDone("\u6fc0\u52b1\u89c6\u9891"),t.callbackSuccess&&t.callbackSuccess()):t.callbackCancel&&t.callbackCancel()}),o.onLoad(function(){l.default.GetInstance().adFill("\u6fc0\u52b1\u89c6\u9891")}),o.onError(function(e){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25",e),s.default.showFrame(u.default,"\u62c9\u53d6\u5e7f\u544a\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),t.callbackCancel&&t.callbackCancel()}),t.videos.push(o))}),tt.setKeepScreenOn({keepScreenOn:!0,success:function(){console.log("keepScreenOn Success")},fail:function(){console.log("keepScreenOn Fail")}}),this.gameRecorder=tt.getGameRecorderManager(),this)},e.prototype.showToast=function(t,e){tt.showToast({title:t,icon:e||"none",duration:2e3})},e.prototype.showLoading=function(t){tt.showLoading({title:t})},e.prototype.hideLoading=function(){tt.hideLoading()},e.prototype.startTimer=function(){var t=this;this.recordTime=0,this.recordTimer=setInterval(function(){t.recordTime++},100)},e.prototype.isSuccessRecord=function(){return console.log("Record Time : "+this.recordTime/10),this.recordTime/10>=this.minRecord},e.prototype.startRecord=function(t){var e=this;this.isRecording=!0,this.isRecordWait=!0,this.gameRecorder.start({duration:this.totalRecord}),this.gameRecorder.onStart(function(){console.log("onStartRecord"),e.startTimer(),t&&t()}),this.gameRecorder.onResume(function(){console.log("onResumeRecord"),e.startTimer()}),this.gameRecorder.onPause(function(){clearInterval(e.recordTimer)}),this.gameRecorder.onStop(function(t){console.log("onStopRecord"),e.isRecordWait=!1,e.videoPath=t.videoPath,console.log("this.videoPath\uff1a",e.videoPath),console.log("this.videoTime"+e.recordTime/10),clearInterval(e.recordTimer),e.callbackSuccess&&e.callbackSuccess()}),this.gameRecorder.onError(function(t){console.log("gameRecord error: ",t),e.showToast("\u5f55\u5c4f\u9519\u8bef!")})},e.prototype.stopRecord=function(t){if(this.callbackSuccess=t,!this.isRecordWait)return this.isRecording=!1,void(this.callbackSuccess&&this.callbackSuccess());this.gameRecorder.stop(),this.isRecording=!1},e.prototype.videoShare=function(t){var e=this;this.callbackSuccess=t,tt.shareAppMessage({title:"\u5c0f\u5175\u68a6\u5de5\u5382",channel:"video",extra:{videoTopics:f,hashtag_list:[],videoPath:this.videoPath,withVideoId:!0},success:function(){e.callbackSuccess&&e.callbackSuccess()},fail:function(t){console.log("videoShare fail: ",t),e.showToast("\u5206\u4eab\u89c6\u9891\u5931\u8d25"),tt.getSystemInfo({success:function(t){"ios"===t.platform&&"Toutiao"===t.appName&&e.callbackSuccess&&e.callbackSuccess()},fail:function(t){console.log("getSystemInfo fail: ",t)}})}})},e.prototype.share=function(){},e.prototype.shareToFriend=function(t){var e=this;console.log("shareToFriend"),this.callbackSuccess=t,tt.shareAppMessage({title:"\u5c0f\u5175\u68a6\u5de5\u5382",channel:"invite",success:function(t){cc.log("success: "+t),e.callbackSuccess&&e.callbackSuccess()},fail:function(t){console.log("invite fail: ",t),e.showToast("\u5206\u4eab\u597d\u53cb\u5931\u8d25"),tt.getSystemInfo({success:function(t){"ios"===t.platform&&"Toutiao"===t.appName&&e.callbackSuccess&&e.callbackSuccess()},fail:function(t){console.log("getSystemInfo fail: ",t)}})}})},e.prototype.video=function(t,e){var o=this;this.callbackSuccess=t,this.callbackCancel=e;var n=this.videos[this.videoIndex];n&&(l.default.GetInstance().adClick("\u6fc0\u52b1\u89c6\u9891"),this.showLoading("\u52a0\u8f7d\u4e2d..."),n.show().then(function(){o.hideLoading(),l.default.GetInstance().adImpression("\u6fc0\u52b1\u89c6\u9891")}).catch(function(){o.hideLoading(),console.log("\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5931\u8d25")}),this.videoIndex++,this.videoIndex>=this.videos.length&&(this.videoIndex=0))},e.prototype.onVideoLoad=function(){console.debug("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},e.prototype.onVideoError=function(t){console.debug("\u89c6\u9891\u5e7f\u544a\u9519\u8bef:",t)},e.prototype.onVideoClose=function(t){t&&t.isEnded||void 0===t?this.callbackSuccess&&this.callbackSuccess():(this.showToast("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u9886\u53d6\u5956\u52b1"),this.callbackCancel&&this.callbackCancel())},e.prototype.bannerShow=function(t){this.banners[t]&&this.banners[t].show()},e.prototype.bannerHide=function(t){this.banners[t]&&this.banners[t].hide()},e.prototype.onBannerError=function(t){console.debug("Banner\u9519\u8bef:",t)},e.prototype.onInterstitialError=function(t){console.debug("\u63d2\u5c4f\u5e7f\u544a\u9519\u8bef:",t)},e.prototype.interstitialShow=function(t){this.interstitials[t]&&this.interstitials[t].show().catch(function(){console.error("\u63d2\u5c4f\u52a0\u8f7d\u5931\u8d25")})},e.prototype.shake=function(){tt.vibrateShort({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}})},e.prototype.shakeLong=function(){tt.vibrateLong({success:function(t){console.log(t)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},e.prototype.isDebug=function(){return!0},e.prototype.byteDanceOnShow=function(t){var e=this;this.callbackOnShow=t,tt.onShow(function(t){console.log("\u542f\u52a8\u53c2\u6570\uff1a",t.query),console.log("\u6765\u6e90\u4fe1\u606f\uff1a",t.refererInfo),console.log("\u573a\u666f\u503c\uff1a",t.scene),console.log("\u542f\u52a8\u573a\u666f\u5b57\u6bb5\uff1a",t.launch_from,", ",t.location),"homepage"==t.launch_from&&"sidebar_card"==t.location&&e.callbackOnShow&&e.callbackOnShow()})},e.prototype.checkScene=function(t){var e=this;this.callbackSuccess=t,tt.checkScene({scene:"sidebar",success:function(t){e.callbackSuccess&&e.callbackSuccess(),console.log("check scene success: ",t.isExist)},fail:function(t){console.log("check scene fail:",t)}})},e.prototype.navigateToScene=function(t){var e=this;this.callbackSuccess=t,tt.navigateToScene({scene:"sidebar",success:function(){e.callbackSuccess&&e.callbackSuccess(),console.log("navigate to scene success")},fail:function(t){console.log("navigate to scene fail: ",t)}})},e.prototype.addToDesktop=function(t){tt.checkShortcut({success:function(t){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f",t.status)},fail:function(t){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",t.errMsg)}}),tt.addShortcut({success:function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),t&&t()},fail:function(t){console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",t.errMsg)}})},e.prototype.login=function(){return new Promise(function(t,e){tt.login({force:!0,success:function(t){t.code||(console.log("\u767b\u5f55\u5931\u8d25\uff01"+t.errMsg),e(t.errMsg))},complete:function(t){cc.log(t.errMsg)},fail:function(t){console.log("\u767b\u5f55\u5931\u8d25\uff01"+t.errMsg),e(t.errMsg)}})})},e}(p.Platform);i.default=y,cc.sys.BYTEDANCE_GAME===cc.sys.platform&&p.PlatformHelper.setPlatform(y),cc._RF.pop(),cc._RF.pop()},{}],CameraFollow:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2414f2QQz1CR7YSCJ8rjIw4","CameraFollow");var r=e,i=o;cc._RF.push(r,"2414f2QQz1CR7YSCJ8rjIw4","CameraFollow");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=u.requireComponent,d=u.menu,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeTarget=null,e.isEnableX=!0,e.isEnableY=!0,e.camera=null,e.posOffset=null,e}return c(e,t),e.prototype.onLoad=function(){this.camera=this.getComponent(cc.Camera);var t=this.nodeTarget.convertToWorldSpaceAR(cc.Vec2.ZERO);t=this.camera.node.parent.convertToNodeSpaceAR(t),this.posOffset=cc.v2(this.camera.node.position).sub(t),this.posOffset.y*=cc.view.getScaleY()},e.prototype.start=function(){},e.prototype.update=function(){var t=this.nodeTarget.convertToWorldSpaceAR(cc.Vec2.ZERO);t=this.camera.node.parent.convertToNodeSpaceAR(t).add(this.posOffset),this.isEnableX&&(this.camera.node.x=t.x),this.isEnableY&&(this.camera.node.y=t.y)},l([p({type:cc.Node,displayName:"\u76ee\u6807\u8282\u70b9"})],e.prototype,"nodeTarget",void 0),l([p({displayName:"X"})],e.prototype,"isEnableX",void 0),l([p({displayName:"Y"})],e.prototype,"isEnableY",void 0),l([s,d("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u6444\u50cf\u673a\u8ddf\u968f"),f(cc.Camera)],e)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],CardIcon:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f82dbFVlpVLw7lJ+A7p75Fn","CardIcon");var r=t,i=e,a=o;cc._RF.push(i,"f82dbFVlpVLw7lJ+A7p75Fn","CardIcon");var c,l,u,s=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},f=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},d=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var y=r("sdbCard"),h=r("AssetBundleHelper"),m=r("LangHelper"),b=r("StaticDBHelper"),v=r("IconBase"),g=cc._decorator,_=g.ccclass,w=g.property,S=((l={})[0]="Texture/UI/common/frame_common_blue",l[1]="Texture/UI/common/frame_common_blue",l[2]="Texture/UI/common/frame_common_green",l[3]="Texture/UI/common/frame_common_purple",l[4]="Texture/UI/common/frame_common_yellow",l),R=((u={})[0]="Texture/UI/common/frame_common_jiao_blue",u[1]="Texture/UI/common/frame_common_jiao_blue",u[2]="Texture/UI/common/frame_common_jiao_green",u[3]="Texture/UI/common/frame_common_jiao_purple",u[4]="Texture/UI/common/frame_common_jiao_yellow",u),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptBox=null,e.sptBoxEx=null,e.sptOcc=null,e.lbName=null,e}return s(e,t),Object.defineProperty(e.prototype,"isEnableTouch",{set:function(t){this._isEnableTouch!==t&&(this._isEnableTouch=t,this._isEnableTouch?(this.sptIcon.node.on(cc.Node.EventType.TOUCH_END,this.onSptClick,this),this.sptBox.node.addComponent(cc.BlockInputEvents)):(this.sptIcon.node.off(cc.Node.EventType.TOUCH_END,this.onSptClick,this),this.sptBox.node.removeComponent(cc.BlockInputEvents)))},enumerable:!1,configurable:!0}),e.prototype.init=function(e){return f(this,void 0,void 0,function(){var o;return d(this,function(n){switch(n.label){case 0:return[4,t.prototype.init.call(this,e)];case 1:return n.sent(),o=e.rootId===e.id?e:b.default.getData(y.default,e.rootId),this.lbName&&(this.lbName.string=m.default.getStr(e.name)),h.default.setSpriteFrame(this.sptBox,S[this.sdb.quality]),this.sptBoxEx&&h.default.setSpriteFrame(this.sptBoxEx,R[this.sdb.quality]),this.sptOcc&&h.default.setSpriteFrame(this.sptOcc,o.typeIcon),[2]}})})},e.prototype.start=function(){},p([w({type:cc.Sprite,displayName:"\u54c1\u8d28\u56fe"})],e.prototype,"sptBox",void 0),p([w({type:cc.Sprite,displayName:"\u54c1\u8d28\u56fe\u89d2\u6807\u80cc\u666f"})],e.prototype,"sptBoxEx",void 0),p([w({type:cc.Sprite,displayName:"\u89d2\u6807"})],e.prototype,"sptOcc",void 0),p([w({type:cc.Label,displayName:"\u540d\u5b57"})],e.prototype,"lbName",void 0),p([_],e)}(v.default);a.default=O,cc._RF.pop(),cc._RF.pop()},{}],CardInfoFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e445fCAto9GX7v/R5XNt5iV","CardInfoFrame");var r=t,i=e,a=o;cc._RF.push(i,"e445fCAto9GX7v/R5XNt5iV","CardInfoFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("sdbCard"),d=r("AssetBundleHelper"),y=r("FrameHelper"),h=r("StaticDBHelper"),m=cc._decorator,b=m.ccclass,v=m.menu,g=m.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptIcon=null,e.lbName=null,e.lbDesc=null,e.nodeStar=null,e.nodeClose=null,e}return l(e,t),e.prototype.beforeShow=function(t,e){return s(this,void 0,void 0,function(){var o;return p(this,function(){return o=h.default.getData(f.default,t),this.lbName.string=o.name,this.lbDesc.string=o.desc,this.nodeStar.active=e,d.default.setSpriteFrame(this.sptIcon,o.icon),[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:return e.sent(),this.nodeClose.on(cc.Node.EventType.TOUCH_END,this.hide,this),[2]}})})},e.prototype.start=function(){},e.frameInfo={name:"CardInfoFrame",type:y.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/CardInfoFrame",zIndex:30},u([g({type:cc.Sprite,displayName:"Icon"})],e.prototype,"sptIcon",void 0),u([g({type:cc.Label,displayName:"\u540d\u5b57"})],e.prototype,"lbName",void 0),u([g({type:cc.Label,displayName:"\u63cf\u8ff0"})],e.prototype,"lbDesc",void 0),u([g({type:cc.Node,displayName:"\u661f\u661f\u8282\u70b9"})],e.prototype,"nodeStar",void 0),u([g({type:cc.Node,displayName:"\u5173\u95ed"})],e.prototype,"nodeClose",void 0),u([b,v("\u754c\u9762/CardInfoFrame \u5361\u4fe1\u606f\u754c\u9762")],e)}(y.FrameBase);a.default=_,cc._RF.pop(),cc._RF.pop()},{}],ChessRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ce2231c8ARMZowePwy1FWVq","ChessRenderer");var r=t,i=e,a=o;cc._RF.push(i,"ce2231c8ARMZowePwy1FWVq","ChessRenderer");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.AnimationEvents=a.AnimationNames=void 0;var s=r("GameGlobaled"),p=cc._decorator,f=p.ccclass;p.property,function(t){t[t.None=0]="None",t[t.Stand=1]="Stand",t[t.Move=2]="Move",t[t.Attack=3]="Attack",t[t.Die=4]="Die",t[t.Hurt=5]="Hurt",t[t.Down=6]="Down",t[t.Compound=7]="Compound"}(a.AnimationNames||(a.AnimationNames={})),(a.AnimationEvents||(a.AnimationEvents={})).Attack="GJ";var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.size=cc.Size.ZERO,e.listenCompleteMap={},e.listenEventMap={},e}return l(e,t),e.prototype.getAnimationName=function(){return""},Object.defineProperty(e.prototype,"width",{get:function(){return this.size.width*s.default.gridSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.size.height*s.default.gridSize},enumerable:!1,configurable:!0}),e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.cleanup=function(){},e.prototype.logicUpdate=function(){},e.prototype.setAnimation=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return!0},e.prototype.listenAnimationComplete=function(t,e){this.listenCompleteMap[this.getAnimationName(t)]=e},e.prototype.listenAnimationEvent=function(t,e){this.listenEventMap[t]=e},e.prototype.onLoad=function(){for(var t=0,e=0;e<this.node.childrenCount;e++)"light"===this.node.children[e].group&&(this.node.children[e].name=this.node.name+"_light_"+t++)},e.prototype.start=function(){},u([f],e)}(cc.Component);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],ChessSpineRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6a573ooMn9NxZVl3Rwi0CvI","ChessSpineRenderer");var r=t,i=e,a=o;cc._RF.push(i,"6a573ooMn9NxZVl3Rwi0CvI","ChessSpineRenderer");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("EventHelper"),f=r("GameGlobaled"),d=r("ChessRenderer"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e.tweenHurt=null,e}return l(e,t),e.prototype.getAnimationName=function(){return""},e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.size.width=1,this.size.height=1},e.prototype.cleanup=function(){this.tweenHurt&&(this.tweenHurt.stop(),this.tweenHurt=null),this.spine&&(this.spine.node.color=cc.Color.WHITE)},e.prototype.setAnimation=function(t,e){var o=this;if(void 0===e&&(e=0),this.spine){this.spine.timeScale=f.default.speed;var n=null;switch(t){case d.AnimationNames.Attack:case d.AnimationNames.Die:case d.AnimationNames.Down:case d.AnimationNames.Compound:(n=this.getAnimationName(t))&&this.spine.setAnimation(e,n,!1);break;case d.AnimationNames.Move:case d.AnimationNames.Stand:(n=this.getAnimationName(t))&&this.spine.setAnimation(e,n,!0);break;case d.AnimationNames.Hurt:if(this.tweenHurt)break;var r=this.spine.node;this.tweenHurt=cc.tween(r).set({color:cc.color(255,255,50)}).delay(.1).call(function(){r.color=cc.Color.WHITE,o.tweenHurt=null}).start(f.default.speed)}return!0}},e.prototype.onAnimationComplete=function(t){var e=this.listenCompleteMap[t.animation.name];e&&e()},e.prototype.onAnimationEvent=function(t,e){var o=this.listenEventMap[e.data.name];o&&o()},e.prototype.onGameSpeedChange=function(t){this.spine&&(this.spine.timeScale=t)},e.prototype.onLoad=function(){var e,o;t.prototype.onLoad.call(this),null===(e=this.spine)||void 0===e||e.setCompleteListener(this.onAnimationComplete.bind(this)),null===(o=this.spine)||void 0===o||o.setEventListener(this.onAnimationEvent.bind(this)),p.default.on(s.default.GameSpeedChange,this.onGameSpeedChange,this)},e.prototype.start=function(){},u([m({type:sp.Skeleton,displayName:"\u9aa8\u9abc\u52a8\u753b"})],e.prototype,"spine",void 0),u([h],e)}(d.default);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],ChessSpriteRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"fce0fHqAbxHnLB5McDYGYFD","ChessSpriteRenderer");var r=t,i=e,a=o;cc._RF.push(i,"fce0fHqAbxHnLB5McDYGYFD","ChessSpriteRenderer");var c,l,u=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var p=r("ChessRenderer"),f=cc._decorator,d=f.ccclass,y=(f.property,(l={})[p.AnimationNames.Attack]="attack",l[p.AnimationNames.Stand]="wait",l),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getAnimationName=function(t){return y[t]},e.prototype.setAnimation=function(t){return t==p.AnimationNames.Attack&&this.onAnimationEvent(p.AnimationEvents.Attack),this.onAnimationComplete(this.getAnimationName(t)),!0},e.prototype.onAnimationComplete=function(t){var e=this.listenCompleteMap[t];e&&e()},e.prototype.onAnimationEvent=function(t){var e=this.listenEventMap[t];e&&e()},e.prototype.onLoad=function(){},s([d],e)}(p.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],CocosUtil:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f2b0fzcAWVKYZDQYDHeNCid","CocosUtil");var r=e,i=o;cc._RF.push(r,"f2b0fzcAWVKYZDQYDHeNCid","CocosUtil");var a=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},c=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function t(){}return t.instantiate=function(t){return cc.instantiate(t)},t.TweenExpand=function(){var t=cc.Tween.prototype.start;cc.Tween.prototype.start=function(e){void 0===e&&(e=0);var o=t.call(this);return e>0&&this.timeScale(e),o},cc.Tween.prototype.asyncStart=function(t){return void 0===t&&(t=0),a(this,void 0,void 0,function(){var e=this;return c(this,function(){return[2,new Promise(function(o){e.call(function(){o(null)}).start(t)})]})})},cc.Tween.prototype.timeScale=function(t){return this._finalAction&&(this._finalAction._speedMethod=!0,this._finalAction._speed=t),this}},t.OpenCollision=function(){cc.director.getCollisionManager().enabled=!0,cc.sys.WECHAT_GAME,cc.sys.platform},t.CollisionLogicUpdate=function(t){var e=cc.director.getCollisionManager(),o=e.enabled;e.enabled=!0,e.update(t),e.enabled=o},t.SpineExpand=function(){sp.Skeleton.prototype.getAnimationTimeByName=function(t){var e=this.getState();if(null==e)throw"[ERROR SPINE ANIMATION] \u65e0\u6cd5\u83b7\u53d6\u83b7\u53d6\u52a8\u753b\u72b6\u6001>";var o=e.data.skeletonData.animations,n=0;for(var r in o)if(Object.prototype.hasOwnProperty.call(o,r)){var i=o[r];i.name==t&&(n=i.duration)}return n}},t.ParticlesBatching=function(){if(!this._originFillBuffersFn){var t=cc.ParticleSystem.__assembler__;this._originFillBuffersFn=t.prototype.fillBuffers,t.prototype.fillBuffers=function(t,e){if(this._ia){var o=t._simulator.particles.length;if(0!==o){var n=cc.ParticleSystem.PositionType;t.positionType===n.RELATIVE?e.node=t.node.parent:e.node=t.node;var r=this.getBuffer(),i=cc.renderer._handle._meshBuffer,a=i.request(4*o,6*o),c=a.byteOffset>>2,l=i._vData,u=r._vData,s=r._iData,p=20*o;p+c>l.length?l.set(u.subarray(0,l.length-c),c):l.set(u.subarray(0,p),c);for(var f=i._iData,d=a.indiceOffset,y=a.vertexOffset,h=6*o,m=0;m<h;m++)f[d++]=y+s[m]}}}}},t.ParticlesBatchingRecover=function(){this._originFillBuffersFn&&(cc.ParticleSystem.__assembler__.prototype.fillBuffers=this._originFillBuffersFn,this._originFillBuffersFn=null)},t.setGroup=function(e,o){e.group=o;for(var n=0;n<e.children.length;n++)t.setGroup(e.children[n],o)},t.deepClone=function(e){if(null===e||"object"!=n(e))return e;var o=Array.isArray(e)?[]:{};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=t.deepClone(e[r]));return o},t.tween=function(){},t._originFillBuffersFn=null,t}();i.default=l,cc._RF.pop(),cc._RF.pop()},{}],CoinItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"79789gPbipK3rpR+n7FoPbf","CoinItem");var r=t,i=e,a=o;cc._RF.push(i,"79789gPbipK3rpR+n7FoPbf","CoinItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("LangHelper"),p=r("RunDataHelper"),f=r("StaticDBHelper"),d=r("DailyData"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.countLb=null,e.costLb=null,e.videoIcon=null,e.costIcon=null,e}return l(e,t),e.prototype.setItem=function(t){var e=p.DataHelper.getData(d.default).shopCoinFreeTimes>=f.default.getConfig("DayCoinTimes"),o=p.DataHelper.getData(d.default).shopCoinFreeTimes;this.countLb.string="X"+t.count,this.videoIcon.active=0==t.costType&&!e,this.costIcon.active=1==t.costType;var n=e?s.default.getStr("shop.16"):s.default.formatStr("shop.12",{free:o,max:f.default.getConfig("DayCoinTimes")-1});this.costLb.string=0==t.costType?n:t.cost.toString()},u([m({type:cc.Label,displayName:"\u6570\u91cf"})],e.prototype,"countLb",void 0),u([m({type:cc.Label,displayName:"\u6d88\u8017"})],e.prototype,"costLb",void 0),u([m({type:cc.Node,displayName:"\u89c6\u9891\u56fe\u6807"})],e.prototype,"videoIcon",void 0),u([m({type:cc.Node,displayName:"\u82b1\u8d39icon"})],e.prototype,"costIcon",void 0),u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],ColliderTarget:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"dce27uTLoJFTaB6CsSG3+qG","ColliderTarget");var r=e,i=o;cc._RF.push(r,"dce27uTLoJFTaB6CsSG3+qG","ColliderTarget");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enter=new cc.Component.EventHandler,e.stay=new cc.Component.EventHandler,e.exit=new cc.Component.EventHandler,e}return c(e,t),e.prototype.onCollisionEnter=function(t,e){var o;null===(o=this.enter)||void 0===o||o.emit([t,e])},e.prototype.onCollisionStay=function(t,e){var o;null===(o=this.stay)||void 0===o||o.emit([t,e])},e.prototype.onCollisionExit=function(t,e){var o;null===(o=this.exit)||void 0===o||o.emit([t,e])},e.prototype.start=function(){},l([p({type:cc.Component.EventHandler,displayName:"Enter"})],e.prototype,"enter",void 0),l([p({type:cc.Component.EventHandler,displayName:"Stay"})],e.prototype,"stay",void 0),l([p({type:cc.Component.EventHandler,displayName:"Exit"})],e.prototype,"exit",void 0),l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],ContentScroll:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"accfdDCW4tMQ6dDbnSQlzk3","ContentScroll");var r=t,i=e,a=o;cc._RF.push(i,"accfdDCW4tMQ6dDbnSQlzk3","ContentScroll");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ScrollList"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.inertia=!1,e.minOffset=0,e.curOffSet=0,e.tempIndex=-1,e.isScrolling=!1,e.isClick=!1,e.cilckIndex=-1,e}var o;return l(e,t),o=e,Object.defineProperty(e.prototype,"index",{get:function(){return this.tempIndex},enumerable:!1,configurable:!0}),e.prototype.onscrollBegin=function(){},e.prototype.onScrolling=function(){},e.prototype.onScrollEnded=function(){},e.prototype.onTouchEnd=function(){},e.prototype.scrollToIndex=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=.45),this.isClick&&(this.cilckIndex=t);var i=this.padding.left+(t-1)*(this.spacing.x+this.prefabSize.width)+this.prefabSize.width/2-this.node.width/2;if(!(Math.abs(this.scrollView.getScrollOffset().x+i)<1)){this.scrollView.scrollToOffset(cc.v2(i,0),(this.isClick,r));var a=null;this.tempIndex>-1&&this.tempIndex!=t&&(a=this.nodeList[this.tempIndex-1]),this.node.emit(o.ComponentEvent,t,a),this.tempIndex=t}},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.scrollView.node.on("scroll-began",this.onscrollBegin.bind(this)),this.scrollView.node.on("scrolling",this.onScrolling.bind(this)),this.scrollView.node.on("scroll-ended",this.onScrollEnded.bind(this)),this.scrollView.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.padding.left=this.node.width/2,this.padding.right=this.node.width/2;var e=this.layoutNode.getComponent(cc.Layout);e.paddingLeft=this.padding.left,e.paddingRight=this.padding.right,e.paddingTop=this.padding.top,e.paddingBottom=this.padding.bottom,this.scrollView.inertia=this.inertia},e.ComponentEvent="ComponentEvent",u([d({displayName:"\u6ed1\u52a8\u60ef\u6027"})],e.prototype,"inertia",void 0),u([d({step:0,displayName:"\u6700\u5c0f\u504f\u79fb\u91cf"})],e.prototype,"minOffset",void 0),o=u([f,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u6eda\u52a8\u5c45\u4e2d\u5217\u8868")],e)}(s.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],ContinueFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"78e3bJ8kOdC+qN9kmKl8iOq","ContinueFrame");var r=t,i=e,a=o;cc._RF.push(i,"78e3bJ8kOdC+qN9kmKl8iOq","ContinueFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("sdbStage"),d=r("FrameHelper"),y=r("RunDataHelper"),h=r("StaticDBHelper"),m=r("GameData"),b=r("GameFrame"),v=r("GameLoadingFrame"),g=r("MainFrame"),_=cc._decorator,w=_.ccclass,S=_.menu,R=_.property,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.continueBtn=null,e}return l(e,t),e.prototype.onCloseFrame=function(){this.hideFrame(),y.DataHelper.getData(m.default).cleanup()},e.prototype.onClickContinue=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return(t=h.default.filterData(f.default,{type:y.DataHelper.getData(m.default).stageType,stage:y.DataHelper.getData(m.default).stage})[0])?(this.continueBtn.interactable=!1,[4,d.default.showFrame(v.default)]):(this.hideFrame(),y.DataHelper.getData(m.default).cleanup(),[2]);case 1:return e.sent(),[4,d.default.showFrame(b.default,t)];case 2:return e.sent(),this.hideFrame(),d.default.hideFrame(g.default),[2]}})})},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.continueBtn.interactable=!0,[2,!0]})})},e.prototype.start=function(){},e.frameInfo={name:"ContinueFrame",type:d.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/ContinueFrame",zIndex:10},u([R({type:cc.Button,displayName:"\u7ee7\u7eed\u6309\u94ae"})],e.prototype,"continueBtn",void 0),u([w,S("\u754c\u9762/ContinueFrame \u7ee7\u7eed\u6218\u6597\u754c\u9762\u754c\u9762")],e)}(d.FrameBase);a.default=O,cc._RF.pop(),cc._RF.pop()},{}],CreateTask:[function(t,e,o){"use strict";cc._RF.push(e,"1778cGfhKtJjoVVPPV3/oMB","CreateTask");var n=e,r=o;cc._RF.push(n,"1778cGfhKtJjoVVPPV3/oMB","CreateTask"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e,o){void 0===o&&(o=null),this.interval=0,this.count=0,this.callback=null,this.param=null,this.time=0,this.index=0,this.isStart=!1,this.param=o,this.interval=t,this.callback=e}return Object.defineProperty(t.prototype,"isFinish",{get:function(){return!this.isStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return this.time/this.interval},enumerable:!1,configurable:!0}),t.prototype.start=function(t,e){void 0===e&&(e=0),this.time=this.interval-e,this.index=0,this.count=t,this.isStart=!0},t.prototype.stop=function(){this.isStart=!1},t.prototype.logicUpdate=function(t){if(this.isStart)for(this.time+=t;this.time>this.interval;)if(this.time-=this.interval,this.callback(this.index,this.param),this.index++,this.index>=this.count)return void(this.isStart=!1)},t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],DailyData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0e50aq/hThMTK8nlKKVOcHp","DailyData");var r=t,i=e,a=o;cc._RF.push(i,"0e50aq/hThMTK8nlKKVOcHp","DailyData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("TipsFrame"),p=r("FrameHelper"),f=r("RunDataHelper"),d=r("StaticDBHelper"),y=r("TimeUtil"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultData=function(){return{recoverTime:0,shopCoinFreeTimes:0,shopDiamFreeTimes:0,shopDayRefFreeTimes:0,premBoxVideoTimes:0,comBoxFreeGetTime:0,dayBuyList:[],winDoubleVideoTimes:0,videoHeroLvUpTimes:0,videoBuyTVCount:0,diamBuyTVCount:0,byteRewardType:0,byteShareTimes:0,addToDesk:0,videoBuyItemList:[0,0,0]}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"DailyData"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"comBoxFreeGetTime",{get:function(){return this.data.comBoxFreeGetTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"premBoxVideoTimes",{get:function(){return this.data.premBoxVideoTimes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shopCoinFreeTimes",{get:function(){return this.data.shopCoinFreeTimes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shopDiamFreeTimes",{get:function(){return this.data.shopDiamFreeTimes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shopDayRefFreeTimes",{get:function(){return 0|this.data.shopDayRefFreeTimes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"winDoubleVideoTimes",{get:function(){return 0|this.data.winDoubleVideoTimes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoHeroLvUpTimes",{get:function(){return 0|this.data.videoHeroLvUpTimes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoBuyTVCount",{get:function(){return 0|this.data.videoBuyTVCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diamBuyTVCount",{get:function(){return 0|this.data.diamBuyTVCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteRewardType",{get:function(){return 0|this.data.byteRewardType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"byteShareTimes",{get:function(){return 0|this.data.byteShareTimes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addToDesk",{get:function(){return 0|this.data.addToDesk},enumerable:!1,configurable:!0}),e.prototype.getVideoBuyItemList=function(t){return this.data.videoBuyItemList||(this.data.videoBuyItemList=[0,0,0]),this.data.videoBuyItemList[t]},e.prototype.refreshDataByTodayTime=function(){var t=y.default.getTodayStartTimestamp();this.data.recoverTime<t&&(this.data.recoverTime=t,this.data.shopDiamFreeTimes=d.default.getConfig("DayDiamondTiems"),this.data.shopCoinFreeTimes=d.default.getConfig("DayCoinTimes"),this.data.shopDayRefFreeTimes=d.default.getConfig("DayRefreshTimes"),this.data.premBoxVideoTimes=d.default.getConfig("premBoxVideoTimes"),this.data.winDoubleVideoTimes=d.default.getConfig("winDoubleVideoTimes"),this.data.videoHeroLvUpTimes=d.default.getConfig("videoHeroLvUpTimes"),this.data.videoBuyTVCount=d.default.getConfig("videoBuyTVCount"),this.data.diamBuyTVCount=d.default.getConfig("diamBuyTVCount"),this.data.dayBuyList=[],this.data.byteRewardType=0,this.data.byteShareTimes=0,this.data.videoBuyItemList=[0,0,0],this.isDirty=!0)},e.prototype.loadLocalStorage=function(){t.prototype.loadLocalStorage.call(this),this.refreshDataByTodayTime()},e.prototype.addVideoBuyItem=function(t){this.data.videoBuyItemList[t]+=1},e.prototype.subWinDouble=function(){0!=this.data.winDoubleVideoTimes&&this.data.winDoubleVideoTimes--},e.prototype.addDayBuyList=function(t){this.data.dayBuyList.push({id:t,isBuy:!1})},e.prototype.BuyShopItem=function(t){for(var e=0;e<this.data.dayBuyList.length;e++)if(this.data.dayBuyList[e].id==t){this.data.dayBuyList[e].isBuy=!0;break}},e.prototype.ShopIDIsInDayBuyList=function(t){for(var e=0;e<this.data.dayBuyList.length;e++)if(this.data.dayBuyList[e].id==t)return this.data.dayBuyList[e].isBuy;return!0},e.prototype.cleanDayBuyList=function(){this.data.dayBuyList=[]},Object.defineProperty(e.prototype,"dayBuyList",{get:function(){return this.data.dayBuyList?this.data.dayBuyList:[]},enumerable:!1,configurable:!0}),e.prototype.reduceShopCoinFreeTimes=function(){return this.data.shopCoinFreeTimes<=0?(p.default.showFrame(s.default,"tips.3"),!1):(this.data.shopCoinFreeTimes-=1,!0)},e.prototype.reduceShopDiamFreeTimes=function(){return this.data.shopDiamFreeTimes<=0?(p.default.showFrame(s.default,"tips.3"),!1):(this.data.shopDiamFreeTimes-=1,!0)},e.prototype.reduceShopDayRefFreeTimes=function(){return this.data.shopDayRefFreeTimes<=0?(p.default.showFrame(s.default,"tips.3"),!1):(this.data.shopDayRefFreeTimes-=1,!0)},e.prototype.setComBoxFreeGetTime=function(t){this.data.comBoxFreeGetTime=t},Object.defineProperty(e.prototype,"isShopRed",{get:function(){var t=d.default.getConfig("DayCoinTimes"),e=d.default.getConfig("DayDiamondTiems"),o=!1;return(this.data.shopCoinFreeTimes==t||this.data.shopDiamFreeTimes==e||this.isFreeComBox)&&(o=!0),o},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFreeComBox",{get:function(){if(0==this.data.comBoxFreeGetTime)return!0;var t=(new Date).getTime(),e=d.default.getConfig("comBoxFreeTime")*y.default.OneHourItemsOffset;return t-this.data.comBoxFreeGetTime>=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"comBoxFreeTime",{get:function(){if(0==this.data.comBoxFreeGetTime)return 0;var t=(new Date).getTime();return d.default.getConfig("comBoxFreeTime")*y.default.OneHourItemsOffset-(t-this.data.comBoxFreeGetTime)},enumerable:!1,configurable:!0}),e.prototype.reducePremBoxVideoTimes=function(){this.data.premBoxVideoTimes-=1},e.prototype.reduceHeroVideoTimes=function(){this.data.videoHeroLvUpTimes-=1},e.prototype.reduceVideoBuyTVTimes=function(){this.data.videoBuyTVCount-=1},e.prototype.reduceDiamBuyTVTimes=function(){this.data.diamBuyTVCount-=1},e.prototype.SetByteRewardType=function(t){this.data.byteRewardType=t},e.prototype.AddByteShareTimes=function(){this.data.byteShareTimes++},e.prototype.AddToDesktop=function(){this.data.addToDesk++},u([f.DirtyData],e.prototype,"addVideoBuyItem",null),u([f.DirtyData],e.prototype,"subWinDouble",null),u([f.DirtyData],e.prototype,"addDayBuyList",null),u([f.DirtyData],e.prototype,"BuyShopItem",null),u([f.DirtyData],e.prototype,"reduceShopCoinFreeTimes",null),u([f.DirtyData],e.prototype,"reduceShopDiamFreeTimes",null),u([f.DirtyData],e.prototype,"reduceShopDayRefFreeTimes",null),u([f.DirtyData],e.prototype,"setComBoxFreeGetTime",null),u([f.DirtyData],e.prototype,"reducePremBoxVideoTimes",null),u([f.DirtyData],e.prototype,"reduceHeroVideoTimes",null),u([f.DirtyData],e.prototype,"reduceVideoBuyTVTimes",null),u([f.DirtyData],e.prototype,"reduceDiamBuyTVTimes",null),u([f.DirtyData],e.prototype,"SetByteRewardType",null),u([f.DirtyData],e.prototype,"AddByteShareTimes",null),e}(f.RunDataBase);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],DailyTaskData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2c833rpWBdOMpT1FYasqXFo","DailyTaskData");var r=t,i=e,a=o;cc._RF.push(i,"2c833rpWBdOMpT1FYasqXFo","DailyTaskData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.TaskType=void 0;var s,p=r("EventConfig"),f=r("EventHelper"),d=r("RunDataHelper"),y=r("TimeUtil");(function(t){t[t.MainLine=1]="MainLine",t[t.KillMonster=2]="KillMonster",t[t.WatchAd=3]="WatchAd",t[t.ConsumeStamina=4]="ConsumeStamina",t[t.GetHangUp=5]="GetHangUp",t[t.QuickPatrol=6]="QuickPatrol",t[t.BuyItem=7]="BuyItem",t[t.DrawBox=8]="DrawBox"})(s=a.TaskType||(a.TaskType={}));var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultData=function(){return{recoverTime:0,activeValue:0,boxGetList:[],taskData:{}}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"DailyTaskData"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeValue",{get:function(){return this.data.activeValue>e.MAX_ACTIVE_VALUE?e.MAX_ACTIVE_VALUE:this.data.activeValue},enumerable:!1,configurable:!0}),e.prototype.isBoxGet=function(t){return this.data.boxGetList.includes(t)},e.prototype.getBox=function(t){return!this.data.boxGetList.includes(t)&&(this.data.boxGetList.push(t),f.default.emit(p.default.refreshMainRed,"dailyTask"),!0)},e.prototype.isShowBoxRedPoint=function(t){for(var e=!1,o=0;o<this.data.boxGetList.length;o++)if(this.data.boxGetList[o]==t){e=!0;break}return!e&&this.activeValue>=t},e.prototype.getTaskProgress=function(t){var e=this.data.taskData[t].progress;return e>this.data.taskData[t].count&&(e=this.data.taskData[t].count),e},e.prototype.addTaskProgress=function(t,e){void 0===e&&(e=1),this.data.taskData[t].progress+=e,this.data.taskData[t].progress==this.data.taskData[t].count&&f.default.emit(p.default.refreshMainRed,"dailyTask")},e.prototype.getTaskReward=function(t){return!this.data.taskData[t].isGet&&(this.data.taskData[t].isGet=!0,this.data.activeValue+=this.data.taskData[t].activeValue,f.default.emit(p.default.refreshMainRed,"dailyTask"),!0)},Object.defineProperty(e.prototype,"isDailyTaskRed",{get:function(){for(var t=!1,e=[20,40,60,100],o=0;o<e.length;o++)if(this.isShowBoxRedPoint(e[o])){t=!0;break}if(!t)for(var n in this.data.taskData)if(!this.data.taskData[n].isGet&&this.data.taskData[n].progress>=this.data.taskData[n].count){t=!0;break}return t},enumerable:!1,configurable:!0}),e.prototype.getTaskData=function(){return Object.values(this.data.taskData)},e.prototype.loadLocalStorage=function(){t.prototype.loadLocalStorage.call(this),this.refreshDataByTodayTime()},e.prototype.refreshDataByTodayTime=function(){var t,e=y.default.getTodayStartTimestamp();this.data.recoverTime<e&&(this.data.recoverTime=e,this.data.activeValue=0,this.data.boxGetList=[],this.data.taskData=((t={})[s.MainLine]={id:s.MainLine,name:"\u6311\u62181\u6b21\u4e3b\u7ebf\u5173\u5361",count:1,activeValue:20,isGet:!1,progress:0},t[s.KillMonster]={id:s.KillMonster,name:"\u51fb\u67402000\u53ea\u602a\u7269",count:2e3,activeValue:20,isGet:!1,progress:0},t[s.WatchAd]={id:s.WatchAd,name:"\u89c2\u770b5\u4e2a\u5e7f\u544a\u89c6\u9891",count:5,activeValue:20,isGet:!1,progress:0},t[s.ConsumeStamina]={id:s.ConsumeStamina,name:"\u6d88\u801730\u70b9\u4f53\u529b",count:30,activeValue:20,isGet:!1,progress:0},t[s.GetHangUp]={id:s.GetHangUp,name:"\u9886\u53d61\u6b21\u6302\u673a\u6536\u76ca",count:1,activeValue:20,isGet:!1,progress:0},t[s.QuickPatrol]={id:s.QuickPatrol,name:"\u5728\u6302\u673a\u6536\u76ca\u4e2d\u5feb\u901f\u5de1\u903b1\u6b21",count:1,activeValue:20,isGet:!1,progress:0},t[s.BuyItem]={id:s.BuyItem,name:"\u5728\u6bcf\u65e5\u5546\u5e97\u4e2d\u8d2d\u4e701\u4e2a\u9053\u5177",count:1,activeValue:20,isGet:!1,progress:0},t[s.DrawBox]={id:s.DrawBox,name:"\u5728\u6bcf\u65e5\u5546\u5e97\u4e2d\u62bd1\u6b21\u5b9d\u7bb1",count:1,activeValue:20,isGet:!1,progress:0},t))},e.MAX_TASK_COUNT=8,e.MAX_ACTIVE_VALUE=100,u([d.DirtyData],e.prototype,"getBox",null),u([d.DirtyData],e.prototype,"addTaskProgress",null),u([d.DirtyData],e.prototype,"getTaskReward",null),u([d.DirtyData],e.prototype,"refreshDataByTodayTime",null),e}(d.RunDataBase);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],DailyTaskFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"4c7d0dABNFLe7ntNRql7FP2","DailyTaskFrame");var r=t,i=e,a=o;cc._RF.push(i,"4c7d0dABNFLe7ntNRql7FP2","DailyTaskFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("ScrollList"),d=r("GameDefine"),y=r("FrameHelper"),h=r("RunDataHelper"),m=r("DailyTaskData"),b=r("TaskBox"),v=r("TaskItem"),g=cc._decorator,_=g.ccclass,w=g.menu,S=g.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.taskBoxList=[],e.taskList=null,e.taskProgress=null,e.activeLabel=null,e.taskDataList=[],e.boxRewardList=[],e}var o;return l(e,t),o=e,e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.refresh(),[2,!0]})})},e.prototype.refresh=function(){var t=h.DataHelper.getData(m.default).activeValue;this.activeLabel.string=t+"",this.taskProgress.progress=t/100;for(var e=0;e<this.taskBoxList.length;e++)this.taskBoxList[e].initBox(this.boxRewardList[e]);this.refreshTask()},e.prototype.onTaskListCreate=function(t,e){t.getComponent(v.default).refreshTask(this.taskDataList[e])},e.prototype.refreshTask=function(){this.taskDataList=h.DataHelper.getData(m.default).getTaskData(),this.taskDataList.sort(function(t,e){if(t.isGet!==e.isGet)return t.isGet?1:-1;var o=t.progress>=t.count?1:0;return(e.progress>=e.count?1:0)-o}),this.taskList.createItemsByLength(this.taskDataList.length)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.boxRewardList=[{id:d.default.ItemCoinId,count:500},{id:d.default.ItemHeroGemId,count:2},{id:d.default.ItemPower,count:10},{id:d.default.ItemDiamondId,count:100}],this.taskList.onItemCreate(this.onTaskListCreate.bind(this)),this.node.on(o.REFRESH_TASK,this.refresh,this)},e.REFRESH_TASK="refreshtask",e.frameInfo={name:"DailyTaskFrame",type:y.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/DailyTaskFrame",zIndex:9},u([S({type:b.default,displayName:"\u4efb\u52a1\u5b9d\u7bb1\u5217\u8868"})],e.prototype,"taskBoxList",void 0),u([S({type:f.default,displayName:"\u4efb\u52a1\u5217\u8868"})],e.prototype,"taskList",void 0),u([S({type:cc.ProgressBar,displayName:"\u4efb\u52a1\u8fdb\u5ea6\u6761"})],e.prototype,"taskProgress",void 0),u([S({type:cc.Label,displayName:"\u7d2f\u8ba1\u6d3b\u8dc3"})],e.prototype,"activeLabel",void 0),o=u([_,w("\u754c\u9762/DailyTaskFrame \u626b\u8361\u754c\u9762")],e)}(y.FrameBase);a.default=R,cc._RF.pop(),cc._RF.pop()},{}],DamageBaseNumber:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"96797M+i7JBgb65uqPOsmOJ","DamageBaseNumber");var r=t,i=e,a=o;cc._RF.push(i,"96797M+i7JBgb65uqPOsmOJ","DamageBaseNumber");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Factory"),d=r("TimeUtil"),y=r("DamageNumber"),h=cc._decorator,m=h.ccclass,b=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBar=null,e}return l(e,t),e.prototype.init=function(t,e,o,n,r){return void 0===n&&(n=!1),s(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return this.onRemove=o,this.nodeBar=r,this.label.string=Math.ceil(t).toString(),this.node.position=e,[4,this.playAnimation()];case 1:return n.sent(),o(this),[2]}})})},e.prototype.cleanup=function(){this.tween&&(this.tween.stop(),this.tween=null),this.nodeBar&&(f.default.instance.remove(this.nodeBar),this.nodeBar=null)},e.prototype.playAnimation=function(){return s(this,void 0,void 0,function(){var t=this;return p(this,function(){return this.label.node.position=cc.Vec3.ZERO,this.tween?[2]:(this.tween=cc.tween(this.label.node).set({opacity:0,scale:.5}).parallel(cc.tween().to(.1,{opacity:255,scale:1}).delay(.2).to(.1,{opacity:0,scale:.5}),cc.tween().by(.4,{y:50-100*Math.random()}),cc.tween().by(.4,{x:50+50*Math.random()})).call(function(){t.tween=null}),[2,d.default.awaitTween(this.tween)])})})},e.prototype.start=function(){},u([m],e)}(y.default));a.default=b,cc._RF.pop(),cc._RF.pop()},{}],DamageManager:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2a9011N5lRKD7euTopgJLSc","DamageManager");var r=t,i=e,a=o;cc._RF.push(i,"2a9011N5lRKD7euTopgJLSc","DamageManager");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Factory"),d=r("DamageBaseNumber"),y=r("DamageNumber"),h=cc._decorator,m=h.ccclass,b=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.prefabCir=null,e.prefabPoison=null,e.prefabBase=null,e.prefabBaseBar=null,e.parent=null,e.list=[],e}var o;return l(e,t),o=e,e.prototype.createBaseDamage=function(t,e,o,n){return s(this,void 0,void 0,function(){var r,i,a;return p(this,function(c){switch(c.label){case 0:return[4,f.default.instance.create(this.prefabBaseBar)];case 1:return(r=c.sent()).parent=n,r.position=o,r.width=Math.max(e,2),r.zIndex=0,[4,f.default.instance.create(this.prefabBase)];case 2:return(i=c.sent()).parent=n,i.zIndex=2,(a=i.getComponent(d.default)).init(t,o,this.onRemoveDamage.bind(this),!1,r),this.list.push(a),[2,a]}})})},e.prototype.createDamage=function(t,e,o,n){return void 0===n&&(n=!1),s(this,void 0,void 0,function(){var r,i;return p(this,function(a){switch(a.label){case 0:return[4,f.default.instance.create(t)];case 1:return(r=a.sent()).parent=this.parent,(i=r.getComponent(y.default)).init(e,o,this.onRemoveDamage.bind(this),n),this.list.push(i),[2,i]}})})},e.prototype.create=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return[2,this.createDamage(this.prefab,t,e)]})})},e.prototype.createCrit=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return[2,this.createDamage(this.prefabCir,t,e,!0)]})})},e.prototype.createPoison=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return[2,this.createDamage(this.prefabPoison,t,e)]})})},e.prototype.onRemoveDamage=function(t){var e=this.list.indexOf(t);e>-1&&this.list.splice(e,1),t.cleanup(),f.default.instance.remove(t.node)},e.prototype.cleanup=function(){this.list.forEach(function(t){t.cleanup(),f.default.instance.remove(t.node)}),this.list=[]},e.prototype.onLoad=function(){o.instance=this},e.prototype.start=function(){},e.instance=null,u([b({type:cc.Prefab,displayName:"\u4f24\u5bb3\u9884\u5236\u4f53"})],e.prototype,"prefab",void 0),u([b({type:cc.Prefab,displayName:"\u4f24\u5bb3\u9884\u5236\u4f53 - \u66b4\u51fb"})],e.prototype,"prefabCir",void 0),u([b({type:cc.Prefab,displayName:"\u4f24\u5bb3\u9884\u5236\u4f53 - \u4e2d\u6bd2"})],e.prototype,"prefabPoison",void 0),u([b({type:cc.Prefab,displayName:"\u4f24\u5bb3\u9884\u5236\u4f53 - \u57fa\u5730"})],e.prototype,"prefabBase",void 0),u([b({type:cc.Prefab,displayName:"\u4f24\u5bb3\u9884\u5236\u4f53 - \u57fa\u5730\u8840\u6761"})],e.prototype,"prefabBaseBar",void 0),u([b({type:cc.Node,displayName:"\u7236\u8282\u70b9"})],e.prototype,"parent",void 0),o=u([m],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],DamageNumber:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7d7bdqvpIFE2Z3pVHU7YjYN","DamageNumber");var r=t,i=e,a=o;cc._RF.push(i,"7d7bdqvpIFE2Z3pVHU7YjYN","DamageNumber");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("TimeUtil"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.onRemove=null,e.tween=null,e.isCrit=!1,e}var o;return l(e,t),o=e,e.prototype.init=function(t,e,o,n){void 0===n&&(n=!1);for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];return s(this,void 0,void 0,function(){var r,i;return p(this,function(a){switch(a.label){case 0:return this.onRemove=o,this.label.string=Math.ceil(t).toString(),this.isCrit=n,r=40*(Math.random()-.5),i=20*(Math.random()-.5),this.node.position=cc.v3(e.x+r,e.y+i,e.z),[4,this.playAnimation()];case 1:return a.sent(),o(this),[2]}})})},e.prototype.cleanup=function(){this.tween&&(this.tween.stop(),this.tween=null)},e.updateDamageRecord=function(t){if(o.recentDamages.push(t),o.recentDamages.length>o.MAX_DAMAGE_RECORDS&&o.recentDamages.shift(),o.recentDamages.length>0){var e=o.recentDamages.reduce(function(t,e){return t+e},0);o.baseDamage=e/o.recentDamages.length}},e.prototype.playAnimation=function(){return s(this,void 0,void 0,function(){var t,e,n,r,i,a,c,l,u,s,d,y,h=this;return p(this,function(){return this.tween?[2]:(t=parseInt(this.label.string),o.updateDamageRecord(t),e=t/o.baseDamage,n=Math.min(1+.15*(Math.log10(t)-2),1.4),r=Math.min(Math.max(.8,.4*e),1.2),this.isCrit&&(n*=1.3,r*=1.2),i=Math.min(n*r,1.8),a=Math.min(1+.2*e,1.5),this.isCrit&&(a*=1.4),c=Math.min(40+30*e,100),l=Math.min(80+40*e,150),this.isCrit&&(c*=1.3,l*=1.2),u=this.isCrit?45*(Math.random()-.5):e>=2?30*(Math.random()-.5):0,s=[cc.easing.backOut,cc.easing.elasticOut,cc.easing.bounceOut],d=this.isCrit?cc.easing.bounceOut:s[Math.floor(Math.random()*s.length)],y=this.isCrit?Math.min(Math.max(.5,.7+.3*(e-1)),1.3):Math.min(Math.max(.6,.8+.3*(e-1)),1.5),this.tween=cc.tween(this.node).set({opacity:0,scale:.5*i,angle:0}).parallel(cc.tween().to(.15*y,{opacity:255,scale:i*a,angle:u},{easing:d}).to(.1*y,{scale:i}).delay(.15*y).to(.2*y,{opacity:0,scale:.5*i},{easing:cc.easing.sineIn}),cc.tween().by(.6*y,{y:c},{easing:cc.easing.quadOut}).by(.6*y,{x:(Math.random()-.5)*l},{easing:cc.easing.sineInOut})).call(function(){h.tween=null}),[2,f.default.awaitTween(this.tween)])})})},e.prototype.start=function(){},e.recentDamages=[],e.MAX_DAMAGE_RECORDS=30,e.baseDamage=100,u([h({type:cc.Label,displayName:"\u6587\u672c"})],e.prototype,"label",void 0),o=u([y],e)}(cc.Component);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],DamageRank:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"106da85QFFJgba5t24UqUuL","DamageRank");var r=t,i=e,a=o;cc._RF.push(i,"106da85QFFJgba5t24UqUuL","DamageRank");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("LayoutList"),d=r("EventConfig"),y=r("sdbTower"),h=r("AssetBundleHelper"),m=r("EventHelper"),b=r("StaticDBHelper"),v=cc._decorator,g=v.ccclass,_=v.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e.totalDpsLabel=null,e.damageInfos=[],e.totalDamage=0,e.startTime=0,e.isRecording=!1,e.hideTotalDps=!0,e}var o;return l(e,t),o=e,e.prototype.onLoad=function(){this.list.onItemCreate(this.onItemCreate.bind(this)),m.default.on(d.default.MonsterDamaged,this.onMonsterDamaged,this),this.startTime=Date.now(),this.isRecording=!0,this.schedule(this.updateDPS,1),this.totalDpsLabel.node.active=!this.hideTotalDps},e.prototype.onDestroy=function(){m.default.off(d.default.MonsterDamaged,this.onMonsterDamaged,this),this.unschedule(this.updateDPS)},e.prototype.updateDPS=function(){if(this.isRecording){for(var t=(Date.now()-this.startTime)/1e3,e=0,n=0,r=this.damageInfos;n<r.length;n++){var i=r[n];i.dps=t>0?i.realDamage/t:0,e+=i.dps}this.totalDpsLabel&&(this.totalDpsLabel.string="\u603bDPS: "+Math.floor(e)),o.totalDps=Math.floor(e),this.list.createItemsByLength(Math.min(this.damageInfos.length,7))}},e.prototype.onItemCreate=function(t,e){var o;return s(this,void 0,void 0,function(){var n,r,i,a,c,l,u,s,f,d,m;return p(this,function(){return(n=this.damageInfos[e])?(t.active=!0,this.hideTotalDps&&(t.opacity=255-90*e,t.scale=1-.1*e),r=t.getChildByName("ProgressBar").getComponent(cc.ProgressBar),i=t.getChildByName("DamageLabel").getComponent(cc.Label),a=t.getChildByName("TypeIcon").getComponent(cc.Sprite),c=(null===(o=this.damageInfos[0])||void 0===o?void 0:o.realDamage)||1,l=Math.min(1,Math.max(0,c>0?n.realDamage/c:0)),r.progress=l,u=b.default.getData(y.default,n.buildingType),s=this.totalDamage>0?(n.realDamage/this.totalDamage*100).toFixed(1):"0",f=Math.floor(n.dps),d=Math.floor(n.realDamage),this.hideTotalDps?i.string=d+" ("+s+"%)":i.string=u.name+": "+d+" ("+s+"%) DPS:"+f,m=u.icon,(a.name=m)&&h.default.setSpriteFrame(a,m).then(function(){a.node.scale=Math.min(40/a.node.width,40/a.node.height)})):t.active=!1,[2]})})},e.prototype.onMonsterDamaged=function(t){var e=this.damageInfos.find(function(e){return e.buildingType===t.buildingType});e||(e=t,this.damageInfos.push(e),this.list.createItemsByLength(this.damageInfos.length)),e.realDamage=e.realDamage+t.realDamage,this.totalDamage=this.totalDamage+t.realDamage,this.updateRankList()},e.prototype.updateRankList=function(){this.damageInfos.sort(function(t,e){return e.realDamage-t.realDamage}),this.list.createItemsByLength(Math.min(this.damageInfos.length,7))},e.prototype.reset=function(){this.damageInfos=[],this.totalDamage=0,this.startTime=Date.now(),this.isRecording=!0,this.updateRankList()},e.prototype.pauseRecording=function(){this.isRecording=!1},e.prototype.resumeRecording=function(){var t;this.isRecording=!0,this.startTime=Date.now()-1e3*(this.totalDamage/(null===(t=this.damageInfos[0])||void 0===t?void 0:t.dps)||0)},e.totalDps=0,u([_(f.default)],e.prototype,"list",void 0),u([_({type:cc.Label,displayName:"\u603bDPS"})],e.prototype,"totalDpsLabel",void 0),o=u([g],e)}(cc.Component);a.default=w,cc._RF.pop(),cc._RF.pop()},{}],DayItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b82d9eAOEhBVYdQifzfdYqM","DayItem");var r=t,i=e,a=o;cc._RF.push(i,"b82d9eAOEhBVYdQifzfdYqM","DayItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.ShopListType=void 0;var s=r("LangHelper"),p=r("ImageLoader"),f=r("GameDefine"),d=r("sdbItem"),y=r("sdbShop"),h=r("AssetBundleHelper"),m=r("FrameHelper"),b=r("RunDataHelper"),v=r("StaticDBHelper"),g=r("BagData"),_=r("DailyData"),w=r("Tools"),S=r("TipsFrame"),R=r("GetItemFrame"),O=r("ShopBuyFrame"),P=cc._decorator,F=P.ccclass,T=P.property;(function(t){t[t.coin=2]="coin",t[t.cardBox=1]="cardBox",t[t.diamond=3]="diamond",t[t.debris=4]="debris"})(a.ShopListType||(a.ShopListType={}));var D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameLb=null,e.countLb=null,e.priceLb=null,e.disLb=null,e.icon=null,e.disNode=null,e.coinNode=null,e.videoNode=null,e.diamondNode=null,e.iconBg=null,e.isBuy=!1,e.shop=null,e.item=null,e}return l(e,t),e.prototype.setItem=function(t){var e=this;this.isBuy=b.DataHelper.getData(_.default).ShopIDIsInDayBuyList(t),this.shop=v.default.getData(y.default,t),this.coinNode.active=!this.isBuy&&2==this.shop.costType,this.videoNode.active=!this.isBuy&&0==this.shop.costType,this.diamondNode.active=!this.isBuy&&1==this.shop.costType,this.priceLb.string=this.isBuy?s.default.getStr("shop.19"):0==this.shop.costType?s.default.getStr("shop.16"):this.shop.cost.toString(),this.countLb.string="x"+this.shop.count,this.disNode.active=this.shop.dis>0,this.disLb.string=s.default.formatStr("shop.17",{dis:this.shop.dis}),this.item=v.default.getData(d.default,this.shop.itemId),this.iconBg.select(this.item.quality),this.nameLb.string=s.default.getStr(this.item.name),h.default.setSpriteFrame(this.icon,this.item.icon).then(function(){e.icon.node.scale=Math.min(70/e.icon.node.width,70/e.icon.node.height)})},e.prototype.onClickItem=function(){if(!this.isBuy)if(0==this.shop.costType)this.addDebris();else{if(1==this.shop.costType&&b.DataHelper.getData(g.default).getItemCount(f.default.ItemDiamondId)<this.shop.cost)return void m.default.showFrame(S.default,6);if(2==this.shop.costType&&b.DataHelper.getData(g.default).getItemCount(f.default.ItemCoinId)<this.shop.cost)return void m.default.showFrame(S.default,5);m.default.showFrame(O.default,this.item,this.shop)}},e.prototype.addDebris=function(){this.isBuy=!0,this.coinNode.active=!1,this.videoNode.active=!1,b.DataHelper.getData(_.default).BuyShopItem(this.shop.id),this.priceLb.string=s.default.getStr("shop.19");var t=[{id:this.item.id,count:this.shop.count}];w.default.addToBagByRewardList(t),m.default.showFrame(R.default,R.default.GetType.item,t)},e.prototype.setDefault=function(){this.node.opacity=0,this.disNode.active=!1,this.coinNode.active=!1,this.videoNode.active=!1,this.icon.node.active=!1,this.nameLb.node.active=!1,this.countLb.node.active=!1,this.priceLb.node.active=!1},u([T({type:cc.Label,displayName:"\u540d\u79f0"})],e.prototype,"nameLb",void 0),u([T({type:cc.Label,displayName:"\u6570\u91cf"})],e.prototype,"countLb",void 0),u([T({type:cc.Label,displayName:"\u4ef7\u683c"})],e.prototype,"priceLb",void 0),u([T({type:cc.Label,displayName:"\u6298\u6263"})],e.prototype,"disLb",void 0),u([T({type:cc.Sprite,displayName:"\u56fe\u6807"})],e.prototype,"icon",void 0),u([T({type:cc.Node,displayName:"\u6298\u6263\u8282\u70b9"})],e.prototype,"disNode",void 0),u([T({type:cc.Node,displayName:"\u91d1\u5e01\u8282\u70b9"})],e.prototype,"coinNode",void 0),u([T({type:cc.Node,displayName:"\u89c6\u9891\u8282\u70b9"})],e.prototype,"videoNode",void 0),u([T({type:cc.Node,displayName:"\u94bb\u77f3\u8282\u70b9"})],e.prototype,"diamondNode",void 0),u([T({type:p.default,displayName:"icon\u80cc\u666f\u6846"})],e.prototype,"iconBg",void 0),u([F],e)}(cc.Component);a.default=D,cc._RF.pop(),cc._RF.pop()},{}],DayNightPanel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"543dbZOPltES604HBohGDXD","DayNightPanel");var r=e,i=o;cc._RF.push(r,"543dbZOPltES604HBohGDXD","DayNightPanel");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tween=null,e}return c(e,t),e.prototype.play=function(){var t=this;this.tween&&this.tween.stop(),this.node.active=!0,this.tween=cc.tween(this.node).set({opacity:0}).to(.3,{opacity:255}).delay(1.6).to(.8,{opacity:0}).call(function(){t.node.active=!1}).start()},e.prototype.start=function(){},l([s],e)}(cc.Component));i.default=p,cc._RF.pop(),cc._RF.pop()},{}],DayNode:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f8295xmuKVM+YW1wbi/p0mQ","DayNode");var r=t,i=e,a=o;cc._RF.push(i,"f8295xmuKVM+YW1wbi/p0mQ","DayNode");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("LangHelper"),p=r("LayoutList"),f=r("EventConfig"),d=r("GameDefine"),y=r("sdbShop"),h=r("EventHelper"),m=r("FrameHelper"),b=r("PlatformHelper"),v=r("RunDataHelper"),g=r("StaticDBHelper"),_=r("BagData"),w=r("DailyData"),S=r("Tools"),R=r("TimeUtil"),O=r("GetItemFrame"),P=r("DayItem"),F=r("TowerData"),T=r("DailyTaskData"),D=r("TrackHelper"),k=cc._decorator,C=k.ccclass,L=k.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.diamLb=null,e.freeLb=null,e.videoNode=null,e.dayItemList=null,e.refreshBtn=null,e.refreshLb=null,e.refreshTimeLb=null,e.diamRedNode=null,e.diamShop=null,e.refreshTime=0,e}var o;return l(e,t),o=e,e.prototype.initDay=function(){this.refreshTime=R.default.getResidueTimestamp()/1e3,this.diamShop||(this.diamShop=g.default.getData(y.default,40006)),this.refreshDiamShop(),0==v.DataHelper.getData(w.default).dayBuyList.length&&this.createDayShopList(),this.dayItemList.createItemsByLength(o.DayDebrisCount+1),this.setRefresh(),this.refreshDiamRed()},e.prototype.refreshDiamRed=function(){this.diamRedNode.active=v.DataHelper.getData(w.default).shopDiamFreeTimes>=g.default.getConfig("DayDiamondTiems")},e.prototype.createDayShopList=function(){for(var t=g.default.filterData(y.default,{listType:4}),e=v.DataHelper.getData(F.default).getUnlockTowers(),n=[],r=0,i=0;i<t.length;i++)for(var a=0;a<e.length;a++)t[i].itemId==e[a].id&&(n.push(t[i]),r+=t[i].pro);for(i=0;i<o.DayDebrisCount;i++){var c=Math.floor(Math.random()*r),l=0;for(a=0;a<n.length;a++)if((l+=n[a].pro)>c){r-=n[a].pro,v.DataHelper.getData(w.default).addDayBuyList(n[a].id),n.splice(a,1);break}}},e.prototype.refreshDiamShop=function(){this.diamLb.string="X"+this.diamShop.count;var t=g.default.getConfig("DayDiamondTiems"),e=v.DataHelper.getData(w.default).shopDiamFreeTimes,o=e>=t,n=o?s.default.getStr("shop.16"):s.default.formatStr("shop.12",{free:e,max:t-1});this.freeLb.string=n,this.videoNode.active=!o},e.prototype.onDayItemCreate=function(t,e){var o=t.getComponent(P.default);v.DataHelper.getData(w.default).dayBuyList,0==e?o.setDefault():o.setItem(v.DataHelper.getData(w.default).dayBuyList[e-1].id)},e.prototype.setRefresh=function(){this.refreshLb.string=""+v.DataHelper.getData(w.default).shopDayRefFreeTimes,this.refreshBtn.interactable=v.DataHelper.getData(w.default).shopDayRefFreeTimes>0},e.prototype.onClickDayDiam=function(){var t=this,e=v.DataHelper.getData(w.default).shopDiamFreeTimes>=g.default.getConfig("DayDiamondTiems");v.DataHelper.getData(w.default).reduceShopDiamFreeTimes()&&(e?(this.videoCallback(),this.refreshDiamRed(),v.DataHelper.getData(T.default).addTaskProgress(T.TaskType.BuyItem)):b.PlatformHelper.video("ShopDiamond",function(){v.DataHelper.getData(T.default).addTaskProgress(T.TaskType.BuyItem),t.videoCallback()}),h.default.emit(f.default.refreshMainRed,"shop"),h.default.emit(f.default.refreshMainRed,"tower"))},e.prototype.videoCallback=function(){var t=[{id:d.default.ItemDiamondId,count:this.diamShop.count}];m.default.showFrame(O.default,O.default.GetType.item,t),S.default.addToBagByRewardList(t),this.refreshDiamShop()},e.prototype.onClickDayRef=function(){var t=this;b.PlatformHelper.video("ShopRefreshDay",function(){v.DataHelper.getData(w.default).reduceShopDayRefFreeTimes(),v.DataHelper.getData(w.default).cleanDayBuyList(),t.initDay()})},e.prototype.onBuyItem=function(t){for(var e,o=0;o<this.dayItemList.nodeList.length;o++){var n=this.dayItemList.nodeList[o].getComponent(P.default);if((null===(e=n.shop)||void 0===e?void 0:e.id)==t){n.addDebris(),1==n.shop.costType?v.DataHelper.getData(_.default).subItemCount(d.default.ItemDiamondId,n.shop.cost):2==n.shop.costType&&v.DataHelper.getData(_.default).subItemCount(d.default.ItemCoinId,n.shop.cost),D.default.trackEventShopBuy(n.shop.itemId);break}}h.default.emit(f.default.refreshMainRed,"tower")},e.prototype.onLoad=function(){h.default.on(f.default.BuyItem,this.onBuyItem,this),this.dayItemList.onItemCreate(this.onDayItemCreate.bind(this))},e.prototype.update=function(t){this.refreshTime<=0&&this.initDay(),this.refreshTime-=t,this.refreshTimeLb.string=R.default.convertSecondToString(this.refreshTime)},e.DayDebrisCount=5,u([L({type:cc.Label,displayName:"\u94bb\u77f3\u6570\u91cf"})],e.prototype,"diamLb",void 0),u([L({type:cc.Label,displayName:"\u514d\u8d39\u6b21\u6570"})],e.prototype,"freeLb",void 0),u([L({type:cc.Node,displayName:"\u89c6\u9891\u8282\u70b9"})],e.prototype,"videoNode",void 0),u([L({type:p.default,displayName:"\u6bcf\u65e5\u788e\u7247\u5217\u8868"})],e.prototype,"dayItemList",void 0),u([L({type:cc.Button,displayName:"\u5237\u65b0\u6309\u94ae"})],e.prototype,"refreshBtn",void 0),u([L({type:cc.Label,displayName:"\u5237\u65b0\u6b21\u6570"})],e.prototype,"refreshLb",void 0),u([L({type:cc.Label,displayName:"\u5237\u65b0\u65f6\u95f4"})],e.prototype,"refreshTimeLb",void 0),u([L({type:cc.Node,displayName:"\u94bb\u77f3\u7ea2\u70b9"})],e.prototype,"diamRedNode",void 0),o=u([C],e)}(cc.Component);a.default=B,cc._RF.pop(),cc._RF.pop()},{}],DebrisItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"512b9hkVkBMJY1ON6ttR3nL","DebrisItem");var r=t,i=e,a=o;cc._RF.push(i,"512b9hkVkBMJY1ON6ttR3nL","DebrisItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("AssetBundleHelper"),p=cc._decorator,f=p.ccclass,d=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.debrisIcon=null,e}return l(e,t),e.prototype.setItem=function(t,e){s.default.setSpriteFrame(this.debrisIcon,e)},u([d({type:cc.Sprite,displayName:"\u788e\u7247icon"})],e.prototype,"debrisIcon",void 0),u([f],e)}(cc.Component);a.default=y,cc._RF.pop(),cc._RF.pop()},{}],Debuff_Dizziness:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2d035TlUJ9ME7k+++CNYX3l","Debuff_Dizziness");var r=t,i=e,a=o;cc._RF.push(i,"2d035TlUJ9ME7k+++CNYX3l","Debuff_Dizziness");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameDefine"),p=r("GameGlobaled"),f=r("EffectManager"),d=r("Monster"),y=r("Debuff"),h=r("SkillFactory"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effect=null,e}return l(e,t),e.prototype.tidyParam=function(e){t.prototype.tidyParam.call(this,e),this.life=p.default.debuffDizzinessTime.value},e.prototype.onJoinFirst=function(){var e=this;t.prototype.onJoinFirst.call(this),this.owner.data.spd.valuePerUp(this.key,-100);var o=this.owner.node.getComponent(d.default);o&&o.type===s.MonsterType.Boss?this.owner.addSkillResist(this.skillName,2):this.owner.addSkillResist(this.skillName,1),f.default.instance.createAndFollow("Prefab/Game/Effect/Debuff_Dizziness",this.owner,this.owner.bodyLocal).then(function(t){e.isEnable?e.effect=t:f.default.instance.remove(t)})},e.prototype.onRejoin=function(){},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.effect&&(f.default.instance.remove(this.effect),this.effect=null),this.owner.data.spd.valuePerUpRemove(this.key)},u([h.skillClass("Debuff_Dizziness")],e)}(y.default);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],Debuff_Poison:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"1c3937sAcdA55jzdeTStTDf","Debuff_Poison");var r=t,i=e,a=o;cc._RF.push(i,"1c3937sAcdA55jzdeTStTDf","Debuff_Poison");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameGlobaled"),p=r("DamageManager"),f=r("EffectManager"),d=r("Debuff"),y=r("SkillFactory"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.damage=0,e.effect=null,e}return l(e,t),e.prototype.tidyParam=function(t){var e=t.split("&");this.damage=parseInt(e[0]),this.life=parseFloat(e[1]),this.interval=s.default.debuffPoisonStep},e.prototype.onJoinFirst=function(){var e=this;t.prototype.onJoinFirst.call(this),f.default.instance.createAndFollow("Prefab/Game/Effect/Debuff_Poison",this.owner,this.owner.bodyLocal).then(function(t){e.isEnable?e.effect=t:f.default.instance.remove(t)})},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.effect&&(f.default.instance.remove(this.effect),this.effect=null)},e.prototype.onExecute=function(){if(!this.owner.isDead){var t=this.owner.bodyPosition,e=this.owner.onHurt(this.damage);e&&p.default.instance.createPoison(e,t)}},u([y.skillClass("Debuff_Poison")],e)}(d.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],Debuff_Slow:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"90911Mb4MNBcpJUsPR0MNzw","Debuff_Slow");var r=t,i=e,a=o;cc._RF.push(i,"90911Mb4MNBcpJUsPR0MNzw","Debuff_Slow");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameGlobaled"),p=r("EffectManager"),f=r("Debuff"),d=r("SkillFactory"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effect=null,e.slow=0,e}return l(e,t),e.prototype.tidyParam=function(e){t.prototype.tidyParam.call(this,e),this.life=s.default.debuffIceTime,this.slow=s.default.debuffIceScale},e.prototype.onRejoin=function(){t.prototype.onRejoin.call(this)},e.prototype.onJoinFirst=function(){var e=this;t.prototype.onJoinFirst.call(this),this.owner.data.spd.valuePerUp(this.key,-this.slow),p.default.instance.createAndFollow("Prefab/Game/Effect/Debuff_Slow",this.owner,this.owner.bodyLocal).then(function(t){e.isEnable?e.effect=t:p.default.instance.remove(t)})},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.effect&&(p.default.instance.remove(this.effect),this.effect=null),this.owner.data.spd.valuePerUpRemove(this.key)},u([d.skillClass("Debuff_Slow")],e)}(f.default);a.default=y,cc._RF.pop(),cc._RF.pop()},{}],Debuff_Vulnerable:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5f5534K+bVL8b5wXE9dSW8G","Debuff_Vulnerable");var r=t,i=e,a=o;cc._RF.push(i,"5f5534K+bVL8b5wXE9dSW8G","Debuff_Vulnerable");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameGlobaled"),p=r("Debuff"),f=r("SkillFactory"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effect=null,e.vulnerable=0,e}return l(e,t),e.prototype.tidyParam=function(e){t.prototype.tidyParam.call(this,e),this.life=s.default.debuffVulnerableLife,this.vulnerable=this.param},e.prototype.onRejoin=function(){t.prototype.onRejoin.call(this),this.vulnerable=Math.max(this.vulnerable,this.param)},e.prototype.onJoinFirst=function(){t.prototype.onJoinFirst.call(this),this.owner.data.def.valueValUp(this.key,-this.vulnerable)},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.owner.data.def.valueValUpRemove(this.key),this.vulnerable=0},u([f.skillClass("Debuff_Vulnerable")],e)}(p.default);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Debuff:[function(t,e,o){"use strict";cc._RF.push(e,"bb11eX+cAtEWIucfWjwzGz9","Debuff");var n=t,r=e,i=o;cc._RF.push(r,"bb11eX+cAtEWIucfWjwzGz9","Debuff");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e}(n("Buff").default);i.default=l,cc._RF.pop(),cc._RF.pop()},{}],DelayHide:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"31c07VXc+ZAXJAkKOz3RRuv","DelayHide");var r=t,i=e,a=o;cc._RF.push(i,"31c07VXc+ZAXJAkKOz3RRuv","DelayHide");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("TweenComponent"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delayTime=1,e}return l(e,t),e.prototype.getTween=function(){var t=this;return cc.tween(this.node).delay(this.delayTime).call(function(){t.node.active=!1})},u([d({displayName:"\u5ef6\u8fdf\u65f6\u95f4"})],e.prototype,"delayTime",void 0),u([f,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f13\u52a8/\u5ef6\u8fdf\u9690\u85cf")],e)}(s.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],DesktopBrowser:[function(t,e,o){"use strict";cc._RF.push(e,"3e1a9KFIHhOjaJYvhD01qeY","DesktopBrowser");var n=t,r=e,i=o;cc._RF.push(r,"3e1a9KFIHhOjaJYvhD01qeY","DesktopBrowser");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("PlatformHelper"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e}(l.Platform);i.default=u,cc.sys.DESKTOP_BROWSER===cc.sys.platform&&l.PlatformHelper.setPlatform(u),cc._RF.pop(),cc._RF.pop()},{}],DragCloneManager:[function(t,e,o){"use strict";cc._RF.push(e,"d0f275+27RIYYw0Xae7DFpR","DragCloneManager");var n=t,r=e,i=o;cc._RF.push(r,"d0f275+27RIYYw0Xae7DFpR","DragCloneManager"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("DragItem"),c=n("Tower"),l=function(){function t(){this.dragCloneNode=null,this.dragOriginNode=null,this.dragOffset=null,this.dragItemData=null,this.dragTower=null}return t.prototype.getDragItemData=function(){return this.dragItemData},Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.createClone=function(t,e,o,n){void 0===n&&(n=1),this.dragOriginNode=t,this.dragCloneNode=cc.instantiate(this.dragOriginNode),this.dragCloneNode.parent=e,this.dragCloneNode.scale=n;var r=this.dragOriginNode.getComponent(c.default),i=this.dragCloneNode.getComponent(c.default);r&&i&&(i.init(r.towerData,r.battleData,r.levelData,r.uid),i.data=r.data),this.dragTower=r,this.dragOriginNode.opacity=0;var a=this.dragOriginNode.convertToWorldSpaceAR(cc.Vec2.ZERO);return this.dragOffset=a.sub(o),this.dragOffset.y+=30,this.updateClonePosition(o,e),i},t.prototype.updateDragItemData_tower=function(t){this.dragItemData={type:a.DragItemType.Building,buildingType:t.id,buildingLevel:t.level,video:!1}},t.prototype.updateDragItemData_foundation=function(t){this.dragItemData={type:a.DragItemType.Foundation,foundationIndex:t,video:!1}},t.prototype.updateClonePosition=function(t,e){this.dragCloneNode&&this.dragCloneNode.setPosition(e.convertToNodeSpaceAR(t.add(this.dragOffset)))},t.prototype.destroyClone=function(){this.dragOriginNode&&(this.dragOriginNode.opacity=255,this.dragOriginNode=null),this.dragCloneNode&&(this.dragCloneNode.destroy(),this.dragCloneNode=null),this.dragOffset=null,this.dragItemData=null,console.log("DragCloneManager: dragItemData\u5df2\u6e05\u7406")},t.prototype.getDragOffset=function(){return this.dragOffset},t._instance=null,t}();i.default=l,cc._RF.pop(),cc._RF.pop()},{}],DragItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7c0a0JstoBMVJzTjuMJbOpb","DragItem");var r=t,i=e,a=o;cc._RF.push(i,"7c0a0JstoBMVJzTjuMJbOpb","DragItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0}),a.DragItemType=void 0;var f,d=r("GameDefine"),y=r("sdbCard"),h=r("sdbTower"),m=r("sdbTowerBattle"),b=r("sdbTowerLevel"),v=r("RunDataHelper"),g=r("StaticDBHelper"),_=r("GameData"),w=r("Factory"),S=r("GameGlobaled"),R=r("Tower"),O=cc._decorator,P=O.ccclass,F=O.property;(function(t){t[t.Building=0]="Building",t[t.Foundation=1]="Foundation"})(f=a.DragItemType||(a.DragItemType={}));var T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBody=null,e.nodeVideo=null,e.sptEffect=null,e.tempUid=0,e.sfFoundation=null,e.data=null,e.size=cc.Size.ZERO,e.foundations=[],e.towerNode=null,e.tweenEffectDelay=null,e}var o;return l(e,t),o=e,Object.defineProperty(e.prototype,"type",{get:function(){return this.data.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.size.width*S.default.gridSizeWorld},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.size.height*S.default.gridSize*S.default.boardScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodyWidth",{get:function(){return 120},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"video",{get:function(){return this.data.video},set:function(t){this.data.video=t,this.nodeVideo.active=this.data.video},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodyPosition",{get:function(){return this.nodeBody.convertToWorldSpaceAR(cc.Vec3.ZERO)},enumerable:!1,configurable:!0}),e.prototype.getData=function(){return this.data},e.prototype.getBoxToWorld=function(){var t=this.nodeBody.convertToWorldSpaceAR(cc.Vec2.ZERO),e=cc.size(this.nodeBody.width*this.nodeBody.scale,this.nodeBody.height*this.nodeBody.scale);return cc.rect(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height)},e.prototype.init=function(t,e,n,r){return s(this,void 0,void 0,function(){var i,a,c,l,u,s,O,P,F,T,D,k,C,L,B,j=this;return p(this,function(p){switch(p.label){case 0:for(this.data=t,this.sptEffect.node.active=!1,this.sfFoundation=r,this.nodeVideo.active=this.data.video,this.tweenEffectDelay&&(this.tweenEffectDelay.stop(),this.tweenEffectDelay=null),T=0;T<this.foundations.length;T++)this.foundations[T].destroy();if(this.foundations=[],cc.isValid(this.towerNode)){for(this.towerNode.scale=1,T=0;T<this.towerNode.childrenCount;T++)"light"==this.towerNode.children[T].group&&(this.towerNode.children[T].active=!0);w.default.instance.remove(this.towerNode),this.towerNode=null}return i=++o.uid,this.tempUid=i,this.type!==f.Building?[3,2]:(n&&(this.sptEffect.node.active=!0,this.sptEffect.node.opacity=0,this.tweenEffectDelay=cc.tween(this.sptEffect.node).delay(.3).call(function(){j.sptEffect.node.opacity=255,j.sptEffect.setAnimation(0,"animation",!1)}).start()),a=d.TOWER_CONFIGS[this.data.buildingType],this.size.width=a[0].length,this.size.height=a.length,c=g.default.getData(h.default,this.data.buildingType),l=g.default.filterData(m.default,{towerId:this.data.buildingType,level:this.data.buildingLevel})[0],u=g.default.filterData(b.default,{towerId:c.id,level:1})[0],[4,w.default.instance.create("Prefab/Game/tower/"+c.prefab)]);case 1:if(s=p.sent(),this.tempUid!==i)return w.default.instance.remove(s),this.sptEffect.node.active=!1,[2];for(this.towerNode=s,T=0;T<this.towerNode.childrenCount;T++)"light"==this.towerNode.children[T].group&&(this.towerNode.children[T].active=!1);for(this.towerNode.parent=this.nodeBody,this.towerNode.scale=e/S.default.gridSize,O=this.towerNode.getComponent(cc.BoxCollider),this.towerNode.setPosition(-O.offset.x*this.towerNode.scale,-O.offset.y*this.towerNode.scale),(P=this.towerNode.getComponent(R.default)).init(c,l,u,i),F=v.DataHelper.getData(_.default).cards,T=0;T<F.length;T++)(D=g.default.getData(y.default,F[T])).target.includes(P.id)&&P.addSkill(D);return this.nodeBody.width=Math.max(O.size.width,150)*this.towerNode.scale,this.nodeBody.height=Math.max(O.size.height,150)*this.towerNode.scale,this.nodeBody.scale=this.bodyWidth/Math.max(this.nodeBody.width,this.nodeBody.height),this.nodeBody.scale=Math.min(1,this.nodeBody.scale),[3,3];case 2:for(k=d.FOUNDATION_CONFIGS[this.data.foundationIndex].map,this.size.width=k[0].length,this.size.height=k.length,C=0;C<this.size.width;C++)for(L=0;L<this.size.height;L++)0!=k[L][C]&&((B=new cc.Node).parent=this.nodeBody,B.scale=Math.min(e/this.sfFoundation.getOriginalSize().width,e/this.sfFoundation.getOriginalSize().height)*S.default.boardBoxScale,B.addComponent(cc.Sprite).spriteFrame=this.sfFoundation,B.setPosition((C-this.size.width/2+.5)*e,(L-this.size.height/2+.5)*e),this.foundations.push(B));this.nodeBody.width=(Math.max(this.size.width,2)+.4)*e,this.nodeBody.height=(Math.max(this.size.height,2)+.4)*e,this.nodeBody.scale=this.bodyWidth/Math.max(2*S.default.gridSizeWorld,Math.max(this.nodeBody.width,this.nodeBody.height)),p.label=3;case 3:return[2]}})})},e.prototype.onCompleteListener=function(){this.sptEffect.node.active=!1},e.prototype.onLoad=function(){this.sptEffect.setCompleteListener(this.onCompleteListener.bind(this)),this.sptEffect.node.zIndex=cc.macro.MAX_ZINDEX,this.sptEffect.node.active=!1,this.nodeBody.x=this.node.width/2,this.nodeVideo.x=this.node.width/2},e.prototype.start=function(){},e.uid=0,u([F({type:cc.Node,displayName:"\u4e3b\u4f53"})],e.prototype,"nodeBody",void 0),u([F({type:cc.Node,displayName:"\u6c14\u6ce1"})],e.prototype,"nodeVideo",void 0),u([F({type:sp.Skeleton,displayName:"\u7279\u6548"})],e.prototype,"sptEffect",void 0),o=u([P],e)}(cc.Component);a.default=T,cc._RF.pop(),cc._RF.pop()},{}],DragPanelRefreshManager:[function(t,e,o){"use strict";cc._RF.push(e,"3c29cg5qBdHNLvLlHla0LKk","DragPanelRefreshManager");var n=t,r=e,i=o;cc._RF.push(r,"3c29cg5qBdHNLvLlHla0LKk","DragPanelRefreshManager"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("DragItem"),c=n("GameDefine"),l=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return t._ins||(t._ins=new t),t._ins},enumerable:!1,configurable:!0}),t.prototype.getConfig=function(t,e){switch(console.log("chapter:"+t+" refreshCount:"+e),!0){case 1==t&&1==e:return[{type:a.DragItemType.Building,buildingType:c.TowerId.ARROW,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FIREBALL,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FAN,buildingLevel:1,video:!1}];case 1==t&&2==e:return[{type:a.DragItemType.Foundation,foundationIndex:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FIREBALL,buildingLevel:2,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FAN,buildingLevel:1,video:!1}];case 1==t&&3==e:return[{type:a.DragItemType.Building,buildingType:c.TowerId.ARROW,buildingLevel:1,video:!1},{type:a.DragItemType.Foundation,foundationIndex:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FAN,buildingLevel:1,video:!1}];case 1==t&&4==e:return[{type:a.DragItemType.Building,buildingType:c.TowerId.ARROW,buildingLevel:1,video:!1},{type:a.DragItemType.Foundation,foundationIndex:2,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FLAME,buildingLevel:1,video:!1}];case 1==t&&5==e:return[{type:a.DragItemType.Foundation,foundationIndex:0,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FIREBALL,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FLAME,buildingLevel:1,video:!1}];case 1==t&&6==e:return[{type:a.DragItemType.Building,buildingType:c.TowerId.ARROW,buildingLevel:1,video:!1},{type:a.DragItemType.Foundation,foundationIndex:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FAN,buildingLevel:1,video:!1}];case 2==t&&0==e:return[{type:a.DragItemType.Building,buildingType:c.TowerId.ARROW,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FIREBALL,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FAN,buildingLevel:1,video:!1}];case 2==t&&1==e:return[{type:a.DragItemType.Building,buildingType:c.TowerId.FLAME,buildingLevel:1,video:!1},{type:a.DragItemType.Foundation,foundationIndex:2,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.ICE,buildingLevel:1,video:!1}];case 2==t&&2==e:return[{type:a.DragItemType.Building,buildingType:c.TowerId.FLAME,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.ICE,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FAN,buildingLevel:1,video:!1}];case 2==t&&5==e:return[{type:a.DragItemType.Building,buildingType:c.TowerId.FLAME,buildingLevel:1,video:!1},{type:a.DragItemType.Foundation,foundationIndex:0,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FAN,buildingLevel:1,video:!1}];case 3==t&&0==e:return[{type:a.DragItemType.Building,buildingType:c.TowerId.ARROW,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.POISON,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.FIREBALL,buildingLevel:1,video:!1}];case 3==t&&1==e:return[{type:a.DragItemType.Foundation,foundationIndex:0,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.ICE,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.POISON,buildingLevel:1,video:!1}];case 3==t&&2==e:return[{type:a.DragItemType.Foundation,foundationIndex:0,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.ARROW,buildingLevel:1,video:!1},{type:a.DragItemType.Building,buildingType:c.TowerId.POISON,buildingLevel:1,video:!1}];default:return null}},t._ins=null,t}();i.default=l,cc._RF.pop(),cc._RF.pop()},{}],DragPanelRefresher:[function(t,e,o){"use strict";cc._RF.push(e,"c02edvEe+BGM46w1LRh6BlG","DragPanelRefresher");var n=t,r=e,i=o;cc._RF.push(r,"c02edvEe+BGM46w1LRh6BlG","DragPanelRefresher");var a=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var c=n("GameDefine"),l=n("RunDataHelper"),u=n("StaticDBHelper"),s=n("GameData"),p=n("TowerData"),f=n("MathUtil"),d=n("DragItem"),y=n("DragPanelRefreshManager"),h=n("BoardData"),m=function(){function t(){this.TOTAL_ITEMS=3,this.LEVEL_WEIGHT_CONFIG=[15,1,0,0],this.probAdjust=0,this.mustShowTowers=[],this.shownLv3TowerUids=[],this.refreshCount=0,this.AVAILABLE_TOWER_TYPES=[c.TowerId.ARROW,c.TowerId.FAN,c.TowerId.POISON,c.TowerId.FLAME,c.TowerId.ICE,c.TowerId.MAGIC,c.TowerId.SWORD,c.TowerId.BAT,c.TowerId.FLASH,c.TowerId.FIREBALL]}return Object.defineProperty(t,"ins",{get:function(){return t._ins||(t._ins=new t),t._ins},enumerable:!1,configurable:!0}),t.prototype.onNewGame=function(){this.probAdjust=0,this.mustShowTowers=[],this.shownLv3TowerUids=[],this.refreshCount=0,this.saveData()},t.prototype.onContinueGame=function(){this.probAdjust=l.DataHelper.getData(s.default).probAdjust,this.mustShowTowers=l.DataHelper.getData(s.default).mustShowTowers,this.shownLv3TowerUids=l.DataHelper.getData(s.default).shownLv3TowerUids,this.refreshCount=l.DataHelper.getData(s.default).refreshCount},t.prototype.onRoundStart=function(){},t.prototype.saveData=function(){l.DataHelper.getData(s.default).saveRefresher(this.probAdjust,this.mustShowTowers,this.shownLv3TowerUids,this.refreshCount)},t.prototype.shuffle=function(t){for(var e,o,n=t.length;0!==n;)o=Math.floor(Math.random()*n),e=t[n-=1],t[n]=t[o],t[o]=e;return t},t.prototype.refreshOnlyTower=function(t){void 0===t&&(t=3);var e=[],o=new Set;return this.fillRemainingSlots(e,o,t,[]),e},t.prototype.refresh=function(t,e,o,n,r,i){var a=this,l=[];if(t!==c.StageType.Normal){var u=[],s=new Set,p=this.TOTAL_ITEMS;return this.fillRemainingSlots(u,s,p,l),u}if(!i){var f=y.default.ins.getConfig(e,this.refreshCount);if(f)return this.refreshCount++,this.saveData(),f}return r.forEach(function(t){if(t.id!==c.TowerId.BASE&&(l.includes(t.id)||l.push(t.id),3===t.level)){var e=!1;r.forEach(function(o){3===o.level&&o.uid!==t.uid&&o.id===t.id&&(e=!0)}),e||a.mustShowTowers.includes(t.id)||a.shownLv3TowerUids.includes(t.uid)||(a.mustShowTowers.push(t.id),a.shownLv3TowerUids.push(t.uid),a.saveData())}}),i?this.handleForceLv2TowerRefresh(l):(this.refreshCount++,this.mustShowTowers.length>0?this.handleMustShowTowerRefresh(l):(this.saveData(),this.handleNormalRefresh(l,n)))},t.prototype.revive=function(t,e){var o,n=[],r=new Set;e.forEach(function(t){t.id!==c.TowerId.BASE&&(n.includes(t.id)||n.push(t.id))}),o=n.length>0?f.default.randomArray(n):f.default.randomArray(l.DataHelper.getData(p.default).getUnlockTowers()).id,r.add(o);var i=[];return i.push(this.createFoundationItem(t)),i.push(this.createLv3Building(o)),i[i.length-1].video=!1,this.fillRemainingSlots(i,r,1,n),this.shuffle(i),i},t.prototype.handleMustShowTowerRefresh=function(t,e){var o=[],n=new Set,r=this.handleFoundationLogic(e),i=this.TOTAL_ITEMS-1;r&&(o.push(this.createFoundationItem(e)),i--);var a=this.mustShowTowers[0];return o.push(this.createLv3Building(a)),n.add(a),this.mustShowTowers.shift(),this.fillRemainingSlots(o,n,i,t),this.saveData(),this.shuffle(o),o},t.prototype.handleNormalRefresh=function(t,e){var o=[],n=new Set,r=this.handleFoundationLogic(e),i=r?this.TOTAL_ITEMS-1:this.TOTAL_ITEMS;return r&&o.push(this.createFoundationItem(e)),this.fillRemainingSlots(o,n,i,t),o},t.prototype.handleFoundationLogic=function(){var t=.01*u.default.getConfig("FoundationWeight")+this.probAdjust,e=Math.random()<t;return e?this.probAdjust=-.2:this.probAdjust+=.133,this.saveData(),e},t.prototype.fillRemainingSlots=function(t,e,o,n){for(var r=this.generateTypeWeights(),i=this.generateLevelWeights(),a=new Set,c=0;c<o;c++){var l=r.filter(function(t){return!e.has(t.id)&&(!!n.includes(t.id)||n.length+a.size<5)});0===l.length&&(l=r.filter(function(t){return n.includes(t.id)&&!e.has(t.id)})),0===l.length&&(l=r.filter(function(t){return n.includes(t.id)}));var u=this.selectRandomType(l);t.push(this.createBuildingItem(u,i)),e.add(u),n.includes(u)||a.add(u)}},t.prototype.generateTypeWeights=function(){var t=[];return l.DataHelper.getData(p.default).getUnlockTowers().forEach(function(e){t.push({id:e.id,weight:e.weight})}),t},t.prototype.generateLevelWeights=function(){return this.LEVEL_WEIGHT_CONFIG.map(function(t,e){return{id:e+1,weight:t}})},t.prototype.selectRandomType=function(t){for(var e=t.reduce(function(t,e){return t+e.weight},0),o=Math.random()*e,n=0,r=t;n<r.length;n++){var i=r[n];if(o<=i.weight)return i.id;o-=i.weight}return t[0].id},t.prototype.selectRandomThreeTypes=function(t){for(var e=[],o=a(t),n=0;n<3&&o.length>0;n++)for(var r=o.reduce(function(t,e){return t+e.weight},0),i=Math.random()*r,c=0;c<o.length;c++){if(i<=o[c].weight){e.push(o[c].id),o.splice(c,1);break}i-=o[c].weight}for(;e.length<3&&e.length>0;)e.push(e[e.length-1]);return e},t.prototype.createFoundationItem=function(t){var e=this.getPreferFoundation(t);return{type:d.DragItemType.Foundation,foundationIndex:e,video:!1}},t.prototype.getPreferFoundation=function(t){var e=this.getAvailableFoundations(t,c.FOUNDATION_CONFIGS);return this.selectRandomType(e)},t.prototype.getThreeFoundations=function(t){var e=this.getAvailableFoundations(t,c.FOUNDATION_CONFIGS_THREE);return this.selectRandomThreeTypes(e)},t.prototype.getAvailableFoundations=function(t,e){if(void 0===e&&(e=c.FOUNDATION_CONFIGS),!t)return[{id:0,weight:e[0].weight}];for(var o=[],n=0;n<e.length;n++)this.canPlaceFoundation(t,n)&&o.push({id:n,weight:e[n].weight});return 0===o.length?[{id:0,weight:e[0].weight}]:o},t.prototype.canPlaceFoundation=function(t,e){if(!t||0===t.length||0===t[0].length)return!1;for(var o=c.FOUNDATION_CONFIGS[e].map,n=t.length,r=t[0].length,i=0;i<r;i++)for(var a=0;a<n;a++){for(var l=!0,u=0;u<o.length&&l;u++)for(var s=0;s<o[u].length&&l;s++)0!==o[u][s]&&(a+s>=n||i+u>=r?l=!1:t[a+s][i+u].cellType!==h.CellType.EMPTY&&(l=!1));if(l){for(u=o.length-1;u>=0;u--)for(s=0;s<o[u].length;s++)!(a+s<n&&i+u<r)||(t[a+s][i+u].cellType,h.CellType.EMPTY);return!0}}return!1},t.prototype.createBuildingItem=function(t,e){var o=this.selectRandomType(e);return{type:d.DragItemType.Building,buildingType:t,buildingLevel:o,video:!1}},t.prototype.createLv3Building=function(t){return{type:d.DragItemType.Building,buildingType:t,buildingLevel:3,video:!0}},t.prototype.handleForceLv2TowerRefresh=function(t){var e=[],o=new Set,n=this.generateTypeWeights(),r=n.filter(function(e){return t.includes(e.id)}),i=this.selectRandomType(r.length>0?r:n);return e.push({type:d.DragItemType.Building,buildingType:i,buildingLevel:2,video:!1}),o.add(i),this.fillRemainingSlots(e,o,this.TOTAL_ITEMS-1,t),this.shuffle(e),e},t._ins=null,t}();i.default=m,cc._RF.pop(),cc._RF.pop()},{}],DragPanel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"3c8bfqFq1xLdpJCxXSkRTMR","DragPanel");var r=t,i=e,a=o;cc._RF.push(i,"3c8bfqFq1xLdpJCxXSkRTMR","DragPanel");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("TrackHelper"),d=r("LayoutPanel"),y=r("GameDefine"),h=r("GameFrame"),m=r("FrameHelper"),b=r("PlatformHelper"),v=r("RunDataHelper"),g=r("GameData"),_=r("BoardCalculator"),w=r("DragCloneManager"),S=r("DragItem"),R=r("GameBoard"),O=r("GameGlobaled"),P=r("BoardData"),F=r("Tower"),T=cc._decorator,D=T.ccclass,k=T.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutList=null,e.bgNode=null,e.dragNode=null,e.gameBoard=null,e.sptVideoFoundation=[],e.sfFoundation=null,e.boardData=null,e.datas=[],e.dragItems=[],e.onAddBuilding=null,e.onAddFoundation=null,e.dragIndex=-1,e.isNewData=!1,e.isEnableControl=!0,e}return l(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.datas.length},enumerable:!1,configurable:!0}),e.prototype.syncLists=function(){v.DataHelper.getData(g.default).setDragData(JSON.stringify(this.datas))},Object.defineProperty(e.prototype,"videoFoundationSpriteFrame",{set:function(t){this.sptVideoFoundation.forEach(function(e){e.spriteFrame=t})},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){this.datas.length=0,this.dragItems.length=0,this.layoutList.clean()},e.prototype.onItemCreate=function(t){return s(this,void 0,void 0,function(){return p(this,function(){return[2,t.getComponent(S.default)]})})},e.prototype.listenAddBuilding=function(t){this.onAddBuilding=t},e.prototype.listenAddFoundation=function(t){this.onAddFoundation=t},e.prototype.debugLogList=function(){},e.prototype.init=function(t,e,o,n){return void 0===n&&(n=!0),s(this,void 0,void 0,function(){var r;return p(this,function(i){switch(i.label){case 0:return this.sfFoundation=o,this.isNewData=n,this.datas=t,this.boardData=e,r=this,[4,this.layoutList.createItems(this.datas)];case 1:return r.dragItems=i.sent(),this.syncLists(),this.debugLogList(),[2]}})})},e.prototype.setByJson=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(o){switch(o.label){case 0:return this.datas=JSON.parse(t),e=this,[4,this.layoutList.createItems(this.datas)];case 1:return e.dragItems=o.sent(),console.log("setByJson",t),this.debugLogList(),[2]}})})},e.prototype.update=function(){},e.prototype.addBuilding=function(t,e,o){return s(this,void 0,void 0,function(){var n,r,i;return p(this,function(){return n={type:S.DragItemType.Building,buildingType:t,buildingLevel:e,video:!1},r=this.layoutList.getIndexByX(o.x),this._addItem(n,r),i=new cc.Event.EventCustom("DragPanelItemRemove",!0),this.node.dispatchEvent(i),[2]})})},e.prototype.addFoundation=function(t){return s(this,void 0,void 0,function(){var e,o;return p(this,function(){return e={type:S.DragItemType.Foundation,foundationIndex:t,video:!1},o=Math.ceil(this.datas.length/2),this._addItem(e,o),[2]})})},e.prototype._addItem=function(t,e){return s(this,void 0,void 0,function(){var o;return p(this,function(n){switch(n.label){case 0:return this.datas.splice(e,0,t),[4,this.layoutList.createItemIn(t,e)];case 1:return o=n.sent(),this.dragItems.splice(e,0,o),this.syncLists(),this.isNewData=!1,this.debugLogList(),[2]}})})},e.prototype.contains=function(t){return this.bgNode.getBoundingBoxToWorld().contains(cc.v2(t))},e.prototype.removeItem=function(t){if(!(t<0||t>=this.datas.length)){var e=this.datas[t];this.datas.splice(t,1),this.dragItems.splice(t,1),this.syncLists(),this.debugLogList(),this.layoutList.removeItem(t);var o=new cc.Event.EventCustom("DragPanelItemRemove",!0);if(this.node.dispatchEvent(o),e.type===S.DragItemType.Building){var n=m.default.getFrame(h.default);f.default.trackEventChooseTower(e.buildingType,n.gameStage.levelId,n.gameStage.roundIndex)}}},e.prototype.onTouchStart=function(t,e){if(this.isEnableControl){if(this.dragIndex=-1,e!==y.GamePhase.LAYOUT)return null;for(var o=function(e){var o=r.dragItems[e],n=r.datas[e];if(o.getBoxToWorld().contains(t.getLocation())){if(o.video)return b.PlatformHelper.video("TowerLevel3",function(){o.video=!1}),{value:void 0};var i=null;n.type===S.DragItemType.Foundation?(r.gameBoard.isShowEmpty=!0,i=w.default.instance.createClone(o.nodeBody,r.dragNode,t.getLocation(),1),w.default.instance.updateDragItemData_foundation(n.foundationIndex)):(i=w.default.instance.createClone(o.getComponentInChildren(F.default).node,r.dragNode,t.getLocation(),O.default.boardScale),w.default.instance.updateDragItemData_tower(i)),r.dragIndex=e;var a=n.type===S.DragItemType.Building?P.CellType.FOUNDATION:P.CellType.EMPTY;return r.gameBoard.refreshTips(a,[],[]),i?{value:i}:{value:null}}},r=this,i=this.dragItems.length-1;i>=0;i--){var a=o(i);if("object"==n(a))return a.value}}},e.prototype.onTouchMove=function(t,e){if(this.isEnableControl&&!(this.dragIndex<0)){if(e!==y.GamePhase.LAYOUT)return null;var o=this.datas[this.dragIndex];w.default.instance.updateClonePosition(t.getLocation(),this.dragNode);var n=t.getLocation().add(w.default.instance.getDragOffset()),r=[],i=[];if(!this.contains(n))if(o.type===S.DragItemType.Building){var a=w.default.instance.dragTower,c=n.sub(cc.v2(.5*a.width*O.default.boardScale,.5*a.height*O.default.boardScale));c=this.gameBoard.getBoardPosByPosition(c);var l=y.TOWER_CONFIGS[a.id],u=_.default.calculateBuildingGridStatus(c,l,this.boardData);r=u.enableList,i=u.disableList}else if(o.type===S.DragItemType.Foundation){var s=y.FOUNDATION_CONFIGS[o.foundationIndex].map,p=s[0].length,f=s.length;c=n.sub(cc.v2(.5*p*O.default.gridSizeWorld,.5*f*O.default.gridSizeWorld)),c=this.gameBoard.getBoardPosByPosition(c);var d=_.default.calculateFoundationGridStatus(c,o.foundationIndex,this.boardData);r=d.enableList,i=d.disableList}var h=o.type===S.DragItemType.Building?P.CellType.FOUNDATION:P.CellType.EMPTY;this.gameBoard.refreshTips(h,r,i)}},e.prototype.onTouchEnd=function(t){if(this.isEnableControl&&!(this.dragIndex<0)){var e=t.getLocation().add(w.default.instance.getDragOffset()),o=w.default.instance.getDragItemData();if(o.type===S.DragItemType.Building){var n=w.default.instance.dragTower,r=(l=e.sub(cc.v2(.5*n.width*O.default.boardScale,.5*n.height*O.default.boardScale))).add(cc.v2(this.dragItems[this.dragIndex].node.getBoundingBoxToWorld().width/2,0));this.contains(r)?this.handleBuildingUpgrade(r):this.onAddBuilding&&this.onAddBuilding(o.buildingType,o.buildingLevel,l,this.dragIndex)}else if(o.type===S.DragItemType.Foundation){var i=y.FOUNDATION_CONFIGS[o.foundationIndex].map,a=i[0].length,c=i.length,l=e.sub(cc.v2(.5*a*O.default.gridSizeWorld,.5*c*O.default.gridSizeWorld));this.onAddFoundation&&this.onAddFoundation(o.foundationIndex,l,this.dragIndex),this.gameBoard.isShowEmpty=!1}this.dragIndex=-1,this.gameBoard.refreshBoard(),this.gameBoard.refreshTips(),w.default.instance.destroyClone()}},e.prototype.handleBuildingUpgrade=function(t){var e=this.datas[this.dragIndex];if(e.type!==S.DragItemType.Foundation)for(var o=0;o<this.dragItems.length;o++)if(o!==this.dragIndex){var n=this.datas[o];if(n.type!==S.DragItemType.Foundation&&this.dragItems[o].node.getBoundingBoxToWorld().contains(t)&&e.buildingType===n.buildingType&&e.buildingLevel===n.buildingLevel&&e.buildingLevel<O.default.buildingMaxLevel){n.buildingLevel+=1,this.dragItems[o].init(n,O.default.gridSizeWorld,!1,O.default.sfFoundation),this.datas.splice(this.dragIndex,1),this.dragItems.splice(this.dragIndex,1),this.layoutList.removeItem(this.dragIndex),this.debugLogList();break}}},e.prototype.onLoad=function(){this.layoutList.onItemCreate(this.onItemCreate.bind(this))},e.prototype.start=function(){},u([k({type:d.default,displayName:"\u81ea\u9002\u5e94\u63a7\u4ef6"})],e.prototype,"layoutList",void 0),u([k({type:cc.Node,displayName:"\u80cc\u666f\u8282\u70b9"})],e.prototype,"bgNode",void 0),u([k({type:cc.Node,displayName:"\u62d6\u62fd\u8282\u70b9"})],e.prototype,"dragNode",void 0),u([k({type:R.default,displayName:"\u68cb\u76d8"})],e.prototype,"gameBoard",void 0),u([k({type:cc.Sprite,displayName:"\u89c6\u9891\u5730\u57fa"})],e.prototype,"sptVideoFoundation",void 0),u([D],e)}(cc.Component);a.default=C,cc._RF.pop(),cc._RF.pop()},{}],DungeonCoinItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"96de4CB09RKCI62ob+8oDgk","DungeonCoinItem");var r=t,i=e,a=o;cc._RF.push(i,"96de4CB09RKCI62ob+8oDgk","DungeonCoinItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("ButtonCommon"),d=r("GameDefine"),y=r("sdbStage"),h=r("FrameHelper"),m=r("PlatformHelper"),b=r("RunDataHelper"),v=r("StaticDBHelper"),g=r("BagData"),_=r("DungeonData"),w=r("TipsFrame"),S=r("GameFrame"),R=r("GetItemFrame"),O=r("DungeonFrame"),P=r("GameLoadingFrame"),F=cc._decorator,T=F.ccclass,D=F.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelLabel=null,e.coinLabel=null,e.button=null,e.keyNode=null,e.videoNode=null,e.stage=0,e}return l(e,t),e.prototype.updateItem=function(t){if(this.stage=t,this.node.active=t>0,0!=t){var e=v.default.filterData(y.default,{type:1,stage:t})[0];this.levelLabel.string=""==e.name?"\u5173\u5361"+this.stage:e.name,this.coinLabel.string=e.coin.toString(),null!=this.button&&this.button.setGary(b.DataHelper.getData(_.default).coinKeyCount<1);var o=b.DataHelper.getData(_.default).isFreeCoinKey;null!=this.keyNode&&(this.keyNode.active=o),null!=this.videoNode&&(this.videoNode.active=!o)}},e.prototype.onClick=function(){var t=this;b.DataHelper.getData(_.default).coinKeyCount<1?h.default.showFrame(w.default,"\u94a5\u5319\u4e0d\u8db3"):b.DataHelper.getData(_.default).isFreeCoinKey?this.onVideoClick():m.PlatformHelper.video("DungeonKey",function(){t.onVideoClick()})},e.prototype.onVideoClick=function(){return s(this,void 0,void 0,function(){var t,e,o,n;return p(this,function(r){switch(r.label){case 0:return t=b.DataHelper.getData(_.default).coinStage,e=v.default.filterData(y.default,{type:1,stage:this.stage})[0],this.stage!=t?[3,3]:[4,h.default.showFrame(P.default)];case 1:return r.sent(),[4,h.default.showFrame(S.default,e)];case 2:return r.sent(),[3,4];case 3:this.stage<t&&(o=[{id:d.default.ItemCoinId,count:e.coin}],b.DataHelper.getData(g.default).addItemCount(o[0].id,o[0].count),h.default.showFrame(R.default,R.default.GetType.item,o),b.DataHelper.getData(_.default).AddCoinUseKeyCount(),n=new cc.Event.EventCustom(O.default.refFrame,!0),this.node.dispatchEvent(n)),r.label=4;case 4:return[2]}})})},u([D({type:cc.Label,displayName:"\u5173\u5361"})],e.prototype,"levelLabel",void 0),u([D({type:cc.Label,displayName:"\u5956\u52b1\u6570\u91cf"})],e.prototype,"coinLabel",void 0),u([D({type:f.default,displayName:"\u6309\u94ae"})],e.prototype,"button",void 0),u([D({type:cc.Node,displayName:"\u94a5\u5319\u8282\u70b9"})],e.prototype,"keyNode",void 0),u([D({type:cc.Node,displayName:"\u89c6\u9891\u8282\u70b9"})],e.prototype,"videoNode",void 0),u([T],e)}(cc.Component);a.default=k,cc._RF.pop(),cc._RF.pop()},{}],DungeonData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b81ceC8AvNNxrC1UctZANbk","DungeonData");var r=t,i=e,a=o;cc._RF.push(i,"b81ceC8AvNNxrC1UctZANbk","DungeonData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameDefine"),p=r("RunDataHelper"),f=r("TimeUtil"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultData=function(){return{recoverTime:0,coinKeyUseCount:0,coinStage:1}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"DungeonData"},enumerable:!1,configurable:!0}),e.prototype.refreshDataByTodayTime=function(){var t=f.default.getTodayStartTimestamp();this.data.recoverTime<t&&(this.data.recoverTime=t,this.data.coinKeyUseCount=0,this.isDirty=!0)},e.prototype.loadLocalStorage=function(){t.prototype.loadLocalStorage.call(this),this.refreshDataByTodayTime()},Object.defineProperty(e.prototype,"coinStage",{get:function(){return this.data.coinStage?this.data.coinStage:1},enumerable:!1,configurable:!0}),e.prototype.passCoinDungeon=function(t){this.data.coinStage=t+1},Object.defineProperty(e.prototype,"coinKeyCount",{get:function(){return null==this.data.coinKeyUseCount&&(this.data.coinKeyUseCount=0),0==this.data.coinKeyUseCount?s.UIConfig.CoinKeyFreeCount:s.UIConfig.CoinKeyMaxCount-this.data.coinKeyUseCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFreeCoinKey",{get:function(){return 0==this.data.coinKeyUseCount},enumerable:!1,configurable:!0}),e.prototype.AddCoinUseKeyCount=function(){null==this.data.coinKeyUseCount&&(this.data.coinKeyUseCount=0),this.data.coinKeyUseCount>=s.UIConfig.CoinKeyMaxCount||this.data.coinKeyUseCount++},u([p.DirtyData],e.prototype,"passCoinDungeon",null),u([p.DirtyData],e.prototype,"AddCoinUseKeyCount",null),e}(p.RunDataBase);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],DungeonFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2180cO6mMFFr5ZfZAOz/SWI","DungeonFrame");var r=t,i=e,a=o;cc._RF.push(i,"2180cO6mMFFr5ZfZAOz/SWI","DungeonFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameDefine"),d=r("FrameHelper"),y=r("RunDataHelper"),h=r("DungeonData"),m=r("DungeonCoinItem"),b=r("DungonCoinInfoFrame"),v=cc._decorator,g=v.ccclass,_=v.menu,w=v.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinItemList=[],e.coinKeyLabel=null,e.coinKeyTitle=null,e.coinKeyNode=null,e}var o;return l(e,t),o=e,e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.refFrame(),[2,!0]})})},e.prototype.onClickCoinInfo=function(){d.default.showFrame(b.default)},e.prototype.refFrame=function(){var t=y.DataHelper.getData(h.default),e=f.UIConfig.CoinKeyMaxCount-f.UIConfig.CoinKeyFreeCount,o=t.coinKeyCount;this.coinKeyNode.active=o>0;var n=t.isFreeCoinKey?o+"/"+f.UIConfig.CoinKeyFreeCount:o+"/"+e;this.coinKeyLabel.string=n,this.coinKeyLabel.node.active=o>0,this.coinKeyTitle.string=0==o?"\u4eca\u65e5\u6b21\u6570\u5df2\u7528\u5b8c":t.isFreeCoinKey?"\u5269\u4f59\u514d\u8d39\u6b21\u6570:":"\u5269\u4f59\u89c6\u9891\u6b21\u6570:";var r=y.DataHelper.getData(h.default).coinStage;this.coinItemList[0].updateItem(r-1),this.coinItemList[1].updateItem(r),this.coinItemList[2].updateItem(r+1)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.on(o.refFrame,this.refFrame,this)},e.refFrame="refFrame",e.frameInfo={name:"DungeonFrame",type:d.FrameType.Full,bundleName:"Root",prefabName:"Prefab/Frame/DungeonFrame",zIndex:2},u([w({type:m.default,displayName:"\u91d1\u5e01\u526f\u672citem"})],e.prototype,"coinItemList",void 0),u([w({type:cc.Label,displayName:"\u91d1\u5e01\u94a5\u5319\u6570\u91cf"})],e.prototype,"coinKeyLabel",void 0),u([w({type:cc.Label,displayName:"\u5269\u4f59title"})],e.prototype,"coinKeyTitle",void 0),u([w({type:cc.Node,displayName:"\u94a5\u5319\u8282\u70b9"})],e.prototype,"coinKeyNode",void 0),o=u([g,_("\u754c\u9762/DungeonFrame \u526f\u672c\u754c\u9762")],e)}(d.FrameBase);a.default=S,cc._RF.pop(),cc._RF.pop()},{}],DungonCoinInfoFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"981eeOGKANHrr6xaoCAW9GD","DungonCoinInfoFrame");var r=t,i=e,a=o;cc._RF.push(i,"981eeOGKANHrr6xaoCAW9GD","DungonCoinInfoFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("FrameHelper"),d=cc._decorator,y=d.ccclass,h=d.menu,m=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2,!0]})})},e.prototype.start=function(){},e.frameInfo={name:"DungonCoinInfoFrame",type:f.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/DungonCoinInfoFrame",zIndex:12},u([y,h("\u754c\u9762/DungonCoinInfoFrame \u8bbe\u7f6e\u754c\u9762")],e)}(f.FrameBase));a.default=m,cc._RF.pop(),cc._RF.pop()},{}],EffectDelayRemove:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b0013SWuyVOuotspDE/nhZb","EffectDelayRemove");var r=t,i=e,a=o;cc._RF.push(i,"b0013SWuyVOuotspDE/nhZb","EffectDelayRemove");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Effect"),p=cc._decorator,f=p.ccclass,d=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.life=0,e.timestamp=-1,e}return l(e,t),e.prototype.play=function(e){t.prototype.play.call(this,e),this.timestamp=0},e.prototype.logicUpdate=function(t){this.timestamp<0||(this.timestamp+=t,this.timestamp>=this.life&&(this.timestamp=-1,this.funcComplete&&this.funcComplete(this)))},e.prototype.start=function(){},u([d({displayName:"\u65f6\u95f4"})],e.prototype,"life",void 0),u([f],e)}(s.default);a.default=y,cc._RF.pop(),cc._RF.pop()},{}],EffectFby:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"4d547uf+sRP37+S1Mi5jE2U","EffectFby");var r=t,i=e,a=o;cc._RF.push(i,"4d547uf+sRP37+S1Mi5jE2U","EffectFby");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("FbfAnimation"),p=r("Effect"),f=cc._decorator,d=f.ccclass,y=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameAnimation=null,e}return l(e,t),e.prototype.play=function(e){t.prototype.play.call(this,e),this.frameAnimation.play()},e.prototype.onComplete=function(){this.funcComplete&&this.funcComplete(this)},e.prototype.cleanup=function(){this.frameAnimation.cleanup()},e.prototype.onLoad=function(){this.frameAnimation.onComplete(this.onComplete.bind(this))},e.prototype.start=function(){},u([y({type:s.default,displayName:"\u5e27\u52a8\u753b"})],e.prototype,"frameAnimation",void 0),u([d],e)}(p.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],EffectManager:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"a1d50MBS0ZFY4Z/KAj4fKEc","EffectManager");var r=t,i=e,a=o;cc._RF.push(i,"a1d50MBS0ZFY4Z/KAj4fKEc","EffectManager");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Factory"),d=r("UuidUtil"),y=r("Effect"),h=cc._decorator,m=h.ccclass,b=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parent=null,e.list=[],e.follow=[],e.removeList=[],e.createFlag=d.default.create(),e.indexMap={},e}var o;return l(e,t),o=e,e.prototype.getIndex=function(t){if(null==this.indexMap[t]){var e=0;for(var o in this.indexMap)this.indexMap[o]>e&&(e=this.indexMap[o]);this.indexMap[t]=e+1}return this.indexMap[t]},e.prototype.create=function(t,e,o,n){return void 0===o&&(o=null),s(this,void 0,void 0,function(){var r,i,a;return p(this,function(c){switch(c.label){case 0:return r=this.createFlag,[4,f.default.instance.create(t)];case 1:return i=c.sent(),r!==this.createFlag?(cc.log("remove await effect"),f.default.instance.remove(i),[2,null]):(i.parent=o||this.parent,i.position=e,i.zIndex=-this.getIndex(i.name),a=i.getComponent(y.default),this.list.push(a),a.play(this.onComplete.bind(this)),a.node.angle=n,[2,a])}})})},e.prototype.createAndFollow=function(t,e,o){return s(this,void 0,void 0,function(){var n,r,i;return p(this,function(a){switch(a.label){case 0:return n=this.createFlag,[4,f.default.instance.create(t)];case 1:return r=a.sent(),n!==this.createFlag?(cc.log("remove await effect"),f.default.instance.remove(r),[2,null]):(r.parent=this.parent,r.position=o,r.scale=e.width/r.width,r.zIndex=-this.getIndex(r.name),i=r.getComponent(y.default),this.list.push(i),this.follow.push({target:e.node,node:r,offset:o}),[2,i])}})})},e.prototype.onComplete=function(t){this.remove(t)},e.prototype.remove=function(t){this.removeList.push(t);for(var e=0;e<this.follow.length;e++)if(this.follow[e].node===t.node){this.follow.splice(e,1);break}},e.prototype.cleanup=function(){this.list.forEach(function(t){t.cleanup(),f.default.instance.remove(t.node)}),this.list=[],this.follow=[],this.createFlag=d.default.create()},e.prototype.logicUpdate=function(t){this.list.forEach(function(e){return e.logicUpdate(t)});for(var e=0;e<this.removeList.length;e++){var o=this.removeList[e],n=this.list.indexOf(o);-1!==n&&(f.default.instance.remove(o.node),this.list.splice(n,1)),o.cleanup()}this.removeList=[],this.follow.forEach(function(t){t.node.position=t.target.position.add(t.offset)})},e.prototype.onLoad=function(){o.instance=this},e.prototype.start=function(){},e.instance=null,u([b({type:cc.Node,displayName:"\u7236\u8282\u70b9"})],e.prototype,"parent",void 0),o=u([m],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],EffectSpine:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f53b5Ey7+1DmZp9cjqtG6jd","EffectSpine");var r=t,i=e,a=o;cc._RF.push(i,"f53b5Ey7+1DmZp9cjqtG6jd","EffectSpine");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("EventHelper"),f=r("GameGlobaled"),d=r("Effect"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e.animationName="animation",e}return l(e,t),e.prototype.play=function(e){t.prototype.play.call(this,e),this.spine.timeScale=f.default.speed,this.spine.setAnimation(0,this.animationName,!1)},e.prototype.onComplete=function(){this.funcComplete&&this.funcComplete(this)},e.prototype.onGameSpeedChange=function(t){this.spine&&(this.spine.timeScale=t)},e.prototype.cleanup=function(){},e.prototype.onLoad=function(){this.spine.setCompleteListener(this.onComplete.bind(this)),p.default.on(s.default.GameSpeedChange,this.onGameSpeedChange,this)},e.prototype.start=function(){},u([m({type:sp.Skeleton,displayName:"Spine"})],e.prototype,"spine",void 0),u([m({displayName:"\u52a8\u753b\u540d"})],e.prototype,"animationName",void 0),u([h],e)}(d.default);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],Effect:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"20bf3AdhCNOuJQ9o7eGgC9W","Effect");var r=e,i=o;cc._RF.push(r,"20bf3AdhCNOuJQ9o7eGgC9W","Effect");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zIndex=0,e.funcComplete=null,e}return c(e,t),e.prototype.play=function(t){this.funcComplete=t},e.prototype.loop=function(){},e.prototype.cleanup=function(){},e.prototype.logicUpdate=function(){},e.prototype.start=function(){},l([p({displayName:"\u5c42\u7ea7",step:1,min:0,max:cc.macro.MAX_ZINDEX})],e.prototype,"zIndex",void 0),l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],EntityData:[function(t,e,o){"use strict";cc._RF.push(e,"e493aHEkxhInpph0U4hoH7M","EntityData");var n=t,r=e,i=o;cc._RF.push(r,"e493aHEkxhInpph0U4hoH7M","EntityData"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("AttValue");i.default=function(){this.uid=0,this.sdbId=0,this.atk=new a.AttValue,this.hp=new a.AttValueWithMax,this.ad=new a.AttValue,this.as=new a.AttValue,this.spd=new a.AttValue,this.def=new a.AttValue},cc._RF.pop(),cc._RF.pop()},{}],Entity:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"10e96rd3JRBf5JzzDa0PCD7","Entity");var r=t,i=e,a=o;cc._RF.push(i,"10e96rd3JRBf5JzzDa0PCD7","Entity");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("SoundHelper"),p=r("ChessRenderer"),f=r("SkillFactory"),d=r("Weapon"),y=r("EntityData"),h=cc._decorator,m=h.ccclass,b=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=null,e.weapon=null,e.data=null,e.isDying=!1,e.isRemove=!1,e.skillResist={},e.skillList=[],e}return l(e,t),Object.defineProperty(e.prototype,"isDead",{get:function(){return this.isDying||this.data.hp.value<=0||this.isRemove},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uid",{get:function(){return this.data.uid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.renderer.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.renderer.height},enumerable:!1,configurable:!0}),e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.data=new y.default,this.isRemove=!1},Object.defineProperty(e.prototype,"bodyLocal",{get:function(){return cc.Vec3.ZERO},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodyPosition",{get:function(){return this.node.position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodyPositionToWorld",{get:function(){return this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){this.cleanupSkill(),this.renderer.cleanup(),this.isRemove=!0,this.skillResist={}},e.prototype.reset=function(){},e.prototype.addSkillResist=function(t,e){this.skillResist[t]=e},e.prototype.logicUpdate=function(t){for(var e in this.skillList.forEach(function(e){return e.logicUpdate(t)}),this.skillResist)this.skillResist[e]-=t,this.skillResist[e]<=0&&delete this.skillResist[e]},e.prototype.attack=function(){},e.prototype.attackStop=function(){},e.prototype.onAttack=function(){},e.prototype.onDamage=function(){},e.prototype.onHurt=function(t){if(!this.isDead)return t=t*(100-this.data.def.value)/100,this.data.hp.subValue(t),this.renderer.setAnimation(p.AnimationNames.Hurt),s.default.playBattleSfx("Hit2"),this.data.hp.value<=0&&this.onDead(),t},e.prototype.onDead=function(){this.skillList.forEach(function(t){return t.onDead()})},e.prototype.addSkillByClone=function(t){if(!this.isDead&&!this.skillResist.hasOwnProperty(t.skillName)){var e=this.skillList.find(function(e){return e.key==t.key});e||((e=f.default.clone(t)).setOwner(this),this.skillList.push(e)),e.onJoin()}},e.prototype.addSkillByClass=function(t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=""),!this.isDead&&!this.skillResist.hasOwnProperty(t._skillName)){var n=this.skillList.find(function(e){return e.key==t._skillName});if(!n||!e){if(!(n=f.default.getByClass(t)))return;n.setParam(o),n.setOwner(this),this.skillList.push(n)}n.onJoin()}},e.prototype.addSkill=function(t,e){if(void 0===e&&(e=""),!this.isDead&&!this.skillResist.hasOwnProperty(t.class)){var o=this.skillList.find(function(e){return e.key==t.id});if(!o){if(!(o=f.default.getByData(t,e)))return;o.setOwner(this),this.skillList.push(o)}o.onJoin()}},e.prototype.addMonsterSkill=function(t,e){if(void 0===e&&(e=""),!this.isDead){var o=this.skillList.find(function(e){return e.key==t.id});if(!o){if(!(o=f.default.getByMonster(t,e)))return;o.setOwner(this),this.skillList.push(o)}}},e.prototype.getSkill=function(t){for(var e=0;e<this.skillList.length;e++)if(this.skillList[e].skillName==t.prototype.skillName)return this.skillList[e];return null},e.prototype.removeSkill=function(t){var e=this.skillList.find(function(e){return e.key==t});e&&(this.skillList.splice(this.skillList.indexOf(e),1),f.default.put(e))},e.prototype.cleanupSkill=function(){for(var t=0;t<this.skillList.length;t++)f.default.put(this.skillList[t]);this.skillList.length=0},e.prototype.start=function(){},u([b({type:p.default,displayName:"\u6e32\u67d3\u5668"})],e.prototype,"renderer",void 0),u([b({type:d.default,displayName:"\u6b66\u5668"})],e.prototype,"weapon",void 0),u([m],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],EventConfig:[function(t,e,o){"use strict";cc._RF.push(e,"b7b5d6OVkFE7YBz2WnzzpuP","EventConfig");var n=e,r=o;cc._RF.push(n,"b7b5d6OVkFE7YBz2WnzzpuP","EventConfig"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.GameHide="GameHide",t.GameShow="GameShow",t.NetMessage="NetMessage",t.ReconnectSuccess="ReconnectSuccess",t.CameraPositionChange="CameraPositionChange",t.CameraZoomChange="CameraZoomChange",t.FrameShowTry="FrameShowTry",t.FrameShow="FrameShow",t.FrameBeforeShow="FrameBeforeShow",t.FrameHideTry="FrameHideTry",t.FrameHide="FrameHide",t.GuideClick="GuideClick",t.GuideClickInRect="GuideClickInRect",t.ShowAdLoading="ShowAdLoading",t.HideAdLoading="HideAdLoading",t.AddPower="AddPower",t.TowerAdd="TowerAdd",t.TowerCompound="TowerCompound",t.FoundationAdd="FoundationAdd",t.TreeBaseLvUp="TreeBaseLvUp",t.TreeAdvLvUp="TreeAdvLvUp",t.GameSpeedChange="GameSpeedChange",t.NewGame="NewGame",t.ContinueGame="ContinueGame",t.SwitchPathLength="SwitchPathLength",t.LevelPass="LevelPass",t.LevelFail="LevelFail",t.LevelRevive="LevelRevive",t.LevelPause="LevelPause",t.LevelResume="LevelResume",t.BuyCard="BuyCard",t.refreshTop="refreshTop",t.refreshMainRed="refreshMainRed",t.refreshUintUp="refreshUintUp",t.refreshHeroUp="refreshHeroUp",t.refreshHeroRed="refreshHeroRed",t.refreshCardRed="refreshCardRed",t.BuyItem="BuyItem",t.DiamondBuyCoin="DiamondBuyCoin",t.CommonBoxOpen="CommonBoxOpen",t.PremBoxOpen="PremBoxOpen",t.VideoBuyPremBox="VideoBuyPremBox",t.OpenBox="OpenBox",t.GuideBattle="GuideBattle",t.CreateBullet="CreateBullet",t.RemoveBullet="RemoveBullet",t.MonsterDamaged="MonsterDamaged",t.MonsterDead="MonsterDead",t.RoundStart="RoundStart",t.RoundPass="RoundPass",t.RoundFail="RoundFail",t.CoinChange="CoinChange",t.BattleLevelUp="BattleLevelUp",t.SelectCard="SelectCard",t.SelectAllCard="SelectAllCard",t.BoardChange="BoardChange",t.TowerLvUp="TowerLvUp",t.FoundationChange="FoundationChange",t.TaskStoryReward="TaskStoryReward",t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],EventHelper:[function(t,e,o){"use strict";cc._RF.push(e,"44dfbM0jPNNnp3dPa2fo4WM","EventHelper");var n=e,r=o;cc._RF.push(n,"44dfbM0jPNNnp3dPa2fo4WM","EventHelper"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.cleanupAll=function(){this.events.clear()},t.emit=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=this.events.get(t)||[];n.forEach(function(t){t.func.apply(t.obj,e)})},t.on=function(t,e,o){this.events.has(t)||this.events.set(t,[]),this.events.get(t).push({func:e,obj:o})},t.once=function(t,e,o){var n=this;this.on(t,function r(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];e&&e.apply(o,i),n.off(t,r,n)},this)},t.off=function(t,e,o){this.events.set(t,(this.events.get(t)||[]).filter(function(t){return t.func!==e||t.obj!==o}))},t.remove=function(t,e){this.events[t]=[],e&&e()},t.events=new Map,t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],Factory:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"dc942JTz6tOyJ1jU00r01RQ","Factory");var r=t,i=e,a=o;cc._RF.push(i,"dc942JTz6tOyJ1jU00r01RQ","Factory");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("AssetBundleHelper"),d=r("LogUtil"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.poolList=new Map,e.prefabCache=new Map,e.nodeList=[],e.isEnabedCreate=!0,e}var o;return l(e,t),o=e,Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.getPrefab=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(o){switch(o.label){case 0:return(e=this.prefabCache.get(t))?[3,2]:[4,f.default.getAsset(cc.Prefab,t)];case 1:e=o.sent(),this.prefabCache.set(t,e),o.label=2;case 2:return[2,e]}})})},e.prototype.getPool=function(t){var e=this.poolList.get(t);return e||(e=new cc.NodePool,this.poolList.set(t,e)),e},e.prototype.getByPath=function(t){return s(this,void 0,void 0,function(){var e,o,n,r,i,a;return p(this,function(c){switch(c.label){case 0:return e=t.split("/"),o=e[e.length-1],(r=this.getPool(o).get())?[3,2]:(a=(i=cc).instantiate,[4,this.getPrefab(t)]);case 1:r=a.apply(i,[c.sent()]),c.label=2;case 2:return(n=r)&&(n.name=o),[2,n]}})})},e.prototype.getByPrefab=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(){return e=t.name,[2,this.getPool(e).get()||cc.instantiate(t)]})})},e.prototype.create=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(o){switch(o.label){case 0:return this.isEnabedCreate?(e=null,"string"!=typeof t?[3,2]:[4,this.getByPath(t)]):("string"==typeof t?d.default.logRed("Factory \u4e0d\u5408\u65f6\u5b9c\u7684\u521b\u5efa\uff1a"+t):d.default.logRed("Factory \u4e0d\u5408\u65f6\u5b9c\u7684\u521b\u5efa\uff1a"+t.name),[2,null]);case 1:return e=o.sent(),[3,4];case 2:return[4,this.getByPrefab(t)];case 3:e=o.sent(),o.label=4;case 4:return e?this.isEnabedCreate?(this.nodeList.push(e),[2,e]):(this.remove(e),[2]):(d.default.logRed("\u521b\u5efa\u9884\u5236\u4f53\u65f6\u51fa\u9519\u4e86\uff1a"+t),[2,null])}})})},e.prototype.remove=function(t){if(cc.isValid(t)){for(var e=0;e<this.nodeList.length;e++)this.nodeList[e]===t&&this.nodeList.splice(e,1);this.poolList.has(t.name)?this.poolList.get(t.name).put(t):t.destroy()}},e.prototype.reclaim=function(t){this.remove(t)},e.prototype.cleanup=function(){this.nodeList.forEach(function(t){cc.isValid(t)&&(t.stopAllActions(),t.destroy())}),this.nodeList=[],this.poolList.forEach(function(t){t.clear()}),this.poolList.clear(),this.prefabCache.clear()},e.prototype.onLoad=function(){o._instance=this},e.prototype.start=function(){},e._instance=null,o=u([h],e)}(cc.Component));a.default=m,cc._RF.pop(),cc._RF.pop()},{}],FanTower:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"483c9JUDodOPLaBRTWvP4ES","FanTower");var r=t,i=e,a=o;cc._RF.push(i,"483c9JUDodOPLaBRTWvP4ES","FanTower");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.FanTower=void 0;var s=r("ArrowTower"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),u([f],e)}(s.ArrowTower));a.FanTower=d,cc._RF.pop(),cc._RF.pop()},{}],FastMonster:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"77e4aS35+pLLYynhC8Ysa9Q","FastMonster");var r=t,i=e,a=o;cc._RF.push(i,"77e4aS35+pLLYynhC8Ysa9Q","FastMonster");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Monster"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),u([f],e)}(s.default));a.default=d,cc._RF.pop(),cc._RF.pop()},{}],FbfAnimation:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6ea16f0HoNGdoFqhjp44vgK","FbfAnimation");var r=t,i=e,a=o;cc._RF.push(i,"6ea16f0HoNGdoFqhjp44vgK","FbfAnimation");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameGlobaled"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.interval=.05,e.isAutoPlay=!1,e.isLoop=!1,e.sfList=[],e.time=0,e.isPlaying=!1,e.funcComplete=null,e}return l(e,t),e.prototype.play=function(){this.time=0,this.isPlaying=!0},e.prototype.stop=function(){this.isPlaying=!1},e.prototype.resume=function(){this.isPlaying=!0},e.prototype.cleanup=function(){this.sprite.spriteFrame=null,this.isPlaying=!1},e.prototype.onComplete=function(t){this.funcComplete=t},e.prototype.setSpriteFrame=function(t){this.sprite.spriteFrame=t},e.prototype.logicUpdate=function(t){if(this.isPlaying){if(this.time+=t,!this.isLoop&&this.time>=this.sfList.length*this.interval)return this.funcComplete&&this.funcComplete(),void this.stop();var e=this.sfList[Math.floor(this.time/this.interval)%this.sfList.length];this.sprite.spriteFrame!=e&&this.setSpriteFrame(e)}},e.prototype.start=function(){this.isAutoPlay&&this.play()},e.prototype.update=function(t){this.logicUpdate(t*s.default.speed)},u([d({type:cc.Sprite,displayName:"\u7cbe\u7075"})],e.prototype,"sprite",void 0),u([d({displayName:"\u95f4\u9694"})],e.prototype,"interval",void 0),u([d({displayName:"\u81ea\u52a8\u64ad\u653e"})],e.prototype,"isAutoPlay",void 0),u([d({displayName:"\u5faa\u73af\u64ad\u653e"})],e.prototype,"isLoop",void 0),u([d({type:cc.SpriteFrame,displayName:"\u5e8f\u5217\u5e27"})],e.prototype,"sfList",void 0),u([f,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/FbfAnimation \u5e8f\u5217\u5e27\u52a8\u753b")],e)}(cc.Component);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],FixShaderPackageTexture:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d543bEf5t1NM4JRKrvukfBV","FixShaderPackageTexture");var r=e,i=o;cc._RF.push(r,"d543bEf5t1NM4JRKrvukfBV","FixShaderPackageTexture");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=(u.property,u.requireComponent),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.material=null,e.textureNativeUrl="None",e.spriteFrameName="",e}return c(e,t),e.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite),this.sprite&&(this.material=this.sprite.getMaterial(0)),this.sprite.spriteFrame&&(this.textureNativeUrl=this.sprite.spriteFrame.getTexture().nativeUrl,this.spriteFrameName=this.sprite.spriteFrame.name),""!==this.textureNativeUrl&&(this.sprite.node.opacity=.01)},e.prototype.start=function(){this.refreshMaterial()},e.prototype.refreshMaterial=function(){var t=this.sprite.spriteFrame;if(t){var e=t.uv[0],o=t.uv[6],n=t.uv[3],r=t.uv[5],i=new cc.Vec4(e,r,o,n),a=t.isRotated()?1:0;this.material.setProperty("fixUV",i),this.material.setProperty("fixRotate",a)}},e.prototype.update=function(){this.sprite.spriteFrame&&(this.textureNativeUrl===this.sprite.spriteFrame.getTexture().nativeUrl&&this.spriteFrameName===this.sprite.spriteFrame.name||(this.textureNativeUrl=this.sprite.spriteFrame.getTexture().nativeUrl,this.spriteFrameName=this.sprite.spriteFrame.name,this.refreshMaterial(),this.sprite.node.opacity=255))},l([s,p(cc.Sprite)],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],FlameTower:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ec394bPaSVMP6jUj9aoL+13","FlameTower");var r=t,i=e,a=o;cc._RF.push(i,"ec394bPaSVMP6jUj9aoL+13","FlameTower");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.FlameTower=void 0;var s=r("Tower"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),u([f],e)}(s.default));a.FlameTower=d,cc._RF.pop(),cc._RF.pop()},{}],FormatLabel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"16c65n9CNJDYp8GWOYZ2eZ4","FormatLabel");var r=t,i=e,a=o;cc._RF.push(i,"16c65n9CNJDYp8GWOYZ2eZ4","FormatLabel");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventHelper"),p=r("LangHelper"),f=r("StringUtil"),d=cc._decorator,y=d.ccclass,h=d.menu,m=(d.property,d.inspector),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.regStr="",e.data=null,e}return l(e,t),e.prototype.setFormatLabel=function(t,e){void 0===e&&(e=null),null!==e&&(this.regStr=e),this.data=t,this.string=f.default.FormatString(this.regStr,this.data)},e.prototype.refresh=function(t){this.regStr=t,this.data&&(this.string=f.default.FormatString(this.regStr,this.data))},e.prototype.onLoad=function(){this.regStr=this.string,s.default.on(p.default.Evnet_CHANGE_LANG,this.refresh,this)},e.prototype.start=function(){},u([y,m("packages://inspector/inspectors/comps/label.js"),h("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u683c\u5f0f\u5316Label")],e)}(cc.Label);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],FrameAnimation_Border:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5f689QuW7JBwrAD5p0h095g","FrameAnimation_Border");var r=t,i=e,a=o;cc._RF.push(i,"5f689QuW7JBwrAD5p0h095g","FrameAnimation_Border");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f,d=r("FrameHelper"),y=cc._decorator,h=y.ccclass,m=y.property,b=y.menu;(function(t){t[t.top=0]="top",t[t.bottom=1]="bottom",t[t.left=2]="left",t[t.right=3]="right"})(f||(f={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=f.top,e}return l(e,t),e.prototype.show=function(){var t=this;return new Promise(function(e){return s(t,void 0,void 0,function(){var t=this;return p(this,function(){return this.isPlaying=!0,cc.tween(this.node).set({x:this.target.x,y:this.target.y}).to(this.time,{x:this.pos.x,y:this.pos.y}).call(function(){t.isPlaying=!1,e(null)}).start(),[2]})})})},e.prototype.hide=function(){var t=this;return new Promise(function(e){return s(t,void 0,void 0,function(){var t=this;return p(this,function(){return this.isPlaying=!0,cc.tween(this.node).set({x:this.pos.x,y:this.pos.y}).to(this.time,{x:this.target.x,y:this.target.y}).call(function(){t.isPlaying=!1,e(null)}).start(),[2]})})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.pos=cc.v2(this.node.position);var e=cc.v2(this.node.width*this.node.scaleX/2,this.node.height*this.node.scaleY/2),o=0;switch(this.type){case f.top:o=cc.winSize.height/2-this.pos.y,this.target=cc.v2(this.pos.x,this.pos.y+o+e.y);break;case f.bottom:o=cc.winSize.height/2+this.pos.y,this.target=cc.v2(this.pos.x,this.pos.y-o-e.y);break;case f.left:o=cc.winSize.width/2+this.pos.x,this.target=cc.v2(this.pos.x-o-e.x,this.pos.y);break;case f.right:o=cc.winSize.width/2-this.pos.x,this.target=cc.v2(this.pos.x+o+e.x,this.pos.y)}},u([m({type:cc.Enum(f),displayName:"\u8fb9"})],e.prototype,"type",void 0),u([h,b("\u754c\u9762\u5207\u6362\u52a8\u753b/Border \u8fb9\u6846\u7f29\u5165")],e)}(d.FrameAnimation);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],FrameAnimation_Opacity:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"abfcd2N1MxPQ6fA+lcXrP00","FrameAnimation_Opacity");var r=t,i=e,a=o;cc._RF.push(i,"abfcd2N1MxPQ6fA+lcXrP00","FrameAnimation_Opacity");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("FrameHelper"),d=cc._decorator,y=d.ccclass,h=(d.property,d.menu),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.show=function(){var t=this;return new Promise(function(e){return s(t,void 0,void 0,function(){var t=this;return p(this,function(){return this.isPlaying=!0,cc.tween(this.node).set({opacity:0}).to(this.time,{opacity:255}).call(function(){t.isPlaying=!1,e(null)}).start(),[2]})})})},e.prototype.hide=function(){var t=this;return new Promise(function(e){return s(t,void 0,void 0,function(){var t=this;return p(this,function(){return this.isPlaying=!0,cc.tween(this.node).set({opacity:255}).to(this.time,{opacity:0}).call(function(){t.isPlaying=!1,e(null)}).start(),[2]})})})},u([y,h("\u754c\u9762\u5207\u6362\u52a8\u753b/Opacity \u900f\u660e")],e)}(f.FrameAnimation);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],FrameAnimation_Scale:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ef8edaTSU9LDoQNUiTsO9Pb","FrameAnimation_Scale");var r=t,i=e,a=o;cc._RF.push(i,"ef8edaTSU9LDoQNUiTsO9Pb","FrameAnimation_Scale");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("FrameHelper"),d=cc._decorator,y=d.ccclass,h=(d.property,d.menu),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.show=function(){var t=this;return new Promise(function(e){return s(t,void 0,void 0,function(){var t=this;return p(this,function(){return this.isPlaying=!0,cc.tween(this.node).set({scale:0,opacity:255}).to(this.time,{scale:1}).call(function(){t.isPlaying=!1,e(null)}).start(),[2]})})})},e.prototype.hide=function(){var t=this;return new Promise(function(e){return s(t,void 0,void 0,function(){var t=this;return p(this,function(){return this.isPlaying=!0,cc.tween(this.node).set({scale:1,opacity:255}).to(this.time,{scale:0}).call(function(){t.isPlaying=!1,e(null)}).start(),[2]})})})},u([y,h("\u754c\u9762\u5207\u6362\u52a8\u753b/Scale \u7f29\u653e")],e)}(f.FrameAnimation);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],FrameHelper:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5a180zvKEtOBYU0Md0nJufy","FrameHelper");var r=t,i=e,a=o;cc._RF.push(i,"5a180zvKEtOBYU0Md0nJufy","FrameHelper");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},f=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(a,"__esModule",{value:!0}),a.FrameBase=a.FrameAnimation=a.FrameType=void 0;var d,y=r("MoveTween"),h=r("EventConfig"),m=r("TimeUtil"),b=r("AssetBundleHelper"),v=r("EventHelper"),g=cc._decorator,_=g.ccclass,w=(g.menu,g.property);(function(t){t[t.Stage=0]="Stage",t[t.Hold=1]="Hold",t[t.Normal=2]="Normal",t[t.Full=3]="Full",t[t.Model=4]="Model",t[t.ModelScale=5]="ModelScale"})(d=a.FrameType||(a.FrameType={}));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=.1,e.isPlaying=!1,e}return l(e,t),e.prototype.onLoad=function(){var t=this.node.parent.getComponent(cc.SafeArea);t&&t.enabled&&(t.updateArea(),t.enabled=!1);var e=this.node.getComponent(cc.Widget);e&&e.enabled&&(e.updateAlignment(),e.enabled=!1)},e.prototype.start=function(){},u([w({displayName:"\u65f6\u95f4"})],e.prototype,"time",void 0),u([_],e)}(cc.Component);a.FrameAnimation=S;var R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isLoadFinish=!1,e.nodeModelMask=null,e._isAnimationPlaying=!1,e.modelOpacity=191,e}return l(e,t),Object.defineProperty(e.prototype,"frameClass",{get:function(){return this.constructor},enumerable:!1,configurable:!0}),e.prototype.beforeShow=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(this,void 0,void 0,function(){return p(this,function(){return[2,!0]})})},e.prototype.onShow=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.beforeHide=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onHide=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.hideFrame=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(this,void 0,void 0,function(){return p(this,function(){return[2,O.hideFrame.apply(O,f([this.frameClass],t))]})})},e.prototype.getExFrame=function(){return[]},e.prototype.showExFrame=function(){for(var t=this.getExFrame(),e=[],o=0;o<t.length;o++)e.push(O.showFrame(t[o]));return e},e.prototype.hideExFrame=function(){for(var t=this.getExFrame(),e=[],o=0;o<t.length;o++)e.push(O.hideFrame(t[o]));return e},e.prototype.getModelAnimationTime=function(){return.1},e.prototype.animationShowModel=function(){return s(this,void 0,void 0,function(){var t=this;return p(this,function(){return[2,new Promise(function(e){return s(t,void 0,void 0,function(){var t,o=this;return p(this,function(n){switch(n.label){case 0:return this.nodeModelMask?(t=this.getModelAnimationTime())>0?(this.node.opacity=0,[4,m.default.delay()]):[3,2]:[2,e(null)];case 1:return n.sent(),this._isAnimationPlaying=!0,this.node.opacity=255,cc.tween(this.nodeModelMask).set({opacity:0,scale:10}).to(t,{opacity:this.modelOpacity,scale:1}).call(function(){o._isAnimationPlaying=!1,e(null)}).start(),[3,3];case 2:this.nodeModelMask.opacity=this.modelOpacity,this.nodeModelMask.scale=1,e(null),n.label=3;case 3:return[2]}})})})]})})},e.prototype.animationHideModel=function(){return s(this,void 0,void 0,function(){var t=this;return p(this,function(){return[2,new Promise(function(e){if(!t.nodeModelMask)return e(null);if(!t.nodeModelMask.activeInHierarchy)return e(null);var o=t.getModelAnimationTime();o>0?(t._isAnimationPlaying=!0,cc.tween(t.nodeModelMask).set({opacity:255,scale:1}).to(o,{opacity:0,scale:10}).call(function(){t._isAnimationPlaying=!1,e(null)}).start()):(t.nodeModelMask.opacity=0,t.nodeModelMask.scale=10,e(null))})]})})},e.prototype.animationShowModelScale=function(){return s(this,void 0,void 0,function(){var t=this;return p(this,function(){return[2,new Promise(function(e){return s(t,void 0,void 0,function(){var t,o=this;return p(this,function(n){switch(n.label){case 0:return this.nodeModelMask?(t=this.getModelAnimationTime())>0?(this.node.opacity=0,[4,m.default.delay()]):[3,2]:[2,e(null)];case 1:return n.sent(),this._isAnimationPlaying=!0,this.node.opacity=255,this.nodeModelMask.opacity=this.modelOpacity,this.nodeModelMask.scale=1,cc.tween(this.node).set({scale:1}).to(t,{scale:1.1}).to(t,{scale:1}).call(function(){o._isAnimationPlaying=!1,e(null)}).start(),[3,3];case 2:this.nodeModelMask.opacity=this.modelOpacity,this.nodeModelMask.scale=1,e(null),n.label=3;case 3:return[2]}})})})]})})},e.prototype.playShowAnimation=function(){return s(this,void 0,void 0,function(){var t,e,o,n;return p(this,function(r){switch(r.label){case 0:switch(t=[],this.frameClass.frameInfo.type){case d.Model:t.push(this.animationShowModel());break;case d.ModelScale:t.push(this.animationShowModelScale())}for(e=0;e<this.node.childrenCount;e++)for(o=this.node.children[e].getComponents(S),n=0;n<o.length;n++)t.push(o[n].show());return[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.playHideAnimation=function(){return s(this,void 0,void 0,function(){var t,e,o,n;return p(this,function(r){switch(r.label){case 0:switch(t=[],this.frameClass.frameInfo.type){case d.Model:case d.ModelScale:t.push(this.animationHideModel())}for(e=0;e<this.node.childrenCount;e++)for(o=this.node.children[e].getComponents(S),n=0;n<o.length;n++)t.push(o[n].hide());return[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.show=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(this,void 0,void 0,function(){var e,o,n;return p(this,function(r){switch(r.label){case 0:this.node.pauseSystemEvents(!0),e=this.frameClass.frameInfo,this.node.active=!0,this.node.opacity=0,o=0,r.label=1;case 1:return o<100?this._isLoadFinish||this._isAnimationPlaying?[3,4]:(o>10&&cc.warn("\u754c\u9762\u663e\u793a\u7b49\u5f85\u8d85\u65f6 : "+e.name),[4,m.default.delay(.1)]):[3,4];case 2:r.sent(),r.label=3;case 3:return o++,[3,1];case 4:return[4,this.beforeShow.apply(this,t)];case 5:return n=r.sent(),v.default.emit(h.default.FrameBeforeShow,this),n?(this.node.opacity=255,[4,this.playShowAnimation()]):[3,8];case 6:return r.sent(),[4,this.onShow.apply(this,t)];case 7:return r.sent(),[3,9];case 8:this.node.active=!1,this.node.opacity=255,r.label=9;case 9:return this.node.resumeSystemEvents(!0),[2,n]}})})},e.prototype.hide=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return this.node.pauseSystemEvents(!0),[4,this.beforeHide.apply(this,t)];case 1:return e.sent(),[4,this.playHideAnimation()];case 2:return e.sent(),this.node.opacity=0,[4,this.onHide.apply(this,t)];case 3:return e.sent(),this.node.active=!1,this.node.opacity=255,this.node.resumeSystemEvents(!0),[2]}})})},e.prototype.onLoad=function(){var t=this;new Promise(function(e){return s(t,void 0,void 0,function(){return p(this,function(){switch(this.frameClass.frameInfo.type){case d.Model:case d.ModelScale:this.setNodeModelMask();break;case d.Stage:case d.Full:this.node.addComponent(cc.BlockInputEvents)}return e(null),[2]})})}).then(function(){t._isLoadFinish=!0})},e.prototype.setNodeModelMask=function(){return s(this,void 0,void 0,function(){var t,e;return p(this,function(o){switch(o.label){case 0:return[4,b.default.getAsset(cc.SpriteFrame,"Texture/default")];case 1:return(t=o.sent())&&(this.nodeModelMask=new cc.Node,(e=this.nodeModelMask.addComponent(cc.Sprite)).sizeMode=cc.Sprite.SizeMode.CUSTOM,this.nodeModelMask.addComponent(cc.BlockInputEvents),e.spriteFrame=t,this.nodeModelMask.color=cc.Color.BLACK,this.nodeModelMask.width=cc.winSize.width,this.nodeModelMask.height=cc.winSize.height,this.nodeModelMask.zIndex=-1,this.nodeModelMask.opacity=this.modelOpacity,this.nodeModelMask.parent=this.node,this.nodeModelMask.on(cc.Node.EventType.TOUCH_END,this.onClickNodeModelMask,this)),[2]}})})},e.prototype.onClickNodeModelMask=function(){this.hideFrame()},e.frameInfo=null,e}(cc.Component);a.FrameBase=R;var O=function(){function t(){cc.director.getScheduler().enableForTarget(this),cc.director.getScheduler().scheduleUpdate(this,0,!1)}return t.init=function(){this.nodeLoading=cc.find("Canvas/Loading"),this.nodeLoading&&(this.nodeLoading.zIndex=cc.macro.MAX_ZINDEX,this.nodeLoading.active=!1),this.nodeVideoLoading=cc.find("Canvas/nodeVideoLoading"),this.nodeVideoLoading&&(this.nodeVideoLoading.zIndex=cc.macro.MAX_ZINDEX,this.nodeVideoLoading.active=!1,this.videoMoveTween=this.nodeVideoLoading.getChildByName("lb").getComponent(y.default),v.default.on(h.default.ShowAdLoading,this.showVideoLoading,this),v.default.on(h.default.HideAdLoading,this.hideVideoLoading,this))},t.showLoading=function(){this.nodeLoading&&(this.nodeLoading.active=!0)},t.hideLoading=function(){this.nodeLoading&&(this.nodeLoading.active=!1)},t.showVideoLoading=function(){this.nodeVideoLoading&&(this.nodeVideoLoading.active=!0),this.videoMoveTween.show()},t.hideVideoLoading=function(){var t=this;this.videoMoveTween.hide(function(){t.nodeVideoLoading&&(t.nodeVideoLoading.active=!1)})},t.cleanupAll=function(){for(var t in this.frames)this.frames[t].node.active=!1;this.frames={},this.loadingList=[]},t.registerFrame=function(t,e){var o=t.frameInfo,n=e.getComponent(R);return e.zIndex=o.zIndex,this.frames[o.name]=n,n},t.getFrame=function(t){return this.frames[t.frameInfo.name]},t.awaitShowFrame=function(t){return s(this,void 0,Promise,function(){var e,o=this;return p(this,function(){return e=t.frameInfo,[2,new Promise(function(t){o.waitList[e.name]=t})]})})},t.preloadFramePrefab=function(t){return s(this,void 0,void 0,function(){var e,o,n,r;return p(this,function(i){switch(i.label){case 0:return e=t.frameInfo,this.loadingList.indexOf(e.name)>-1?[2,null]:this.frames.hasOwnProperty(e.name)?[2,null]:(this.loadingList.push(e.name),[4,b.default.getAsset(cc.Prefab,e.prefabName,e.bundleName)]);case 1:return o=i.sent(),(n=this.loadingList.indexOf(e.name))>-1&&this.loadingList.splice(n,1),(r=cc.instantiate(o)).active=!1,r.parent=cc.Canvas.instance.node,this.registerFrame(t,r),[2]}})})},t.showFrame=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return s(this,void 0,void 0,function(){var n,r,i,a,c,l,u,s;return p(this,function(p){switch(p.label){case 0:return n=e.frameInfo,this.loadingList.indexOf(n.name)>-1?[2,null]:(r=this.frames[n.name])?[3,3]:(this.loadingList.push(n.name),[4,b.default.getAsset(cc.Prefab,n.prefabName,n.bundleName)]);case 1:return i=p.sent(),(a=this.loadingList.indexOf(n.name))>-1&&this.loadingList.splice(a,1),(c=cc.instantiate(i)).active=!1,c.parent=cc.Canvas.instance.node,r=this.registerFrame(e,c),[4,m.default.delay()];case 2:p.sent(),p.label=3;case 3:for(v.default.emit(h.default.FrameShowTry,r),(l=[]).push(r.show.apply(r,o)),u=r.getExFrame(),s=0;s<u.length;s++)this.exFrames.hasOwnProperty(u[s].frameInfo.name)||(this.exFrames[u[s].frameInfo.name]=0),this.exFrames[u[s].frameInfo.name]++,l.push(t.showFrame(u[s]));return[4,Promise.all(l)];case 4:return p.sent(),v.default.emit(h.default.FrameShow,r),r.node.active||v.default.emit(h.default.FrameHide,r),this.waitList[n.name]&&(this.waitList[n.name](r),delete this.waitList[n.name]),[2,r]}})})},t.hideFrame=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return s(this,void 0,void 0,function(){var n,r,i,a,c,l;return p(this,function(u){switch(u.label){case 0:if(n=e.frameInfo,!(r=this.frames[n.name])||!n)return[2,null];if(!r.node.active)return[2,r];for(v.default.emit(h.default.FrameHideTry,r),(i=[]).push(r.hide.apply(r,o)),a=r.getExFrame(),c=0;c<a.length;c++)l=a[c].frameInfo.name,this.exFrames.hasOwnProperty(l)&&(this.exFrames[l]=Math.max(0,this.exFrames[l]-1),this.exFrames[l]<=0&&i.push(t.hideFrame(a[c])));return[4,Promise.all(i)];case 1:return u.sent(),v.default.emit(h.default.FrameHide,r),[2,r]}})})},t.isShow=function(t){var e=this.frames[t.frameInfo.name];return e&&e.node.active},t.prototype.update=function(){},t.frames={},t.frameInfos={},t.loadingList=[],t.exFrames={},t.nodeLoading=null,t.nodeVideoLoading=null,t.videoMoveTween=null,t.waitList={},t}();a.default=O,cc._RF.pop(),cc._RF.pop()},{}],FullByScale:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5d37biPnRtNw56QGGrl2dqg","FullByScale");var r=e,i=o;cc._RF.push(r,"5d37biPnRtNw56QGGrl2dqg","FullByScale");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=u.menu,d=u.executeInEditMode,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.isWidth=!1,e}return c(e,t),e.prototype.scaleNode=function(){this.isWidth?this.node.scale=this.target.width*this.target.scaleX/this.node.width:this.node.scale=Math.max(this.target.width*this.target.scaleX/this.node.width,this.target.height*this.target.scaleY/this.node.height)},e.prototype.onLoad=function(){this.target||(this.target=this.node.parent),this.target.on(cc.Node.EventType.SIZE_CHANGED,this.scaleNode.bind(this))},e.prototype.start=function(){this.scaleNode()},l([p({type:cc.Node,displayName:"\u76ee\u6807"})],e.prototype,"target",void 0),l([p({displayName:"\u586b\u5145\u5bbd\u5ea6"})],e.prototype,"isWidth",void 0),l([s,d,f("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f29\u653e\u586b\u5145")],e)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],GMFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"87918u2aGJH2LWibkMb3Gyd","GMFrame");var r=t,i=e,a=o;cc._RF.push(i,"87918u2aGJH2LWibkMb3Gyd","GMFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameDefine"),d=r("sdbRound"),y=r("sdbTower"),h=r("EventHelper"),m=r("FrameHelper"),b=r("RunDataHelper"),v=r("StaticDBHelper"),g=r("BagData"),_=r("DailyData"),w=r("DailyTaskData"),S=r("GameData"),R=r("PowerData"),O=r("SettingData"),P=r("StageData"),F=r("SweepData"),T=r("TowerData"),D=r("BattleFrame"),k=r("MainFrame"),C=cc._decorator,L=C.ccclass,B=C.menu,j=C.property,x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editBox=null,e}return l(e,t),e.prototype.onCloseFrame=function(){this.hideFrame()},e.prototype.btnResource=function(){var t=b.DataHelper.getData(g.default);t.setItemCount(f.default.ItemCoinId,1e5),t.setItemCount(f.default.ItemDiamondId,1e5),t.setItemCount(f.default.ItemHeroGemId,1e4),t.setItemCount(f.default.ItemPower,1e4);var e=v.default.getTable(y.default);for(var o in e)t.setItemCount(e[o].id,1e4)},e.prototype.btnPassLevel=function(){var t=b.DataHelper.getData(P.default),e=t.stage+1,o=parseInt(this.editBox.string);if(!(o<e)){for(var n=e;n<o;n++){var r=v.default.filterData(d.default,{type:f.StageType.Normal,stage:n});if(r.length<1)break;var i=0;for(var a in r)r[a].round>i&&(i=r[a].round);t.saveData(f.StageType.Normal,n,i)}this.resetEdit(),m.default.getFrame(D.default).reload(),m.default.getFrame(k.default).reload()}},e.prototype.btnCleanup=function(){b.DataHelper.getData(g.default).cleanupLocalStorage(),b.DataHelper.getData(_.default).cleanupLocalStorage(),b.DataHelper.getData(w.default).cleanupLocalStorage(),b.DataHelper.getData(S.default).cleanupLocalStorage(),b.DataHelper.getData(R.default).cleanupLocalStorage(),b.DataHelper.getData(O.default).cleanupLocalStorage(),b.DataHelper.getData(P.default).cleanupLocalStorage(),b.DataHelper.getData(F.default).cleanupLocalStorage(),b.DataHelper.getData(T.default).cleanupLocalStorage(),b.DataHelper.cleanup(),h.default.cleanupAll(),m.default.cleanupAll(),cc.game.restart()},e.prototype.resetEdit=function(){var t=b.DataHelper.getData(P.default).stage+2;this.editBox.string=t.toString()},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.resetEdit(),[2,!0]})})},e.prototype.start=function(){},e.frameInfo={name:"GMFrame",type:m.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/GMFrame",zIndex:20},u([j({type:cc.EditBox,displayName:"\u5173\u5361\u8df3\u8f6cID"})],e.prototype,"editBox",void 0),u([L,B("\u754c\u9762/GMFrame GM\u754c\u9762")],e)}(m.FrameBase);a.default=x,cc._RF.pop(),cc._RF.pop()},{}],GameBoard:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2c8be8T1UpIHYP6E/Av9pCg","GameBoard");var r=t,i=e,a=o;cc._RF.push(i,"2c8be8T1UpIHYP6E/Av9pCg","GameBoard");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameDefine"),d=r("GameGlobaled"),y=r("BoardData"),h=r("TowerManager"),m=r("PathRenderer"),b=r("RendererManager"),v=r("DragCloneManager"),g=r("BoardCalculator"),_=cc._decorator,w=_.ccclass,S=_.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pathRenderer=null,e.dragNode=null,e.nodeBattleStage=null,e.nodeBoard=null,e.sptBgTop=null,e.sptBgBottom=null,e.tempList=[],e.boardRenderer=null,e.boardData=null,e.dragBuilding=null,e.onMoveBuilding=null,e.onClickCell=null,e}return l(e,t),Object.defineProperty(e.prototype,"isShowEmpty",{set:function(){this.refreshBoard()},enumerable:!1,configurable:!0}),e.prototype.initBoard=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return this.boardData=t,this.boardRenderer&&this.boardRenderer.node.destroy(),this.boardRenderer=e,e.node.parent=this.nodeBoard,this.sptBgTop.spriteFrame=this.boardRenderer.sfTop,this.sptBgBottom.spriteFrame=this.boardRenderer.sfBottom,this.boardRenderer.init(t,this.nodeBattleStage),this.node.scale=d.default.boardScale,this.refreshBoard(),[2]})})},e.prototype.cleanup=function(){this.boardRenderer.cleanup()},e.prototype.reset=function(){},e.prototype.refreshTips=function(t,e,o,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=null),e?this.boardRenderer.showTip(t,e,o,n):this.boardRenderer.hideTip()},e.prototype.refreshBoard=function(){this.boardRenderer.draw()},e.prototype.setPaths=function(t,e){var o;void 0===e&&(e=[]),this.pathRenderer.setPath(t,e),null===(o=this.boardRenderer)||void 0===o||o.updatePathLengthLabels(t)},e.prototype.listenMoveBuilding=function(t){this.onMoveBuilding=t},e.prototype.listenClickCell=function(t){this.onClickCell=t},e.prototype.getBoardPosByPosition=function(t){var e=this.node.convertToNodeSpaceAR(t);return e.subSelf(d.default.boardStartPos),e.x=Math.floor(e.x/d.default.gridSize+.5),e.y=Math.floor(e.y/d.default.gridSize+.5),e},e.prototype.getCellByPosition=function(t){if(!this.boardData)return null;var e=this.node.convertToNodeSpaceAR(t);e.subSelf(d.default.boardStartPos),e.x=Math.floor(e.x/d.default.gridSize),e.y=Math.floor(e.y/d.default.gridSize);var o=this.boardData.getCell(e.x,e.y);return o&&o.cellType===y.CellType.TOWER&&o.id!==f.TowerId.BASE?h.default.instance.get(o.uid):null},e.prototype.calculateGridStatus=function(t,e){var o=t.sub(cc.v2(.5*e.width*d.default.boardScale,.5*e.height*d.default.boardScale));o=this.getBoardPosByPosition(o);var n=f.TOWER_CONFIGS[e.id];return g.default.calculateBuildingGridStatus(o,n,this.boardData)},e.prototype.contains=function(t){return this.node.getBoundingBoxToWorld().contains(cc.v2(t))},e.prototype.onTouchStart=function(t,e){if(this.boardData){this.dragBuilding=null;var o=this.node.convertToNodeSpaceAR(t.getLocation());o.subSelf(d.default.boardStartPos),o.x=Math.floor(o.x/d.default.gridSize),o.y=Math.floor(o.y/d.default.gridSize);var n=this.boardData.getCell(o.x,o.y);if(n&&n.cellType===y.CellType.TOWER&&n.id!==f.TowerId.BASE){if(this.dragBuilding=h.default.instance.get(n.uid),e===f.GamePhase.BATTLE)return this.dragBuilding;b.default.instance.hideDestroyMarkers();for(var r=v.default.instance.createClone(this.dragBuilding.node,this.dragNode,t.getLocation(),d.default.boardScale),i=[],a=f.TOWER_CONFIGS[this.dragBuilding.id],c=0;c<a.length;c++)for(var l=0;l<a[c].length;l++)i.push(cc.v2(this.dragBuilding.x+l,this.dragBuilding.y+c));return this.tempList=i,this.refreshBoard(),this.handleDragGridStatus(t.getLocation(),this.dragBuilding),r}return null}},e.prototype.onTouchMove=function(t){this.dragBuilding&&(v.default.instance.updateClonePosition(t.getLocation(),this.dragNode),this.handleDragGridStatus(t.getLocation(),this.dragBuilding))},e.prototype.handleDragGridStatus=function(t,e){var o=t.add(v.default.instance.getDragOffset()),n=this.calculateGridStatus(o,e),r=n.enableList,i=n.disableList;this.refreshTips(y.CellType.FOUNDATION,r,i,this.tempList)},e.prototype.onTouchEnd=function(t){if(v.default.instance.getDragOffset()){var e=t.getLocation().add(v.default.instance.getDragOffset());this.dragBuilding?(b.default.instance.showDestroyMarkers(),v.default.instance.destroyClone(),this.onMoveBuilding&&this.onMoveBuilding(this.dragBuilding,e),this.dragBuilding=null,this.tempList=[],this.refreshBoard()):this.onClickCell&&this.onClickCell(e),this.refreshTips()}},e.prototype.start=function(){},u([S({type:m.default,displayName:"\u8def\u5f84\u7ed8\u5236\u5668"})],e.prototype,"pathRenderer",void 0),u([S({type:cc.Node,displayName:"\u62d6\u62fd\u8282\u70b9"})],e.prototype,"dragNode",void 0),u([S({type:cc.Node,displayName:"\u821e\u53f0\u8282\u70b9"})],e.prototype,"nodeBattleStage",void 0),u([S({type:cc.Node,displayName:"\u68cb\u724c\u8282\u70b9"})],e.prototype,"nodeBoard",void 0),u([S({type:cc.Sprite,displayName:"\u80cc\u666f-\u4e0a"})],e.prototype,"sptBgTop",void 0),u([S({type:cc.Sprite,displayName:"\u80cc\u666f-\u4e0b"})],e.prototype,"sptBgBottom",void 0),u([w],e)}(cc.Component);a.default=R,cc._RF.pop(),cc._RF.pop()},{}],GameControl:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2fca26AQHxOpJvVmMa9CJ57","GameControl");var r=t,i=e,a=o;cc._RF.push(i,"2fca26AQHxOpJvVmMa9CJ57","GameControl");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameDefine"),d=r("TowerInfoFrame"),y=r("FrameHelper"),h=r("Factory"),m=r("MathUtil"),b=r("TimeUtil"),v=r("DragPanel"),g=r("GameBoard"),_=r("GameGlobaled"),w=r("Tower"),S=r("TowerManager"),R=cc._decorator,O=R.ccclass,P=R.property,F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBoard=null,e.dragPanel=null,e.prefabLine=null,e.contorl=null,e.graphics=null,e.tower=null,e.pos=null,e.ad=0,e.adTemp=0,e.lineList=[],e.isTouchStart=!1,e.maxMoveOffset=0,e.touchTime=0,e.phase=f.GamePhase.LAYOUT,e}return l(e,t),e.prototype.createLine=function(t){return s(this,void 0,void 0,function(){var e,o,n,r;return p(this,function(i){switch(i.label){case 0:return[4,h.default.instance.create(this.prefabLine)];case 1:for((e=i.sent()).opacity=0,e.parent=this.node,this.lineList.push({line:e,target:t,delay:.05}),o=e.getChildByName("Line"),cc.tween(o).repeatForever(cc.tween(o).to(.5,{scaleY:1.4}).to(.5,{scaleY:.8})).start(),n=[e.getChildByName("Point1"),e.getChildByName("Point2")],r=0;r<n.length;r++)cc.tween(n[r]).repeatForever(cc.tween(n[r]).to(.5,{scale:2}).to(.5,{scale:.8})).start();return[2,e]}})})},e.prototype.cleanupLine=function(){this.lineList.forEach(function(t){h.default.instance.remove(t.line)}),this.lineList=[]},e.prototype.onTouchStart=function(t){var e,o=this;this.isTouchStart||(this.maxMoveOffset=0,this.touchTime=b.default.getTime(),this.isTouchStart=!0,this.pos=t.getLocation(),this.contorl=null,this.dragPanel.contains(t.getLocation())?this.contorl=this.dragPanel:this.gameBoard.contains(t.getLocation())&&(this.contorl=this.gameBoard),this.tower=null===(e=this.contorl)||void 0===e?void 0:e.onTouchStart(t,this.phase),this.tower?(this.ad=this.tower.showRangead*_.default.boardScale,this.adTemp=0,this.phase===f.GamePhase.LAYOUT&&(S.default.instance.buildings.forEach(function(t){t.uid===o.tower.uid||t.level!==o.tower.level||t.towerData.id!==o.tower.towerData.id||t.level>=_.default.buildingMaxLevel||o.createLine(t.node)}),this.dragPanel.layoutList.nodeList.forEach(function(t){if(t.activeInHierarchy){var e=t.getComponentInChildren(w.default);e&&(e.uid===o.tower.uid||e.level!==o.tower.level||e.towerData.id!==o.tower.towerData.id||e.level>=_.default.buildingMaxLevel||o.createLine(e.node))}}))):(this.ad=0,this.adTemp=0))},e.prototype.onTouchMove=function(t){var e;this.pos=t.getLocation(),this.phase===f.GamePhase.LAYOUT&&(null===(e=this.contorl)||void 0===e||e.onTouchMove(t,this.phase));var o=t.getLocation().sub(t.getStartLocation()).len();this.maxMoveOffset=Math.max(this.maxMoveOffset,o)},e.prototype.onTouchEnd=function(t){var e;if(this.isTouchStart=!1,this.contorl===this.gameBoard){var o=this.gameBoard.getCellByPosition(t.getLocation()),n=b.default.getTime()-this.touchTime;this.maxMoveOffset<=3&&n<=500&&o&&y.default.showFrame(d.default,o)}null===(e=this.contorl)||void 0===e||e.onTouchEnd(t),this.contorl=null,this.tower=null,this.pos=t.getLocation(),this.graphics.clear(),this.ad=0,this.cleanupLine()},e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.graphics=this.node.addComponent(cc.Graphics),this.graphics.fillColor=cc.color(0,255,0,30),this.graphics.strokeColor=cc.color(0,255,0,255),this.graphics.lineWidth=8},e.prototype.start=function(){},e.prototype.update=function(t){if(this.tower){var e=this.node.convertToNodeSpaceAR(this.tower.node.convertToWorldSpaceAR(cc.Vec2.ZERO));this.ad>0&&(this.contorl==this.gameBoard||this.phase===f.GamePhase.LAYOUT)&&(this.adTemp<this.ad?this.adTemp+=Math.max(.25*(this.ad-this.adTemp),10):this.adTemp=this.ad,this.graphics.clear(),this.graphics.circle(e.x,e.y,this.adTemp),this.graphics.stroke(),this.graphics.fill());for(var o=0;o<this.lineList.length;o++)if(this.lineList[o].delay-=t,!(this.lineList[o].delay>0)){var n=this.lineList[o],r=e,i=this.node.convertToNodeSpaceAR(n.target.convertToWorldSpaceAR(cc.Vec2.ZERO)).sub(r),a=m.default.getAngleByDir(i);n.line.setPosition(r),n.line.angle=a,n.line.width=i.len(),n.line.opacity=255,n.line.getChildByName("Point1").x=i.len()}}},u([P({type:g.default,displayName:"\u68cb\u76d8"})],e.prototype,"gameBoard",void 0),u([P({type:v.default,displayName:"\u62d6\u62fd\u9762\u677f"})],e.prototype,"dragPanel",void 0),u([P({type:cc.Prefab,displayName:"\u8fde\u7ebf\u9884\u5236\u4f53"})],e.prototype,"prefabLine",void 0),u([O],e)}(cc.Component);a.default=F,cc._RF.pop(),cc._RF.pop()},{}],GameData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e3fc0km6OxCI6oxwYoesuPy","GameData");var r=t,i=e,a=o;cc._RF.push(i,"e3fc0km6OxCI6oxwYoesuPy","GameData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("GameDefine"),f=r("BoardData"),d=r("EventHelper"),y=r("RunDataHelper"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tempCards=[],e}return l(e,t),Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"GameData"},enumerable:!1,configurable:!0}),e.prototype.defaultData=function(){return{stageType:0,stage:0,roundIndex:1,level:1,exp:0,cards:{},boardData:"",dragData:{},selectTime:0,hp:-1,hpMax:0,gameCoin:0,remainGainFoundCount:0,canLv2TowerRefresh:0,probAdjust:0,mustShowTowers:[],shownLv3TowerUids:[],refreshCount:0,costEx:0,coinEx:0,isRevive:!1,refreshTimes:3,selectAllTimes:1,selectAllGroundTimes:1,itemCount:[0,0,0],itemVideo:[1,1,1]}},e.prototype.isItemVideoEnable=function(t){return!!this.data.itemVideo&&this.data.itemVideo[t]>0},e.prototype.subItemVideo=function(t){this.data.itemVideo[t]--},Object.defineProperty(e.prototype,"refreshTimes",{get:function(){return null!=this.data.refreshTimes&&null!=this.data.selectAllTimes||(this.data.refreshTimes=3),this.data.refreshTimes},enumerable:!1,configurable:!0}),e.prototype.SubRefreshTimes=function(){this.data.refreshTimes<=0||this.data.refreshTimes--},Object.defineProperty(e.prototype,"selectAllTimes",{get:function(){return null!=this.data.selectAllTimes&&null!=this.data.selectAllTimes||(this.data.selectAllTimes=1),this.data.selectAllTimes},enumerable:!1,configurable:!0}),e.prototype.SubSelectAllTimes=function(){this.data.selectAllTimes<=0||this.data.selectAllTimes--},Object.defineProperty(e.prototype,"selectAllGroundTimes",{get:function(){return null!=this.data.selectAllGroundTimes&&null!=this.data.selectAllGroundTimes||(this.data.selectAllGroundTimes=1),this.data.selectAllGroundTimes},enumerable:!1,configurable:!0}),e.prototype.SubSelectAllGroundTimes=function(){this.data.selectAllGroundTimes<=0||this.data.selectAllGroundTimes--},Object.defineProperty(e.prototype,"isRevive",{get:function(){return this.data.isRevive},enumerable:!1,configurable:!0}),e.prototype.revive=function(){this.data.isRevive=!0},e.prototype.initByGuide=function(t){var e=this.data.cards,o=this.data.hp;this.data=JSON.parse(t),this.data.cards=e,this.data.hp=o},Object.defineProperty(e.prototype,"isAnyData",{get:function(){return Object.keys(this.data.boardData).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageType",{get:function(){return this.data.stageType||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this.data.stage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cards",{get:function(){var t=[];for(var e in this.data.cards)t.push(parseInt(e));for(var o=0;o<this.tempCards.length;o++)t.includes(this.tempCards[o])||t.push(this.tempCards[o]);return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.data.level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this.data.exp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this.data.hp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundIndex",{get:function(){return this.data.roundIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectTime",{get:function(){return this.data.selectTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"costEx",{get:function(){return this.data.costEx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coinEx",{get:function(){return this.data.coinEx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towers",{get:function(){var t=[];t.push(p.TowerId.BASE);for(var e=JSON.parse(this.data.boardData),o=0;o<e.length;o++)for(var n=0;n<e[o].length;n++)e[o][n].cellType===f.CellType.TOWER&&t.indexOf(e[o][n].id)<0&&t.push(e[o][n].id);return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boardData",{get:function(){return this.data.boardData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragData",{get:function(){return this.data.dragData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this.data.itemCount||[0,0,0]},enumerable:!1,configurable:!0}),e.prototype.saveRefresher=function(t,e,o,n){this.data.probAdjust=t,this.data.mustShowTowers=e,this.data.shownLv3TowerUids=o,this.data.refreshCount=n},Object.defineProperty(e.prototype,"probAdjust",{get:function(){return this.data.probAdjust||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mustShowTowers",{get:function(){return this.data.mustShowTowers||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shownLv3TowerUids",{get:function(){return this.data.shownLv3TowerUids||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshCount",{get:function(){return this.data.refreshCount||0},enumerable:!1,configurable:!0}),e.prototype.addCard=function(t){this.data.cards[t]=1},e.prototype.addTempCard=function(t){this.tempCards.includes(t)||this.tempCards.push(t),d.default.emit(s.default.SelectCard,t)},e.prototype.applyTempCard=function(){var t=this;this.tempCards.forEach(function(e){t.addCard(e)}),this.tempCards=[]},e.prototype.saveHp=function(t){this.data.hp=t},e.prototype.setStage=function(t,e){this.data.stageType=t,this.data.stage=e},e.prototype.setBoardData=function(t){this.data.boardData=t,d.default.emit(s.default.BoardChange)},e.prototype.setDragData=function(t){this.data.dragData=t},e.prototype.setLevelData=function(t,e){this.data.level=t,this.data.exp=e},e.prototype.setRoundIndex=function(t){this.data.roundIndex=t},e.prototype.setSelectTime=function(t){this.data.selectTime=t},Object.defineProperty(e.prototype,"canLv2TowerRefresh",{get:function(){return this.data.canLv2TowerRefresh>0},enumerable:!1,configurable:!0}),e.prototype.setCanLv2TowerRefresh=function(t){this.data.canLv2TowerRefresh=t?1:0},Object.defineProperty(e.prototype,"gameCoin",{get:function(){return this.data.gameCoin||0},enumerable:!1,configurable:!0}),e.prototype.setGameCoin=function(t){this.data.gameCoin=t,d.default.emit(s.default.CoinChange,this.data.gameCoin)},e.prototype.setCostEx=function(t){this.data.costEx=t},e.prototype.setCoinEx=function(t){this.data.coinEx=t},Object.defineProperty(e.prototype,"remainGainFoundCount",{get:function(){return this.data.remainGainFoundCount},enumerable:!1,configurable:!0}),e.prototype.setRemainGainFoundCount=function(t){this.data.remainGainFoundCount=t},e.prototype.setItemCount=function(t){this.data.itemCount=t},e.prototype.cleanup=function(){this.data=this.defaultData(),this.tempCards=[]},u([y.DirtyData],e.prototype,"subItemVideo",null),u([y.DirtyData],e.prototype,"SubRefreshTimes",null),u([y.DirtyData],e.prototype,"SubSelectAllTimes",null),u([y.DirtyData],e.prototype,"SubSelectAllGroundTimes",null),u([y.DirtyData],e.prototype,"revive",null),u([y.DirtyData],e.prototype,"initByGuide",null),u([y.DirtyData],e.prototype,"saveRefresher",null),u([y.DirtyData],e.prototype,"addCard",null),u([y.DirtyData],e.prototype,"applyTempCard",null),u([y.DirtyData],e.prototype,"saveHp",null),u([y.DirtyData],e.prototype,"setStage",null),u([y.DirtyData],e.prototype,"setBoardData",null),u([y.DirtyData],e.prototype,"setDragData",null),u([y.DirtyData],e.prototype,"setLevelData",null),u([y.DirtyData],e.prototype,"setRoundIndex",null),u([y.DirtyData],e.prototype,"setSelectTime",null),u([y.DirtyData],e.prototype,"setCanLv2TowerRefresh",null),u([y.DirtyData],e.prototype,"setGameCoin",null),u([y.DirtyData],e.prototype,"setCostEx",null),u([y.DirtyData],e.prototype,"setCoinEx",null),u([y.DirtyData],e.prototype,"setRemainGainFoundCount",null),u([y.DirtyData],e.prototype,"setItemCount",null),u([y.DirtyData],e.prototype,"cleanup",null),e}(y.RunDataBase);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],GameDefine:[function(t,e,o){"use strict";cc._RF.push(e,"28f60us1AxAQKi1lisEp4Rd","GameDefine");var n,r,i=e,a=o;cc._RF.push(i,"28f60us1AxAQKi1lisEp4Rd","GameDefine"),Object.defineProperty(a,"__esModule",{value:!0}),a.UIConfig=a.FOUNDATION_CONFIGS_THREE=a.FOUNDATION_CONFIGS=a.TOWER_CONFIGS=a.TowerId=a.MonsterType=a.Elemental=a.StageType=a.GamePhase=void 0,function(t){t[t.LAYOUT=0]="LAYOUT",t[t.BATTLE=1]="BATTLE",t[t.PAUSE=2]="PAUSE",t[t.GAME_OVER=3]="GAME_OVER"}(a.GamePhase||(a.GamePhase={})),function(t){t[t.Normal=0]="Normal",t[t.Gold=1]="Gold"}(a.StageType||(a.StageType={})),function(t){t[t.Normal=0]="Normal",t[t.Ice=1]="Ice",t[t.Fire=2]="Fire",t[t.Poison=3]="Poison",t[t.Thunder=4]="Thunder"}(a.Elemental||(a.Elemental={})),function(t){t[t.Normal=0]="Normal",t[t.Special=1]="Special",t[t.Boss=2]="Boss"}(a.MonsterType||(a.MonsterType={})),function(t){t[t.ARROW=101]="ARROW",t[t.MAGIC=102]="MAGIC",t[t.FAN=103]="FAN",t[t.SWORD=104]="SWORD",t[t.POISON=105]="POISON",t[t.FLAME=106]="FLAME",t[t.ICE=107]="ICE",t[t.BAT=108]="BAT",t[t.FLASH=109]="FLASH",t[t.FIREBALL=110]="FIREBALL",t[t.FLOWER=113]="FLOWER",t[t.BASE=114]="BASE"}(r=a.TowerId||(a.TowerId={})),a.TOWER_CONFIGS=((n={})[r.ARROW]=[[1]],n[r.FLAME]=[[1],[1]],n[r.ICE]=[[1,1]],n[r.POISON]=[[1],[1]],n[r.SWORD]=[[1,1]],n[r.MAGIC]=[[1,1],[1,1]],n[r.FAN]=[[1]],n[r.FLOWER]=[[1]],n[r.BAT]=[[1,1],[0,1]],n[r.FLASH]=[[1,0],[1,1]],n[r.FIREBALL]=[[1,1]],n[r.BASE]=[[1]],n),a.FOUNDATION_CONFIGS=[{weight:20,map:[[1]]},{weight:20,map:[[1,1]]},{weight:20,map:[[1],[1]]},{weight:4,map:[[1],[1],[1]]},{weight:4,map:[[1,1,1]]},{weight:3,map:[[1,0],[1,1]]},{weight:3,map:[[1,1],[1,0]]},{weight:3,map:[[1,1],[0,1]]},{weight:3,map:[[0,1],[1,1]]},{weight:2,map:[[1,1],[1,1]]}],a.FOUNDATION_CONFIGS_THREE=[{weight:23,map:[[1]]},{weight:18,map:[[1,1]]},{weight:18,map:[[1],[1]]},{weight:9,map:[[1],[1],[1]]},{weight:9,map:[[1,1,1]]},{weight:7,map:[[1,0],[1,1]]},{weight:7,map:[[1,1],[1,0]]},{weight:7,map:[[1,1],[0,1]]},{weight:7,map:[[0,1],[1,1]]},{weight:5,map:[[1,1],[1,1]]}];var c=function(){function t(){}return t.CompoundCostPower=1,t.ShareRewardCount=1,t.CompoundRewardCount=3,t.VideoRewardCount=10,t.CardPropNum=6,t.ItemCoinId=50001,t.ItemDiamondId=50002,t.ItemPower=50003,t.ItemBoxExpId=50004,t.ItemHeroGemId=50005,t.HeroTowerId=114,t.ItemSickleId=50006,t.ItemPickaxeId=50007,t.ItemShovelId=50008,t}();a.default=c;var l=function(){function t(){}return t.CoinKeyMaxCount=3,t.CoinKeyFreeCount=1,t}();a.UIConfig=l,cc._RF.pop(),cc._RF.pop()},{}],GameFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b462eK9mn1A17RiYOM2RIHE","GameFrame");var r=t,i=e,a=o;cc._RF.push(i,"b462eK9mn1A17RiYOM2RIHE","GameFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Load"),d=r("TrackHelper"),y=r("FbfAnimation"),h=r("ImageLoader"),m=r("LayoutList"),b=r("MateralsLoader"),v=r("BetweenMove"),g=r("EventConfig"),_=r("GameDefine"),w=r("sdbCard"),S=r("sdbHeroStory"),R=r("sdbMonster"),O=r("sdbRound"),P=r("sdbTower"),F=r("DamageRank"),T=r("DragPanel"),D=r("DragPanelRefresher"),k=r("GameControl"),C=r("GameGlobaled"),L=r("GameStage"),B=r("ItemPanel"),j=r("Monster"),x=r("DamageManager"),I=r("TowerCardItem"),N=r("EventHelper"),A=r("FrameHelper"),M=r("GuideHelper"),E=r("PlatformHelper"),H=r("RunDataHelper"),G=r("SoundHelper"),U=r("StaticDBHelper"),V=r("DungeonData"),W=r("GameData"),z=r("HeroStoryData"),K=r("StageData"),J=r("TowerData"),Y=r("Tools"),Z=r("TimeUtil"),q=r("TipsFrame"),X=r("BattleFrame"),Q=r("HeroRewardFrame"),$=r("MainFrame"),tt=r("BossTip"),et=r("DayNightPanel"),ot=r("LoseFrame"),nt=r("PauseFrame"),rt=r("RankPanel"),it=r("SelectCardFrame"),at=r("SelectGroundFrame"),ct=r("TimePanel"),lt=r("TimeTip"),ut=r("WinFrame"),st=[{speed:1,name:"\u52a0\u901fx1"},{speed:1.6,name:"\u52a0\u901fx2"},{speed:2.4,name:"\u52a0\u901fx3"}],pt=cc._decorator,ft=pt.ccclass,dt=pt.menu,yt=pt.property,ht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameStage=null,e.dragPanel=null,e.dragBtns=null,e.damageRank=null,e.damageRankPanel=null,e.nodeBattleUI=null,e.nodeLayoutUI=null,e.gameControl=null,e.lbCoin=null,e.proHp=null,e.lbHp=null,e.proExp=null,e.lbRound=null,e.imgBoss=null,e.lbLevel=null,e.btnSpeed=null,e.btnRefresh=null,e.btnRefresh2=null,e.btnAddFoundation=null,e.lbAddFoundationCount=null,e.timePanel=null,e.fbfTime=null,e.lbTime=null,e.lbRefreshCoin=null,e.layoutTowers=null,e.layoutTowersPoints=[],e.betweenMoveList=[],e.dayPanel=null,e.nightPanel=null,e.timeTip=null,e.bossTip=null,e.refBtnMateralsLoader=null,e.btnListTest=[],e.itemPanel=null,e.speedIndex=0,e.phase=_.GamePhase.LAYOUT,e._foundCount=0,e.towersData=[],e}return l(e,t),e.prototype.forceReduceCoin=function(t){this.gameStage.coin-=t,this.gameStage.coin<0&&(this.gameStage.coin=0),H.DataHelper.getData(W.default).setGameCoin(this.gameStage.coin)},e.prototype.getTowerCardItem=function(t){for(var e=0;e<this.layoutTowers.nodeList.length;e++){var o=this.layoutTowers.nodeList[e].getComponent(I.default);if(o.id===t)return o}},e.prototype.refreshTimePointer=function(){var t=this.gameStage.hadSpecialOrBoss?-1:this.gameStage.battleTimeRemain;this.timePanel.setProgress(this.gameStage.battleTimeProgress,t),this.gameStage.hadSpecialOrBoss?this.lbTime.string="\u6c38\u591c":this.lbTime.string=Z.default.convertSecondToString(t),this.gameStage.battleTimeRemain<=10&&this.gameStage.battleTimeRemain>0&&!this.fbfTime.isPlaying&&!this.gameStage.hadSpecialOrBoss&&(this.fbfTime.node.active=!0,this.fbfTime.play())},e.prototype.refreshTowersData=function(){var t=H.DataHelper.getData(W.default).cards,e=H.DataHelper.getData(W.default).towers,o=this.towersData.map(function(t){return t.id});o.length<1&&(o=[_.TowerId.BASE]),e.sort(function(t,e){var n=o.indexOf(t),r=o.indexOf(e);return-1!==n&&-1!==r?n-r:-1!==n?-1:-1!==r?1:t-e}),this.towersData=[];for(var n=0;n<e.length;n++){this.towersData.push({id:e[n],count:0,isNew:-1===o.indexOf(e[n])});for(var r=0;r<t.length;r++){var i=U.default.getData(w.default,t[r]);i.default>0||i.towerId===e[n]&&this.towersData[n].count++}}this.layoutTowers.createItemsByLength(Math.max(this.towersData.length,6))},e.prototype.onTowerItemCreate=function(t,e){var o=t.getComponent(I.default),n=this.towersData[e];n?o.init(n.id,n.count,n.isNew):o.init(0,0,!1)},e.prototype.onNewGame=function(){this._foundCount=3,this._updateFoundCount(),H.DataHelper.getData(W.default).setCanLv2TowerRefresh(!0),this.btnRefresh2.interactable=!1},e.prototype.updataLbCoin=function(){this.lbCoin.string=""+this.gameStage.coin;var t=this.gameStage.refreshCost,e=this.gameStage.coin>=t;this.lbRefreshCoin.node.color=e?cc.Color.WHITE:cc.Color.fromHEX(new cc.Color,"#D01616"),this.lbRefreshCoin.string=""+this.gameStage.refreshCost,this.updateRefBtn()},e.prototype.updateRefBtn=function(){var t=this.gameStage.coin>=this.gameStage.refreshCost&&0==this.dragPanel.length;this.refBtnMateralsLoader.select(t?1:0)},e.prototype.onBtnRefreshDragPanel=function(){this.dragPanel.isEnableControl&&((cc.sys.WECHAT_GAME===cc.sys.platform||cc.sys.BYTEDANCE_GAME===cc.sys.platform)&&this.gameStage.coin<this.gameStage.refreshCost||(this.gameStage.coin-=this.gameStage.refreshCost,H.DataHelper.getData(W.default).setGameCoin(this.gameStage.coin),this.gameStage.refreshDragPanel(),this.updateRefBtn()))},e.prototype.onBtnRefreshDragPanel2=function(){var t=this;this.dragPanel.isEnableControl&&E.PlatformHelper.video("RefreshForceLevel2",function(){H.DataHelper.getData(W.default).setCanLv2TowerRefresh(!1),t.btnRefresh2.interactable=!1,t.gameStage.refreshDragPanel(!0)})},e.prototype.onBtnAddFoundation=function(){var t=this;this.dragPanel.isEnableControl&&E.PlatformHelper.video("AddFoundation",function(){A.default.showFrame(at.default,t.gameStage.getTreeFoundation(),t.onselectFoundation.bind(t))})},e.prototype.onselectFoundation=function(t){for(var e=0;e<t.length;e++)this.dragPanel.addFoundation(t[e]);this._foundCount--,this._updateFoundCount()},e.prototype._updateFoundCount=function(){this._updateFoundCountView(),H.DataHelper.getData(W.default).setRemainGainFoundCount(this._foundCount)},e.prototype._updateFoundCountView=function(){this.btnAddFoundation.interactable=this._foundCount>0,this.lbAddFoundationCount.string="("+this._foundCount+")"},e.prototype.onSelectCard=function(t){if(t.length>0)for(var e=0;e<t.length;e++)this.gameStage.addCard(t[e]);C.default.isStop=!1},e.prototype.onBtnLevelUp=function(){this.onBattleLevelUp(this.gameStage.battleLevelData.id)},e.prototype.getStageReward=function(t,e){var o=t/e;if(M.default.isGuiding&&0==M.default.guideId)o=Math.floor(o);else if(1===e)o=t;else{var n=1/e,r=n/(e-1);if(o=0,t>0)for(var i=0;i<t;i++)o+=.5*n+r*i}cc.log("\u5956\u52b1 "+t+"/"+e+" : "+(100*o).toFixed(2)+"%");var a={},c=Math.floor(this.gameStage.stageData.coin*o),l=Math.floor(this.gameStage.stageData.diamond*o),u=Math.floor(this.gameStage.stageData.card*o);if(c>0&&(a[_.default.ItemCoinId]={id:_.default.ItemCoinId,count:c}),l>0&&(a[_.default.ItemDiamondId]={id:_.default.ItemDiamondId,count:l}),u>0)if(1===this.gameStage.stageData.id)a[_.TowerId.ARROW]={id:_.TowerId.ARROW,count:u};else if(2===this.gameStage.stageData.id){var s=[U.default.getData(P.default,_.TowerId.ARROW),U.default.getData(P.default,_.TowerId.FAN),U.default.getData(P.default,_.TowerId.FLAME)],p=Math.floor(u/s.length),f=[];for(i=0;i<s.length;i++)f.push(p);var d=s.length*p;for(i=0;i<u-d;i++)f[i]+=1;for(f.sort(function(){return Math.random()-.5}),i=0;i<s.length;i++)f[i]<1||(a[s[i].id]={id:s[i].id,count:f[i]})}else for(s=H.DataHelper.getData(J.default).getUnlockTowers(),i=0;i<u;i++){var y=s[Math.floor(Math.random()*s.length)];a.hasOwnProperty(y.id)?a[y.id].count+=1:a[y.id]={id:y.id,count:1}}return Object.values(a)},e.prototype.onLevelPass=function(){var t=this;if(this.phase!==_.GamePhase.GAME_OVER){this.phase=_.GamePhase.GAME_OVER,d.default.trackEventBattleWin(this.gameStage.levelId,this.gameStage.roundIndex,Math.ceil(100*this.gameStage.hpProgress)/100),cc.sys.WECHAT_GAME===cc.sys.platform&&f.GameCannel===f.CannelType.Play800&&E.PlatformHelper.platform.p8BattleWin(this.gameStage.levelId,0),C.default.isStop=!0;for(var e=U.default.filterData(O.default,{type:this.gameStage.stageType,stage:this.gameStage.stageData.stage}),o=-1,n=0;n<e.length;n++)e[n].round>o&&(o=e[n].round);if(this.gameStage.stageType===_.StageType.Normal){var r=this.getStageReward(o,o),i=U.default.getTable(S.default);for(var a in i)if(i[a].stage==this.gameStage.stageData.stage){H.DataHelper.getData(z.default).setBasetTowerTaskCompleteTime((new Date).getTime());break}A.default.showFrame(ut.default,r).then(function(){G.default.playUiSfx("BattleWin"),H.DataHelper.getData(W.default).cleanup(),H.DataHelper.getData(K.default).saveData(t.gameStage.stageData.type,t.gameStage.stageData.stage,t.gameStage.roundIndex),Y.default.addToBagByRewardList(r),N.default.emit(g.default.refreshMainRed,"battle")})}else if(this.gameStage.stageType===_.StageType.Gold){var c=this.getStageReward(o,o);A.default.showFrame(ut.default,c).then(function(){G.default.playUiSfx("BattleWin"),H.DataHelper.getData(W.default).cleanup(),H.DataHelper.getData(V.default).passCoinDungeon(t.gameStage.stageData.stage),Y.default.addToBagByRewardList(c),H.DataHelper.getData(V.default).AddCoinUseKeyCount()})}}},e.prototype.onLevelFail=function(){var t=this;if(this.phase!==_.GamePhase.GAME_OVER)if(this.phase=_.GamePhase.GAME_OVER,d.default.trackEventBattleLose(this.gameStage.levelId,this.gameStage.roundIndex),cc.sys.WECHAT_GAME===cc.sys.platform&&f.GameCannel===f.CannelType.Play800&&E.PlatformHelper.platform.p8BattleEnter(this.gameStage.levelId,0),C.default.isStop=!0,this.gameStage.stageType===_.StageType.Normal){for(var e=U.default.filterData(O.default,{type:this.gameStage.stageType,stage:this.gameStage.stageData.stage}),o=-1,n=0;n<e.length;n++)e[n].round>o&&(o=e[n].round);var r=this.getStageReward(this.gameStage.roundIndex-1,o);A.default.showFrame(ot.default,r).then(function(){G.default.playUiSfx("BattleFail"),H.DataHelper.getData(W.default).cleanup(),H.DataHelper.getData(K.default).saveData(t.gameStage.stageData.type,t.gameStage.stageData.stage,t.gameStage.roundIndex-1),Y.default.addToBagByRewardList(r),N.default.emit(g.default.refreshMainRed,"battle")})}else this.gameStage.stageType===_.StageType.Gold&&A.default.showFrame(ot.default,[]).then(function(){G.default.playUiSfx("BattleFail"),H.DataHelper.getData(W.default).cleanup()})},e.prototype.onLevelRevive=function(){this.proHp.progress=this.gameStage.hpProgress,this.lbHp.string=Math.ceil(this.gameStage.hp)+"/"+Math.ceil(this.gameStage.hpMax),this.phaseLayout(!1)},e.prototype.onRoundPass=function(){this.phaseLayout(!1)},e.prototype.onBattleLevelUp=function(t){C.default.isStop=!0,this.lbLevel.string="\u7b49\u7ea7\uff1a"+this.gameStage.battleLevelData.id,A.default.showFrame(it.default,t,this.onSelectCard.bind(this))},e.prototype.phaseBattle=function(){var t;if(this.gameStage.isEnableStart){switch(this.gameStage.stageData.theme){case 1:G.default.playMusic("bg_forest_ambience");break;case 2:G.default.playMusic("bg_winter_ambience");break;case 3:G.default.playMusic("bg_wasteland_loop");break;case 4:G.default.playMusic("bg_deep_sea_loop");break;case 5:G.default.playMusic("bg_desert_wind");break;case 6:G.default.playMusic("bg_lava_bubble");break;default:G.default.playMusic("bg_wasteland_loop")}G.default.playUiSfx("night_ambience"),this.betweenMoveList.forEach(function(t){return t.moveTo()}),this.timePanel.reset(),this.phase=_.GamePhase.BATTLE,this.gameControl.phase=this.phase,this.nodeBattleUI.active=!0,this.nodeLayoutUI.active=!1,this.dragPanel.node.active=!1,this.dragBtns.active=!1,null===(t=this.damageRank)||void 0===t||t.reset(),this.gameStage.nextRound(),H.DataHelper.getData(W.default).setCanLv2TowerRefresh(!0),D.default.ins.onRoundStart(),this.refreshTowersData(),this.lbTime.node.active=!0,this.lbTime.string="00:00",this.timeTip.reset(),this.layoutTowers.node.y=.5*-cc.winSize.height+135,this.nightPanel.play(),this.gameStage.hadSpecialOrBoss&&this.bossTip.show(),A.default.hideFrame($.default),A.default.hideFrame(X.default),this.damageRank.node.active=!0}else A.default.showFrame(q.default,"\u9632\u5fa1\u5854\u963b\u6321\u4e86\u602a\u7269\u6240\u6709\u901a\u8def\uff0c\u8bf7\u8c03\u6574\u5e03\u5c40")},e.prototype.phaseLayout=function(t){var e,o=this;G.default.playMusic("BgmMain"),this.betweenMoveList.forEach(function(e){return e.moveBack(t)}),this.phase=_.GamePhase.LAYOUT,this.gameControl.phase=this.phase,this.nodeBattleUI.active=!1,this.nodeLayoutUI.active=!0,this.dragPanel.node.active=!0,this.dragBtns.active=!0,this.fbfTime.node.active=!1,this.fbfTime.stop(),null===(e=this.damageRank)||void 0===e||e.reset(),this.gameStage.setGamePhase(this.phase),this.btnRefresh2.interactable=H.DataHelper.getData(W.default).canLv2TowerRefresh,this._foundCount=H.DataHelper.getData(W.default).remainGainFoundCount,this._updateFoundCountView(),this.lbTime.node.active=!1,Z.default.delay().then(function(){for(var t=U.default.filterData(O.default,{type:o.gameStage.stageType,stage:o.gameStage.stageData.stage}),e=-1,n=0;n<t.length;n++)t[n].round>e&&(e=t[n].round);o.lbRound.string="\u7b2c"+Math.min(o.gameStage.roundIndex,e)+"/"+e+"\u591c",o.lbLevel.string=o.gameStage.battleLevelData.id+"\u7ea7";var r=!1,i=!1;for(t=U.default.filterData(O.default,{type:o.gameStage.stageType,stage:o.gameStage.stageData.stage,round:o.gameStage.roundIndex}),n=0;n<t.length;n++){var a=U.default.getData(R.default,t[n].monster);a.type===_.MonsterType.Special?r=!0:a.type===_.MonsterType.Boss&&(i=!0)}i?(o.imgBoss.node.active=!0,o.imgBoss.select(1)):r?(o.imgBoss.node.active=!0,o.imgBoss.select(0)):o.imgBoss.node.active=!1,o.damageRankPanel.node.active=!1}),this.layoutTowers.node.y=this.layoutTowersPoints[0].y,this.refreshTowersData(),t||(this.dayPanel.play(),G.default.playUiSfx("day_ambience")),this.timeTip.reset(),A.default.hideFrame($.default),A.default.hideFrame(X.default),this.damageRank.node.active=!1,this.damageRankPanel.node.active=!1},e.prototype.onBtnTestFinishRound=function(){N.default.emit(g.default.RoundPass)},e.prototype.onBtnPause=function(){A.default.showFrame(nt.default,this.damageRank)},e.prototype.onBtnSpeed=function(){this.setGameSpeed(this.speedIndex+1)},e.prototype.setGameSpeed=function(t){this.speedIndex=t%st.length,C.default.speed=st[this.speedIndex].speed,this.btnSpeed.getComponentInChildren(cc.Label).string=st[this.speedIndex].name},e.prototype.onMonsterAttack=function(t){return s(this,void 0,void 0,function(){var e,o,n;return p(this,function(r){switch(r.label){case 0:return e=t.getUserData(),[4,Z.default.delay()];case 1:return r.sent(),this.proHp.progress=this.gameStage.hpProgress,this.lbHp.string=Math.ceil(this.gameStage.hp)+"/"+Math.ceil(this.gameStage.hpMax),o=e/this.gameStage.hpMax*this.proHp.barSprite.node.width,n=cc.v3((this.gameStage.hpProgress-.5)*this.proHp.barSprite.node.width,0,0),x.default.instance.createBaseDamage(e,o,n,this.proHp.node),[2]}})})},e.prototype.onTouchRankStart=function(){this.damageRank.damageInfos.length<1||this.damageRank.node.activeInHierarchy&&(this.damageRankPanel.node.active=!0,this.damageRankPanel.refresh(this.damageRank))},e.prototype.onTouchRankEnd=function(){this.damageRankPanel.node.active=!1},e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return t?(H.DataHelper.getData(W.default).isAnyData?this.itemPanel.set(H.DataHelper.getData(W.default).itemCount):this.itemPanel.init(),this.itemPanel.refresh(),this.proHp.progress=1,this.lbHp.string="",this.fbfTime.node.active=!1,this.fbfTime.stop(),this.damageRankPanel.node.active=!1,this.btnAddFoundation.node.active=t.type===_.StageType.Normal,[4,this.gameStage.initStage(t)]):[2,!1];case 1:return e.sent(),this.proHp.progress=this.gameStage.hpProgress,this.lbHp.string=Math.ceil(this.gameStage.hp)+"/"+Math.ceil(this.gameStage.hpMax),this.setGameSpeed(0),this.updataLbCoin(),[2,!0]}})})},e.prototype.onShow=function(t){return s(this,void 0,void 0,function(){return p(this,function(){return d.default.trackEventBattleStart(t.stage,0),cc.sys.WECHAT_GAME===cc.sys.platform&&f.GameCannel===f.CannelType.Play800&&E.PlatformHelper.platform.p8BattleEnter(t.stage,0),A.default.hideFrame(Q.default),this.phaseLayout(!0),C.default.isStop=!1,G.default.playMusic("BgmMain"),[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return C.default.isStop=!0,this.gameStage.cleanup(),[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.dragPanel.node.active=!0,this.lbHp.node.zIndex=1,N.default.on(g.default.RoundPass,this.onRoundPass,this),N.default.on(g.default.LevelPass,this.onLevelPass,this),N.default.on(g.default.LevelFail,this.onLevelFail,this),N.default.on(g.default.LevelRevive,this.onLevelRevive,this),N.default.on(g.default.CoinChange,this.updataLbCoin,this),N.default.on(g.default.BattleLevelUp,this.onBattleLevelUp,this),N.default.on(g.default.NewGame,this.onNewGame,this),N.default.on(g.default.SelectCard,this.refreshTowersData,this),N.default.on(g.default.BoardChange,this.refreshTowersData,this),this.node.on(j.default.MonsterAttack,this.onMonsterAttack,this),this.node.on("DragPanelItemRemove",this.updateRefBtn,this),this.damageRank.node.on(cc.Node.EventType.TOUCH_START,this.onTouchRankStart,this),this.damageRank.node.on(cc.Node.EventType.TOUCH_END,this.onTouchRankEnd,this),this.damageRank.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchRankEnd,this),this.damageRankPanel.node.on(cc.Node.EventType.TOUCH_START,this.onTouchRankEnd,this),this.layoutTowers.onItemCreate(this.onTowerItemCreate.bind(this)),cc.sys.WECHAT_GAME!==cc.sys.platform&&cc.sys.BYTEDANCE_GAME!==cc.sys.platform&&this.btnListTest.forEach(function(t){return t.active=!0})},e.prototype.start=function(){},e.prototype.update=function(){this.proExp.progress=this.gameStage.expProgress,this.phase===_.GamePhase.BATTLE&&(this.refreshTimePointer(),this.gameStage.hadSpecialOrBoss||this.timeTip.show(this.gameStage.battleTimeRemain))},e.frameInfo={name:"GameFrame",type:A.FrameType.Stage,bundleName:"Root",prefabName:"Prefab/Frame/GameFrame",zIndex:10},u([yt({type:L.default,displayName:"\u6e38\u620f\u821e\u53f0"})],e.prototype,"gameStage",void 0),u([yt({type:T.default,displayName:"\u62d6\u62fd\u9762\u677f"})],e.prototype,"dragPanel",void 0),u([yt({type:cc.Node,displayName:"\u62d6\u62fd\u9762\u677f\u6309\u94ae"})],e.prototype,"dragBtns",void 0),u([yt({type:F.default,displayName:"\u6392\u884c\u699c"})],e.prototype,"damageRank",void 0),u([yt({type:rt.default,displayName:"\u6392\u884c\u699c\u9762\u677f"})],e.prototype,"damageRankPanel",void 0),u([yt({type:cc.Node,displayName:"\u6218\u6597UI"})],e.prototype,"nodeBattleUI",void 0),u([yt({type:cc.Node,displayName:"\u5e03\u5c40UI"})],e.prototype,"nodeLayoutUI",void 0),u([yt({type:k.default,displayName:"\u62d6\u52a8\u63a7\u5236\u5668"})],e.prototype,"gameControl",void 0),u([yt({type:cc.Label,displayName:"\u6c34\u6676"})],e.prototype,"lbCoin",void 0),u([yt({type:cc.ProgressBar,displayName:"\u8840\u6761"})],e.prototype,"proHp",void 0),u([yt({type:cc.Label,displayName:"\u8840\u91cf"})],e.prototype,"lbHp",void 0),u([yt({type:cc.ProgressBar,displayName:"\u7ecf\u9a8c\u6761"})],e.prototype,"proExp",void 0),u([yt({type:cc.Label,displayName:"\u6ce2\u6b21\u6587\u672c"})],e.prototype,"lbRound",void 0),u([yt({type:h.default,displayName:"BOSS\u56fe\u6807"})],e.prototype,"imgBoss",void 0),u([yt({type:cc.Label,displayName:"\u7b49\u7ea7\u6587\u672c"})],e.prototype,"lbLevel",void 0),u([yt({type:cc.Button,displayName:"\u52a0\u901f\u6309\u94ae"})],e.prototype,"btnSpeed",void 0),u([yt({type:cc.Button,displayName:"\u5237\u65b0\u5854\u6309\u94ae"})],e.prototype,"btnRefresh",void 0),u([yt({type:cc.Button,displayName:"\u5237\u65b02\u7ea7\u5854\u6309\u94ae"})],e.prototype,"btnRefresh2",void 0),u([yt({type:cc.Button,displayName:"\u6dfb\u52a0\u5730\u683c\u6309\u94ae"})],e.prototype,"btnAddFoundation",void 0),u([yt({type:cc.Label,displayName:"\u6dfb\u52a0\u5730\u683c\u5269\u4f59\u6b21\u6570"})],e.prototype,"lbAddFoundationCount",void 0),u([yt({type:ct.default,displayName:"\u65f6\u95f4\u9762\u677f"})],e.prototype,"timePanel",void 0),u([yt({type:y.default,displayName:"\u5012\u8ba1\u65f6"})],e.prototype,"fbfTime",void 0),u([yt({type:cc.Label,displayName:"\u5269\u4f59\u65f6\u95f4"})],e.prototype,"lbTime",void 0),u([yt({type:cc.Label,displayName:"\u5237\u65b0\u6309\u94ae\u6c34\u6676"})],e.prototype,"lbRefreshCoin",void 0),u([yt({type:m.default,displayName:"\u5854\u6570\u636e"})],e.prototype,"layoutTowers",void 0),u([yt({type:cc.Node,displayName:"\u5854\u6570\u636e\u53c2\u7167\u70b9"})],e.prototype,"layoutTowersPoints",void 0),u([yt({type:v.default,displayName:"\u65f6\u95f4\u9762\u677f\u52a8\u753b"})],e.prototype,"betweenMoveList",void 0),u([yt({type:et.default,displayName:"\u65e5"})],e.prototype,"dayPanel",void 0),u([yt({type:et.default,displayName:"\u591c"})],e.prototype,"nightPanel",void 0),u([yt({type:lt.default,displayName:"\u65f6\u95f4\u63d0\u793a"})],e.prototype,"timeTip",void 0),u([yt({type:tt.default,displayName:"Boss\u63d0\u793a"})],e.prototype,"bossTip",void 0),u([yt({type:b.default,displayName:"\u6d41\u5149\u6750\u8d28"})],e.prototype,"refBtnMateralsLoader",void 0),u([yt({type:cc.Node,displayName:"\u6d4b\u8bd5\u6309\u94ae"})],e.prototype,"btnListTest",void 0),u([yt({type:B.default,displayName:"\u9053\u5177\u9762\u677f"})],e.prototype,"itemPanel",void 0),u([ft,dt("\u754c\u9762/GameFrame \u6e38\u620f\u754c\u9762")],e)}(A.FrameBase);a.default=ht,cc._RF.pop(),cc._RF.pop()},{}],GameGlobaled:[function(t,e,o){"use strict";cc._RF.push(e,"9e7a38n28hMB7E6Xs11vk8u","GameGlobaled");var n=t,r=e,i=o;cc._RF.push(r,"9e7a38n28hMB7E6Xs11vk8u","GameGlobaled"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("EventConfig"),c=n("EventHelper"),l=n("AttValue"),u=function(){function t(){}return Object.defineProperty(t,"speed",{get:function(){return this.stop?0:this.gameSpeed},set:function(t){this.gameSpeed=t,c.default.emit(a.default.GameSpeedChange,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isStop",{get:function(){return this.stop},set:function(t){this.stop=t,this.stop?c.default.emit(a.default.LevelPause):c.default.emit(a.default.LevelResume),c.default.emit(a.default.GameSpeedChange,this.speed)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sfFoundation",{get:function(){return this._sfFoundation},set:function(t){this._sfFoundation=t,c.default.emit(a.default.FoundationChange)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gridSizeWorld",{get:function(){return this.gridSize*this.boardScale},enumerable:!1,configurable:!0}),t.init=function(){this.debuffDizzinessTime.init(this.debuffDizzinessTimeDefault)},t.cleanup=function(){this.debuffDizzinessTime.cleanup()},t.gameSpeed=1,t.stop=!0,t._sfFoundation=null,t.gridSize=100,t.boardSize=cc.size(9,10),t.boardStartPos=cc.v2(-450,-500),t.boardBoxScale=1,t.boardScale=1,t.monsterStartOffset=0,t.buildingMaxLevel=4,t.debuffIceTime=2,t.debuffIceScale=30,t.debuffPoisonLife=3,t.debuffPoisonStep=.5,t.debuffPoisonDamage=.1,t.debuffVulnerableLife=3,t.debuffDizzinessTime=new l.AttValue,t.debuffDizzinessTimeDefault=.3,t.towerArrowAngle=3,t.towerArrowFireDistance=100,t.towerMagicNormalResidue=5,t.towerMagicSuperResidue=5,t.towerMagicSweepAngle=80,t.towerFanTurnCount=6,t.towerPoisonJuduDistance=220,t.towerFlashLeidianDistance=220,t.towerSwordLife=10,t.towerSwordAttackDistance=100,t}();i.default=u,cc._RF.pop(),cc._RF.pop()},{}],GameItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ed166bShTxLhLapuNslliwb","GameItem");var r=t,i=e,a=o;cc._RF.push(i,"ed166bShTxLhLapuNslliwb","GameItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("RunDataHelper"),p=r("StaticDBHelper"),f=r("DailyData"),d=r("HeroStoryData"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redPoint=null,e.videoIcon=null,e.priceLabel=null,e.getNumLabel=null,e}return l(e,t),e.prototype.setItem=function(t){var e=!1,o=s.DataHelper.getData(d.default).baseTowerGetRewardId;0==t?e=o>=17e3:1==t?e=o>=17001:2==t&&(e=o>=17002),this.node.active=e;var n=s.DataHelper.getData(f.default).getVideoBuyItemList(t);this.redPoint.active=0==n,this.videoIcon.active=n>0;var r=p.default.getConfig("videoBuyItemCount"),i=0==n?1:2;this.getNumLabel.string="x"+i,this.priceLabel.string=0==n?"\u514d\u8d39":"("+(r-n+1)+"/"+r+")"},u([m({type:cc.Node,displayName:"\u7ea2\u70b9"})],e.prototype,"redPoint",void 0),u([m({type:cc.Node,displayName:"\u89c6\u9891\u56fe\u6807"})],e.prototype,"videoIcon",void 0),u([m({type:cc.Label,displayName:"\u4ef7\u683c"})],e.prototype,"priceLabel",void 0),u([m({type:cc.Label,displayName:"\u83b7\u53d6\u6570\u91cf"})],e.prototype,"getNumLabel",void 0),u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],GameLoadingFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f791cCN6+lN5oWTXh+N8YgM","GameLoadingFrame");var r=t,i=e,a=o;cc._RF.push(i,"f791cCN6+lN5oWTXh+N8YgM","GameLoadingFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("FrameHelper"),d=cc._decorator,y=d.ccclass,h=d.menu,m=d.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipLabel=null,e.isLoading=!0,e.time=0,e.maxTime=1.5,e}return l(e,t),e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.time=0,this.isLoading=!0,[2,!0]})})},e.prototype.update=function(t){if(this.isLoading){this.time+=t;var e=5*this.time%6;this.tipLabel.string="\u52a0\u8f7d\u4e2d"+".".repeat(e),this.time>=this.maxTime&&(this.isLoading=!1,this.hideFrame())}},e.frameInfo={name:"GameLoadingFrame",type:f.FrameType.Full,bundleName:"Root",prefabName:"Prefab/Frame/GameLoadingFrame",zIndex:22},u([m({type:cc.Label,displayName:"\u52a0\u8f7d\u8bf4\u660e"})],e.prototype,"tipLabel",void 0),u([y,h("\u754c\u9762/GameLoadingFrame \u52a0\u8f7d\u754c\u9762")],e)}(f.FrameBase);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],GameMgr:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"4a206rbm75Gk5NUNG6bmoJE","GameMgr");var r=t,i=e,a=o;cc._RF.push(i,"4a206rbm75Gk5NUNG6bmoJE","GameMgr");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},f=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(a,"__esModule",{value:!0});var d=r("Load"),y=r("TrackHelper"),h=r("EventConfig"),m=r("TopFrame"),b=r("BattleFrame"),v=r("GameFrame"),g=r("MainFrame"),_=r("GameGlobaled"),w=r("AbGroup"),S=r("AssetBundleHelper"),R=r("EventHelper"),O=r("FrameHelper"),P=r("GuideHelper"),F=r("LangHelper"),T=r("PlatformHelper"),D=r("RunDataHelper"),k=r("SoundHelper"),C=r("StaticDBHelper"),L=r("GuideData"),B=r("CocosUtil"),j=r("utilTools"),x=r("YWCloundHelper");cc.macro.CLEANUP_IMAGE_CACHE=!1,cc.dynamicAtlasManager.enabled=!0;var I=cc._decorator.ccclass,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isPassGameAni=!1,e}var o;return l(e,t),o=e,Object.defineProperty(e.prototype,"isPassGameAni",{get:function(){return this._isPassGameAni},set:function(t){this._isPassGameAni=t},enumerable:!1,configurable:!0}),e.getInstance=function(){if(!this.instance){var t=new cc.Node;this.instance=t.addComponent(o),cc.director.getScene().addChild(t),cc.game.addPersistRootNode(t)}return this.instance},e.prototype.initGame=function(){return s(this,void 0,void 0,function(){var t,e,n,r;return p(this,function(i){switch(i.label){case 0:return T.PlatformHelper.init(),console.log("Init Platform Success"),t=D.DataHelper.getData(w.default).getGroup(),[4,S.default.getAssetBundles("Spine")];case 1:return i.sent(),y.default.trackEventLoadingProgress(70),console.log("Load Assetbundle Spine Success"),[4,S.default.getAssetBundles("Sound")];case 2:return i.sent(),console.log("Load Assetbundle Sound Success"),t==w.default.GROUP_A?e="Data":t==w.default.GROUP_B&&(e="Data_b"),[4,C.default.loadStaticDB(e)];case 3:return i.sent(),k.default.loadSetting(),[4,k.default.reloadDir("Sound")];case 4:return i.sent(),y.default.trackEventLoadingProgress(80),B.default.OpenCollision(),B.default.ParticlesBatching(),B.default.TweenExpand(),F.default.initLang(F.default.LangType.zh),[4,S.default.getScene("Root")];case 5:return i.sent(),y.default.trackEventLoadingProgress(90),n=j.utilTools.getUrlHref("gm"),o.getInstance().isPassGameAni=n>0,_.default.speed=j.utilTools.getUrlHref("speed")||1,cc.sys.WECHAT_GAME===cc.sys.platform&&d.GameCannel===d.CannelType.Play800&&T.PlatformHelper.platform.p8Login(),d.GameCannel!==d.CannelType.YongWang?[3,8]:[4,y.default.getOpenId()];case 6:return r=i.sent(),[4,x.default.init(r)];case 7:i.sent(),i.label=8;case 8:return[2]}})})},e.prototype.preloadFramePrefab=function(t){return s(this,void 0,void 0,function(){var e,o;return p(this,function(n){switch(n.label){case 0:return e=t.frameInfo,[4,S.default.getAsset(cc.Prefab,e.prefabName,e.bundleName)];case 1:return o=n.sent(),[2,{node:cc.instantiate(o),frame:t}]}})})},e.prototype.runScene=function(t,e){return void 0===e&&(e=[]),s(this,void 0,void 0,function(){var t,o,n,r,i;return p(this,function(a){switch(a.label){case 0:for(t=[],o=0;o<e.length;o++)t.push(this.preloadFramePrefab(e[o]));return[4,Promise.all(t)];case 1:return t=a.sent(),[4,S.default.runScene("Root")];case 2:for(a.sent(),y.default.trackEventEnterGame(),O.default.init(),o=0;o<t.length;o++)n=t[o],r=n.node,i=n.frame,r.parent=cc.Canvas.instance.node,O.default.registerFrame(i,r);return[4,Promise.all(e.map(function(t){return O.default.showFrame(t)}))];case 3:return a.sent(),[2]}})})},e.prototype.enterGame=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return cc.Canvas.instance.node.pauseSystemEvents(!0),t=[g.default,b.default,m.default],D.DataHelper.getData(L.default).isFinished?[3,6]:[4,P.default.init()];case 1:return e.sent(),0!==D.DataHelper.getData(L.default).guideId?[3,3]:[4,this.runScene("Root",[P.default.guideFrame,v.default])];case 2:return e.sent(),[3,5];case 3:return[4,this.runScene("Root",f([P.default.guideFrame],t))];case 4:e.sent(),e.label=5;case 5:return P.default.guide(D.DataHelper.getData(L.default).guideId),[3,8];case 6:return[4,this.runScene("Root",t)];case 7:e.sent(),e.label=8;case 8:return console.log("Run Scene Success"),cc.Canvas.instance.node.resumeSystemEvents(!0),[2]}})})},e.prototype.onLoad=function(){cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("GameHide"),R.default.emit(h.default.GameHide)}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.log("GameShow"),R.default.emit(h.default.GameShow),k.default.replay()})},e.prototype.start=function(){},e.instance=null,o=u([I],e)}(cc.Component);a.default=N,cc._RF.pop(),cc._RF.pop()},{}],GameStage:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"eabccaqCldPvIkVkZ3s4DSw","GameStage");var r=t,i=e,a=o;cc._RF.push(i,"eabccaqCldPvIkVkZ3s4DSw","GameStage");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Load"),d=r("TrackHelper"),y=r("NightRenderer"),h=r("EventConfig"),m=r("GameDefine"),b=r("sdbBattleLevel"),v=r("sdbCard"),g=r("sdbHeroSkin"),_=r("sdbRound"),w=r("ReviveFrame"),S=r("AssetBundleHelper"),R=r("EventHelper"),O=r("FrameHelper"),P=r("PlatformHelper"),F=r("RunDataHelper"),T=r("SoundHelper"),D=r("StaticDBHelper"),k=r("DailyTaskData"),C=r("GameData"),L=r("TowerData"),B=r("MathUtil"),j=r("DragPanel"),x=r("DragPanelRefresher"),I=r("GameBoard"),N=r("GameGlobaled"),A=r("BoardData"),M=r("Monster"),E=r("PathFinder"),H=r("SkillFactory"),G=r("BattleManager"),U=r("DamageManager"),V=r("MonsterManager"),W=r("TowerManager"),z=r("BoardRenderer"),K=r("ChessRenderer"),J=r("RendererManager"),Y=cc._decorator,Z=Y.ccclass,q=Y.property,X=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBoard=null,e.sptBgColor=null,e.sptBg=null,e.dragPanel=null,e.battleManager=null,e.nightRenderer=null,e.btnStart=null,e.tipNode=null,e.stageData=null,e.towerBase=null,e.roundIndex=0,e.boardData=new A.default,e.pathFinder=new E.default,e.pathData=[],e.destroyTowers=[],e._currentPhase=m.GamePhase.LAYOUT,e.coin=0,e.coinTemp=0,e.coinEx=0,e.costEx=0,e.battleExp=0,e.battleLevelData=null,e.cards=new Set,e.tweenNight=null,e.forcePutPos=null,e}return l(e,t),Object.defineProperty(e.prototype,"battleTimeProgress",{get:function(){return this.battleManager.battleTimeProgress},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"battleTimeRemain",{get:function(){return this.battleManager.battleTimeRemain},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hadSpecia",{get:function(){return this.battleManager.hadSpacil},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hadBoss",{get:function(){return this.battleManager.hadBoss},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hadSpecialOrBoss",{get:function(){return this.battleManager.hadSpacilOrBoss},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hpProgress",{get:function(){return this.towerBase?this.towerBase.data.hp.value/this.towerBase.data.hp.max:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this.towerBase?this.towerBase.data.hp.value:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hpMax",{get:function(){return this.towerBase?this.towerBase.data.hp.max:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expProgress",{get:function(){return this.battleLevelData?Math.min(this.battleExp/this.battleLevelData.exp,1):0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageType",{get:function(){return this.stageData.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levelId",{get:function(){return this.stageData.stage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnableStart",{get:function(){return this.destroyTowers.length<1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshCost",{get:function(){return D.default.getConfig("GameRefreshCoin")+this.costEx},enumerable:!1,configurable:!0}),e.prototype.hpRecover=function(t){this.towerBase.data.hp.addValue(Math.ceil(this.towerBase.data.hp.max*t/100))},e.prototype.initNormal=function(t){return s(this,void 0,void 0,function(){var e,o,n,r,i,a,c,l,u,s,f,d,y,_,w,O,P,T,k;return p(this,function(p){switch(p.label){case 0:return[4,this.boardData.initData("Level/"+(t.stage-1))];case 1:return p.sent(),n=(o=cc).instantiate,[4,S.default.getAsset(cc.Prefab,"GameBoard/"+t.theme+"/Board")];case 2:if(e=n.apply(o,[p.sent()]),(r=e.getComponent(z.default)).setNodeTip(this.tipNode),this.sptBgColor.node.color=r.bgColor,S.default.setSpriteFrame(this.sptBg,"GameBoard/"+t.theme+"/wujian_"+t.theme+"_3"),N.default.sfFoundation=r.sfGround,this.dragPanel.videoFoundationSpriteFrame=r.sfGround,!F.DataHelper.getData(C.default).isAnyData)return[3,7];for(this.coin=F.DataHelper.getData(C.default).gameCoin,i=F.DataHelper.getData(C.default),this.boardData.setByJson(i.boardData),a={},c=0;c<N.default.boardSize.width;c++)for(l=0;l<N.default.boardSize.height;l++)if((u=this.boardData.getCell(c,l)).cellType===A.CellType.TOWER){if(u.id===m.TowerId.BASE)continue;a[u.uid]?(a[u.uid].x=Math.min(a[u.uid].x,c),a[u.uid].y=Math.min(a[u.uid].y,l)):a[u.uid]={x:c,y:l,cell:u}}for(f in s=[],a)s.push(f);d=0,p.label=3;case 3:return d<s.length?(y=s[d],[4,W.default.instance.create(a[y].cell.id,a[y].cell.level,cc.v2(a[y].x,a[y].y),a[y].cell.uid)]):[3,6];case 4:p.sent(),p.label=5;case 5:return d++,[3,3];case 6:for(this.dragPanel.init(JSON.parse(i.dragData),this.boardData,r.sfGround),this.battleLevelData=D.default.getData(b.default,i.level),this.battleExp=i.exp,this.roundIndex=i.roundIndex,this.costEx=i.costEx,this.coinEx=i.coinEx,_=F.DataHelper.getData(C.default).cards,P=0;P<_.length;P++)(k=D.default.getData(v.default,_[P]))&&!this.cards.has(k)&&(this.cards.add(k),this.addSkill(k,!0));return x.default.ins.onContinueGame(),R.default.emit(h.default.ContinueGame),[3,8];case 7:for(this.coin=20,this.costEx=0,this.coinEx=0,F.DataHelper.getData(C.default).setGameCoin(this.coin),this.battleLevelData=D.default.getData(b.default,1),this.battleExp=0,this.roundIndex=1,F.DataHelper.getData(C.default).setStage(t.type,t.stage),F.DataHelper.getData(C.default).setBoardData(this.boardData.toJson()),w=F.DataHelper.getData(L.default).getUnlockCards(),P=0;P<w.length;P++)w[P].default>0&&(this.addCard(w[P].id),F.DataHelper.getData(C.default).addCard(w[P].id));for(O=F.DataHelper.getData(L.default).getBaseTower(),P=0;P<O.length;P++)T=D.default.getData(g.default,O[P]),(k=D.default.getData(v.default,T.card))&&(this.addCard(k.id),F.DataHelper.getData(C.default).addCard(k.id));x.default.ins.onNewGame(),this.refreshDragPanel(),R.default.emit(h.default.NewGame),p.label=8;case 8:return[2,r]}})})},e.prototype.initGold=function(t){return s(this,void 0,void 0,function(){var e,o,n,r,i,a,c,l,u,s,f,d,y,_,w,O,P,T,k;return p(this,function(p){switch(p.label){case 0:return[4,this.boardData.initData("Level/g"+B.default.randomInt(1,20))];case 1:return p.sent(),n=(o=cc).instantiate,[4,S.default.getAsset(cc.Prefab,"GameBoard/"+B.default.randomInt(1,6)+"/Board")];case 2:if(e=n.apply(o,[p.sent()]),(r=e.getComponent(z.default)).setNodeTip(this.tipNode),this.sptBgColor.node.color=r.bgColor,N.default.sfFoundation=r.sfGround,this.dragPanel.videoFoundationSpriteFrame=r.sfGround,!F.DataHelper.getData(C.default).isAnyData)return[3,7];for(this.coin=F.DataHelper.getData(C.default).gameCoin,i=F.DataHelper.getData(C.default),this.boardData.setByJson(i.boardData),a={},c=0;c<N.default.boardSize.width;c++)for(l=0;l<N.default.boardSize.height;l++)if((u=this.boardData.getCell(c,l)).cellType===A.CellType.TOWER){if(u.id===m.TowerId.BASE)continue;a[u.uid]?(a[u.uid].x=Math.min(a[u.uid].x,c),a[u.uid].y=Math.min(a[u.uid].y,l)):a[u.uid]={x:c,y:l,cell:u}}for(f in s=[],a)s.push(f);d=0,p.label=3;case 3:return d<s.length?(y=s[d],[4,W.default.instance.create(a[y].cell.id,a[y].cell.level,cc.v2(a[y].x,a[y].y),a[y].cell.uid)]):[3,6];case 4:p.sent(),p.label=5;case 5:return d++,[3,3];case 6:for(this.dragPanel.init(JSON.parse(i.dragData),this.boardData,r.sfGround),this.battleLevelData=D.default.getData(b.default,i.level),this.battleExp=i.exp,this.roundIndex=i.roundIndex,this.costEx=i.costEx,this.coinEx=i.coinEx,_=F.DataHelper.getData(C.default).cards,P=0;P<_.length;P++)(k=D.default.getData(v.default,_[P]))&&!this.cards.has(k)&&(this.cards.add(k),this.addSkill(k,!0));return x.default.ins.onContinueGame(),R.default.emit(h.default.ContinueGame),[3,8];case 7:for(this.coin=40,this.costEx=0,this.coinEx=0,F.DataHelper.getData(C.default).setGameCoin(this.coin),this.battleLevelData=D.default.getData(b.default,1),this.battleExp=0,this.roundIndex=1,F.DataHelper.getData(C.default).setStage(t.type,t.stage),F.DataHelper.getData(C.default).setBoardData(this.boardData.toJson()),w=F.DataHelper.getData(L.default).getUnlockCards(),P=0;P<w.length;P++)w[P].default>0&&(this.addCard(w[P].id),F.DataHelper.getData(C.default).addCard(w[P].id));for(O=F.DataHelper.getData(L.default).getBaseTower(),P=0;P<O.length;P++)T=D.default.getData(g.default,O[P]),(k=D.default.getData(v.default,T.card))&&(this.addCard(k.id),F.DataHelper.getData(C.default).addCard(k.id));x.default.ins.onNewGame(),this.refreshDragPanel(),R.default.emit(h.default.NewGame),p.label=8;case 8:return[2,r]}})})},e.prototype.initStage=function(t){return s(this,void 0,void 0,function(){var e,o,n;return p(this,function(r){switch(r.label){case 0:return N.default.init(),e=this.gameBoard.node.parent.width/(N.default.boardSize.width*N.default.gridSize),o=this.gameBoard.node.parent.height/(N.default.boardSize.height*N.default.gridSize),N.default.boardScale=Math.min(e,o),this.stageData=t,t.type!==m.StageType.Normal?[3,2]:[4,this.initNormal(t)];case 1:return n=r.sent(),[3,4];case 2:return t.type!==m.StageType.Gold?[3,4]:[4,this.initGold(t)];case 3:n=r.sent(),r.label=4;case 4:return this.pathFinder.init(this.boardData),[4,this.gameBoard.initBoard(this.boardData,n)];case 5:return r.sent(),[4,this.addBase(this.boardData.basePos)];case 6:return r.sent(),[2]}})})},e.prototype.refreshDragPanel=function(t){void 0===t&&(t=!1);var e=W.default.instance.buildings,o=[];this.stageType===m.StageType.Normal?o=x.default.ins.refresh(this.stageType,this.levelId,this.roundIndex,this.boardData.data,e,t):this.stageType===m.StageType.Gold&&(o=x.default.ins.refreshOnlyTower(4)),this.dragPanel.init(o,this.boardData,N.default.sfFoundation)},e.prototype.refreshDragRevive=function(){for(var t=W.default.instance.buildings,e=x.default.ins.revive(this.boardData.data,t),o=0;o<e.length;o++)e[o].buildingLevel=3;this.dragPanel.init(e,this.boardData,N.default.sfFoundation)},e.prototype.forceDragPanel=function(t,e){void 0===e&&(e=!0),this.dragPanel.init(t,this.boardData,N.default.sfFoundation,!1),this.dragPanel.isEnableControl=!0,e&&(this.coin-=this.refreshCost,F.DataHelper.getData(C.default).setGameCoin(this.coin))},e.prototype.nextRound=function(){this.setGamePhase(m.GamePhase.BATTLE),R.default.emit(h.default.RoundStart)},e.prototype.addCard=function(t){var e=D.default.getData(v.default,t);e&&!this.cards.has(e)&&(this.cards.add(e),this.addSkill(e),F.DataHelper.getData(C.default).addTempCard(t))},e.prototype.addSkill=function(t,e){void 0===e&&(e=!1);var o=H.default.getByData(t);o&&!e&&o.onSelect(this),W.default.instance.buildings.forEach(function(e){t.target.includes(e.id)&&e.addSkill(t)})},e.prototype.onMonsterAttack=function(t){var e=this,o=t.getUserData();this.towerBase.data.hp.subValue(o),this.towerBase.data.hp.value<=0&&(d.default.trackEventBattleRoundLose(this.levelId,this.roundIndex),cc.sys.WECHAT_GAME===cc.sys.platform&&f.GameCannel===f.CannelType.Play800&&P.PlatformHelper.platform.p8BattleLose(this.levelId,this.roundIndex),F.DataHelper.getData(C.default).isRevive?R.default.emit(h.default.LevelFail):(N.default.isStop=!0,O.default.showFrame(w.default,function(){N.default.isStop=!1,e.towerBase.data.hp.value=e.towerBase.data.hp.max,e.reset(),e.addRoundCoin(),e.refreshDragRevive(),F.DataHelper.getData(C.default).revive(),R.default.emit(h.default.LevelRevive)})))},e.prototype.onFinishRound=function(){d.default.trackEventBattleRoundWin(this.levelId,this.roundIndex,Math.ceil(100*this.hpProgress)/100),cc.sys.WECHAT_GAME===cc.sys.platform&&f.GameCannel===f.CannelType.Play800&&P.PlatformHelper.platform.p8BattleWin(this.levelId,this.roundIndex),this.roundIndex++,F.DataHelper.getData(C.default).setLevelData(this.battleLevelData.id,this.battleExp),F.DataHelper.getData(C.default).setRoundIndex(this.roundIndex),F.DataHelper.getData(C.default).applyTempCard(),F.DataHelper.getData(C.default).setBoardData(this.boardData.toJson()),F.DataHelper.getData(C.default).saveHp(this.towerBase.data.hp.value),F.DataHelper.getData(C.default).setCostEx(this.costEx),F.DataHelper.getData(C.default).setCoinEx(this.coinEx),this.reset(),D.default.filterData(_.default,{type:this.stageType,stage:this.levelId,round:this.roundIndex}).length<1&&R.default.emit(h.default.LevelPass),this.addRoundCoin(),this.refreshDragPanel()},e.prototype.addRoundCoin=function(){var t=0;t+=D.default.getConfig("GameRoundBaseCoin"),W.default.instance.buildings.forEach(function(e){e.id===m.TowerId.FLOWER&&(t+=e.battleData.param)}),this.roundIndex>=11&&(t+=5),this.roundIndex>=15&&(t+=5),this.coin+=t,this.coin+=this.coinEx,this.coin+=this.coinTemp,this.coinTemp=0,F.DataHelper.getData(C.default).setGameCoin(this.coin)},e.prototype.onMonsterDead=function(t){if(F.DataHelper.getData(k.default).addTaskProgress(k.TaskType.KillMonster),this.battleExp+=t.monsterData.exp,!V.default.instance.isEmpty&&this.battleExp>=this.battleLevelData.exp){var e=D.default.getData(b.default,this.battleLevelData.id+1);e&&(this.battleExp-=this.battleLevelData.exp,this.battleLevelData=e,R.default.emit(h.default.BattleLevelUp,this.battleLevelData.id))}},e.prototype.cleanup=function(){this.dragPanel.cleanup(),N.default.cleanup(),this.battleManager.cleanup(),this.gameBoard.cleanup(),H.default.cleanup(),this.cards.clear(),U.default.instance.cleanup(),this.nightRenderer.cleanup(),this.towerBase=null},e.prototype.reset=function(){this.battleManager.reset(),this.gameBoard.reset()},e.prototype.refreshPaths=function(){var t=this,e=this.getAllPaths();this.destroyTowers=[],e.forEach(function(e){e.buildingsToDestroy.forEach(function(e){var o=t.boardData.getCell(e.x,e.y).uid;-1!==o&&t.destroyTowers.push(o)})}),this.pathData=e.map(function(t){return t.path}),this.gameBoard.setPaths(this.pathData,this.destroyTowers),J.default.instance.clearupDestroyMarkers();for(var o=0;o<this.destroyTowers.length;o++){var n=W.default.instance.get(this.destroyTowers[o]);n&&J.default.instance.createDestroyMarker(n.node.convertToWorldSpaceAR(cc.v3(0,30,0)))}},e.prototype.getAllPaths=function(){var t=this,e=[];return this.boardData.spawnPoints.forEach(function(o){var n=t.pathFinder.findPath(o,t.boardData.basePos);n.path&&n.path.length>0&&e.push({path:n.path.map(function(t){return cc.v2(t.x,t.y)}),buildingsToDestroy:n.buildingsToDestroy})}),e},e.prototype.onAddFoundation=function(t,e,o){e=this.gameBoard.getBoardPosByPosition(e),(!this.forcePutPos||this.forcePutPos.x===e.x&&this.forcePutPos.y===e.y)&&this.boardData.tryFoundationPut(e.x,e.y,t)&&(this.boardData.foundationPut(e.x,e.y,t),this.gameBoard.refreshBoard(),this.dragPanel.removeItem(o),F.DataHelper.getData(C.default).setBoardData(this.boardData.toJson()),R.default.emit(h.default.FoundationAdd))},e.prototype.addBase=function(t){return s(this,void 0,void 0,function(){var e,o,n,r;return p(this,function(i){switch(i.label){case 0:return e=F.DataHelper.getData(C.default).hp,[4,W.default.instance.createBaseTower(m.TowerId.BASE,1,t)];case 1:for(n in o=i.sent(),this.towerBase=W.default.instance.get(o),e>-1?this.towerBase.data.hp.setValue(e):F.DataHelper.getData(C.default).saveHp(this.towerBase.data.hp.value),this.boardData.buildingPut(t.x,t.y,o,m.TowerId.BASE,1))r=+n,W.default.instance.remove(r),this.boardData.buildingRemove(r);return this.gameBoard.refreshBoard(),J.default.instance.logicUpdate(0),[2]}})})},e.prototype.onAddBuilding=function(t,e,o,n){return s(this,void 0,void 0,function(){var r,i,a,c,l,u,s,f,d,y;return p(this,function(p){switch(p.label){case 0:return r=this.gameBoard.getBoardPosByPosition(o),!this.forcePutPos||this.forcePutPos.x===r.x&&this.forcePutPos.y===r.y?(i=this.boardData.tryBuildingLevelup(r.x,r.y,-1,t,e))>-1?(W.default.instance.levelup(i),this.boardData.buildingPut(r.x,r.y,i,t,e+1),this.gameBoard.refreshBoard(),this.dragPanel.removeItem(n),W.default.instance.get(i).renderer.setAnimation(K.AnimationNames.Down,3),R.default.emit(h.default.TowerCompound,i),T.default.playBattleSfx("Compound"),[3,3]):[3,1]:[2];case 1:return this.boardData.tryBuildingPut(r.x,r.y,t)?[4,W.default.instance.create(t,e,r)]:[3,3];case 2:for(l in a=p.sent(),c=this.boardData.buildingPut(r.x,r.y,a,t,e),this.dragPanel.removeItem(n),c)s=c[u=+l],f=s.buildingType,d=s.buildingLevel,W.default.instance.remove(u),this.boardData.buildingRemove(u),this.dragPanel.addBuilding(f,d,r);this.gameBoard.refreshBoard(),this.refreshPaths(),y=W.default.instance.get(a),this.cards.forEach(function(t){t.target.includes(y.id)&&y.addSkill(t)}),y.renderer.setAnimation(K.AnimationNames.Down,3),R.default.emit(h.default.TowerAdd,a),T.default.playBattleSfx("Put"),p.label=3;case 3:return J.default.instance.logicUpdate(0),F.DataHelper.getData(C.default).setBoardData(this.boardData.toJson()),[2]}})})},e.prototype.onMoveBuilding=function(t,e){if(this.dragPanel.node.getBoundingBoxToWorld().contains(e))return this.dragPanel.addBuilding(t.id,t.level,e),this.boardData.buildingRemove(t.uid),this.gameBoard.refreshBoard(),W.default.instance.remove(t.uid),this.refreshPaths(),void F.DataHelper.getData(C.default).setBoardData(this.boardData.toJson());var o=e.sub(cc.v2(.5*t.width*N.default.boardScale,.5*t.height*N.default.boardScale));if(o=this.gameBoard.getBoardPosByPosition(o),!this.forcePutPos||this.forcePutPos.x===o.x&&this.forcePutPos.y===o.y){var n=this.boardData.tryBuildingLevelup(o.x,o.y,t.uid,t.id,t.level);if(n>-1)this.boardData.buildingRemove(t.uid),this.boardData.buildingPut(o.x,o.y,n,t.id,t.level+1),this.gameBoard.refreshBoard(),W.default.instance.remove(t.uid),W.default.instance.levelup(n),W.default.instance.get(n).renderer.setAnimation(K.AnimationNames.Down,3),T.default.playBattleSfx("Compound"),R.default.emit(h.default.TowerCompound,n);else if(this.boardData.tryBuildingPut(o.x,o.y,t.id)){this.boardData.buildingRemove(t.uid),W.default.instance.move(t.uid,o);var r=this.boardData.buildingPut(o.x,o.y,t.uid,t.id,t.level);for(var i in r){var a=+i,c=r[a],l=c.buildingType,u=c.buildingLevel;W.default.instance.remove(a),this.boardData.buildingRemove(a),this.dragPanel.addBuilding(l,u,e)}this.gameBoard.refreshBoard(),W.default.instance.get(t.uid).renderer.setAnimation(K.AnimationNames.Down,3),T.default.playBattleSfx("Put")}this.refreshPaths(),J.default.instance.logicUpdate(0),F.DataHelper.getData(C.default).setBoardData(this.boardData.toJson())}},e.prototype.onClickCell=function(t){if((t=this.gameBoard.node.convertToNodeSpaceAR(t)).subSelf(N.default.boardStartPos),t.x=Math.floor(t.x/N.default.gridSize),t.y=Math.floor(t.y/N.default.gridSize),cc.sys.WECHAT_GAME!==cc.sys.platform){if(this.boardData.isVaild(t.x,t.y))switch(this.boardData.getCell(t.x,t.y).cellType){case A.CellType.EMPTY:this.boardData.setCell(t.x,t.y,A.CellType.FOUNDATION);break;case A.CellType.FOUNDATION:this.boardData.setCell(t.x,t.y,A.CellType.EMPTY)}this.gameBoard.refreshBoard(),this.refreshPaths()}},e.prototype.nightAnimation=function(t){var e=this;this.tweenNight||(this.tweenNight=cc.tween(this.nightRenderer).to(.5,{progress:t}).call(function(){e.tweenNight=null}).start())},e.prototype.setGamePhase=function(t){this._currentPhase=t,t===m.GamePhase.BATTLE?(this.battleManager.startBattle(this.pathData,this.stageType,this.levelId,this.roundIndex),d.default.trackEventBattleRoundStart(this.levelId,this.roundIndex),cc.sys.WECHAT_GAME===cc.sys.platform&&f.GameCannel===f.CannelType.Play800&&P.PlatformHelper.platform.p8BattleEnter(this.levelId,this.roundIndex),this.clearPaths(),this.nightAnimation(.7)):(this.refreshPaths(),this.battleManager.stopBattle(),this.nightAnimation(0))},e.prototype.getPreferFoundation=function(){return x.default.ins.getPreferFoundation(this.boardData.data)},e.prototype.getTreeFoundation=function(){return x.default.ins.getThreeFoundations(this.boardData.data)},e.prototype.clearPaths=function(){this.pathData=[],this.gameBoard.setPaths([])},e.prototype.onLoad=function(){this.dragPanel.listenAddBuilding(this.onAddBuilding.bind(this)),this.dragPanel.listenAddFoundation(this.onAddFoundation.bind(this)),this.gameBoard.listenMoveBuilding(this.onMoveBuilding.bind(this)),this.gameBoard.listenClickCell(this.onClickCell.bind(this)),R.default.on(h.default.RoundPass,this.onFinishRound,this),R.default.on(h.default.MonsterDead,this.onMonsterDead,this),this.node.on(M.default.MonsterAttack,this.onMonsterAttack,this)},e.prototype.onDestroy=function(){},e.prototype.start=function(){},e.prototype.update=function(t){N.default.isStop||this._currentPhase===m.GamePhase.BATTLE&&(this.battleManager.logicUpdate(N.default.speed*t),this.battleManager.battleTimeProgress>=1&&!this.hadSpecialOrBoss&&this.nightAnimation(0))},u([q({type:I.default,displayName:"\u68cb\u76d8"})],e.prototype,"gameBoard",void 0),u([q({type:cc.Sprite,displayName:"\u80cc\u666f\u989c\u8272"})],e.prototype,"sptBgColor",void 0),u([q({type:cc.Sprite,displayName:"\u80cc\u666f"})],e.prototype,"sptBg",void 0),u([q({type:j.default,displayName:"\u62d6\u62fd\u9762\u677f"})],e.prototype,"dragPanel",void 0),u([q({type:G.default,displayName:"\u6218\u6597\u7ba1\u7406"})],e.prototype,"battleManager",void 0),u([q({type:y.default,displayName:"\u9ed1\u591c\u6e32\u67d3\u5668"})],e.prototype,"nightRenderer",void 0),u([q({type:cc.Button,displayName:"\u5f00\u59cb\u6309\u94ae"})],e.prototype,"btnStart",void 0),u([q({type:cc.Node,displayName:"\u63d0\u793a\u683c\u5b50"})],e.prototype,"tipNode",void 0),u([Z],e)}(cc.Component);a.default=X,cc._RF.pop(),cc._RF.pop()},{}],GetItemFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ecf5fgKvE5GlIZmdQ6Z2xL+","GetItemFrame");var r=t,i=e,a=o;cc._RF.push(i,"ecf5fgKvE5GlIZmdQ6Z2xL+","GetItemFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("LangHelper"),d=r("ScrollList"),y=r("sdbHero"),h=r("sdbItem"),m=r("AssetBundleHelper"),b=r("FrameHelper"),v=r("StaticDBHelper"),g=r("GetItem"),_=r("SoundHelper"),w=cc._decorator,S=w.ccclass,R=w.menu,O=w.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleLb=null,e.itemSpt=null,e.countLb=null,e.nameLb=null,e.itemNameNode=null,e.singleNode=null,e.scrollList=null,e.closeBtn=null,e.lightNode=null,e.particle=null,e.itemDatas=[],e}var o;return l(e,t),o=e,e.prototype.onClickClose=function(){this.hideFrame()},e.prototype.onItemCreate=function(t,e){t.getComponent(g.default).setItem(this.itemDatas[e])},e.prototype.beforeShow=function(t,e){return void 0===e&&(e=[]),s(this,void 0,void 0,function(){var n,r;return p(this,function(){return this.singleNode.active=1==e.length,this.itemDatas=e,1==e.length?(_.default.playUiSfx("GetItem"),this.scrollList.createItemsByLength(0),n=v.default.getData(h.default,e[0].id),m.default.setSpriteFrame(this.itemSpt,n.icon),this.countLb.string=0==e[0].count?"":"x"+e[0].count,t==o.GetType.item?(this.titleLb.string=f.default.getStr("ui.39"),this.itemNameNode.active=!1):t==o.GetType.hero?(this.titleLb.string=f.default.getStr("ui.38"),this.itemNameNode.active=!0,this.nameLb.string=f.default.getStr(n.name)):t==o.GetType.unLockHero&&(r=v.default.getData(y.default,e[0].id),m.default.setSpriteFrame(this.itemSpt,r.icon),this.titleLb.string=f.default.getStr("ui.38"),this.itemNameNode.active=!0,this.nameLb.string=f.default.getStr(r.name))):(this.scrollList.createItemsByLength(e.length),this.runListAction()),[2,!0]})})},e.prototype.runListAction=function(){return s(this,void 0,void 0,function(){var t,e;return p(this,function(o){switch(o.label){case 0:for(t=[],this.closeBtn.interactable=!1,e=0;e<this.scrollList.nodeList.length;e++)t.push(this.scrollList.nodeList[e].getComponent(g.default).runGetAction(e));return[4,Promise.all(t)];case 1:return o.sent(),this.closeBtn.interactable=!0,[2]}})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.particle.resetSystem(),[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:return e.sent(),this.scrollList.onItemCreate(this.onItemCreate.bind(this)),[2]}})})},e.prototype.start=function(){},e.GetType={item:0,hero:1,unLockHero:2},e.frameInfo={name:"GetItemFrame",type:b.FrameType.Model,bundleName:"Root",prefabName:"Prefab/Frame/GetItemFrame",zIndex:11},u([O({type:cc.Label,displayName:"\u6807\u9898"})],e.prototype,"titleLb",void 0),u([O({type:cc.Sprite,displayName:"\u7269\u54c1"})],e.prototype,"itemSpt",void 0),u([O({type:cc.Label,displayName:"\u6570\u91cf"})],e.prototype,"countLb",void 0),u([O({type:cc.Label,displayName:"\u7269\u54c1\u540d\u79f0"})],e.prototype,"nameLb",void 0),u([O({type:cc.Node,displayName:"\u7269\u54c1\u540d\u79f0\u8282\u70b9"})],e.prototype,"itemNameNode",void 0),u([O({type:cc.Node,displayName:"\u5355\u4e2a\u8282\u70b9"})],e.prototype,"singleNode",void 0),u([O({type:d.default,displayName:"\u83b7\u5f97\u5217\u8868"})],e.prototype,"scrollList",void 0),u([O({type:cc.Button,displayName:"\u5173\u95ed\u6309\u94ae"})],e.prototype,"closeBtn",void 0),u([O({type:cc.Node,displayName:"\u5149\u8282\u70b9"})],e.prototype,"lightNode",void 0),u([O({type:cc.ParticleSystem,displayName:"\u7c92\u5b50"})],e.prototype,"particle",void 0),o=u([S,R("\u754c\u9762/GetItemFrame \u83b7\u53d6\u7269\u54c1\u754c\u9762")],e)}(b.FrameBase);a.default=P,cc._RF.pop(),cc._RF.pop()},{}],GetItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"bf80d9ZgidOJIiVSf6oy9At","GetItem");var r=t,i=e,a=o;cc._RF.push(i,"bf80d9ZgidOJIiVSf6oy9At","GetItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("ImageLoader"),d=r("sdbItem"),y=r("AssetBundleHelper"),h=r("SoundHelper"),m=r("StaticDBHelper"),b=cc._decorator,v=b.ccclass,g=b.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgLoader=null,e.icon=null,e.count=null,e}return l(e,t),e.prototype.setItem=function(t){var e=this,o=m.default.getData(d.default,t.id);this.bgLoader.select(o.quality),y.default.setSpriteFrame(this.icon,o.icon).then(function(){e.icon.node.scale=Math.min(88/e.icon.node.width,88/e.icon.node.height)}),this.count.string=t.count.toString(),this.node.opacity=0},e.prototype.runGetAction=function(t){return s(this,void 0,void 0,function(){var e=this;return p(this,function(){return[2,new Promise(function(o){cc.tween(e.node).delay(.2*t).call(function(){h.default.playUiSfx("GetItem")}).to(.1,{opacity:255,scale:1.2}).to(.1,{scale:1}).call(o).start()})]})})},e.prototype.start=function(){},u([g({type:f.default,displayName:"\u80cc\u666f"})],e.prototype,"bgLoader",void 0),u([g({type:cc.Sprite,displayName:"icon"})],e.prototype,"icon",void 0),u([g({type:cc.Label,displayName:"\u6570\u91cf"})],e.prototype,"count",void 0),u([v],e)}(cc.Component);a.default=_,cc._RF.pop(),cc._RF.pop()},{}],GrassRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7b09d6U4sVNr7+lqMIMV8zD","GrassRenderer");var r=t,i=e,a=o;cc._RF.push(i,"7b09d6U4sVNr7+lqMIMV8zD","GrassRenderer");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("FbfAnimation"),p=r("ChessRenderer"),f=cc._decorator,d=f.ccclass,y=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.animation=null,e}return l(e,t),e.prototype.init=function(){},e.prototype.cleanup=function(){},e.prototype.reset=function(){var t=this.sprite.node.getBoundingBoxToWorld(),e=t.xMin/cc.winSize.width*255,o=t.yMin/cc.winSize.height*255,n=t.xMax/cc.winSize.width*255,r=t.yMax/cc.winSize.height*255;this.sprite.node.color=cc.color(e,o,n),this.sprite.node.opacity=r},e.prototype.onCollisionEnter=function(){this.node.isValid&&this.isValid&&this.animation&&!this.animation.isPlaying&&this.animation.play()},e.prototype.start=function(){},e.prototype.update=function(){},u([y({type:cc.Sprite,displayName:"\u56fe\u7247"})],e.prototype,"sprite",void 0),u([y({type:s.default,displayName:"\u52a8\u753b"})],e.prototype,"animation",void 0),u([d],e)}(p.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],GuideConfig:[function(t,e,o){"use strict";cc._RF.push(e,"fb5daXBob9A16cRFjcL1pSM","GuideConfig");var n=t,r=e,i=o;cc._RF.push(r,"8d059vztMNC1LhyGzsDUC6D","GuideConfig"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("Guide_Level_1"),c=n("Guide_Level_2"),l=function(){function t(){}return t.getGuideById=function(t){return this.groupList[t]?new this.groupList[t]:null},t.groupList=[a.default,c.default],t}();i.default=l,cc._RF.pop(),cc._RF.pop()},{}],GuideData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"75caa/1lW9AbYDVubsR2mOc","GuideData");var r=t,i=e,a=o;cc._RF.push(i,"75caa/1lW9AbYDVubsR2mOc","GuideData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("RunDataHelper"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultData=function(){return{ids:[]}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"GuideData"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guideId",{get:function(){return this.data.ids.length<1?0:this.data.ids[this.data.ids.length-1]+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFinished",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.finish=function(t){-1==this.data.ids.indexOf(t)&&(this.data.ids.push(t),this.data.ids.sort(function(t,e){return t-e}))},u([s.DirtyData],e.prototype,"finish",null),e}(s.RunDataBase);a.default=p,cc._RF.pop(),cc._RF.pop()},{}],GuideFinger:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b9371z0Qg1Eiang+UPpi9qO","GuideFinger");var r=e,i=o;cc._RF.push(r,"d5b04jOfZBLhYwMoBLgI8si","GuideFinger");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptFinger=null,e.sfFingerUp=null,e.sfFingerDown=null,e.tween=null,e.startPos=null,e.endPos=null,e}return c(e,t),e.prototype.click=function(t){var e=this;this.node.active=!0,this.node.setPosition(this.node.parent.convertToNodeSpaceAR(t)),this.startPos=this.endPos=null,this.sptFinger.spriteFrame=this.sfFingerDown,this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).repeatForever(cc.tween(this.node).call(function(){e.sptFinger.spriteFrame=e.sfFingerUp}).delay(.25).call(function(){e.sptFinger.spriteFrame=e.sfFingerDown}).delay(.5)).start()},e.prototype.moveTo=function(t,e){var o=this;this.node.active=!0;var n=this.node.parent.convertToNodeSpaceAR(cc.v2(t)),r=this.node.parent.convertToNodeSpaceAR(cc.v2(e));this.startPos&&this.endPos&&n.sub(this.startPos).len()<.01&&r.sub(this.endPos).len()<.01||(this.startPos=n,this.endPos=r,this.sptFinger.spriteFrame=this.sfFingerUp,this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).repeatForever(cc.tween(this.node).call(function(){o.node.setPosition(n)}).delay(.5).call(function(){o.sptFinger.spriteFrame=o.sfFingerDown}).delay(.2).to(1,{x:r.x,y:r.y}).delay(.2).call(function(){o.sptFinger.spriteFrame=o.sfFingerUp}).delay(1)).start())},e.prototype.start=function(){},l([p({type:cc.Sprite,displayName:"\u624b\u6307"})],e.prototype,"sptFinger",void 0),l([p({type:cc.SpriteFrame,displayName:"\u624b\u6307\u62ac\u8d77"})],e.prototype,"sfFingerUp",void 0),l([p({type:cc.SpriteFrame,displayName:"\u624b\u6307\u6309\u4e0b"})],e.prototype,"sfFingerDown",void 0),l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],GuideFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"4b6d4hhyT1JRouABfpQy5zD","GuideFrame");var r=t,i=e,a=o;cc._RF.push(i,"6c1c5mzL7VKAbC4/AZ2Ctzp","GuideFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0}),a.TIP_SHOP_TIME=void 0;var f=r("EventConfig"),d=r("EventHelper"),y=r("FrameHelper"),h=r("MathUtil"),m=r("GuideFinger"),b=r("GuideMsg"),v=cc._decorator,g=v.ccclass,_=v.property;a.TIP_SHOP_TIME=3e3;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.sptMask=null,e.sptHightLight=null,e.msg=null,e.finger=null,e.nodeLine=null,e.nodeTouch=null,e.listHightLight=[],e.isRefreshLightList=!1,e.renderTextureHightLight=null,e.listEnableTouchRect=[],e.callbackTouchRect=[],e.callbackTouchStart=[],e.callbackTouchEnd=[],e.tweenFinger=null,e.isEnableDrag=!1,e.updateCallback=[],e}return l(e,t),e.prototype.onUpdate=function(t,e){this.updateCallback.push({func:t,obj:e})},e.prototype.offUpdate=function(t,e){var o=this.updateCallback.indexOf({func:t,obj:e});-1!==o&&this.updateCallback.splice(o,1)},e.prototype.cleanpUpdate=function(){this.updateCallback=[]},e.prototype.cleanup=function(){this.isMask=!1,this.isSwallowTouches=!0,this.isEnableDrag=!1,this.listEnableTouchRect=[],this.listHightLight=[],this.isRefreshLightList=!1,this.sptHightLight.spriteFrame=null,this.nodeLine.active=!1,this.msg.hide(),this.finger.node.active=!1,this.cleanupTouchListon()},Object.defineProperty(e.prototype,"isMask",{set:function(t){this.sptMask.node.active=t,this.sptHightLight.node.active=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSwallowTouches",{set:function(t){this.nodeTouch.active=t},enumerable:!1,configurable:!0}),e.prototype.line=function(t,e){var o=this.nodeLine.parent.convertToNodeSpaceAR(t),n=this.nodeLine.parent.convertToNodeSpaceAR(e);this.nodeLine.active=!0,this.nodeLine.setPosition(o),this.nodeLine.angle=h.default.getAngleByDir(n.sub(o))-90,this.nodeLine.scaleY=o.sub(n).mag()/this.nodeLine.height,this.finger.moveTo(t,e)},e.prototype.btn=function(t){this.finger.click(t)},e.prototype.showMsg=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return this.msg.show(t,e),[2]})})},e.prototype.hideMsg=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.msg.hide(),[2]})})},e.prototype.lightNode=function(t){if(!t)return cc.error("GuideFrame - lightNode error : node is null");this.listHightLight.push(t),this.isRefreshLightList=!0},e.prototype.addTouchRectByNode=function(t,e){if(!t)return cc.error("GuideFrame - addTouchRectByNode error : node is null");var o=cc.Camera.findCamera(t),n=t.getBoundingBoxToWorld(),r=o.getWorldToScreenPoint(cc.v2(n.x,n.y));r=cc.Camera.findCamera(this.node).getScreenToWorldPoint(r),this.listEnableTouchRect.push(cc.rect(r.x,r.y,n.width*o.zoomRatio,n.height*o.zoomRatio)),e&&this.callbackTouchRect.push(e)},e.prototype.addTouchRect=function(t,e){this.listEnableTouchRect.push(t),e&&this.callbackTouchRect.push(e)},e.prototype.listenTouchStart=function(t){this.callbackTouchStart.push(t)},e.prototype.listenTouchEnd=function(t){this.callbackTouchEnd.push(t)},e.prototype.cleanupTouchEnd=function(){this.callbackTouchEnd=[]},e.prototype.cleanupTouchListon=function(){this.callbackTouchRect=[],this.callbackTouchStart=[],this.callbackTouchEnd=[]},e.prototype.cleanupTouchRect=function(){this.callbackTouchRect=[]},e.prototype.onTouchStart=function(t){console.log("[GuideFrame] onTouchStart",t.getLocation(),"listEnableTouchRect.length:",this.listEnableTouchRect.length);for(var e=!1,o=0;o<this.listEnableTouchRect.length;o++)if(this.listEnableTouchRect[o].contains(t.getLocation())){e=!0;break}e&&(d.default.emit(f.default.GuideClickInRect),this.callbackTouchStart.forEach(function(e){e(t)}))},e.prototype.onTouchMove=function(t){this.isEnableDrag||t.stopPropagation()},e.prototype.onTouchEnd=function(t){console.log("[GuideFrame] onTouchEnd - emitting GuideClick"),d.default.emit(f.default.GuideClick);for(var e=0;e<this.listEnableTouchRect.length;e++)if(this.listEnableTouchRect[e].contains(t.getLocation())){this.callbackTouchRect.forEach(function(e){e(t)});break}this.callbackTouchEnd.forEach(function(e){e(t)})},e.prototype.refreshHightLight=function(){if(this.sptHightLight.node.active&&this.listHightLight.length>0&&this.isRefreshLightList){this.isRefreshLightList=!1,this.renderTextureHightLight&&this.renderTextureHightLight.destroy(),this.sptHightLight.spriteFrame&&this.sptHightLight.spriteFrame.destroy(),this.renderTextureHightLight=new cc.RenderTexture,this.renderTextureHightLight.initWithSize(cc.winSize.width,cc.winSize.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_S8),this.camera.targetTexture=this.renderTextureHightLight,this.sptHightLight.spriteFrame=new cc.SpriteFrame(this.renderTextureHightLight);for(var t=0;t<this.listHightLight.length;t++){var e=this.listHightLight[t],o=cc.Camera.findCamera(e);this.camera.node.x=o.node.x,this.camera.node.y=o.node.y,this.camera.zoomRatio=o.zoomRatio,this.camera.render(e)}}else if(this.camera.targetTexture)if(this.listHightLight.length<1)this.camera.targetTexture=null;else for(this.camera.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL|cc.Camera.ClearFlags.COLOR,this.camera.render(this.camera.node),this.camera.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL,t=0;t<this.listHightLight.length;t++)cc.isValid(this.listHightLight[t])&&this.camera.render(this.listHightLight[t])},e.prototype.onLoad=function(){console.log("[GuideFrame] onLoad called"),this.nodeTouch=new cc.Node("NodeTouch"),this.nodeTouch.parent=this.node,this.nodeTouch.width=cc.winSize.width,this.nodeTouch.height=cc.winSize.height,this.nodeTouch.zIndex=9999,this.nodeTouch.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.nodeTouch.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.nodeTouch.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.nodeTouch.on(cc.Node.EventType.TOUCH_CANCEL,function(){console.log("[GuideFrame] onTouchCancel")},this),console.log("[GuideFrame] nodeTouch created, size:",this.nodeTouch.width,this.nodeTouch.height),this.nodeTouch._touchListener&&this.nodeTouch._touchListener.setSwallowTouches(!1),this.cleanup(),this.getComponent(cc.BlockInputEvents)&&this.node.removeComponent(cc.BlockInputEvents),this.renderTextureHightLight=new cc.RenderTexture,this.renderTextureHightLight.initWithSize(cc.winSize.width,cc.winSize.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_S8),this.camera.targetTexture=this.renderTextureHightLight,this.sptHightLight.spriteFrame=new cc.SpriteFrame(this.renderTextureHightLight),t.prototype.onLoad.call(this)},e.prototype.onDestroy=function(){this.nodeTouch&&this.nodeTouch.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.nodeTouch&&this.nodeTouch.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.start=function(){},e.prototype.update=function(){this.refreshHightLight(),this.updateCallback.forEach(function(t){t.func.apply(t.obj)})},e.frameInfo={name:"GuideFrame",type:y.FrameType.Normal,bundleName:"Guide",prefabName:"Prefab/Frame/GuideFrame",zIndex:cc.macro.MAX_ZINDEX-1},u([_({type:cc.Camera,displayName:"\u5f15\u5bfc\u4e13\u7528\u6444\u50cf\u673a"})],e.prototype,"camera",void 0),u([_({type:cc.Sprite,displayName:"\u906e\u7f69\u7cbe\u7075"})],e.prototype,"sptMask",void 0),u([_({type:cc.Sprite,displayName:"\u9ad8\u4eae\u7cbe\u7075"})],e.prototype,"sptHightLight",void 0),u([_({type:b.default,displayName:"\u6d88\u606f\u6846"})],e.prototype,"msg",void 0),u([_({type:m.default,displayName:"\u624b\u6307"})],e.prototype,"finger",void 0),u([_({type:cc.Node,displayName:"\u7ebf\u6761"})],e.prototype,"nodeLine",void 0),u([g],e)}(y.FrameBase);a.default=w,cc._RF.pop(),cc._RF.pop()},{}],GuideGroup:[function(t,e,o){"use strict";cc._RF.push(e,"da8b7/C9URDsItaVkwpJDDN","GuideGroup");var n=t,r=e,i=o;cc._RF.push(r,"056b0NgIMhCSpyAGIdPGW1u","GuideGroup"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("GameFrame"),c=n("FrameHelper"),l=n("TrackHelper"),u=function(){function t(){this.debug=!1,this.id=0,this.stepList=[],this.index=0,this.funcFinish=null,this.frame=null,this.guideData=null}return t.prototype.init=function(t,e,o){this.guideData=t,this.frame=e,this.funcFinish=o,this.initStep()},t.prototype.addStep=function(t){t.init(this.frame,this.stepFinish.bind(this)),this.stepList.push(t)},t.prototype.nextStep=function(){this.index++;var t=this.stepList[this.index];t.setGuideData(this.guideData);var e=c.default.getFrame(a.default),o=e?e.gameStage.roundIndex:-1;t.round>-1&&o>t.round?t.finish():(t.listenUpdate(),t.isFinish=!1,t.start())},t.prototype.start=function(){if(this.frame.cleanup(),this.index=0,this.stepList.length<1)return cc.warn("\u5f15\u5bfc\u4efb\u52a1 "+this.id+" \u6ca1\u6709\u4efb\u4f55\u6b65\u9aa4"),void this.finish();this.stepList[0].setGuideData(this.guideData),this.stepList[0].listenUpdate(),this.stepList[this.index].isFinish=!1,this.stepList[0].start()},t.prototype.stepFinish=function(t,e){void 0===e&&(e=null),l.default.trackEventGuide(this.guideData,this.index),this.stepList[this.index].cleanup(),this.index+1<this.stepList.length&&!t?this.nextStep():this.finish(e)},t.prototype.forceReset=function(){this.stepList[this.index].cleanup();for(var t=0;t<this.stepList.length;t++)this.stepList[t].isFinish=!0;this.stepList=[],this.initStep(),this.index=0,this.stepList[this.index].setGuideData(this.guideData),this.stepList[this.index].listenUpdate(),this.stepList[this.index].isFinish=!1,this.stepList[this.index].start()},t.prototype.finish=function(t){void 0===t&&(t=null),this.cleanup(),this.debug?this.frame.node.active=!1:this.funcFinish&&this.funcFinish(this.guideData,t)},t.prototype.cleanup=function(){this.frame&&this.frame.cleanup()},t}();i.default=u,cc._RF.pop(),cc._RF.pop()},{}],GuideHelper:[function(t,e,o){"use strict";cc._RF.push(e,"115f3Llmk9EZqn2BlWP62s+","GuideHelper");var n=t,r=e,i=o;cc._RF.push(r,"115f3Llmk9EZqn2BlWP62s+","GuideHelper");var a=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},c=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=n("Load"),u=n("TrackHelper"),s=n("GuideData"),p=n("AssetBundleHelper"),f=n("FrameHelper"),d=n("PlatformHelper"),y=n("RunDataHelper"),h=function(){function t(){}return t.init=function(){return a(this,void 0,void 0,function(){var t,e;return c(this,function(o){switch(o.label){case 0:return[4,p.default.getAssetBundles("Guide")];case 1:return o.sent(),t=this,[4,Promise.resolve().then(function(){return n("GuideFrame")})];case 2:return t.guideFrame=o.sent().default,e=this,[4,Promise.resolve().then(function(){return n("GuideConfig")})];case 3:return e.guideConfig=o.sent().default,[2]}})})},t.cleanupAll=function(){this.hideGuideFrame(),this.isGuiding=!1},t.showGuideFrame=function(){return a(this,void 0,void 0,function(){return c(this,function(){return[2,f.default.showFrame(this.guideFrame)]})})},t.hideGuideFrame=function(){return a(this,void 0,void 0,function(){return c(this,function(){return[2,f.default.hideFrame(this.guideFrame)]})})},t.guide=function(t){return a(this,void 0,void 0,function(){var e,o;return c(this,function(n){switch(n.label){case 0:return this.isGuiding?(cc.log("Already Guiding Group"),[2,!1]):(e=this.guideConfig.getGuideById(t))?(this.isGuiding=!0,this.guideId=t,[4,this.showGuideFrame()]):(cc.log("Don't find Guiding Group : guideId = "+t),[2,!1]);case 1:return o=n.sent(),e.init(t,o,this.onTaskGroupFinish.bind(this)),e.start(),[2,!0]}})})},t.onTaskGroupFinish=function(t,e){return void 0===e&&(e=null),a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return y.DataHelper.getData(s.default).finish(t),this.isGuiding=!1,this.guideId=-1,[4,this.guide(y.DataHelper.getData(s.default).guideId)];case 1:return e.sent()?[2]:(cc.sys.WECHAT_GAME===cc.sys.platform&&l.GameCannel===l.CannelType.Play800&&d.PlatformHelper.platform.p8Guide(),cc.sys.WECHAT_GAME===cc.sys.platform&&l.GameCannel===l.CannelType.BaoWeiWanDou&&u.default.TutorialFinish(),[2,this.hideGuideFrame()])}})})},t.isGuiding=!1,t.guideFrame=null,t.guideConfig=null,t.guideId=-1,t}();i.default=h,cc._RF.pop(),cc._RF.pop()},{}],GuideMsg:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"17676sBG0tPeL8X2n61bCtn","GuideMsg");var r=e,i=o;cc._RF.push(r,"d4f76eIkGZBPo3jv9BlfcM5","GuideMsg");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0}),i.GuideMsgPositionType=void 0;var u,s=cc._decorator,p=s.ccclass,f=s.property;(function(t){t[t.Top=1]="Top",t[t.Center=2]="Center",t[t.Bottom=3]="Bottom"})(u=i.GuideMsgPositionType||(i.GuideMsgPositionType={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeMain=null,e.lbMsg=null,e.nodeTop=null,e.nodeCenter=null,e.nodeBottom=null,e.nodeArrow=null,e}return c(e,t),e.prototype.show=function(t,e){t="<b>"+t+"</c>",this.lbMsg.string=t;var o=null;switch(e){case u.Top:o=this.nodeTop;break;case u.Center:o=this.nodeCenter;break;case u.Bottom:o=this.nodeBottom}this.nodeMain.setPosition(o.position),this.nodeMain.active=!0},e.prototype.hide=function(){this.nodeMain.active=!1},e.prototype.onLoad=function(){this.lbMsg.node.color=cc.Color.fromHEX(new cc.Color,"#112233");var t=this.nodeArrow.position.y;cc.tween(this.nodeArrow).repeatForever(cc.tween(this.nodeArrow).to(.15,{y:t+5}).delay(.2).to(.15,{y:t})).start()},e.prototype.start=function(){},l([f({type:cc.Node,displayName:"\u4e3b\u4f53"})],e.prototype,"nodeMain",void 0),l([f({type:cc.RichText,displayName:"\u6587\u5b57"})],e.prototype,"lbMsg",void 0),l([f({type:cc.Node,displayName:"\u4e0a"})],e.prototype,"nodeTop",void 0),l([f({type:cc.Node,displayName:"\u4e2d"})],e.prototype,"nodeCenter",void 0),l([f({type:cc.Node,displayName:"\u4e0b"})],e.prototype,"nodeBottom",void 0),l([f({type:cc.Node,displayName:"\u7bad\u5934"})],e.prototype,"nodeArrow",void 0),l([p],e)}(cc.Component);i.default=d,cc._RF.pop(),cc._RF.pop()},{}],GuideStepChooseCard:[function(t,e,o){"use strict";cc._RF.push(e,"aa6c02ZD81FZJDpp6L4iYPl","GuideStepChooseCard");var n=t,r=e,i=o;cc._RF.push(r,"025b3ojogtA7q+3U1QxlcIy","GuideStepChooseCard");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},u=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var s=n("EventConfig"),p=n("GameFrame"),f=n("SelectCardFrame"),d=n("EventHelper"),y=n("FrameHelper"),h=n("GuideMsg"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContorlPre=!1,e}return c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.isContorlPre=!1,this.frame.isSwallowTouches=!1,d.default.on(s.default.FrameShowTry,this.onFrameShowTry,this),d.default.on(s.default.FrameShow,this.onFrameShow,this),d.default.on(s.default.FrameHide,this.onFrameHide,this),[2]})})},e.prototype.onFrameShowTry=function(t){return l(this,void 0,void 0,function(){return u(this,function(){return t.frameClass===f.default&&(this.frame.isMask=!0),[2]})})},e.prototype.onFrameShow=function(t){return l(this,void 0,void 0,function(){var e,o,n,r,i;return u(this,function(a){switch(a.label){case 0:return t.frameClass!==f.default?[3,9]:(this.frame.isMask=!0,[4,this.findNode("Canvas/SelectCardFrame/List/layout")]);case 1:return e=a.sent(),[4,this.findNode("Canvas/SelectCardFrame/Btns")];case 2:a.sent().active=!1,o=0,a.label=3;case 3:if(!(o<100))return[3,6];for(n=0,r=0;r<e.childrenCount;r++)e.children[r].active&&n++;return 1===n?[3,6]:[4,this.delay(100)];case 4:a.sent(),a.label=5;case 5:return o++,[3,3];case 6:return[4,this.delay(200)];case 7:return a.sent(),e?[4,this.findChild(e,0)]:(this.finish(),[2]);case 8:if(!(i=a.sent()))return this.finish(),[2];this.frame.lightNode(i),this.frame.showMsg(this.msg,h.GuideMsgPositionType.Bottom),this.frame.btn(i.convertToWorldSpaceAR(cc.Vec2.ZERO)),i.getChildByName("Pre").getComponentsInChildren(cc.Button).forEach(function(t){return t.interactable=!1}),this.isContorlPre=!0,a.label=9;case 9:return[2]}})})},e.prototype.onFrameHide=function(t){return l(this,void 0,void 0,function(){var e;return u(this,function(){return t.frameClass===f.default&&(e=y.default.getFrame(p.default),this.exCards.forEach(function(t){e.gameStage.addCard(t)}),this.finish()),[2]})})},e.prototype.cleanup=function(){return l(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return t.prototype.cleanup.call(this),d.default.off(s.default.FrameShowTry,this.onFrameShowTry,this),d.default.off(s.default.FrameShow,this.onFrameShow,this),d.default.off(s.default.FrameHide,this.onFrameHide,this),y.default.getFrame(f.default)?[4,this.findNode("Canvas/SelectCardFrame/Btns")]:[3,2];case 1:e.sent().active=!0,e.label=2;case 2:return[2]}})})},e}(n("GuideStep").default);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],GuideStepDragFoundation:[function(t,e,o){"use strict";cc._RF.push(e,"47c8cJtlq5AGrZd91e8f8Kq","GuideStepDragFoundation");var n=t,r=e,i=o;cc._RF.push(r,"ce7889XF8VPHIZH4mPeLimB","GuideStepDragFoundation");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},u=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var s=n("EventConfig"),p=n("GameFrame"),f=n("EventHelper"),d=n("FrameHelper"),y=n("GuideMsg"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"msg",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msgPos",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.addFinishListener=function(){f.default.once(this.finishEvent,this.onFinishEvent,this),this.msg&&f.default.once(s.default.GuideClick,this.closeMsg,this)},e.prototype.closeMsg=function(){this.frame.hideMsg()},e.prototype.start=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.touch(),this.addFinishListener(),this.msg&&this.frame.showMsg(this.msg,this.msgPos||y.GuideMsgPositionType.Center),[2]})})},e.prototype.onFinishEvent=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this.frame.cleanup(),this.frame.isMask=!0,[4,this.delay(100)];case 1:return t.sent(),this.finish(),[2]}})})},e.prototype.touch=function(){return l(this,void 0,void 0,function(){var t,e,o,n,r,i,a,c;return u(this,function(l){switch(l.label){case 0:this.frame.cleanup(),this.frame.isMask=!0,t=[],c=0,l.label=1;case 1:if(!(c<this.foundationSize.x))return[3,6];e=0,l.label=2;case 2:return e<this.foundationSize.y?[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/Board/Board/Ground/"+(this.foundationPos.x+c)+"_"+(this.foundationPos.y+e))]:[3,5];case 3:o=l.sent(),t.push(o),this.frame.lightNode(o),l.label=4;case 4:return e++,[3,2];case 5:return c++,[3,1];case 6:return[4,this.findNode("Canvas/GameFrame/DragBar/ItemList/layout")];case 7:return n=l.sent(),[4,this.findChild(n,this.dragIndex)];case 8:if(!(r=l.sent()))return[2];for(i=r.getChildByName("Body"),this.frame.line(i.convertToWorldSpaceAR(cc.Vec3.ZERO),t[0].convertToWorldSpaceAR(cc.Vec3.ZERO)),this.frame.lightNode(r),a=i.getComponentsInChildren(cc.Sprite),c=0;c<a.length;c++)this.frame.addTouchRectByNode(a[c].node,null);return this.frame.listenTouchStart(this.onTouchRect.bind(this)),[2]}})})},e.prototype.move=function(){return l(this,void 0,void 0,function(){var t,e,o,n,r,i,a,c,l,s,f;return u(this,function(u){switch(u.label){case 0:this.frame.cleanup(),this.frame.isMask=!0,t=[],e=0,u.label=1;case 1:if(!(e<this.foundationSize.x))return[3,6];o=0,u.label=2;case 2:return o<this.foundationSize.y?[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/Board/Board/Ground/"+(this.foundationPos.x+e)+"_"+(this.foundationPos.y+o))]:[3,5];case 3:n=u.sent(),t.push(n),this.frame.lightNode(n),u.label=4;case 4:return o++,[3,2];case 5:return e++,[3,1];case 6:return i=(r=this.frame).lightNode,[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/Tipnode")];case 7:return i.apply(r,[u.sent()]),[4,this.findNode("Canvas/GameFrame/GameControl/DragNode")];case 8:return a=u.sent(),[4,this.findChild(a,0)];case 9:return c=u.sent(),[4,this.findNode("Canvas/GameFrame/DragBar/ItemList/layout")];case 10:return l=u.sent(),[4,this.findChild(l,this.dragIndex)];case 11:return s=u.sent(),f=s.getChildByName("Body"),this.frame.line(f.convertToWorldSpaceAR(cc.Vec3.ZERO),t[0].convertToWorldSpaceAR(cc.Vec3.ZERO)),this.frame.lightNode(c),d.default.getFrame(p.default).gameStage.forcePutPos=this.foundationPos,this.frame.listenTouchEnd(this.onTouchEnd.bind(this)),this.frame.isEnableDrag=!0,[2]}})})},e.prototype.onTouchRect=function(){this.isFinish||this.move()},e.prototype.onTouchEnd=function(){this.isFinish||this.touch()},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),d.default.getFrame(p.default).gameStage.forcePutPos=null},e}(n("GuideStep").default);i.default=h,cc._RF.pop(),cc._RF.pop()},{}],GuideStepDragTower:[function(t,e,o){"use strict";cc._RF.push(e,"ec85awUJnlPeqcArc7j/DO1","GuideStepDragTower");var n=t,r=e,i=o;cc._RF.push(r,"085b2md7RdFsZYZASAICk8T","GuideStepDragTower");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},u=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var s=n("EventConfig"),p=n("GameFrame"),f=n("DragItem"),d=n("Tower"),y=n("EventHelper"),h=n("FrameHelper"),m=n("GuideMsg"),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragItem=null,e.lineStart=null,e.lineEnd=null,e}return c(e,t),Object.defineProperty(e.prototype,"lightTower",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msgPos",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.addFinishListener=function(){y.default.once(this.finishEvent,this.onFinishEvent,this),this.msg&&y.default.once(s.default.GuideClick,this.closeMsg,this)},e.prototype.closeMsg=function(){this.frame.hideMsg()},e.prototype.start=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.lineStart=null,this.lineEnd=null,this.frame.isSwallowTouches=!0,this.touch(),this.addFinishListener(),this.msg&&this.frame.showMsg(this.msg,this.msgPos||m.GuideMsgPositionType.Center),[2]})})},e.prototype.onFinishEvent=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this.isFinish=!0,this.frame.cleanup(),this.frame.isMask=!0,[4,this.delay(100)];case 1:return t.sent(),this.finish(),[2]}})})},e.prototype.touch=function(){return l(this,void 0,void 0,function(){var t,e,o,n,r,i,a,c,l;return u(this,function(u){switch(u.label){case 0:if(this.isFinish)return[2];this.dragItem=null,this.frame.cleanup(),this.frame.isMask=!0,t=[],e=0,u.label=1;case 1:if(!(e<this.towerSize.x))return[3,6];o=0,u.label=2;case 2:return o<this.towerSize.y?[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/Board/Board/Foundation/"+(this.towerPos.x+e)+"_"+(this.towerPos.y+o))]:[3,5];case 3:(n=u.sent())&&(t.push(n),this.frame.lightNode(n)),u.label=4;case 4:return o++,[3,2];case 5:return e++,[3,1];case 6:return 0===t.length?(this.finish(),[2]):this.lightTower?[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/BattleStage")]:[3,9];case 7:return r=u.sent(),[4,this.findChildByName(r,this.lightTower)];case 8:(i=u.sent())&&(this.frame.lightNode(i.getChildByName("Spine")),this.frame.lightNode(i.getChildByName("Level"))),u.label=9;case 9:return this.passAllWait=!0,[4,this.findNode("Canvas/GameFrame/DragBar/ItemList/layout")];case 10:return(a=u.sent())?[4,this.findChild(a,this.dragIndex)]:(this.finish(),[2]);case 11:return(c=u.sent())?[4,this.findComponentInChildren(c,d.default)]:(this.lineStart=null,this.lineEnd=null,this.finish(),[2]);case 12:return(l=u.sent())&&0!==t.length?(this.lineStart=l.node,this.lineEnd=t[0],this.frame.lightNode(c),this.dragItem=c.getComponent(f.default),this.frame.listenTouchStart(this.onTouchRect.bind(this)),[2]):(this.finish(),[2])}})})},e.prototype.move=function(){return l(this,void 0,void 0,function(){var t,e,o,n,r,i,a,c,l,s,f,y,m;return u(this,function(u){switch(u.label){case 0:if(this.isFinish)return[2];this.dragItem=null,this.frame.cleanup(),this.frame.isMask=!0,t=[],e=0,u.label=1;case 1:if(!(e<this.towerSize.x))return[3,6];o=0,u.label=2;case 2:return o<this.towerSize.y?[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/Board/Board/Foundation/"+(this.towerPos.x+e)+"_"+(this.towerPos.y+o))]:[3,5];case 3:(n=u.sent())&&(t.push(n),this.frame.lightNode(n)),u.label=4;case 4:return o++,[3,2];case 5:return e++,[3,1];case 6:return 0===t.length?(this.finish(),[2]):this.lightTower?[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/BattleStage")]:[3,9];case 7:return(r=u.sent())?[4,this.findChildByName(r,this.lightTower)]:[3,9];case 8:(i=u.sent())&&(this.frame.lightNode(i.getChildByName("Spine")),this.frame.lightNode(i.getChildByName("Level"))),u.label=9;case 9:return c=(a=this.frame).lightNode,[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/Tipnode")];case 10:return c.apply(a,[u.sent()]),[4,this.findNode("Canvas/GameFrame/GameControl/DragNode")];case 11:return(l=u.sent())?[4,this.findChild(l,0)]:(this.finish(),[2]);case 12:return s=u.sent(),[4,this.findNode("Canvas/GameFrame/DragBar/ItemList/layout")];case 13:return(f=u.sent())?[4,this.findChild(f,this.dragIndex)]:(this.finish(),[2]);case 14:return(y=u.sent())?[4,this.findComponentInChildren(y,d.default)]:(this.finish(),[2]);case 15:return(m=u.sent())&&0!==t.length?(this.lineStart=m.node,this.lineEnd=t[0],this.frame.lightNode(s),h.default.getFrame(p.default).gameStage.forcePutPos=this.towerPos,this.frame.listenTouchEnd(this.onTouchEnd.bind(this)),this.frame.isEnableDrag=!0,[2]):(this.finish(),[2])}})})},e.prototype.onTouchRect=function(){this.isFinish||this.move()},e.prototype.onTouchEnd=function(){this.isFinish||this.touch()},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),h.default.getFrame(p.default).gameStage.forcePutPos=null},e.prototype.update=function(){this.isFinish||(this.dragItem&&(this.frame.cleanupTouchRect(),this.frame.addTouchRect(this.dragItem.getBoxToWorld(),null)),this.lineStart&&this.lineEnd&&this.frame.line(this.lineStart.convertToWorldSpaceAR(cc.Vec3.ZERO),this.lineEnd.convertToWorldSpaceAR(cc.Vec3.ZERO)))},e}(n("GuideStep").default);i.default=b,cc._RF.pop(),cc._RF.pop()},{}],GuideStep:[function(t,e,o){"use strict";cc._RF.push(e,"51672HLbzlHp48nFm3/XHA0","GuideStep");var n=e,r=o;cc._RF.push(n,"fd8f9zJEgJBWpM++o69HTXh","GuideStep");var i=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},a=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0}),r.COMMONT_DELAY_TIME=void 0,r.COMMONT_DELAY_TIME=300;var c=function(){function t(){this.funcFinish=null,this.passAllWait=!1,this.isFinish=!1,this.frame=null,this.guideData=null,this.hideList=[]}return Object.defineProperty(t.prototype,"round",{get:function(){return-1},enumerable:!1,configurable:!0}),t.prototype.findComponentInChildren=function(t,e){return i(this,void 0,void 0,function(){var o,n;return a(this,function(r){switch(r.label){case 0:o=0,r.label=1;case 1:return o<100?(n=t.getComponentInChildren(e))?[3,3]:this.passAllWait?[2,null]:[4,this.delay(100)]:[3,5];case 2:return r.sent(),[3,4];case 3:return[2,n];case 4:return o++,[3,1];case 5:return[2,null]}})})},t.prototype.findChild=function(t,e){return void 0===e&&(e=0),i(this,void 0,void 0,function(){var o,n;return a(this,function(r){switch(r.label){case 0:o=0,r.label=1;case 1:return o<100?(n=t.children[e])?[3,3]:this.passAllWait?[2,null]:[4,this.delay(100)]:[3,5];case 2:return r.sent(),[3,4];case 3:return[2,n];case 4:return o++,[3,1];case 5:return[2,null]}})})},t.prototype.findChildByName=function(t,e){return i(this,void 0,void 0,function(){var o,n;return a(this,function(r){switch(r.label){case 0:o=0,r.label=1;case 1:return o<100?(n=t.getChildByName(e))?[3,3]:this.passAllWait?[2,null]:[4,this.delay(100)]:[3,5];case 2:return r.sent(),[3,4];case 3:return[2,n];case 4:return o++,[3,1];case 5:return[2,null]}})})},t.prototype.findAllChildByName=function(t,e){return i(this,void 0,void 0,function(){var o,n,r;return a(this,function(i){switch(i.label){case 0:o=[],n=0,i.label=1;case 1:if(!(n<100))return[3,4];for(r=0;r<t.childrenCount;r++)t.children[r].name===e&&o.push(t.children[r]);return o.length>0?[2,o]:this.passAllWait?[2,[]]:[4,this.delay(100)];case 2:return i.sent(),[3,3];case 3:return n++,[3,1];case 4:return[2,[]]}})})},t.prototype.findNode=function(t){return i(this,void 0,void 0,function(){var e,o;return a(this,function(n){switch(n.label){case 0:e=0,n.label=1;case 1:return e<100?(o=cc.find(t))?[3,3]:this.passAllWait?[2,null]:[4,this.delay(100)]:[3,5];case 2:return n.sent(),[3,4];case 3:return[2,o];case 4:return e++,[3,1];case 5:return[2,null]}})})},t.prototype.delay=function(t){return void 0===t&&(t=1),i(this,void 0,void 0,function(){return a(this,function(){return[2,new Promise(function(e){cc.Canvas.instance.node.pauseSystemEvents(!0),setTimeout(function(){cc.Canvas.instance.node.resumeSystemEvents(!0),e(null)},t)})]})})},t.prototype.hideNode=function(t){t&&t.active&&(this.hideList.push(t),t.active=!1)},t.prototype.init=function(t,e){this.frame=t,this.funcFinish=e,this.isFinish=!1,this.passAllWait=!1},t.prototype.listenUpdate=function(){this.frame.onUpdate(this.update,this)},t.prototype.setFinishCallback=function(t){this.funcFinish=t},t.prototype.setGuideData=function(t){this.guideData=t},t.prototype.cleanup=function(){cc.isValid(this.frame)&&(this.frame.cleanpUpdate(),this.frame.cleanup())},t.prototype.finish=function(t,e){if(console.log("[GuideStep] finish() called"),void 0===t&&(t=null),void 0===e&&(e=!1),this.isFinish=!0,this.hideList.length>0)for(var o=0;o<this.hideList.length;o++)this.hideList[o].active=!0;this.funcFinish&&this.funcFinish(e,t)},t.prototype.update=function(){},t}();r.default=c,cc._RF.pop(),cc._RF.pop()},{}],Guide_Level_1:[function(t,e,o){"use strict";cc._RF.push(e,"26e049JSrBIo6ikPHymeLX0","Guide_Level_1");var n=t,r=e,i=o;cc._RF.push(r,"14335l64QdP6rJgvHoA1Ncm","Guide_Level_1");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},u=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var s=n("EventConfig"),p=n("GameDefine"),f=n("sdbStage"),d=n("GameFrame"),y=n("LoseFrame"),h=n("MainFrame"),m=n("DragItem"),b=n("EventHelper"),v=n("FrameHelper"),g=n("RunDataHelper"),_=n("StaticDBHelper"),w=n("GameData"),S=n("GuideGroup"),R=n("GuideMsg"),O=n("GuideStep"),P=n("GuideStepChooseCard"),F=n("GuideStepDragFoundation"),T=n("GuideStepDragTower"),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t,e,o,n,r,i,a,c,l,p,f,y=this;return u(this,function(u){switch(u.label){case 0:this.frame.isMask=!0,this.frame.showMsg(this.msg,R.GuideMsgPositionType.Bottom),this.frame.isSwallowTouches=!0,b.default.once(s.default.GuideClick,this.finish,this),t=v.default.getFrame(d.default),e=t.gameStage.pathData,o=new Set,n=0,u.label=1;case 1:if(!(n<e.length))return[3,6];r=1,u.label=2;case 2:return r<e[n].length?(i=e[n][r],[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/Board/Board/Ground/"+i.x+"_"+i.y)]):[3,5];case 3:(a=u.sent())&&o.add(a),(c=cc.find("Canvas/GameFrame/Stage/Box/GameBoard/Board/Board/Foundation/"+i.x+"_"+i.y))&&o.add(c),u.label=4;case 4:return r++,[3,2];case 5:return n++,[3,1];case 6:return o.forEach(function(t){y.frame.lightNode(t)}),[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/BattleStage")];case 7:return l=u.sent(),[4,this.findChildByName(l,"BaseTower")];case 8:return p=u.sent(),this.frame.lightNode(p.getChildByName("Spine")),[4,this.findNode("Canvas/GameFrame/Stage/Box/GameBoard/PathRenderer")];case 9:return f=u.sent(),this.frame.lightNode(f),[2]}})})},e}(O.default),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t,e,o,n,r=this;return u(this,function(){return this.frame.isMask=!0,t=['{"stage":1,"roundIndex":2,"level":2,"exp":11,"cards":{"10003":1},"boardData":"[[{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":2},{\\"cellType\\":2},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":5},{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":1}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":2},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":2},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1002,\\"id\\":110,\\"level\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":3,\\"uid\\":1000,\\"id\\":114,\\"level\\":1},{\\"cellType\\":0},{\\"cellType\\":2},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1001,\\"id\\":101,\\"level\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1002,\\"id\\":110,\\"level\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":6}],[{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":1}],[{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":5},{\\"cellType\\":1}]]","dragData":"[{\\"type\\":0,\\"buildingType\\":101,\\"buildingLevel\\":1,\\"video\\":false},{\\"type\\":0,\\"buildingType\\":110,\\"buildingLevel\\":1,\\"video\\":false},{\\"type\\":0,\\"buildingType\\":103,\\"buildingLevel\\":1,\\"video\\":false}]","selectTime":0,"hp":1800,"hpMax":0,"gameCoin":10,"remainGainFoundCount":3,"canLv2TowerRefresh":0,"probAdjust":0.133,"mustShowTowers":[],"shownLv3TowerUids":[],"refreshCount":2,"costEx":0,"coinEx":0,"isRevive":false,"refreshTimes":3,"selectAllTimes":1}','{"stage":1,"roundIndex":3,"level":4,"exp":73,"cards":{"10001":1,"10003":1,"10009":1},"boardData":"[[{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":2},{\\"cellType\\":2},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":5},{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":1}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1004,\\"id\\":103,\\"level\\":2},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":2},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1002,\\"id\\":110,\\"level\\":3},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":3,\\"uid\\":1003,\\"id\\":114,\\"level\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1005,\\"id\\":101,\\"level\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1001,\\"id\\":101,\\"level\\":2},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1002,\\"id\\":110,\\"level\\":3},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":6}],[{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":1}],[{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":5},{\\"cellType\\":1}]]","dragData":"[{\\"type\\":1,\\"foundationIndex\\":1,\\"video\\":false},{\\"type\\":0,\\"buildingType\\":110,\\"buildingLevel\\":2,\\"video\\":false},{\\"type\\":0,\\"buildingType\\":103,\\"buildingLevel\\":1,\\"video\\":false}]","selectTime":0,"hp":1800,"hpMax":0,"gameCoin":10,"remainGainFoundCount":3,"canLv2TowerRefresh":0,"probAdjust":0.133,"mustShowTowers":[],"shownLv3TowerUids":[],"refreshCount":3,"costEx":0,"coinEx":0,"isRevive":false,"refreshTimes":3,"selectAllTimes":1}','{"stage":1,"roundIndex":4,"level":6,"exp":71,"cards":{"1001":1,"1002":1,"10001":1,"10003":1,"10009":1},"boardData":"[[{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":2},{\\"cellType\\":2},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":5},{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":1}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1004,\\"id\\":103,\\"level\\":2},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":2},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1002,\\"id\\":110,\\"level\\":3},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":3,\\"uid\\":1006,\\"id\\":114,\\"level\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1005,\\"id\\":101,\\"level\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1001,\\"id\\":101,\\"level\\":2},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1002,\\"id\\":110,\\"level\\":3},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":6}],[{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1007,\\"id\\":110,\\"level\\":2},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":3,\\"uid\\":1007,\\"id\\":110,\\"level\\":2},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":5}],[{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":1}],[{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":0},{\\"cellType\\":0},{\\"cellType\\":5},{\\"cellType\\":0},{\\"cellType\\":1},{\\"cellType\\":5},{\\"cellType\\":1}]]","dragData":"[{\\"type\\":0,\\"buildingType\\":101,\\"buildingLevel\\":1,\\"video\\":false},{\\"type\\":1,\\"foundationIndex\\":1,\\"video\\":false},{\\"type\\":0,\\"buildingType\\":103,\\"buildingLevel\\":1,\\"video\\":false}]","selectTime":0,"hp":1675,"hpMax":0,"gameCoin":10,"remainGainFoundCount":3,"canLv2TowerRefresh":0,"probAdjust":0.133,"mustShowTowers":[],"shownLv3TowerUids":[],"refreshCount":4,"costEx":0,"coinEx":0,"isRevive":false,"refreshTimes":3,"selectAllTimes":1}'],e=g.DataHelper.getData(w.default),o=!1,e.isAnyData&&e.roundIndex>1?t[e.roundIndex-2]&&e.initByGuide(t[e.roundIndex-2]):(o=!0,e.cleanup()),n=_.default.getData(f.default,1),v.default.showFrame(d.default,n).then(function(){return l(r,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return t=v.default.getFrame(d.default),o&&t.gameStage.forceDragPanel([{type:m.DragItemType.Foundation,foundationIndex:0,video:!1},{type:m.DragItemType.Building,buildingType:p.TowerId.FIREBALL,buildingLevel:1,video:!1},{type:m.DragItemType.Building,buildingType:p.TowerId.ARROW,buildingLevel:1,video:!1}],!1),[4,v.default.hideFrame(h.default)];case 1:return e.sent(),[4,this.delay(500)];case 2:return e.sent(),this.finish(),[2]}})})}),[2]})})},e}(O.default),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u52c7\u58eb\uff0c\u9ed1\u6697\u602a\u7269\u5373\u5c06\u5230\u6765\uff01\u5f53<color=#b40a0a>\u9ed1\u591c\u964d\u4e34</c>\uff0c\u5b83\u4eec\u5c06\u6cbf\u7740\u8fd9\u6761<outline color=#915675 width = 2><color=#ffea00>\u8def\u7ebf</c></c>\u8fdb\u653b\u6211\u4eec\u3002\u6211\u4eec\u5fc5\u987b\u7acb\u523b\u91c7\u53d6\u884c\u52a8\uff01",e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(D),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(4,4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(1,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.TowerAdd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return"\u5feb\u62d6\u52a8<color=#7070FC>\u9632\u5fa1\u5854</c>\u5230\u8fd9\u91cc\uff0c\u5efa\u7acb\u8d77\u4e00\u9053\u9632\u7ebf\uff01"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msgPos",{get:function(){return R.GuideMsgPositionType.Top},enumerable:!1,configurable:!0}),e}(T.default),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(3,6)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(2,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.TowerAdd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return"\u7ee7\u7eed\u52a0\u5f3a\u9632\u7ebf\uff01\u5728\u8fd9\u91cc\u653e\u7f6e\u4e00\u4e2a\u65b0\u7684\u9632\u5fa1\u5854\uff01"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msgPos",{get:function(){return R.GuideMsgPositionType.Top},enumerable:!1,configurable:!0}),e}(T.default),j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u592a\u68d2\u4e86\uff01\u5835\u4f4f\u8fd9\u91cc\u540e\uff0c\u602a\u7269\u88ab\u8feb<outline color=#915675 width = 2><color=#ffea00>\u7ed5\u8fdc\u8def</c></c>\uff0c\u6211\u4eec\u80fd\u8d62\u5f97\u66f4\u591a\u9632\u5fa1\u65f6\u95f4\uff01",e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(D),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u5b8c\u7f8e\uff01\u602a\u7269\u53ea\u80fd<outline color=#915675 width = 2><color=#ffea00>\u7ed5\u66f4\u8fdc\u7684\u8def</c></c>\uff0c\u6211\u4eec\u7684\u9632\u7ebf\u8d8a\u6765\u8d8a\u5f3a\u5927\u4e86\uff01",e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(D),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return this.frame.isMask=!0,[4,this.findNode("Canvas/GameFrame/DragBar/DragBtns/BtnRefresh")];case 1:return t=e.sent(),this.frame.lightNode(t),this.frame.addTouchRectByNode(t,this.onClick.bind(this)),this.frame.showMsg("\u70b9\u51fb<outline color=#0 width = 2><color=#FFFFFF>\u5237\u65b0</c></c>\uff0c\u770b\u770b\u6709\u4ec0\u4e48\u65b0\u7684\u9632\u5fa1\u5854\u53ef\u4ee5\u4f7f\u7528\uff01",R.GuideMsgPositionType.Bottom),this.frame.btn(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),[2]}})})},e.prototype.onClick=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.delay(100)];case 1:return t.sent(),v.default.getFrame(d.default).gameStage.forceDragPanel([{type:m.DragItemType.Building,buildingType:p.TowerId.FIREBALL,buildingLevel:2,video:!1},{type:m.DragItemType.Building,buildingType:p.TowerId.FAN,buildingLevel:1,video:!1},{type:m.DragItemType.Building,buildingType:p.TowerId.ARROW,buildingLevel:1,video:!1}]),this.finish(),[2]}})})},e}(O.default),N=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return this.frame.isMask=!0,[4,this.findNode("Canvas/GameFrame/DragBar/DragBtns/BtnRefresh")];case 1:return t=e.sent(),this.frame.lightNode(t),this.frame.addTouchRectByNode(t,this.onClick.bind(this)),this.frame.btn(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),[2]}})})},e.prototype.onClick=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this.delay(100)];case 1:return t.sent(),v.default.getFrame(d.default).gameStage.forceDragPanel([{type:m.DragItemType.Foundation,foundationIndex:1,video:!1},{type:m.DragItemType.Building,buildingType:p.TowerId.FIREBALL,buildingLevel:1,video:!1},{type:m.DragItemType.Building,buildingType:p.TowerId.ARROW,buildingLevel:1,video:!1}]),[4,this.delay(100)];case 2:return t.sent(),this.finish(),[2]}})})}}(O.default),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(3,6)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(2,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.TowerCompound},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightTower",{get:function(){return"FireBallTower"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return"\u8bf7\u770b\uff0c\u628a\u76f8\u540c\u7684\u9632\u5fa1\u5854<color=#247A1A>\u5408\u6210</c>\uff0c\u53ef\u4ee5\u83b7\u5f97\u66f4\u5f3a\u5927\u7684\u706b\u529b\uff01"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msgPos",{get:function(){return R.GuideMsgPositionType.Center},enumerable:!1,configurable:!0}),e}(T.default)),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(4,4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(1,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.TowerCompound},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightTower",{get:function(){return"ArrowTower"},enumerable:!1,configurable:!0}),e}(T.default),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(2,6)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(1,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.TowerAdd},enumerable:!1,configurable:!0}),e}(T.default),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(4,2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(1,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.TowerAdd},enumerable:!1,configurable:!0}),e}(T.default),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.onRoundStart=function(){this.isFinish||this.finish()},e.prototype.start=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return b.default.on(s.default.RoundStart,this.onRoundStart,this),this.frame.isMask=!0,[4,this.findNode("Canvas/GameFrame/DragBar/DragBtns/BtnStart")];case 1:return t=e.sent(),this.frame.lightNode(t),this.frame.addTouchRectByNode(t,this.finish.bind(this)),this.msg&&this.frame.showMsg(this.msg,R.GuideMsgPositionType.Bottom),this.frame.btn(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),[2]}})})},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),b.default.off(s.default.RoundStart,this.onRoundStart,this)},e}(O.default),G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u7b2c\u4e00\u4e2a\u6697\u591c\u5373\u5c06\u964d\u4e34\uff0c\u70b9\u51fb<outline color=#0 width = 2><color=#FFFFFF>\u5f00\u6218</c></c>\uff0c\u8ba9\u6211\u4eec\u7528\u70c8\u7130\u4e0e\u7bad\u77e2\u9707\u6151\u8fd9\u4e9b\u9ed1\u6697\u5165\u4fb5\u8005\uff01",e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(H),U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u654c\u4eba\u7684\u653b\u52bf\u52a0\u5f3a\u4e86\uff01\u70b9\u51fb<outline color=#0 width = 2><color=#FFFFFF>\u5f00\u6218</c></c>\uff0c\u8ba9\u6211\u4eec\u7528\u66f4\u5f3a\u5927\u7684\u9632\u7ebf\u8fce\u63a5\u7b2c\u4e8c\u4e2a\u6697\u591c\uff01",e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),e}(H),V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u7b2c\u4e09\u4e2a\u6697\u591c\u5373\u5c06\u6765\u4e34\uff0c\u654c\u4eba\u53d8\u5f97\u66f4\u52a0\u72e1\u733e\uff01\u70b9\u51fb<outline color=#0 width = 2><color=#FFFFFF>\u5f00\u6218</c></c>\uff0c\u8ba9\u6211\u4eec\u7ee7\u7eed\u5b88\u62a4\u8fd9\u7247\u571f\u5730\uff01",e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(H),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(3,6)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(2,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.TowerCompound},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightTower",{get:function(){return"FireBallTower"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return"\u53c8\u6709\u66f4\u591a\u7684\u9632\u5fa1\u5854\u53ef\u4ee5\u5408\u6210\u4e86"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msgPos",{get:function(){return R.GuideMsgPositionType.Top},enumerable:!1,configurable:!0}),e}(T.default),z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(2,6)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(1,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.TowerCompound},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightTower",{get:function(){return"FanTower"},enumerable:!1,configurable:!0}),e}(T.default),K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cardIndex",{get:function(){return 10003},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exCards",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return"\u83b7\u5f97<color=#b86504>\u65b0\u6280\u80fd</c>\uff01\u770b\uff0c\u5b83\u4e0d\u4ec5\u52a0\u5f3a\u4e86\u706b\u70ae\uff0c\u8fd8\u70b9\u4eae\u4e86\u4e00\u9897<outline color=#79570d width = 2><color=#fdf138>\u661f\u661f</c></c>\u2014\u2014\u8fd9\u610f\u5473\u7740\u89e3\u9501\u4e86\u66f4\u5f3a\u5927\u6280\u80fd\u7684\u524d\u7f6e\u6761\u4ef6\uff01"},enumerable:!1,configurable:!0}),e}(P.default),J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cardIndex",{get:function(){return 10001},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exCards",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return"\u83b7\u5f97\u65b0\u6280\u80fd\u7684\u540c\u65f6\u70b9\u4eae\u4e86\u4e00\u9897<outline color=#79570d width = 2><color=#fdf138>\u661f\u661f</c></c>\uff01\u8fd9\u610f\u5473\u7740<outline color=#79570d width = 2><color=#fdf138>\u9ad8\u7ea7\u6280\u80fd</c></c>\u5df2\u7ecf\u89e3\u9501\uff0c\u672a\u6765\u9009\u62e9\u6280\u80fd\u65f6\u5c06\u6709\u673a\u4f1a\u83b7\u5f97\u5b83\uff01"},enumerable:!1,configurable:!0}),e}(P.default),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cardIndex",{get:function(){return 10009},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exCards",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return"\u83b7\u5f97<outline color=#79570d width = 2><color=#fdf138>\u9ad8\u7ea7\u6280\u80fd</c></c>\uff01\u9009\u62e9\u5b83\u6765\u5f3a\u5316\u6211\u4eec\u7684\u9632\u5fa1\u9635\u7ebf\uff01"},enumerable:!1,configurable:!0}),e}(P.default),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.onRoundPass=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this.isFinish?[2]:(this.frame.isSwallowTouches=!0,this.frame.isMask=!0,this.frame.showMsg(this.msg,R.GuideMsgPositionType.Bottom),b.default.once(s.default.GuideClick,this.finish,this),g.DataHelper.getData(w.default).setCanLv2TowerRefresh(!1),[4,this.findNode("Canvas/GameFrame/DragBar/DragBtns/btnRefresh2")]);case 1:return t.sent().getComponent(cc.Button).interactable=!1,[2]}})})},e.prototype.start=function(){return l(this,void 0,void 0,function(){return u(this,function(){return v.default.getFrame(d.default).gameStage.roundIndex>this.round?(this.finish(),[2]):(this.frame.isSwallowTouches=!1,b.default.once(s.default.RoundPass,this.onRoundPass,this),v.default.getFrame(d.default).forceReduceCoin(this.forceReduceIconCount),[2])})})},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),b.default.off(s.default.RoundPass,this.onRoundPass,this)},e}(O.default),q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u7b2c\u4e00\u4e2a\u591c\u665a\u6211\u4eec\u5b88\u4f4f\u4e86\uff01\u4f46\u8fd9\u4ec5\u4ec5\u662f\u5f00\u59cb\uff0c\u66f4\u5927\u7684\u6311\u6218\u8fd8\u5728\u7b49\u5f85\u7740\u6211\u4eec\u3002",e.forceReduceIconCount=90,e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(Z),X=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u9ece\u660e\u518d\u6b21\u5230\u6765\uff01\u4f11\u6574\u4e00\u4e0b\u5427\uff0c\u591c\u5e55\u5f88\u5feb\u53c8\u4f1a\u964d\u4e34\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u4e0b\u4e00\u573a\u6218\u6597\u505a\u597d\u51c6\u5907\u3002",e.forceReduceIconCount=90,e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 2},enumerable:!1,configurable:!0}),e}(Z),Q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u9ece\u660e\u7ec8\u4e8e\u5230\u6765\uff01\u867d\u7136\u6218\u6597\u8270\u96be\uff0c\u4f46\u4f60\u7684\u8868\u73b0\u4ee4\u4eba\u60ca\u53f9\uff01\u6211\u76f8\u4fe1\uff0c\u4f60\u5df2\u7ecf\u51c6\u5907\u597d\u72ec\u81ea\u6307\u6325\u8fd9\u573a\u6218\u6597\u4e86\uff01",e.forceReduceIconCount=10,e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(Z),$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="\u6211\u5c31\u77e5\u9053\u6211\u80fd\u505a\u5230\uff01\u4f60\u5df2\u7ecf\u5b8c\u5168\u638c\u63e1\u4e86\u5b88\u62a4\u4e4b\u9053\u3002\u9ece\u660e\u5df2\u81f3\uff0c\u4f46\u6211\u4eec\u7684\u4f7f\u547d\u6c38\u4e0d\u505c\u6b47\u3002\u7ee7\u7eed\u5b88\u62a4\u8fd9\u7247\u571f\u5730\u5427\uff0c\u52c7\u58eb\uff01",e.forceReduceIconCount=0,e}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(Z),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.frame.isSwallowTouches=!1,b.default.on(s.default.LevelPass,this.finish,this),[2]})})},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),b.default.off(s.default.LevelPass,this.finish,this)},e}(O.default),et=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.frame.isSwallowTouches=!1,[2]})})}}(O.default),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.initStep=function(){this.addStep(new k),this.addStep(new C),this.addStep(new L),this.addStep(new j),this.addStep(new B),this.addStep(new x),this.addStep(new G),this.addStep(new K),this.addStep(new q),this.addStep(new N),this.addStep(new A),this.addStep(new M),this.addStep(new I),this.addStep(new W),this.addStep(new z),this.addStep(new E),this.addStep(new U),this.addStep(new J),this.addStep(new Y),this.addStep(new X),this.addStep(new ot),this.addStep(new nt),this.addStep(new V),this.addStep(new Q),this.addStep(new $),this.addStep(new tt),b.default.on(s.default.FrameHide,this.onFrameHide,this)},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),v.default.getFrame(d.default).gameStage.forcePutPos=null,b.default.off(s.default.FrameHide,this.onFrameHide,this)},e.prototype.onFrameHide=function(t){t.frameClass===y.default&&(g.DataHelper.getData(w.default).cleanup(),this.forceReset())},e}(S.default));i.default=et;var ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(5,2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(2,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"foundationPos",{get:function(){return cc.v2(5,2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"foundationSize",{get:function(){return cc.v2(2,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.FoundationAdd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return"\u8fd9\u91cc\u9700\u8981\u66f4\u591a\u9632\u5fa1\u7a7a\u95f4\uff01\u653e\u7f6e<color=#915675>\u5730\u57fa</c>\u6765\u6269\u5c55\u6211\u4eec\u7684\u9632\u5fa1\u533a\u57df\uff01"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msgPos",{get:function(){return R.GuideMsgPositionType.Top},enumerable:!1,configurable:!0}),e}(F.default),nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"round",{get:function(){return 3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerPos",{get:function(){return cc.v2(5,2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"towerSize",{get:function(){return cc.v2(2,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragIndex",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finishEvent",{get:function(){return s.default.TowerAdd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msg",{get:function(){return"\u5730\u57fa\u653e\u7f6e\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u8fd9\u91cc\u653e\u7f6e<color=#7070FC>\u9632\u5fa1\u5854</c>\uff0c\u52a0\u5f3a\u6211\u4eec\u7684\u9632\u7ebf\uff01"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msgPos",{get:function(){return R.GuideMsgPositionType.Top},enumerable:!1,configurable:!0}),e}(T.default);cc._RF.pop(),cc._RF.pop()},{}],Guide_Level_2:[function(t,e,o){"use strict";cc._RF.push(e,"89f63doFAFCKKSfi0pU7qk3","Guide_Level_2");var n=t,r=e,i=o;cc._RF.push(r,"71dd9Zx9bVET60wF2RIqjpE","Guide_Level_2");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},u=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var s=n("EventConfig"),p=n("GameDefine"),f=n("sdbStage"),d=n("sdbTowerLevel"),y=n("BattleFrame"),h=n("GameFrame"),m=n("TowerFrame"),b=n("TowerUpFrame"),v=n("EventHelper"),g=n("FrameHelper"),_=n("RunDataHelper"),w=n("StaticDBHelper"),S=n("BagData"),R=n("GameData"),O=n("StageData"),P=n("TowerData"),F=n("GuideGroup"),T=n("GuideMsg"),D=n("GuideStep"),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(){return g.default.getFrame(y.default)&&_.DataHelper.getData(O.default).unlock>1?(this.finish(),[2]):(_.DataHelper.getData(R.default).isAnyData&&!g.default.getFrame(h.default)&&(t=w.default.getData(f.default,_.DataHelper.getData(R.default).stage),g.default.showFrame(h.default,t)),v.default.on(s.default.FrameShow,this.onFrameShow,this),this.frame.isSwallowTouches=!1,[2])})})},e.prototype.onFrameShow=function(t){t.frameClass==y.default&&_.DataHelper.getData(O.default).unlock>1&&this.finish()},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),v.default.off(s.default.FrameShow,this.onFrameShow,this),_.DataHelper.getData(R.default).cleanup()},e}(D.default),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t,e,o,n,r;return u(this,function(i){switch(i.label){case 0:return t=_.DataHelper.getData(S.default).getItemCount(p.default.ItemCoinId),e=_.DataHelper.getData(P.default).getTowerLevel(p.TowerId.ARROW),o=_.DataHelper.getData(S.default).getItemCount(p.TowerId.ARROW),n=w.default.filterData(d.default,{towerId:p.TowerId.ARROW,level:1})[0],e>1||o<n.card||t<n.coin?(this.finish(null,!0),[2]):(this.frame.isMask=!0,[4,this.findNode("Canvas/MainFrame/Bottom/Panel/btnLayout/card")]);case 1:return r=i.sent(),this.frame.lightNode(r),this.frame.addTouchRectByNode(r,null),this.frame.btn(r.convertToWorldSpaceAR(cc.Vec2.ZERO)),this.frame.showMsg("\u606d\u559c\u60a8\u5b8c\u6210\u4e86\u7b2c\u4e00\u6b21\u6218\u6597\uff0c\u4f7f\u7528\u83b7\u5f97\u7684\u788e\u7247\u5347\u7ea7\u690d\u7269\u5427\uff01",T.GuideMsgPositionType.Bottom),v.default.on(s.default.FrameShow,this.onFrameShow,this),[2]}})})},e.prototype.onFrameShow=function(t){t.frameClass==m.default&&this.finish()},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),v.default.off(s.default.FrameShow,this.onFrameShow,this)},e}(D.default),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t,e;return u(this,function(o){switch(o.label){case 0:return this.frame.isMask=!0,[4,this.findNode("Canvas/TowerFrame/TowerList/mask/layout")];case 1:return t=o.sent(),[4,this.findChild(t,0)];case 2:return e=o.sent(),this.frame.lightNode(e),this.frame.btn(e.convertToWorldSpaceAR(cc.Vec2.ZERO)),this.frame.addTouchRectByNode(e,null),this.frame.showMsg("\u690d\u7269\u5df2\u7ecf\u83b7\u5f97\u4e86\u8db3\u591f\u7684\u788e\u7247\uff0c\u9009\u62e9\u690d\u7269\u5f00\u59cb\u5347\u7ea7\u3002",T.GuideMsgPositionType.Bottom),v.default.on(s.default.FrameShow,this.onFrameShow,this),[2]}})})},e.prototype.onFrameShow=function(t){t.frameClass==b.default&&this.finish()},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),v.default.off(s.default.FrameShow,this.onFrameShow,this)},e}(D.default),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return this.frame.isMask=!0,[4,this.findNode("Canvas/TowerUpFrame")];case 1:return t=e.sent(),this.frame.lightNode(t),this.frame.showMsg("\u5728\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u690d\u7269\u7684\u8be6\u7ec6\u5c5e\u6027\uff0c\u4ee5\u53ca\u5347\u7ea7\u540e\u89e3\u9501\u7684\u65b0\u5361\u724c\u3002",T.GuideMsgPositionType.Bottom),v.default.once(s.default.GuideClick,this.finish,this),[2]}})})},e.prototype.cleanup=function(){t.prototype.cleanup.call(this)},e}(D.default),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return this.frame.isMask=!0,[4,this.findNode("Canvas/TowerUpFrame/Content/node/BtnLevelUp")];case 1:return t=e.sent(),this.frame.lightNode(t),this.frame.addTouchRectByNode(t,null),this.frame.btn(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),this.frame.showMsg("\u91d1\u5e01\u5145\u8db3\uff01\u5347\u7ea7\u690d\u7269\u6765\u5e2e\u52a9\u6211\u4eec\u66f4\u597d\u7684\u5b8c\u6210\u4e0b\u6b21\u6218\u6597\u5427\uff01",T.GuideMsgPositionType.Center),v.default.on(s.default.TowerLvUp,this.finish,this),[2]}})})},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),v.default.off(s.default.TowerLvUp,this.finish,this),g.default.hideFrame(b.default)},e}(D.default),x=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return this.frame.isMask=!0,[4,this.findNode("Canvas/TowerUpFrame/Content/node/close")];case 1:return t=e.sent(),this.frame.lightNode(t),this.frame.addTouchRectByNode(t,null),this.frame.btn(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),v.default.on(s.default.FrameHide,this.onFrameHide,this),[2]}})})},e.prototype.onFrameHide=function(t){t.frameClass==b.default&&this.finish()},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),v.default.off(s.default.FrameHide,this.onFrameHide,this)}}(D.default),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return this.frame.isMask=!0,[4,this.findNode("Canvas/MainFrame/Bottom/Panel/btnLayout/battle")];case 1:return t=e.sent(),this.frame.lightNode(t),this.frame.addTouchRectByNode(t,null),this.frame.btn(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),this.frame.showMsg("\u5feb\u53bb\u8bd5\u8bd5\u690d\u7269\u5347\u7ea7\u540e\u7684\u5b9e\u529b\u5427\uff01",T.GuideMsgPositionType.Bottom),v.default.on(s.default.FrameShow,this.onFrameShow,this),[2]}})})},e.prototype.onFrameShow=function(t){t.frameClass==y.default&&this.finish()},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),v.default.off(s.default.FrameShow,this.onFrameShow,this)},e}(D.default)),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return this.frame.isMask=!0,[4,this.findNode("Canvas/BattleFrame/bottom/btnLayout/startBtn")];case 1:return t=e.sent(),this.frame.lightNode(t),this.frame.addTouchRectByNode(t,null),this.frame.btn(t.convertToWorldSpaceAR(cc.Vec2.ZERO)),v.default.on(s.default.FrameShow,this.onFrameShow,this),this.frame.isSwallowTouches=!1,[2]}})})},e.prototype.onFrameShow=function(t){t.frameClass==h.default&&this.finish()},e}(D.default),N=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}c(e,t),e.prototype.start=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.frame.isSwallowTouches=!1,[2]})})}}(D.default),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.initStep=function(){this.addStep(new k),this.addStep(new C),this.addStep(new L),this.addStep(new B),this.addStep(new j),this.addStep(new x),this.addStep(new I)},e.prototype.cleanup=function(){},e}(F.default));i.default=N,cc._RF.pop(),cc._RF.pop()},{}],HeroFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b71d7irbxRJTJycltom5HDE","HeroFrame");var r=t,i=e,a=o;cc._RF.push(i,"b71d7irbxRJTJycltom5HDE","HeroFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("MateralsLoader"),d=r("ScrollList"),y=r("EventConfig"),h=r("GameDefine"),m=r("sdbCard"),b=r("sdbTowerLevel"),v=r("EventHelper"),g=r("FrameHelper"),_=r("LangHelper"),w=r("RunDataHelper"),S=r("SoundHelper"),R=r("StaticDBHelper"),O=r("BagData"),P=r("HeroStoryData"),F=r("TowerData"),T=r("TipsFrame"),D=r("ItemInfoFrame"),k=r("TowerAtt"),C=r("HeroSkill"),L=r("HeroSkin"),B=cc._decorator,j=B.ccclass,x=B.menu,I=B.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heroAttList=[],e.upMaterialsLab=null,e.upCostLab=null,e.levelLab=null,e.heroSkillList=null,e.testBtn=null,e.upBtnLoader=null,e.upBtnLab=null,e.upEff=null,e.skillBtnIcon=null,e.skinBtnIcon=null,e.skinNode=null,e.heroSkinList=null,e.addList=[],e.goddessList=[],e.itemLockList=[],e.skillData=[],e.upCost=0,e.isMax=!1,e.upBtnOrgY=0,e.heroIdList=[],e.selectId=0,e.addData=[],e}return l(e,t),e.prototype.onClickSkill=function(){this.skillBtnIcon.active=!0,this.skinBtnIcon.active=!1,this.selectAnim(!0)},e.prototype.onClickSkin=function(){this.skillBtnIcon.active=!1,this.skinBtnIcon.active=!0,this.selectAnim(!1)},e.prototype.selectAnim=function(t){var e=t?0:-720,o=t?720:0;cc.tween(this.heroSkillList.node).to(.1,{x:e}).start(),cc.tween(this.skinNode).to(.1,{x:o}).start()},e.prototype.onBtnUp=function(){this.isMax||(w.DataHelper.getData(O.default).getItemCount(50005)<this.upCost?g.default.showFrame(T.default,7):(this.upEff.setAnimation(1,"animation",!1),S.default.playUiSfx("OptionPopup"),g.default.showFrame(T.default,"\u5347\u7ea7\u6210\u529f"),w.DataHelper.getData(O.default).addItemCount(50005,-this.upCost),w.DataHelper.getData(F.default).levelup(114),this.refreshAttByLv(),this.refreshSkill(),v.default.emit(y.default.refreshMainRed,"hero")))},e.prototype.onClickTest=function(){w.DataHelper.getData(O.default).addItemCount(50005,100),this.refreshAttByLv()},e.prototype.onHeroHeadClick=function(t){this.selectId=t.detail,this.refGoddessList(this.selectId);for(var e=0;e<this.heroSkinList.nodeList.length;e++)this.heroSkinList.nodeList[e].getComponent(L.default).setSelect(this.selectId);this.refHeroSkinAddList()},e.prototype.onClickUpBattle=function(){w.DataHelper.getData(P.default).setOnBattleBaseTower(this.selectId),this.heroSkinList.createItemsByLength(this.heroIdList.length)},e.prototype.onClickItem=function(t,e){g.default.showFrame(D.default,parseInt(e))},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.refreshSkill(),[2,!0]})})},e.prototype.refGoddessList=function(t){this.selectId=t,this.goddessList.forEach(function(t){t.active=!1});var e=t-h.TowerId.BASE;e>=0&&e<this.goddessList.length?this.goddessList[e].active=!0:console.log("goddessList Error"+e)},e.prototype.refHeroSkinAddList=function(){var t=w.DataHelper.getData(P.default).baseTowerGetRewardId;this.addList[0].active=t>=17e3,this.addList[1].active=t>=17001,this.addList[2].active=t>=17002,this.itemLockList[0].active=t<17e3,this.itemLockList[1].active=t<17001,this.itemLockList[2].active=t<17002},e.prototype.refreshAttByLv=function(){var t=w.DataHelper.getData(F.default).getTowerLevel(114);this.isMax=t>=w.DataHelper.getData(F.default).MaxLv;var e=R.default.filterData(b.default,{towerId:114,level:t})[0],o=this.isMax?null:R.default.filterData(b.default,{towerId:114,level:t+1})[0];this.heroAttList[0].setAtt(e.hp,this.isMax?0:o.hp),this.heroAttList[1].setAtt(e.atk,this.isMax?0:o.atk),this.heroAttList[2].setAtt(e.as/1e3,this.isMax?0:o.as/1e3,2),this.heroAttList[3].setAtt(e.ad,this.isMax?0:o.ad),this.upMaterialsLab.string=w.DataHelper.getData(O.default).getItemCount(50005)+"/"+e.card,this.upCost=e.card,this.levelLab.string=_.default.formatStr("ui.32",{lv:t});var n=!this.isMax&&w.DataHelper.getData(O.default).getItemCount(50005)>=e.card;this.upBtnLoader.select(n?0:1),this.upBtnLab.string=this.isMax?_.default.getStr("btn.12"):_.default.getStr("btn.9")},e.prototype.refreshSkill=function(){this.skillData=[];for(var t=R.default.filterData(m.default,{towerId:114}),e=function(e){t[e].unlock>1&&(o.skillData.find(function(o){return o.unlock===t[e].unlock})||o.skillData.push(t[e]))},o=this,n=0;n<t.length;n++)e(n);this.skillData.sort(function(t,e){return t.unlock-e.unlock}),this.heroSkillList.createItemsByLength(this.skillData.length)},e.prototype.onSkillItemCreate=function(t,e){t.getComponent(C.default).setSkill(this.skillData[e])},e.prototype.onSkinItemCrate=function(t,e){t.getComponent(L.default).init(this.heroIdList[e])},e.prototype.hide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return t.prototype.hide.call(this),[2]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:return e.sent(),this.upBtnOrgY=this.upBtnLoader.node.y,this.heroSkillList.onItemCreate(this.onSkillItemCreate.bind(this)),this.heroSkinList.onItemCreate(this.onSkinItemCrate.bind(this)),this.node.on("onSelectHero",this.onHeroHeadClick,this),[2]}})})},e.prototype.start=function(){},e.frameInfo={name:"HeroFrame",type:g.FrameType.Full,bundleName:"Root",prefabName:"Prefab/Frame/HeroFrame/HeroFrame",zIndex:2},u([I({type:k.default,displayName:"\u82f1\u96c4\u5c5e\u6027\u5217\u8868"})],e.prototype,"heroAttList",void 0),u([I({type:cc.Label,displayName:"\u5347\u7ea7\u6750\u6599"})],e.prototype,"upMaterialsLab",void 0),u([I({type:cc.Label,displayName:"\u5347\u7ea7\u6750\u91d1\u5e01"})],e.prototype,"upCostLab",void 0),u([I({type:cc.Label,displayName:"\u7b49\u7ea7"})],e.prototype,"levelLab",void 0),u([I({type:d.default,displayName:"\u82f1\u96c4\u6280\u80fd\u5217\u8868"})],e.prototype,"heroSkillList",void 0),u([I({type:cc.Node,displayName:"\u6d4b\u8bd5\u6309\u94ae"})],e.prototype,"testBtn",void 0),u([I({type:f.default,displayName:"\u5347\u7ea7\u6309\u94ae\u6750\u8d28"})],e.prototype,"upBtnLoader",void 0),u([I({type:cc.Label,displayName:"\u5347\u7ea7\u6309\u94ae\u6587\u5b57"})],e.prototype,"upBtnLab",void 0),u([I({type:sp.Skeleton,displayName:"\u5347\u7ea7\u7279\u6548"})],e.prototype,"upEff",void 0),u([I({type:cc.Node,displayName:"\u6280\u80fd\u9009\u4e2d\u56fe\u6807"})],e.prototype,"skillBtnIcon",void 0),u([I({type:cc.Node,displayName:"\u76ae\u80a4\u9009\u4e2d\u56fe\u6807"})],e.prototype,"skinBtnIcon",void 0),u([I({type:cc.Node,displayName:"\u76ae\u80a4\u8282\u70b9"})],e.prototype,"skinNode",void 0),u([I({type:d.default,displayName:"\u76ae\u80a4\u5217\u8868"})],e.prototype,"heroSkinList",void 0),u([I({type:cc.Node,displayName:"\u52a0\u6210\u5217\u8868"})],e.prototype,"addList",void 0),u([I({type:cc.Node,displayName:"\u5973\u795e\u5217\u8868"})],e.prototype,"goddessList",void 0),u([I({type:cc.Node,displayName:"\u9053\u5177\u9501\u5217\u8868"})],e.prototype,"itemLockList",void 0),u([j,x("\u754c\u9762/HeroFrame \u82f1\u96c4\u754c\u9762")],e)}(g.FrameBase);a.default=N,cc._RF.pop(),cc._RF.pop()},{}],HeroRewardFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c28a8XfbT9K+q8QmZn/wGPG","HeroRewardFrame");var r=t,i=e,a=o;cc._RF.push(i,"c28a8XfbT9K+q8QmZn/wGPG","HeroRewardFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("MateralsLoader"),d=r("EventConfig"),y=r("sdbHeroStory"),h=r("sdbItem"),m=r("AssetBundleHelper"),b=r("EventHelper"),v=r("FrameHelper"),g=r("RunDataHelper"),_=r("SoundHelper"),w=r("StaticDBHelper"),S=r("HeroStoryData"),R=r("TowerData"),O=r("Tools"),P=r("TimeUtil"),F=r("TipsFrame"),T=r("GetItemFrame"),D=cc._decorator,k=D.ccclass,C=D.menu,L=D.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleLb=null,e.heroSp=null,e.rewardNodeList=[],e.taskNode=null,e.getRewardNode=null,e.descLb=null,e.timeLb=null,e.stageLb=null,e.infoLb=null,e.nameLb=null,e.itemLb=null,e.btnLb=null,e.materalsLoader=null,e.isTask=!1,e.timeOut=0,e.isBtnGet=!1,e.rewardList=[],e.taskData=null,e.curTime=100,e}return l(e,t),e.prototype.onClickBtn=function(){this.isBtnGet&&(O.default.addToBagByRewardList(this.rewardList),this.rewardList[0].count>0&&(v.default.showFrame(T.default,T.default.GetType.item,this.rewardList),g.DataHelper.getData(S.default).setBaseTowerGetRewardId(this.taskData.id)),g.DataHelper.getData(S.default).setBasetTowerTaskCompleteTime(0),g.DataHelper.getData(R.default).unlockTower(this.taskData.unlockId),b.default.emit(d.default.TaskStoryReward,this.taskData.id),v.default.showFrame(F.default,"\u5546\u5e97\u6709\u65b0\u7684\u9053\u5177\u66f4\u65b0\uff0c\u6ce8\u610f\u67e5\u770b\u54e6~"),this.hideFrame())},e.prototype.refReward=function(){this.rewardList=[],m.default.setSpriteFrame(this.heroSp,this.isTask?this.taskData.taskSpt:this.taskData.getSpt);for(var t=0;t<this.taskData.rewardList.length;t++)(o={id:0,count:0}).id=this.taskData.rewardList[t][0],o.count=this.curTime<=0?0:this.taskData.rewardList[t][1],this.rewardList.push(o);for(t=0;t<this.rewardNodeList.length;t++){var e=this.rewardList[t];if(e){this.rewardNodeList[t].active=!0;var o=w.default.getData(h.default,e.id),n=this.rewardNodeList[t].getChildByName("iocn").getComponent(cc.Sprite);m.default.setSpriteFrame(n,o.icon),this.rewardNodeList[t].getChildByName("count").getComponent(cc.Label).string=e.count.toString()}else this.rewardNodeList[t].active=!1}},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(){return(t=g.DataHelper.getData(S.default)).baseTowerTaskId?(this.isTask=0==t.basetTowerTaskCompleteTime,this.taskData=w.default.getData(y.default,t.baseTowerTaskId),this.timeOut=36e5*this.taskData.time,this.refReward(),this.taskNode.active=this.isTask,this.getRewardNode.active=!this.isTask,this.titleLb.string=this.taskData.title,this.descLb.string=this.taskData.desc,this.stageLb.string=this.taskData.stage.toString(),this.infoLb.string=this.taskData.info,this.nameLb.string=this.taskData.name,this.itemLb.string=this.taskData.unlocakHit,this.isBtnGet=t.baseTowerGetRewardId<this.taskData.id,this.btnLb.string=this.isBtnGet?"\u9886\u53d6":"\u5df2\u5b8c\u6210",this.materalsLoader.select(this.isBtnGet?0:1),[2,!0]):(this.hideFrame(),[2])})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return _.default.playUiSfx("OptionPopup"),[2]})})},e.prototype.update=function(){if(this.isTask&&!(this.curTime<=0)){var t=(this.timeOut-((new Date).getTime()-g.DataHelper.getData(S.default).baseTowerTaskTime))/1e3;this.curTime=t>0?t:0,this.curTime<=0&&this.refReward(),this.timeLb.string=P.default.convertSecondToString(this.curTime)}},e.frameInfo={name:"HeroRewardFrame",type:v.FrameType.Model,bundleName:"Root",prefabName:"Prefab/Frame/HeroFrame/HeroRewardFrame",zIndex:10},u([L({type:cc.Label,displayName:"\u6807\u9898"})],e.prototype,"titleLb",void 0),u([L({type:cc.Sprite,displayName:"\u7acb\u7ed8"})],e.prototype,"heroSp",void 0),u([L({type:cc.Node,displayName:"\u5956\u52b1\u8282\u70b9"})],e.prototype,"rewardNodeList",void 0),u([L({type:cc.Node,displayName:"\u4efb\u52a1\u8282\u70b9"})],e.prototype,"taskNode",void 0),u([L({type:cc.Node,displayName:"\u9886\u53d6\u8282\u70b9"})],e.prototype,"getRewardNode",void 0),u([L({type:cc.Label,displayName:"\u4efb\u52a1\u63cf\u8ff0"})],e.prototype,"descLb",void 0),u([L({type:cc.Label,displayName:"\u4efb\u52a1\u65f6\u95f4"})],e.prototype,"timeLb",void 0),u([L({type:cc.Label,displayName:"\u5f00\u59cb\u5173\u5361"})],e.prototype,"stageLb",void 0),u([L({type:cc.Label,displayName:"\u4fe1\u606f"})],e.prototype,"infoLb",void 0),u([L({type:cc.Label,displayName:"\u540d\u79f0"})],e.prototype,"nameLb",void 0),u([L({type:cc.Label,displayName:"\u9053\u5177\u63d0\u793a"})],e.prototype,"itemLb",void 0),u([L({type:cc.Label,displayName:"\u6309\u94ae\u540d\u79f0"})],e.prototype,"btnLb",void 0),u([L({type:f.default,displayName:"\u6309\u94ae\u6750\u8d28"})],e.prototype,"materalsLoader",void 0),u([k,C("\u754c\u9762/HeroRewardFrame \u82f1\u96c4\u4efb\u52a1\u754c\u9762")],e)}(v.FrameBase);a.default=B,cc._RF.pop(),cc._RF.pop()},{}],HeroSkill:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"04c83dQbYFP96tFLSlVVl4z","HeroSkill");var r=t,i=e,a=o;cc._RF.push(i,"04c83dQbYFP96tFLSlVVl4z","HeroSkill");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("FrameHelper"),p=r("RunDataHelper"),f=r("TowerData"),d=r("CardInfoFrame"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockNode=null,e.levelLabel=null,e.descLabel=null,e.skillData=null,e}return l(e,t),e.prototype.setSkill=function(t){this.skillData=t;var e=p.DataHelper.getData(f.default).getTowerLevel(114)<t.unlock,o=t.skillName;this.lockNode.active=e,this.levelLabel.string=t.unlock+"\u7ea7",this.descLabel.string=o},e.prototype.onClick=function(){s.default.showFrame(d.default,this.skillData.id,!1)},u([m({type:cc.Node,displayName:"\u4e0a\u9501\u8282\u70b9"})],e.prototype,"lockNode",void 0),u([m({type:cc.Label,displayName:"\u6280\u80fd\u7b49\u7ea7"})],e.prototype,"levelLabel",void 0),u([m({type:cc.Label,displayName:"\u6280\u80fd\u63cf\u8ff0"})],e.prototype,"descLabel",void 0),u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],HeroSkin:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"eeeea2fql5KIbpU03loWIEU","HeroSkin");var r=t,i=e,a=o;cc._RF.push(i,"eeeea2fql5KIbpU03loWIEU","HeroSkin");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("sdbHeroSkin"),p=r("AssetBundleHelper"),f=r("RunDataHelper"),d=r("StaticDBHelper"),y=r("HeroStoryData"),h=cc._decorator,m=h.ccclass,b=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headSprite=null,e.onBattleFlag=null,e.selectedFlag=null,e.nameLabel=null,e.hero=null,e}return l(e,t),e.prototype.init=function(t){var e=d.default.getData(s.default,t);this.hero=e,p.default.setSpriteFrame(this.headSprite,e.icon),this.nameLabel.string=e.name;var o=f.DataHelper.getData(y.default).onBattleBaseTower;this.onBattleFlag.active=o==e.id,this.selectedFlag.active=o==e.id},e.prototype.setSelect=function(t){this.selectedFlag.active=this.hero.id==t},e.prototype.onClick=function(){if(this.hero){var t=new cc.Event.EventCustom("onSelectHero",!0);t.setUserData(this.hero.id),this.node.dispatchEvent(t)}},u([b({type:cc.Sprite,displayName:"\u5934\u50cf"})],e.prototype,"headSprite",void 0),u([b({type:cc.Node,displayName:"\u4e0a\u9635\u6807\u8bc6"})],e.prototype,"onBattleFlag",void 0),u([b({type:cc.Node,displayName:"\u9009\u62e9\u6807\u8bc6"})],e.prototype,"selectedFlag",void 0),u([b({type:cc.Label,displayName:"\u540d\u5b57"})],e.prototype,"nameLabel",void 0),u([m],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],HeroStoryData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7587eSIJnZIeYqstzaBanLX","HeroStoryData");var r=t,i=e,a=o;cc._RF.push(i,"7587eSIJnZIeYqstzaBanLX","HeroStoryData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameDefine"),p=r("sdbHeroStory"),f=r("RunDataHelper"),d=r("StaticDBHelper"),y=r("StageData"),h=r("TowerData"),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultData=function(){return{onBattleBaseTower:s.TowerId.BASE,baseTowerTaskTime:0,basetTowerTaskCompleteTime:0,baseTowerTaskId:0,baseTowerGetRewardId:0}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"HeroStoryData"},enumerable:!1,configurable:!0}),e.prototype.onInit=function(){if(t.prototype.onInit.call(this),0==this.data.baseTowerTaskId||0==this.data.baseTowerGetRewardId){var e=f.DataHelper.getData(y.default).stage,o=d.default.getTable(p.default);for(var n in o)o[n].stage<=e&&(this.data.baseTowerTaskId=o[n].id,this.data.baseTowerGetRewardId=o[n].id,f.DataHelper.getData(h.default).unlockTower(o[n].unlockId))}},Object.defineProperty(e.prototype,"onBattleBaseTower",{get:function(){return null==this.data.onBattleBaseTower?s.TowerId.BASE:this.data.onBattleBaseTower},enumerable:!1,configurable:!0}),e.prototype.setOnBattleBaseTower=function(t){this.data.onBattleBaseTower=t},Object.defineProperty(e.prototype,"baseTowerTaskTime",{get:function(){return this.data.baseTowerTaskTime?this.data.baseTowerTaskTime:0},enumerable:!1,configurable:!0}),e.prototype.setBaseTowerTaskTime=function(t){this.data.baseTowerTaskTime=t},Object.defineProperty(e.prototype,"baseTowerTaskId",{get:function(){var t=d.default.getTable(p.default),e=Object.keys(t);if(this.data.baseTowerTaskId||(this.data.baseTowerTaskId=d.default.getTable(p.default)[e[0]].id,this.setBaseTowerTaskTime((new Date).getTime())),this.data.baseTowerTaskId==this.data.baseTowerGetRewardId){if(this.data.baseTowerTaskId==d.default.getTable(p.default)[e[e.length-1]].id)return null;this.data.baseTowerTaskId++,this.setBaseTowerTaskTime((new Date).getTime())}return this.data.baseTowerTaskId},enumerable:!1,configurable:!0}),e.prototype.setBaseTowerTaskId=function(t){this.data.baseTowerTaskId=t},Object.defineProperty(e.prototype,"baseTowerGetRewardId",{get:function(){return this.data.baseTowerGetRewardId?this.data.baseTowerGetRewardId:0},enumerable:!1,configurable:!0}),e.prototype.setBaseTowerGetRewardId=function(t){this.data.baseTowerGetRewardId=t},Object.defineProperty(e.prototype,"basetTowerTaskCompleteTime",{get:function(){return this.data.basetTowerTaskCompleteTime?this.data.basetTowerTaskCompleteTime:0},enumerable:!1,configurable:!0}),e.prototype.setBasetTowerTaskCompleteTime=function(t){this.data.basetTowerTaskCompleteTime=t},u([f.DirtyData],e.prototype,"setOnBattleBaseTower",null),u([f.DirtyData],e.prototype,"setBaseTowerTaskTime",null),u([f.DirtyData],e.prototype,"setBaseTowerTaskId",null),u([f.DirtyData],e.prototype,"setBaseTowerGetRewardId",null),u([f.DirtyData],e.prototype,"setBasetTowerTaskCompleteTime",null),e}(f.RunDataBase);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],Hide:[function(t,e,o){"use strict";cc._RF.push(e,"c13605w0ddDiYvWTbVC3N/f","Hide");var n=e,r=o;cc._RF.push(n,"ab039uKXzhGu5tlJCSs1Cb/","Hide"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.hide=function(t){window.tt&&window.wxapi.onHide(t)},t}();r.default=new i,cc._RF.pop(),cc._RF.pop()},{}],HpBar:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"9faabZjhFpN6p243gYoaVXj","HpBar");var r=e,i=o;cc._RF.push(r,"9faabZjhFpN6p243gYoaVXj","HpBar");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hpBar=null,e}return c(e,t),e.prototype.set=function(t,e){void 0===e&&(e=null),this.hpBar.progress=null!=e?t/e:t},e.prototype.start=function(){},l([p({type:cc.ProgressBar,displayName:"\u8840\u6761"})],e.prototype,"hpBar",void 0),l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],HpManager:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5f33d4Ee+JMHJALmEKq9ulZ","HpManager");var r=t,i=e,a=o;cc._RF.push(i,"5f33d4Ee+JMHJALmEKq9ulZ","HpManager");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Factory"),d=r("HpBar"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.prefabBoss=null,e.prefabSpacil=null,e.parent=null,e.list=[],e}var o;return l(e,t),o=e,e.prototype.createBoss=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return[2,this.create(this.prefabBoss,t,e)]})})},e.prototype.createSpacil=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return[2,this.create(this.prefabSpacil,t,e)]})})},e.prototype.create=function(t,e,o){return s(this,void 0,void 0,function(){var n,r,i;return p(this,function(a){switch(a.label){case 0:return[4,f.default.instance.create(t)];case 1:return(n=a.sent()).parent=this.parent,n.position=e.node.position.add(o),(r=n.getComponent(d.default)).set(1),i={entity:e,offset:o,hpBar:r},this.list.push(i),[2,i]}})})},e.prototype.refreshEntity=function(t){for(var e=0;e<this.list.length;e++){var o=this.list[e];o.entity===t&&o.hpBar.set(t.data.hp.value,t.data.hp.max)}},e.prototype.remove=function(t){for(var e=0;e<this.list.length;e++){var o=this.list[e];if(o.entity===t){this.list.splice(e,1),f.default.instance.remove(o.hpBar.node);break}}},e.prototype.cleanup=function(){this.list.forEach(function(t){f.default.instance.remove(t.hpBar.node)}),this.list=[]},e.prototype.logicUpdate=function(){for(var t=0;t<this.list.length;t++){var e=this.list[t];e.hpBar.node.position=e.entity.node.position.add(e.offset)}},e.prototype.onLoad=function(){o.instance=this},e.prototype.start=function(){},e.prototype.update=function(){},e.instance=null,u([m({type:cc.Prefab,displayName:"\u666e\u901a"})],e.prototype,"prefab",void 0),u([m({type:cc.Prefab,displayName:"Boss"})],e.prototype,"prefabBoss",void 0),u([m({type:cc.Prefab,displayName:"\u7cbe\u82f1\u602a"})],e.prototype,"prefabSpacil",void 0),u([m({type:cc.Node,displayName:"\u7236\u8282\u70b9"})],e.prototype,"parent",void 0),o=u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],IconBase:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d7f84PssZBFJbLfFawdTiYt","IconBase");var r=t,i=e,a=o;cc._RF.push(i,"d7f84PssZBFJbLfFawdTiYt","IconBase");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("AssetBundleHelper"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptIcon=null,e.sdb=null,e._isEnableTouch=!1,e.baseheight=0,e.baseWidth=0,e.baseScale=1,e}return l(e,t),Object.defineProperty(e.prototype,"isEnableTouch",{set:function(t){this._isEnableTouch!==t&&(this._isEnableTouch=t,this._isEnableTouch?this.sptIcon.node.on(cc.Node.EventType.TOUCH_END,this.onSptClick,this):this.sptIcon.node.off(cc.Node.EventType.TOUCH_END,this.onSptClick,this))},enumerable:!1,configurable:!0}),e.prototype.init=function(t){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return this.sdb=t,[4,f.default.setSpriteFrame(this.sptIcon,this.sdb.icon)];case 1:return e.sent(),[2]}})})},e.prototype.onSptClick=function(){},e.prototype.onLoad=function(){this.baseScale=this.sptIcon.node.scale,this.baseWidth=this.sptIcon.node.width,this.baseheight=this.sptIcon.node.height,this.isEnableTouch=!0},e.prototype.start=function(){},u([h({type:cc.Sprite,displayName:"\u56fe\u7247"})],e.prototype,"sptIcon",void 0),u([y],e)}(cc.Component);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],IconFly:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"67795jsDWZJIYySdraJh5OP","IconFly");var r=t,i=e,a=o;cc._RF.push(i,"67795jsDWZJIYySdraJh5OP","IconFly");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("TimeUtil"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeTarget=null,e.sf=null,e.scale=1,e.nodePool=new cc.NodePool,e.iconList=[],e}return l(e,t),e.prototype.setTarget=function(t){this.nodeTarget=t},e.prototype.setSpriteFrame=function(t){this.sf=t},e.prototype.cleanup=function(){for(var t=0;t<this.iconList.length;t++)cc.Tween.stopAllByTarget(this.iconList[t]),this.nodePool.put(this.iconList[t])},e.prototype.fly=function(t,e,o){return void 0===e&&(e=1),void 0===o&&(o=.1),s(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:n=[],r=0,i.label=1;case 1:return r<e?r>0?[4,f.default.delay(o)]:[3,3]:[3,5];case 2:i.sent(),i.label=3;case 3:n.push(this.straightLine(t)),i.label=4;case 4:return r++,[3,1];case 5:return[2,Promise.all(n)]}})})},e.prototype.boom=function(t,e){return void 0===e&&(e=1),s(this,void 0,void 0,function(){var o,n;return p(this,function(){for(o=[],n=0;n<e;n++)o.push(this.boomLine(t));return[2,Promise.all(o)]})})},e.prototype.straightLine=function(t){return s(this,void 0,void 0,function(){var e=this;return p(this,function(){return[2,new Promise(function(o){var n=e.getIcon(),r=e.node.convertToNodeSpaceAR(t);n.setPosition(r);var i=e.getTargetPos(),a=i.sub(r).len()/1500;cc.tween(n).to(a,{x:i.x,y:i.y}).call(function(){e.iconList.splice(e.iconList.indexOf(n),1),e.nodePool.put(n),o()}).start()})]})})},e.prototype.boomLine=function(t){return s(this,void 0,void 0,function(){var e=this;return p(this,function(){return[2,new Promise(function(o){var n=e.getIcon(),r=e.node.convertToNodeSpaceAR(t);n.setPosition(r);var i=2*Math.random()*Math.PI,a=cc.v3(cc.Vec2.UP.rotate(i).mul(100)),c=r.add(a),l=a.len()/1500,u=e.getTargetPos(),s=u.sub(r).len()/1500;cc.tween(n).to(l,{x:c.x,y:c.y}).to(s,{x:u.x,y:u.y}).call(function(){e.iconList.splice(e.iconList.indexOf(n),1),e.nodePool.put(n),o()}).start()})]})})},e.prototype.getTargetPos=function(){var t=this.nodeTarget.convertToWorldSpaceAR(cc.Vec3.ZERO);return this.node.convertToNodeSpaceAR(t)},e.prototype.getIcon=function(){var t=null;return this.nodePool.size()>0?t=this.nodePool.get():((t=new cc.Node).addComponent(cc.Sprite).spriteFrame=this.sf,t.scale=this.scale),t.parent=this.node,this.iconList.push(t),t},e.prototype.start=function(){},u([h({type:cc.Node,displayName:"\u76ee\u6807"})],e.prototype,"nodeTarget",void 0),u([h({type:cc.SpriteFrame,displayName:"\u7eb9\u7406"})],e.prototype,"sf",void 0),u([h({displayName:"\u7f29\u653e"})],e.prototype,"scale",void 0),u([y],e)}(cc.Component);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],ImageLoader:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f3209B7ymFHEKzBw6ZrqV9g","ImageLoader");var r=e,i=o;cc._RF.push(r,"f3209B7ymFHEKzBw6ZrqV9g","ImageLoader");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=u.requireComponent,d=u.executeInEditMode,y=u.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sfList=[],e.index=0,e.sprite=null,e}return c(e,t),Object.defineProperty(e.prototype,"e_sfList",{get:function(){return this.sfList},set:function(t){this.sfList=t,this.select(this.index)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"e_index",{get:function(){return this.index},set:function(t){this.index=this.select(t)},enumerable:!1,configurable:!0}),e.prototype.getIndex=function(){return this.index},e.prototype.select=function(t){return this.sprite||(this.sprite=this.getComponent(cc.Sprite)),(t<0||this.sfList[t])&&(this.index=t,this.sfList[this.index]&&(this.sprite.spriteFrame=this.sfList[this.index])),this.index},e.prototype.isActive=function(){return this.node.active},e.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite)},e.prototype.start=function(){},l([p({type:cc.SpriteFrame,displayName:"\u56fe\u7247\u5217\u8868"})],e.prototype,"e_sfList",null),l([p({visible:!1})],e.prototype,"sfList",void 0),l([p({displayName:"\u4e0b\u6807",min:0,step:1})],e.prototype,"e_index",null),l([p({visible:!1})],e.prototype,"index",void 0),l([s,f(cc.Sprite),d(),y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/ImageLoader \u56fe\u7247\u52a0\u8f7d\u5668")],e)}(cc.Component);i.default=h,cc._RF.pop(),cc._RF.pop()},{}],InsetByScale:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2099eufD6FNw7bqKZgNc+VK","InsetByScale");var r=e,i=o;cc._RF.push(r,"2099eufD6FNw7bqKZgNc+VK","InsetByScale");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=u.menu,d=u.executeInEditMode,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e}return c(e,t),e.prototype.refresh=function(){this.scaleNode()},e.prototype.scaleNode=function(){this.node.scale=Math.min(this.target.width*this.target.scaleX/this.node.width,this.target.height*this.target.scaleY/this.node.height)},e.prototype.onLoad=function(){this.target||(this.target=this.node.parent),this.target.on(cc.Node.EventType.SIZE_CHANGED,this.scaleNode.bind(this))},e.prototype.start=function(){this.scaleNode()},l([p({type:cc.Node,displayName:"\u76ee\u6807"})],e.prototype,"target",void 0),l([s,d,f("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f29\u653e\u5d4c\u5165")],e)}(cc.Component);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],ItemBoomFlyTween:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5702dx3KSdLCIzOUOMzfzYx","ItemBoomFlyTween");var r=e,i=o;cc._RF.push(r,"5702dx3KSdLCIzOUOMzfzYx","ItemBoomFlyTween");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinNode=null,e.flyNode=null,e.coinNum=22,e.radius=400,e.waveNum=3,e.coinList=[],e.endPos=cc.Vec2.ZERO,e.tweenList=[],e}return c(e,t),e.prototype.runAinmation=function(){var t=this;this.endPos=this.flyNode.convertToWorldSpaceAR(cc.Vec2.ZERO),this.endPos=this.node.convertToNodeSpaceAR(this.endPos);for(var e=0;e<this.tweenList.length;e++)this.tweenList[e].stop();this.tweenList=[];var o=0,n=0,r=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),i=function(e){var i=2*Math.random()*Math.PI,c=cc.v3(a.radius*Math.cos(i),a.radius*Math.sin(i),0);a.coinList[e].active=!0,a.tweenList.push(cc.tween(a.coinList[e]).set({x:r.x,y:r.y,scale:0,opacity:0}).delay(.1*n).to(.3,{position:c,scale:1,opacity:255}).delay(.15).to(.3,{x:a.endPos.x,y:a.endPos.y}).call(function(){t.coinList[e].active=!1}).start()),e%a.waveNum==0&&0!=e&&(o+=.75+.1*n,n++)},a=this;for(e=0;e<this.coinList.length;e++)i(e);return o},e.prototype.stopAinmation=function(){for(var t=0;t<this.tweenList.length;t++)this.tweenList[t].stop();for(t=0;t<this.coinList.length;t++)this.coinList[t].active=!1;this.tweenList=[]},e.prototype.onLoad=function(){for(var t=0;t<this.coinNum;t++){var e=cc.instantiate(this.coinNode);e.parent=this.node,e.active=!1,this.coinList.push(e)}},l([p({type:cc.Node,displayName:"\u91d1\u5e01\u8282\u70b9"})],e.prototype,"coinNode",void 0),l([p({type:cc.Node,displayName:"\u98de\u5411\u8282\u70b9"})],e.prototype,"flyNode",void 0),l([p({step:1,displayName:"\u91d1\u5e01\u6570\u91cf"})],e.prototype,"coinNum",void 0),l([p({step:1,displayName:"\u751f\u6210\u534a\u5f84"})],e.prototype,"radius",void 0),l([p({step:1,displayName:"\u6bcf\u6ce2\u751f\u6210\u4e2a\u6570"})],e.prototype,"waveNum",void 0),l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],ItemCountLabel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"eaa6cGinKpCn53eQEVbLXEO","ItemCountLabel");var r=t,i=e,a=o;cc._RF.push(i,"eaa6cGinKpCn53eQEVbLXEO","ItemCountLabel");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("RunDataHelper"),p=r("BagData"),f=cc._decorator,d=f.ccclass,y=f.property,h=f.menu,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemId=0,e.lbCount=null,e}return l(e,t),e.prototype.onBagRefresh=function(){this.lbCount.string=s.DataHelper.getData(p.default).getItemCount(this.itemId).toString()},e.prototype.onEnable=function(){this.onBagRefresh()},e.prototype.onLoad=function(){s.DataHelper.addRefreshListener(p.default,this.onBagRefresh,this),this.lbCount||(this.lbCount=this.getComponent(cc.Label))},e.prototype.start=function(){},u([y({displayName:"\u7269\u54c1ID"})],e.prototype,"itemId",void 0),u([y({type:cc.Label,displayName:"\u6587\u672c"})],e.prototype,"lbCount",void 0),u([d,h("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7269\u54c1\u6570\u91cf\u6587\u672c")],e)}(cc.Component);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],ItemInfoFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"3ac47RXY9NOHYCivLh9a9V4","ItemInfoFrame");var r=t,i=e,a=o;cc._RF.push(i,"3ac47RXY9NOHYCivLh9a9V4","ItemInfoFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("sdbItem"),d=r("AssetBundleHelper"),y=r("FrameHelper"),h=r("StaticDBHelper"),m=cc._decorator,b=m.ccclass,v=m.menu,g=m.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptIcon=null,e.lbName=null,e.lbDesc=null,e}return l(e,t),e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(){return e=h.default.getData(f.default,t),this.lbName.string=e.name,this.lbDesc.string=e.desc,d.default.setSpriteFrame(this.sptIcon,e.icon),[2,!0]})})},e.prototype.start=function(){},e.frameInfo={name:"ItemInfoFrame",type:y.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/ItemInfoFrame",zIndex:30},u([g({type:cc.Sprite,displayName:"Icon"})],e.prototype,"sptIcon",void 0),u([g({type:cc.Label,displayName:"\u540d\u5b57"})],e.prototype,"lbName",void 0),u([g({type:cc.Label,displayName:"\u63cf\u8ff0"})],e.prototype,"lbDesc",void 0),u([b,v("\u754c\u9762/ItemInfoFrame \u9053\u5177\u4fe1\u606f\u754c\u9762")],e)}(y.FrameBase);a.default=_,cc._RF.pop(),cc._RF.pop()},{}],ItemPanel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c9088qp6AdEcaavRT9ZkE6Z","ItemPanel");var r=t,i=e,a=o;cc._RF.push(i,"c9088qp6AdEcaavRT9ZkE6Z","ItemPanel");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("MateralsLoader"),d=r("GameDefine"),y=r("PlatformHelper"),h=r("RunDataHelper"),m=r("SoundHelper"),b=r("BagData"),v=r("GameData"),g=r("HeroStoryData"),_=r("TimeUtil"),w=r("DragPanel"),S=r("GameBoard"),R=r("GameGlobaled"),O=r("BoardData"),P=r("EffectManager"),F=cc._decorator,T=F.ccclass,D=F.property,k=[O.CellType.GRASS,O.CellType.OBSTACLE,O.CellType.FOUNDATION],C=["ItemSickle","ItemPickaxe","ItemShovel"],L=[50006,50007,50008],B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBoard=null,e.dragPanel=null,e.items=[],e.itemEffect=null,e.dragItem=null,e.dragOffset=cc.Vec2.ZERO,e.itemType=O.CellType.EMPTY,e.itemIndex=0,e.itemCount=[],e}return l(e,t),e.prototype.set=function(t){return s(this,void 0,void 0,function(){return p(this,function(){return this.itemCount=t,[2]})})},e.prototype.init=function(){return s(this,void 0,void 0,function(){var t,e,o;return p(this,function(){return t=h.DataHelper.getData(b.default).getItemCount(d.default.ItemSickleId),e=h.DataHelper.getData(b.default).getItemCount(d.default.ItemPickaxeId),o=h.DataHelper.getData(b.default).getItemCount(d.default.ItemShovelId),this.itemCount=[Math.min(t,3),Math.min(e,3),Math.min(o,3)],h.DataHelper.getData(v.default).setItemCount(this.itemCount),[2]})})},e.prototype.refresh=function(){h.DataHelper.getData(g.default).baseTowerGetRewardId;for(var t=0;t<this.items.length;t++)this.items[t].active=!1;if(this.itemCount)for(t=0;t<this.items.length;t++){this.items[t].children[1].getComponent(cc.Label).string=this.itemCount[t]+"/3";var e=this.itemCount[t]>0;this.items[t].getComponentInChildren(f.default).select(e?0:1),!e&&h.DataHelper.getData(v.default).isItemVideoEnable(t)?(this.items[t].children[1].active=!1,this.items[t].children[2].active=!0,this.items[t].getComponentInChildren(f.default).select(0)):(this.items[t].children[1].active=!0,this.items[t].children[2].active=!1)}},e.prototype.contains=function(){},e.prototype.onTouchStart=function(t){var e=t.getLocation();this.dragItem=null;for(var o=0;o<this.items.length;o++)if(this.items[o].active){var n=this.items[o].getBoundingBoxToWorld(),r=this.itemCount[o]>0||h.DataHelper.getData(v.default).isItemVideoEnable(o);if(n.contains(e)&&r){this.dragItem=this.items[o].children[0],this.dragItem.scale=R.default.gridSize/80,this.dragOffset=e.sub(this.dragItem.convertToWorldSpaceAR(cc.Vec2.ZERO)),this.itemType=k[o],this.itemIndex=o,this.items[o].children[1].opacity=0,this.items[o].children[2].opacity=0;break}}this.dragItem&&this.onTouchMove(t)},e.prototype.onTouchMove=function(t){if(this.dragItem){var e=t.getLocation().sub(this.dragOffset),o=this.dragItem.parent.convertToNodeSpaceAR(e);this.dragItem.setPosition(o);var n=e.sub(cc.v2(.5*R.default.gridSizeWorld,.5*R.default.gridSizeWorld));n=this.gameBoard.getBoardPosByPosition(n);var r=this.gameBoard.boardData.getCell(n.x,n.y),i=[],a=[];r&&(r.cellType===this.itemType?i=[n]:a=[n]),this.gameBoard.refreshTips(this.itemType,i,a)}},e.prototype.playAnimation=function(t){return new Promise(function(e){var o=t.getComponentInChildren(cc.Animation);if(!o)return e();o.on("finished",function(){o.off("finished"),e()}),o.play()})},e.prototype.onTouchEnd=function(t){return s(this,void 0,void 0,function(){var e,o,n,r=this;return p(this,function(i){switch(i.label){case 0:if(!this.dragItem)return[2];if(e=!1,this.itemCount[this.itemIndex]<=0){if(!h.DataHelper.getData(v.default).isItemVideoEnable(this.itemIndex))return[2];e=!0}return o=function(){return s(r,void 0,void 0,function(){var e,o,n,r=this;return p(this,function(i){switch(i.label){case 0:return e=t.getLocation().sub(this.dragOffset),o=e.sub(cc.v2(.5*R.default.gridSizeWorld,.5*R.default.gridSizeWorld)),o=this.gameBoard.getBoardPosByPosition(o),(n=this.gameBoard.boardData.getCell(o.x,o.y))&&n.cellType===this.itemType?(m.default.playBattleSfx(C[this.itemIndex]),_.default.delay(.2).then(function(){var t=P.default.instance.parent.convertToNodeSpaceAR(e);P.default.instance.create(r.itemEffect,cc.v3(t))}),[4,this.playAnimation(this.dragItem)]):[3,2];case 1:i.sent(),this.itemType===O.CellType.FOUNDATION&&this.dragPanel.addFoundation(0),this.gameBoard.boardData.setCell(o.x,o.y,O.CellType.EMPTY),this.gameBoard.refreshBoard(),h.DataHelper.getData(v.default).setBoardData(this.gameBoard.boardData.toJson()),h.DataHelper.getData(b.default).subItemCount(L[this.itemIndex],1),this.itemCount[this.itemIndex]--,h.DataHelper.getData(v.default).setItemCount(this.itemCount),i.label=2;case 2:return[2]}})})},n=function(){r.refresh(),r.dragItem.setPosition(cc.Vec2.ZERO),r.dragItem.scale=1,r.dragItem.getComponentInChildren(cc.Animation).node.opacity=255,r.gameBoard.refreshTips(),r.items[r.itemIndex].children[1].opacity=255,r.items[r.itemIndex].children[2].opacity=255},e?(y.PlatformHelper.video("Item",function(){return s(r,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return h.DataHelper.getData(v.default).subItemVideo(this.itemIndex),this.itemCount[this.itemIndex]=3,h.DataHelper.getData(b.default).addItemCount(L[this.itemIndex],3),[4,o()];case 1:return t.sent(),n(),[2]}})})},function(){return s(r,void 0,void 0,function(){return p(this,function(){return n(),[2]})})}),[3,3]):[3,1];case 1:return[4,o()];case 2:i.sent(),n(),i.label=3;case 3:return[2]}})})},e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.start=function(){},u([D({type:S.default,displayName:"\u68cb\u76d8"})],e.prototype,"gameBoard",void 0),u([D({type:w.default,displayName:"\u62d6\u52a8\u9762\u677f"})],e.prototype,"dragPanel",void 0),u([D({type:cc.Node,displayName:"\u9053\u5177"})],e.prototype,"items",void 0),u([D({type:cc.Prefab,displayName:"\u9053\u5177\u70df\u96fe\u7279\u6548"})],e.prototype,"itemEffect",void 0),u([T],e)}(cc.Component);a.default=B,cc._RF.pop(),cc._RF.pop()},{}],ItemSelectLv:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"24b74FihNZLQZq8YuzE6iO/","ItemSelectLv");var r=t,i=e,a=o;cc._RF.push(i,"24b74FihNZLQZq8YuzE6iO/","ItemSelectLv");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("AssetBundleHelper"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentNode=null,e.lockNode=null,e.nodeTheme=null,e.theme=-1,e}return l(e,t),e.prototype.initItem=function(t,e){return s(this,void 0,void 0,function(){var o,n;return p(this,function(r){switch(r.label){case 0:return this.lockNode.active=!e,this.theme===t.theme?[3,2]:(this.theme=t.theme,n=(o=cc).instantiate,[4,f.default.getAsset(cc.Prefab,"GameBoard/"+t.theme+"/Theme"+t.theme)]);case 1:n.apply(o,[r.sent()]).parent=this.parentNode,r.label=2;case 2:return[2]}})})},u([h({type:cc.Node,displayName:"Spine\u7236\u8282\u70b9"})],e.prototype,"parentNode",void 0),u([h({type:cc.Node,displayName:"\u9501\u8282\u70b9"})],e.prototype,"lockNode",void 0),u([y],e)}(cc.Component);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],LangHelper:[function(t,e,o){"use strict";cc._RF.push(e,"4c25cBLN2JIr55iYUcEkpe+","LangHelper");var n=t,r=e,i=o;cc._RF.push(r,"4c25cBLN2JIr55iYUcEkpe+","LangHelper"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("StringUtil"),c=n("EventHelper"),l=n("StaticDBHelper"),u=function(){function t(){}return t.initLang=function(t){this.lang=t,this.refreshLangRender()},t.changeLang=function(t){t!==this.lang&&(this.lang=t,this.refreshLangRender())},t.refreshLangRender=function(){c.default.emit(t.Evnet_CHANGE_LANG,this.lang)},t.getStr=function(t){var e=l.default.getDataByTableName("Lang_"+this.lang,t);return e?e.lang:t},t.formatStr=function(t,e){return a.default.FormatString(this.getStr(t),e)},t.Evnet_CHANGE_LANG="Evnet_CHANGE_LANG",t.LangType={zh:"zh",en:"en"},t.lang=t.LangType.zh,t}();i.default=u,cc._RF.pop(),cc._RF.pop()},{}],LangLabel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"cbf0a7LjSJNwbT6mD8PjVJ4","LangLabel");var r=t,i=e,a=o;cc._RF.push(i,"cbf0a7LjSJNwbT6mD8PjVJ4","LangLabel");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventHelper"),p=r("LangHelper"),f=cc._decorator,d=f.ccclass,y=f.menu,h=f.property,m=f.requireComponent,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.langId="",e.label=null,e}return l(e,t),e.prototype.onEnable=function(){this.refresh()},e.prototype.onLoad=function(){this.label=this.getComponent(cc.Label),s.default.on(p.default.Evnet_CHANGE_LANG,this.refresh,this)},e.prototype.refresh=function(){this.label.string=p.default.getStr(this.langId)},u([h({displayName:"\u591a\u8bed\u8a00ID"})],e.prototype,"langId",void 0),u([d,m(cc.Label),y("i18n/\u591a\u8bed\u8a00\u6587\u5b57")],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],LangSprite:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"88d7dRsKTlJPp1ouh1FEAOu","LangSprite");var r=t,i=e,a=o;cc._RF.push(i,"88d7dRsKTlJPp1ouh1FEAOu","LangSprite");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventHelper"),p=r("LangHelper"),f=cc._decorator,d=f.ccclass,y=f.property,h=f.requireComponent,m=f.menu,b=function(){function t(){this.language="",this.spriteFrame=null}return u([y()],t.prototype,"language",void 0),u([y(cc.SpriteFrame)],t.prototype,"spriteFrame",void 0),u([d("i18SpriteFrameSet")],t)}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._spriteFrameSet=[],e.sprite=null,e.langList=[],e}return l(e,t),Object.defineProperty(e.prototype,"spriteFrameSet",{get:function(){for(var t=0;t<this.langList.length;t++)this._spriteFrameSet[t]||(this._spriteFrameSet[t]=new b),this._spriteFrameSet[t].language=this.langList[t];return this._spriteFrameSet},set:function(t){this._spriteFrameSet=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.langList=Object.values(p.default.LangType),this.sprite=this.getComponent(cc.Sprite),this.refresh(),s.default.on(p.default.Evnet_CHANGE_LANG,this.refresh,this)},e.prototype.getSpriteFrameByLang=function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},e.prototype.refresh=function(){if(this.sprite){var t=this.getSpriteFrameByLang(p.default.lang);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")},u([y({type:b})],e.prototype,"spriteFrameSet",null),u([y({type:b})],e.prototype,"_spriteFrameSet",void 0),u([d,h(cc.Sprite),m("\u591a\u8bed\u8a00/\u56fe\u7247 Sprtie")],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],LayoutItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"43a0aPcX3dNSI260dsRH8BW","LayoutItem");var r=e,i=o;cc._RF.push(r,"43a0aPcX3dNSI260dsRH8BW","LayoutItem");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=(u.property,u.menu),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childrenData=[],e}return c(e,t),Object.defineProperty(e.prototype,"visiable",{get:function(){return this.node.opacity>0},set:function(t){this.node.opacity=t?255:0;for(var e=0;e<this.childrenData.length;e++)this.childrenData[e].node.opacity=t?255:0},enumerable:!1,configurable:!0}),e.prototype.setVisible=function(t){this.visiable=t},Object.defineProperty(e.prototype,"active",{get:function(){return this.node.active},set:function(t){if(this.node.active=t,t)for(var e=0;e<this.childrenData.length;e++)this.childrenData[e].node.active=this.childrenData[e].active;else for(e=0;e<this.childrenData.length;e++)this.childrenData[e].node.active=t},enumerable:!1,configurable:!0}),e.prototype.setActive=function(t){this.active=t},e.prototype.setChildActive=function(t,e){t.active=e;for(var o=0;o<this.childrenData.length;o++)this.childrenData[o].node===t&&(this.childrenData[o].active=e)},e.prototype.getChildByName=function(t){for(var e=0;e<this.childrenData.length;e++)if(this.childrenData[e].node.name===t)return this.childrenData[e].node},e.prototype.getComponentInChildren=function(t){for(var e=null,o=0;o<this.childrenData.length;o++){if(e=this.childrenData[o].node.getComponent(t))return e;if(e=this.childrenData[o].node.getComponentInChildren(t))return e}return null},e.prototype.refreshPosition=function(){if(!(this.childrenData.length<1)){var t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);t=this.childrenData[0].node.parent.convertToNodeSpaceAR(t);for(var e=0;e<this.childrenData.length;e++)this.childrenData[e].node.x=t.x+this.childrenData[e].pos.x*this.node.scaleX,this.childrenData[e].node.y=t.y+this.childrenData[e].pos.y*this.node.scaleY}},e.prototype.resetChildrenPosition=function(){var t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);t=this.childrenData[0].node.parent.convertToNodeSpaceAR(t);for(var e=0;e<this.childrenData.length;e++)this.childrenData[e].pos=cc.v2((this.childrenData[e].node.x-t.x)/this.node.scaleX,(this.childrenData[e].node.y-t.y)/this.node.scaleY)},e.prototype.init=function(t){for(var e=this,o=0;o<this.node.childrenCount;o++)this.childrenData.push({node:this.node.children[o],pos:cc.v2(this.node.children[o].position),active:this.node.children[o].active});for(o=0;o<this.childrenData.length&&!(t.length<=o);o++)this.childrenData[o].node.removeComponent(cc.Widget),this.childrenData[o].node.parent=t[o];this.refreshPosition(),this.node.on(cc.Node.EventType.POSITION_CHANGED,function(){e.refreshPosition()},this),this.node.parent.on(cc.Node.EventType.POSITION_CHANGED,function(){e.refreshPosition()},this)},e.prototype.onSizeChanged=function(){for(var t=0;t<this.childrenData.length;t++)this.childrenData[t].node.scale=this.node.scale;this.refreshPosition()},e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.SCALE_CHANGED,this.onSizeChanged,this)},l([s,p("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u81ea\u52a8\u5e03\u5c40\u90e8\u4ef6")],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],LayoutList:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d5cb20KhElNXY4lhSdeqfOR","LayoutList");var r=t,i=e,a=o;cc._RF.push(i,"d5cb20KhElNXY4lhSdeqfOR","LayoutList");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListDirection=void 0;var f,d=r("LayoutItem"),y=cc._decorator,h=y.ccclass,m=y.property,b=y.menu;(function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"})(f=a.ListDirection||(a.ListDirection={}));var v=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}return u([m({type:cc.Float})],t.prototype,"left",void 0),u([m({type:cc.Float})],t.prototype,"right",void 0),u([m({type:cc.Float})],t.prototype,"top",void 0),u([m({type:cc.Float})],t.prototype,"bottom",void 0),u([h("Padding")],t)}(),g=function(){function t(){this.x=0,this.y=0}return u([m({type:cc.Float})],t.prototype,"x",void 0),u([m({type:cc.Float})],t.prototype,"y",void 0),u([h("Spacing")],t)}(),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=f.Horizontal,e.isFixZIndex=!0,e.prefab=null,e.padding=new v,e.spacing=new g,e.isFixSelfByLayout=!1,e.prefabSize=cc.size(0,0),e.layoutNode=null,e.isLayoutItem=!1,e.length=0,e.nodeList=[],e.funcItemCreate=null,e.layerList=[],e.singleSize=0,e}var o;return l(e,t),o=e,e.prototype.onItemCreate=function(t){this.funcItemCreate=t},e.prototype.delFirstItem=function(){var t=this.nodeList[0];t&&(this.nodeList.splice(0,1),t.destroy())},e.prototype.clean=function(){for(var t,e=0;e<this.nodeList.length;e++)null===(t=this.nodeList[e].getComponent(d.default))||void 0===t||t.setActive(!1),this.nodeList[e].active=!1},Object.defineProperty(e.prototype,"Spacing",{get:function(){return this.spacing},enumerable:!1,configurable:!0}),e.prototype.getByIndex=function(t){return this.nodeList[t]},e.prototype.createItemsByLength=function(t){var e;return s(this,void 0,void 0,function(){var o,n;return p(this,function(){for(this.length=t,o=this.length;o<this.nodeList.length;o++)null===(e=this.nodeList[o].getComponent(d.default))||void 0===e||e.setActive(!1),this.nodeList[o].active=!1;for(o=0;o<this.length;o++)n=this.createItem(o),this.funcItemCreate&&this.funcItemCreate(n,o);return[2]})})},e.prototype.createItem=function(t){var e,o,n,r=this.nodeList[t];return r||((r=this.getCloneNode()).parent=this.layoutNode,this.nodeList[t]=r,null===(e=r.getComponent(d.default))||void 0===e||e.init(this.layerList)),r.active=!0,null===(o=r.getComponent(d.default))||void 0===o||o.setActive(!0),null===(n=r.getComponent(d.default))||void 0===n||n.refreshPosition(),r},e.prototype.getCloneNode=function(){return this.prefab?cc.instantiate(this.prefab):cc.instantiate(this.node.children[0])},e.prototype.fixNodeSize=function(){if(this.type===f.Horizontal){this.singleSize=Math.floor((this.node.height-this.padding.top-this.padding.bottom+this.spacing.y)/(this.prefabSize.height+this.spacing.y));var t=this.singleSize*(this.prefabSize.height+this.spacing.y)-this.spacing.y+this.padding.top+this.padding.bottom;this.node.height=this.layoutNode.height=t}else{this.singleSize=Math.floor((this.node.width-this.padding.left-this.padding.right+this.spacing.x)/(this.prefabSize.width+this.spacing.x));var e=this.singleSize*(this.prefabSize.width+this.spacing.x)-this.spacing.x+this.padding.left+this.padding.right;this.node.width=this.layoutNode.width=e}},e.prototype.onLoad=function(){var t=this,e=this.getComponent(cc.Widget);e&&e.updateAlignment(),this.prefab||(this.node.children[0].active=!1),this.layoutNode=new cc.Node,this.layoutNode.width=this.node.width,this.layoutNode.height=this.node.height,this.layoutNode.parent=this.node,this.layoutNode.name="layout";var n=this.layoutNode.addComponent(cc.Layout);n.type=cc.Layout.Type.GRID,this.type===f.Horizontal?n.startAxis=cc.Layout.AxisDirection.VERTICAL:n.startAxis=cc.Layout.AxisDirection.HORIZONTAL,n.paddingLeft=this.padding.left,n.paddingRight=this.padding.right,n.paddingTop=this.padding.top,n.paddingBottom=this.padding.bottom,n.spacingX=this.spacing.x,n.spacingY=this.spacing.y;var r=this.getCloneNode();if(r){this.prefabSize=r.getContentSize(),this.isLayoutItem=null!==r.getComponent(d.default);for(var i=0;i<r.childrenCount;i++){var a=new cc.Node;a.name=""+i,a.parent=this.node,a.zIndex=100+i,this.layerList.push(a)}this.fixNodeSize()}this.isFixSelfByLayout&&(n.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.layoutNode.on("size-changed",function(){t.node.width=t.layoutNode.width,t.node.height=t.layoutNode.height;var e=new cc.Event.EventCustom(o.onSizeChange,!0);t.node.dispatchEvent(e)},this))},e.prototype.start=function(){},e.prototype.update=function(){},e.onSizeChange="onSizeChange",u([m({type:cc.Enum(f),displayName:"\u7c7b\u578b",tooltip:"Horizontal - \u6c34\u5e73\r\nVertical - \u5782\u76f4"})],e.prototype,"type",void 0),u([m({displayName:"\u662f\u5426\u4fee\u6b63\u5c42\u7ea7\u4f18\u5316DrawCall"})],e.prototype,"isFixZIndex",void 0),u([m({type:cc.Prefab,displayName:"\u9884\u5236\u4f53"})],e.prototype,"prefab",void 0),u([m({type:v,displayName:"\u8fb9\u6846"})],e.prototype,"padding",void 0),u([m({type:g,displayName:"\u95f4\u8ddd"})],e.prototype,"spacing",void 0),u([m({displayName:"\u662f\u5426\u6839\u636eLayout\u4fee\u6b63\u81ea\u8eab\u5927\u5c0f"})],e.prototype,"isFixSelfByLayout",void 0),o=u([h,b("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u81ea\u52a8\u5e03\u5c40\u5217\u8868")],e)}(cc.Component);a.default=_,cc._RF.pop(),cc._RF.pop()},{}],LayoutPanel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"13d88Ld6kNObbW+qMT6ZuwW","LayoutPanel");var r=t,i=e,a=o;cc._RF.push(i,"13d88Ld6kNObbW+qMT6ZuwW","LayoutPanel");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListDirection=void 0;var f=r("DragItem"),d=r("GameGlobaled"),y=r("LayoutItem"),h=cc._decorator,m=h.ccclass,b=h.property,v=h.menu;(function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"})(a.ListDirection||(a.ListDirection={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.isFixSelfByLayout=!1,e.prefabSize=cc.size(0,0),e.layoutNode=null,e.isLayoutItem=!1,e.nodeList=[],e.funcItemCreate=null,e.layerList=[],e.itemPool=null,e}var o;return l(e,t),o=e,Object.defineProperty(e.prototype,"length",{get:function(){return this.nodeList.length},enumerable:!1,configurable:!0}),e.prototype.onItemCreate=function(t){this.funcItemCreate=t},e.prototype.clean=function(){for(var t=0;t<this.nodeList.length;t++)this.nodeList[t]&&this.itemPool.put(this.nodeList[t]);this.nodeList.length=0},e.prototype.getByIndex=function(t){return this.nodeList[t]},e.prototype.getIndexByX=function(t){var e=this.node.convertToNodeSpaceAR(cc.v2(t,0));if(this.nodeList.length>0){var o=this.nodeList[this.nodeList.length-1];if(e.x>o.x+o.width/2+12.5)return this.nodeList.length}for(var n=0,r=0;r<this.nodeList.length;r++){var i=this.nodeList[r],a=i.x+i.width/2;e.x>a&&(n=r+1)}return n},e.prototype.createItems=function(t){return s(this,void 0,Promise,function(){var e,o,n,r,i,a,c=this;return p(this,function(){for(e=[];this.nodeList.length>0;)(r=this.nodeList.pop())&&this.itemPool.put(r);for(o=d.default.gridSizeWorld,n=0;n<t.length;n++)r=this.pushItem(),this.funcItemCreate&&this.funcItemCreate(r),i=t[n],(a=r.getComponent(f.default)).init(i,o,2===i.buildingLevel,d.default.sfFoundation).then(function(){c.updateItemsPosition()}),e.push(a);return[2,e]})})},e.prototype.createItemIn=function(t,e){return s(this,void 0,Promise,function(){var o,n,r;return p(this,function(i){switch(i.label){case 0:return o=this.insertItem(e),this.funcItemCreate&&this.funcItemCreate(o),n=o.getComponent(f.default),r=d.default.gridSizeWorld,[4,n.init(t,r,!1,d.default.sfFoundation)];case 1:return i.sent(),this.updateItemsPosition(o),[2,n]}})})},e.prototype.removeItem=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(){return t>=0&&t<this.nodeList.length&&(e=this.nodeList[t])&&(this.itemPool.put(e),this.nodeList.splice(t,1),this.updateItemsPosition()),[2]})})},e.prototype.insertItem=function(t){var e,o=this.itemPool.get();return o.parent=this.layoutNode,this.nodeList.splice(t,0,o),null===(e=o.getComponent(y.default))||void 0===e||e.refreshPosition(),o},e.prototype.pushItem=function(){var t,e=this.itemPool.get();return e.parent=this.layoutNode,this.nodeList.push(e),null===(t=e.getComponent(y.default))||void 0===t||t.refreshPosition(),e},e.prototype.getCloneNode=function(){return this.node.children[0]},e.prototype.fixNodeSize=function(){this.node.height=this.layoutNode.height=this.prefabSize.height},e.prototype.updateItemsPosition=function(t){void 0===t&&(t=null);for(var e=this.nodeList.length,o=0,n=0;n<e;n++)(c=this.nodeList[n])&&c.active&&(o+=c.width);var r=o+25*(e-1);r>this.node.width&&(r=this.node.width);var i=(r-o)/(e-1),a=-r>>1;for(n=0;n<e;n++){var c;(c=this.nodeList[n])&&c.active&&(t==c&&(c.x=a,c.y=60),cc.tween(c).to(.3,{x:a,y:0},{easing:"quartOut"}).start(),a+=c.width+i)}},e.prototype.onLoad=function(){var t=this,e=this.getComponent(cc.Widget);e&&e.updateAlignment(),this.prefab||(this.node.children[0].active=!1),this.layoutNode=new cc.Node,this.layoutNode.width=this.node.width,this.layoutNode.height=this.node.height,this.layoutNode.parent=this.node,this.layoutNode.name="layout";var n=this.getCloneNode();if(n){this.prefabSize=n.getContentSize(),this.isLayoutItem=null!==n.getComponent(y.default);for(var r=0;r<n.childrenCount;r++){var i=new cc.Node;i.name=""+r,i.parent=this.node,i.zIndex=100+r,this.layerList.push(i)}this.fixNodeSize(),this.itemPool=_.instance,this.itemPool.init(n,this.layerList,5)}this.isFixSelfByLayout&&this.layoutNode.on("size-changed",function(){t.node.width=t.layoutNode.width,t.node.height=t.layoutNode.height;var e=new cc.Event.EventCustom(o.onSizeChange,!0);t.node.dispatchEvent(e)},this)},e.prototype.start=function(){},e.prototype.update=function(){},e.onSizeChange="onSizeChange",u([b({type:cc.Prefab,displayName:"\u9884\u5236\u4f53"})],e.prototype,"prefab",void 0),u([b({displayName:"\u662f\u5426\u6839\u636eLayout\u4fee\u6b63\u81ea\u8eab\u5927\u5c0f"})],e.prototype,"isFixSelfByLayout",void 0),o=u([m,v("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u81ea\u52a8\u5e03\u5c40\u5217\u8868")],e)}(cc.Component);a.default=g;var _=function(){function t(){this.pool=new cc.NodePool,this.prefab=null,this.layerList=[]}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(t,e,o){void 0===o&&(o=0),this.prefab=t,this.layerList=e;for(var n=0;n<o;n++){var r=this.createNode();this.pool.put(r)}},t.prototype.createNode=function(){var t=cc.instantiate(this.prefab),e=t.getComponent(y.default);return e&&e.init(this.layerList),t},t.prototype.get=function(){var t,e=null;return(e=this.pool.size()>0?this.pool.get():this.createNode()).active=!0,null===(t=e.getComponent(y.default))||void 0===t||t.setActive(!0),e},t.prototype.put=function(t){var e;t&&(null===(e=t.getComponent(y.default))||void 0===e||e.setActive(!1),t.active=!1,t.opacity=255,t.scale=1,t.angle=0,t.position=cc.Vec3.ZERO,this.pool.put(t))},t.prototype.clear=function(){this.pool.clear()},t._instance=null,t}();cc._RF.pop(),cc._RF.pop()},{}],LightManager:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"51645RCcbhGQI0N5Ynh90KF","LightManager");var r=t,i=e,a=o;cc._RF.push(i,"51645RCcbhGQI0N5Ynh90KF","LightManager");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Factory"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeParent=null,e.rendererList=[],e}var o;return l(e,t),o=e,Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.registerRenderer=function(t){return s(this,void 0,void 0,function(){var e,o,n;return p(this,function(r){switch(r.label){case 0:if(!t)return[2];e=[],o=0,r.label=1;case 1:return o<t.node.childrenCount?"light"!=t.node.children[o].group?[3,3]:[4,f.default.instance.create(t.node.children[o])]:[3,4];case 2:(n=r.sent()).parent=this.nodeParent,t.node.children[o].active=!1,e.push({node:n,pos:t.node.children[o].position}),r.label=3;case 3:return o++,[3,1];case 4:return this.rendererList.push({renderer:t,lightList:e}),[2]}})})},e.prototype.unregisterRenderer=function(t){for(var e=0;e<this.rendererList.length;e++)if(this.rendererList[e].renderer==t){this.rendererList[e].lightList.forEach(function(t){f.default.instance.remove(t.node)}),this.rendererList.splice(e,1);break}},e.prototype.logicUpdate=function(){this.rendererList.forEach(function(t){t.lightList.forEach(function(e){e.node.position=t.renderer.node.position.add(e.pos)})})},e.prototype.onLoad=function(){o._instance=this},e.prototype.start=function(){},e._instance=null,u([h({type:cc.Node,displayName:"\u53d1\u5149\u7236\u8282\u70b9"})],e.prototype,"nodeParent",void 0),o=u([y],e)}(cc.Component);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],Load:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6c10c4uaatCv6Zfx2hI6EwG","Load");var r=t,i=e,a=o;cc._RF.push(i,"853e6p6B9dMoJn4dUwf/XuF","Load");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0}),a.GameCannel=a.CannelType=void 0;var f,d=r("TrackHelper"),y=cc._decorator,h=y.ccclass,m=y.property;(function(t){t.YongWang="YongWang",t.Hu="Hu",t.Play800="Play800",t.Zhai="Zhai",t.GameClub="GameClub",t.BaoWeiWanDou="BaoWeiWanDou"})(f=a.CannelType||(a.CannelType={})),a.GameCannel=f.BaoWeiWanDou;var b=function(){function t(){this.cannel="",this.spriteFrame=null}return u([m({displayName:"\u6e20\u9053\u540d"})],t.prototype,"cannel",void 0),u([m({type:cc.SpriteFrame,displayName:"\u56fe\u7247"})],t.prototype,"spriteFrame",void 0),u([h("LogoData")],t)}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptBg=null,e.sptTitle=null,e.logoData=[],e.prgBar=null,e.nodeTest=null,e.prgSpeed=0,e.isLoadFinish=!1,e.gameMgr=null,e.max=0,e.progress=0,e}return l(e,t),e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(){for(this.prgBar&&(this.prgBar.progress=0),t=0;t<this.logoData.length;t++)if(this.logoData[t].cannel===a.GameCannel){this.sptTitle.spriteFrame=this.logoData[t].spriteFrame;break}return[2]})})},e.prototype.loadAssetBundles=function(t){return s(this,void 0,Promise,function(){return p(this,function(){return[2,new Promise(function(e,o){var n=cc.assetManager.getBundle(t);n?e(n):cc.assetManager.loadBundle(t,{onFileProgress:function(t){console.log(t)}},function(t,n){t?(console.error(t),o(null)):e(n)})})]})})},e.prototype.start=function(){return s(this,void 0,void 0,function(){var t,e=this;return p(this,function(o){switch(o.label){case 0:return this.prgSpeed=.1,this.max=.8,this.progress=0,this.isLoadFinish=!1,[4,d.default.getOpenId()];case 1:return t=o.sent(),cc.sys.platform!==cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME||(d.default.setOpenId(t),d.default.init(),d.default.Login(),d.default.trackEventLoadingProgress(0)),this.loadAssetBundles("Root").then(function(){return s(e,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return d.default.trackEventLoadingProgress(40),console.log("Load Assetbundle Root Success"),t=this,[4,Promise.resolve().then(function(){return r("GameMgr")})];case 1:return t.gameMgr=e.sent().default.getInstance(),[4,this.gameMgr.initGame()];case 2:return e.sent(),console.log("Init Game Success"),d.default.trackEventLoadingProgress(100),this.max=1,this.prgSpeed=1,[2]}})})}),[2]}})})},e.prototype.update=function(t){this.prgBar&&!this.isLoadFinish&&(this.progress=Math.min(this.progress+this.prgSpeed*t,this.max),this.nodeTest.scaleX=this.progress,this.progress>=1&&(this.isLoadFinish=!0,this.gameMgr.enterGame()))},u([m({type:cc.Sprite,displayName:"\u80cc\u666f"})],e.prototype,"sptBg",void 0),u([m({type:cc.Sprite,displayName:"\u6807\u9898"})],e.prototype,"sptTitle",void 0),u([m({type:b,displayName:"\u6807\u9898\u6570\u636e"})],e.prototype,"logoData",void 0),u([m({type:cc.ProgressBar,displayName:"\u8fdb\u5ea6\u6761"})],e.prototype,"prgBar",void 0),u([m({type:cc.Node,displayName:"\u6d4b\u8bd5"})],e.prototype,"nodeTest",void 0),u([h],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],LocalStorage:[function(t,e,o){"use strict";cc._RF.push(e,"95f56K84ulHnryvjGXrvK8G","LocalStorage");var n=t,r=e,i=o;cc._RF.push(r,"6f740mrmaZBT4XtISGEGmmp","LocalStorage"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("StorageSync"),c=function(){function t(){}return t.getItem=function(t){return void 0===window.localStorage?a.default.getItem(t):window.localStorage.getItem(t)},t.setItem=function(t,e){return void 0===window.localStorage?a.default.setItem(t,e):window.localStorage.setItem(t,e)},t.removeItem=function(t){return void 0===window.localStorage?a.default.removeItem(t):window.localStorage.removeItem(t)},t}();i.default=c,cc._RF.pop(),cc._RF.pop()},{}],LogUtil:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"279a4FqJbNDf4Y73dlrVvrB","LogUtil");var r=e,i=o;cc._RF.push(r,"279a4FqJbNDf4Y73dlrVvrB","LogUtil"),Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(){}return t.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.isOpen&&(t.unshift((new Date).toLocaleTimeString()),console.info.apply(console,t))},t.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.isOpen&&(t.unshift((new Date).toLocaleTimeString()),console.warn.apply(console,t))},t.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.unshift((new Date).toLocaleTimeString()),console.error.apply(console,t)},t.logRed=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{console.log("%c "+t,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(i){}},t.logBlue=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{console.log("%c "+t,"background:blue; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(i){}},t.logGreen=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{console.log("%c "+t,"background:green; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(i){}},t.logOrange=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{console.log("%c "+t,"background:orange; padding: 4px; padding-right: 8px; border-radius: 4px; color: #000;")}catch(i){}},t.logYellow=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{console.log("%c "+t,"background:yellow; padding: 4px; padding-right: 8px; border-radius: 4px; color: #000;")}catch(i){}},t.logDeep=function(t){console.log("------------------"),this._logDeep(t)},t._logDeep=function(t){for(var e in t)Array.isArray(t[e])?console.log(e+":["+t[e]+"]"):"object"==n(t[e])?(console.log(e+":"),this._logDeep(t[e])):console.log(e+":"+t[e])},t.isOpen=!0,t}();i.default=a,cc._RF.pop(),cc._RF.pop()},{}],Logger:[function(t,e,o){"use strict";cc._RF.push(e,"1851f4jzhVJEZE7z0uO2RD7","Logger");var n=e,r=o;cc._RF.push(n,"90adeYIFiZLAJEnf13GFZu9","Logger");var i=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};function a(t,e){var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12==0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"\u661f\u671f":"\u5468":"")+"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".charAt(t.getDay()))),o)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return e}Object.defineProperty(r,"__esModule",{value:!0}),r.isLegalLogLevel=r.LOG_LEVEL=void 0,r.LOG_LEVEL={VERBOSE:"verbose",INFO:"info",WARNING:"warning",ERROR:"error",NONE:"none"},r.isLegalLogLevel=function(t){return[r.LOG_LEVEL.VERBOSE,r.LOG_LEVEL.INFO,r.LOG_LEVEL.WARNING,r.LOG_LEVEL.ERROR,r.LOG_LEVEL.NONE].includes(t)};var c=function(){function t(e,o){void 0===e&&(e="none"),void 0===o&&(o="LOG"),this.level=e,this.prefix=o,this.id=t.id}return t.isLegalLogLevel=function(t){return[r.LOG_LEVEL.VERBOSE,r.LOG_LEVEL.INFO,r.LOG_LEVEL.WARNING,r.LOG_LEVEL.ERROR,r.LOG_LEVEL.NONE].includes(t)},t.prototype.getPrintPrefix=function(t){return this.id++,"[wonder-js-sdk] "+a(new Date,"yyyy-MM-ddThh:mm:ss.SZ")+" ["+t.toLocaleUpperCase()+"]["+this.prefix+"#"+this.id+"]:"},t.prototype.setLogLevel=function(t){return this.level=t},t.prototype.getLogLevel=function(){return this.level},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info"];o.includes(this.level)&&console.log.apply(console,i([this.getPrintPrefix("info")],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info","warn"];o.includes(this.level)&&console.warn.apply(console,i([this.getPrintPrefix("warn")],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info","warn","error","verbose"];o.includes(this.level)&&console.error.apply(console,i([this.getPrintPrefix("error")],t))},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info","warn","error","verbose"];o.includes(this.level)&&console.error.apply(console,i([this.getPrintPrefix("verbose")],t))},t.id=0,t.LOG_LEVEL={VERBOSE:"verbose",INFO:"info",WARNING:"warning",ERROR:"error",NONE:"none"},t}();r.default=c,cc._RF.pop(),cc._RF.pop()},{}],Login:[function(t,e,o){"use strict";cc._RF.push(e,"c8e74JLx15ASpvI5r8eV3mC","Login");var n=e,r=o;cc._RF.push(n,"bad40aPLf1M/6CDgQbBoo9W","Login"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.login=function(t){window.tt&&window.wxapi.login(t)},t}();r.default=new i,cc._RF.pop(),cc._RF.pop()},{}],LongTouchButton:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"44f04Aa/8ZPg4+LAMEHdapm","LongTouchButton");var r=e,i=o;cc._RF.push(r,"44f04Aa/8ZPg4+LAMEHdapm","LongTouchButton");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=u.menu,d=u.inspector,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=1,e.longTouchEvents=[],e.longTouchCancelEvents=[],e.enableLongTouch=!0,e.longTouchBegan=!1,e.longTouchTime=0,e.longTouchBeganEvent=null,e.isLongTouchSuccess=!1,e}return c(e,t),e.prototype._onTouchBegan=function(e){t.prototype._onTouchBegan.call(this,e),this.enableLongTouch&&this.enabledInHierarchy&&(this.longTouchTime=0,this.longTouchBegan=!0,this.isLongTouchSuccess=!1,this.longTouchBeganEvent=e)},e.prototype._onTouchEnded=function(e){t.prototype._onTouchEnded.call(this,e),this.longTouchBegan=!1,this.isLongTouchSuccess&&cc.Component.EventHandler.emitEvents(this.longTouchCancelEvents,e)},e.prototype._onTouchCancel=function(){t.prototype._onTouchCancel.call(this,event),this.longTouchBegan=!1,this.isLongTouchSuccess&&cc.Component.EventHandler.emitEvents(this.longTouchCancelEvents,this.longTouchBeganEvent)},e.prototype._onTouchLong=function(){this.enableLongTouch&&this.enabledInHierarchy&&(this.isLongTouchSuccess=!0,cc.Component.EventHandler.emitEvents(this.longTouchEvents,this.longTouchBeganEvent),this._pressed=!1,this._updateState())},e.prototype.start=function(){},e.prototype.update=function(e){t.prototype.update.call(this,e),this.longTouchBegan&&(this.longTouchTime+=e,this.longTouchTime>=this.time&&(this.longTouchBegan=!1,this._onTouchLong()))},l([p({displayName:"\u89e6\u53d1\u65f6\u95f4"})],e.prototype,"time",void 0),l([p({type:cc.Component.EventHandler,displayName:"\u957f\u6309\u4e8b\u4ef6"})],e.prototype,"longTouchEvents",void 0),l([p({type:cc.Component.EventHandler,displayName:"\u957f\u6309\u53d6\u6d88\u4e8b\u4ef6"})],e.prototype,"longTouchCancelEvents",void 0),l([p({displayName:"\u662f\u5426\u542f\u7528\u957f\u6309"})],e.prototype,"enableLongTouch",void 0),l([s,f("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u957f\u6309\u6309\u94ae"),d("packages://JJPlus/longTouchButton.js")],e)}(cc.Button);i.default=y,cc._RF.pop(),cc._RF.pop()},{}],LoseFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"45fe2apBzdElJHKrUMIPl8U","LoseFrame");var r=t,i=e,a=o;cc._RF.push(i,"45fe2apBzdElJHKrUMIPl8U","LoseFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("LayoutList"),d=r("FrameHelper"),y=r("GuideHelper"),h=r("PlatformHelper"),m=r("RunDataHelper"),b=r("StaticDBHelper"),v=r("DailyData"),g=r("Tools"),_=r("TimeUtil"),w=r("YWCloundHelper"),S=r("GetItemFrame"),R=r("MainFrame"),O=r("GameFrame"),P=r("WinRewardItem"),F=cc._decorator,T=F.ccclass,D=F.menu,k=F.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardScroll=null,e.videoLabel=null,e.rewardTitle=null,e.btnsNode=null,e.btnDouble=null,e.rewardList=[],e}return l(e,t),e.prototype.onCreateRewrd=function(t,e){t.getComponent(P.default).setItem(this.rewardList[e])},e.prototype.onClickConfirm=function(){return s(this,void 0,void 0,function(){var t=this;return p(this,function(){return d.default.showFrame(R.default).then(function(){t.hideFrame(),d.default.hideFrame(O.default)}),[2]})})},e.prototype.onClickDoubleVideo=function(){var t=this;h.PlatformHelper.video("LoseDouble",function(){t.btnDouble.interactable=!1,g.default.addToBagByRewardList(t.rewardList),d.default.showFrame(S.default,S.default.GetType.item,t.rewardList),m.DataHelper.getData(v.default).subWinDouble(),t.setVideoLabel()})},e.prototype.animationRest=function(){this.rewardTitle.opacity=0,this.btnsNode.opacity=0,this.btnsNode.scale=0},e.prototype.animationShow=function(){return s(this,void 0,void 0,function(){var t,e;return p(this,function(o){switch(o.label){case 0:return cc.tween(this.rewardTitle).set({scale:0}).to(.15,{scale:1.3,opacity:255}).to(.05,{scale:1}).start(),[4,_.default.delay(.3)];case 1:o.sent(),t=0,o.label=2;case 2:return t<this.rewardScroll.nodeList.length?(e=this.rewardScroll.nodeList[t].getComponent(P.default),[4,_.default.delay(.1)]):[3,5];case 3:o.sent(),e.animationShow(),o.label=4;case 4:return t++,[3,2];case 5:return[4,_.default.delay(.2)];case 6:return o.sent(),cc.tween(this.btnsNode).to(.15,{scale:1.2,opacity:255}).to(.05,{scale:1}).start(),[2]}})})},e.prototype.setVideoLabel=function(){this.videoLabel.string=m.DataHelper.getData(v.default).winDoubleVideoTimes+"/"+b.default.getConfig("winDoubleVideoTimes")},e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){return p(this,function(){return this.rewardList=t,this.rewardScroll.createItemsByLength(this.rewardList.length),this.animationRest(),this.setVideoLabel(),this.btnDouble.interactable=!y.default.isGuiding,w.default.save(),[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.animationShow(),[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.rewardScroll.onItemCreate(this.onCreateRewrd.bind(this))},e.prototype.start=function(){},e.frameInfo={name:"LoseFrame",type:d.FrameType.Model,bundleName:"Root",prefabName:"Prefab/Frame/LoseFrame",zIndex:10},u([k({type:f.default,displayName:"\u5956\u52b1\u5217\u8868"})],e.prototype,"rewardScroll",void 0),u([k({type:cc.Label,displayName:"\u89c6\u9891\u6b21\u6570"})],e.prototype,"videoLabel",void 0),u([k({type:cc.Node,displayName:"\u5956\u52b1title"})],e.prototype,"rewardTitle",void 0),u([k({type:cc.Node,displayName:"\u6309\u94ae\u8282\u70b9"})],e.prototype,"btnsNode",void 0),u([k({type:cc.Button,displayName:"\u53cc\u500d\u6309\u94ae"})],e.prototype,"btnDouble",void 0),u([T,D("\u754c\u9762/LoseFrame \u5931\u8d25\u754c\u9762")],e)}(d.FrameBase);a.default=C,cc._RF.pop(),cc._RF.pop()},{}],MagicTower:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ec394bPaSVMP6jUj9aoL+12","MagicTower");var r=t,i=e,a=o;cc._RF.push(i,"ec394bPaSVMP6jUj9aoL+12","MagicTower");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.MagicTower=void 0;var s=r("Tower"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),u([f],e)}(s.default));a.MagicTower=d,cc._RF.pop(),cc._RF.pop()},{}],MainFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"07bceykMHVPH5Kwc7OsKfyy","MainFrame");var r=t,i=e,a=o;cc._RF.push(i,"07bceykMHVPH5Kwc7OsKfyy","MainFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("ImageLoader"),d=r("TabBtnBar"),y=r("EventConfig"),h=r("GameDefine"),m=r("EventHelper"),b=r("FrameHelper"),v=r("RunDataHelper"),g=r("SoundHelper"),_=r("StaticDBHelper"),w=r("BagData"),S=r("DailyData"),R=r("DailyTaskData"),O=r("PowerData"),P=r("StageData"),F=r("SweepData"),T=r("TipsFrame"),D=r("BattleFrame"),k=r("HeroFrame"),C=r("BuyTVFrame"),L=r("ShopFrame"),B=r("TowerFrame"),j=r("DungeonFrame"),x=cc._decorator,I=x.ccclass,N=x.menu,A=x.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tabBtnBar=null,e.goldLabel=null,e.diamondLabel=null,e.lbPower=null,e.selectBg=null,e.lbPowerTime=null,e.commonBg=null,e.tabFrames=[L.default,k.default,D.default,B.default,j.default],e}return l(e,t),e.prototype.onClickGuideStart=function(){m.default.emit(y.default.GuideBattle)},e.prototype.onClickTop=function(t,e){"TV"!=e?this.showShop("coin"==e):b.default.showFrame(C.default)},e.prototype.showShop=function(t){var e;return s(this,void 0,void 0,function(){return p(this,function(o){switch(o.label){case 0:return v.DataHelper.getData(P.default).isUnlockSystem(P.SysyemName.Shop)?(this.tabBtnBar.chooseTab(0),[4,b.default.awaitShowFrame(L.default)]):[2];case 1:return null===(e=o.sent())||void 0===e||e.shopScroll(t),[2]}})})},e.prototype.onChooseTab=function(t){return s(this,void 0,void 0,function(){var e,o;return p(this,function(n){switch(n.label){case 0:return e=this.tabFrames[t],cc.tween(this.selectBg).to(.3,{x:this.tabBtnBar.btnList[t].targetX},{easing:"sineOut"}).start(),this.tabBtnBar.node.pauseSystemEvents(!0),[4,b.default.showFrame(e)];case 1:for(n.sent(),this.tabBtnBar.node.resumeSystemEvents(!0),o=0;o<this.tabFrames.length;o++)o!==t&&this.tabFrames[o]&&b.default.hideFrame(this.tabFrames[o]);return[2]}})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.tabFrames.map(function(t){if(t)return b.default.hideFrame(t)}))];case 1:return t.sent(),this.commonBg&&(this.commonBg.active=!1),[2]}})})},e.prototype.refreshTop=function(){var t=v.DataHelper.getData(w.default).getItemCount(h.default.ItemCoinId),e=v.DataHelper.getData(w.default).getItemCount(h.default.ItemDiamondId),o=v.DataHelper.getData(w.default).getItemCount(h.default.ItemPower);this.goldLabel.string=t.toString(),this.diamondLabel.string=e.toString(),this.lbPower.string=o+"/"+_.default.getConfig("Energy")},e.prototype.reload=function(){this.beforeShow()},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){var t,e,o,n;return p(this,function(){return v.DataHelper.getData(S.default).refreshDataByTodayTime(),v.DataHelper.getData(F.default).refreshDataByTodayTime(),v.DataHelper.getData(R.default).refreshDataByTodayTime(),t=v.DataHelper.getData(P.default),e=t.isUnlockSystem(P.SysyemName.Shop),this.tabBtnBar.btnList[0].getComponentInChildren(f.default).select(e?0:1),this.tabBtnBar.btnList[0].isInteractable=e,this.tabBtnBar.btnList[0].listenUninteractable(function(){b.default.showFrame(T.default,"\u901a\u8fc7\u7b2c"+t.getSystemUnlockStage(P.SysyemName.Shop)+"\u5173\u540e\u89e3\u9501")}),o=t.isUnlockSystem(P.SysyemName.HeroLevelup),this.tabBtnBar.btnList[1].getComponentInChildren(f.default).select(o?0:1),this.tabBtnBar.btnList[1].isInteractable=o,this.tabBtnBar.btnList[1].listenUninteractable(function(){b.default.showFrame(T.default,"\u901a\u8fc7\u7b2c"+t.getSystemUnlockStage(P.SysyemName.HeroLevelup)+"\u5173\u540e\u89e3\u9501")}),n=t.isUnlockSystem(P.SysyemName.Dungeon),this.tabBtnBar.btnList[4].getComponentInChildren(f.default).select(n?0:1),this.tabBtnBar.btnList[4].isInteractable=n,this.tabBtnBar.btnList[4].listenUninteractable(function(){b.default.showFrame(T.default,"\u901a\u8fc7\u7b2c"+t.getSystemUnlockStage(P.SysyemName.Dungeon)+"\u5173\u540e\u89e3\u9501")}),this.refreshTop(),this.tabBtnBar.chooseTab(2),this.commonBg&&(this.commonBg.active=!0),[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return g.default.playMusic("BgmMain"),[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.commonBg=cc.find("Canvas/EntityMove/Bg"),m.default.on(y.default.refreshTop,this.refreshTop,this)},e.prototype.start=function(){},e.prototype.update=function(){this.lbPowerTime.string=v.DataHelper.getData(O.default).getTimeStr()},e.frameInfo={name:"MainFrame",type:b.FrameType.Normal,bundleName:"Root",prefabName:"Prefab/Frame/MainFrame",zIndex:5},u([A({type:d.default,displayName:"\u6309\u94ae\u5217\u8868"})],e.prototype,"tabBtnBar",void 0),u([A({type:cc.Label,displayName:"\u91d1\u5e01"})],e.prototype,"goldLabel",void 0),u([A({type:cc.Label,displayName:"\u94bb\u77f3"})],e.prototype,"diamondLabel",void 0),u([A({type:cc.Label,displayName:"\u4f53\u529b"})],e.prototype,"lbPower",void 0),u([A({type:cc.Node,displayName:"\u9009\u4e2d\u80cc\u666f"})],e.prototype,"selectBg",void 0),u([A({type:cc.Label,displayName:"\u4f53\u529b\u6062\u590d\u65f6\u95f4"})],e.prototype,"lbPowerTime",void 0),u([I,N("\u754c\u9762/MainFrame \u4e3b\u754c\u9762")],e)}(b.FrameBase);a.default=M,cc._RF.pop(),cc._RF.pop()},{}],MateralsLoader:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ca50dQYYutCoosxSsPQy1kQ","MateralsLoader");var r=e,i=o;cc._RF.push(r,"ca50dQYYutCoosxSsPQy1kQ","MateralsLoader");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=u.requireComponent,d=u.executeInEditMode,y=u.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.materialList=[],e.index=0,e.render=null,e}return c(e,t),Object.defineProperty(e.prototype,"e_materialList",{get:function(){return this.materialList},set:function(t){this.materialList=t,this.select(this.index)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"e_index",{get:function(){return this.index},set:function(t){this.index=this.select(t)},enumerable:!1,configurable:!0}),e.prototype.getIndex=function(){return this.index},e.prototype.select=function(t){return(t<0||this.materialList[t])&&(this.index=t,this.materialList[this.index]&&this.render.setMaterial(0,this.materialList[this.index])),this.index},e.prototype.onLoad=function(){this.render=this.getComponent(cc.RenderComponent)},e.prototype.start=function(){},l([p({type:cc.Material,displayName:"Material\u5217\u8868"})],e.prototype,"e_materialList",null),l([p({visible:!1})],e.prototype,"materialList",void 0),l([p({displayName:"\u4e0b\u6807",min:0,step:1})],e.prototype,"e_index",null),l([p({visible:!1})],e.prototype,"index",void 0),l([s,f(cc.RenderComponent),d(),y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/MateralsLoader \u6750\u8d28\u52a0\u8f7d\u5668")],e)}(cc.Component);i.default=h,cc._RF.pop(),cc._RF.pop()},{}],MathUtil:[function(t,e,o){"use strict";cc._RF.push(e,"4d52awSTLhCooVGuY8tr+MA","MathUtil");var n=e,r=o;cc._RF.push(n,"4d52awSTLhCooVGuY8tr+MA","MathUtil"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.setSeed=function(t){this.seed=t},t.random=function(){return this.seed=(9301*this.seed+49297)%233280,this.seed/233280},t.randomRange=function(t,e){return t+(e-t)*this.random()},t.randomInt=function(t,e){return Math.floor(this.randomRange(t,e+1))},t.randomArray=function(t){return t[Math.floor(this.random()*t.length)]},t.getAngleByDir=function(t){return 180*Math.atan2(t.y,t.x)/Math.PI},t.getAngleByRadian=function(t){return t*Math.PI/180},t.getRadianByAngle=function(t){return t*Math.PI/180},t.seed=Date.now(),t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],MonsterBoom:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"1b90c0Xmf9IL7WzIFUUS5RT","MonsterBoom");var r=t,i=e,a=o;cc._RF.push(i,"1b90c0Xmf9IL7WzIFUUS5RT","MonsterBoom");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MateralsLoader"),p=r("EventConfig"),f=r("EventHelper"),d=r("Monster"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.materalsLoader=null,e.delayAttack=-1,e.delayRemove=-1,e}return l(e,t),e.prototype.init=function(e,o,n,r,i){t.prototype.init.call(this,e,o,n,r,i),this.materalsLoader.select(0)},e.prototype.attack=function(){t.prototype.attack.call(this),this.materalsLoader.select(1),this.delayAttack=.5,this.delayRemove=.7},e.prototype.onAttack=function(){t.prototype.onAttack.call(this),this.data.hp.setValue(0),this.isDying=!0},e.prototype.logicUpdate=function(e){t.prototype.logicUpdate.call(this,e),this.delayAttack>0&&(this.delayAttack-=e,this.delayAttack<=0&&(this.delayAttack=-1,this.onAttack())),this.delayRemove>0&&(this.delayRemove-=e,this.delayRemove<=0&&(this.delayRemove=-1,f.default.emit(p.default.MonsterDead,this)))},e.prototype.onLoad=function(){this.collider=this.node.getComponent(cc.BoxCollider)},u([m({type:s.default,displayName:"\u6750\u8d28\u52a0\u8f7d\u5668"})],e.prototype,"materalsLoader",void 0),u([h],e)}(d.default);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],MonsterManager:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0a304H0IFtDercGTadB4Zg7","MonsterManager");var r=t,i=e,a=o;cc._RF.push(i,"0a304H0IFtDercGTadB4Zg7","MonsterManager");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameDefine"),d=r("sdbMonster"),y=r("sdbMonsterSkill"),h=r("StaticDBHelper"),m=r("Factory"),b=r("Entity"),v=r("ChessRenderer"),g=r("LightManager"),_=r("RendererManager"),w=r("HpManager"),S=cc._decorator,R=S.ccclass,O=(S.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listAll=[],e.listSpacil=[],e.listBoss=[],e.removeList=[],e.createHis=[],e.buildingUuid=1e3,e.creatingCount=0,e}var o;return l(e,t),o=e,Object.defineProperty(e.prototype,"hadSpacilOrBossInStage",{get:function(){return this.listSpacil.length>0||this.listBoss.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.listAll.length+this.creatingCount-this.removeList.length<1},enumerable:!1,configurable:!0}),e.prototype.generateId=function(){return this.buildingUuid++},e.prototype.create=function(t,e,o,n){return s(this,void 0,void 0,function(){var r,i,a,c,l,u;return p(this,function(s){switch(s.label){case 0:return r=h.default.getData(d.default,t),this.creatingCount++,[4,m.default.instance.create("Prefab/Game/Monster/"+r.prefab)];case 1:if(i=s.sent(),this.creatingCount--,!i)return[2,null];if(i.parent=_.default.instance.nodeStage,a=i.getComponent(b.default),this.listAll.push(a),a.init(r,e,o,n,this.generateId()),r.skillList&&r.skillList.length>0)for(c=0;c<r.skillList.length;c++)l=h.default.getData(y.default,r.skillList[c]),a.addMonsterSkill(l);return u=a.getComponent(v.default),_.default.instance.registerRenderer(u),g.default.instance.registerRenderer(u),r.type===f.MonsterType.Special?(this.listSpacil.push(a),w.default.instance.createSpacil(a,cc.v3(0,1.2*u.height,0)),w.default.instance.refreshEntity(a)):r.type===f.MonsterType.Boss&&(this.listBoss.push(a),w.default.instance.createBoss(a,cc.v3(0,1.2*u.height,0)),w.default.instance.refreshEntity(a)),this.createHis.push(a._id),[2,a]}})})},e.prototype.remove=function(t){this.removeList.push(t);var e=this.listSpacil.indexOf(t);e>-1&&(this.listSpacil.splice(e,1),w.default.instance.remove(t));var o=this.listBoss.indexOf(t);o>-1&&(this.listBoss.splice(o,1),w.default.instance.remove(t))},e.prototype.cleanup=function(){this.listAll.forEach(function(t){t.cleanup(),_.default.instance.unregisterRenderer(t.getComponent(v.default)),g.default.instance.unregisterRenderer(t.getComponent(v.default)),m.default.instance.remove(t.node)}),this.listAll=[],this.listSpacil=[],this.listBoss=[],this.creatingCount=0},e.prototype.logicUpdate=function(t){this.listAll.forEach(function(e){return e.logicUpdate(t)});for(var e=0;e<this.removeList.length;e++){var o=this.removeList[e],n=this.listAll.indexOf(o);n>-1&&this.listAll.splice(n,1),o.cleanup(),_.default.instance.unregisterRenderer(o.getComponent(v.default)),g.default.instance.unregisterRenderer(o.getComponent(v.default)),m.default.instance.remove(o.node)}this.removeList=[]},e.prototype.onLoad=function(){o.instance=this},e.prototype.start=function(){},e.instance=null,o=u([R],e)}(cc.Component));a.default=O,cc._RF.pop(),cc._RF.pop()},{}],MonsterRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f5ce3F0rSFKYY1TT0dcyfac","MonsterRenderer");var r=t,i=e,a=o;cc._RF.push(i,"f5ce3F0rSFKYY1TT0dcyfac","MonsterRenderer");var c,l,u=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var p=r("ChessRenderer"),f=r("ChessSpineRenderer"),d=cc._decorator,y=d.ccclass,h=(d.property,(l={})[p.AnimationNames.Move]="move",l[p.AnimationNames.Attack]="attack",l[p.AnimationNames.Stand]="wait",l[p.AnimationNames.Die]="die",l),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collider=null,e}return u(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this.collider.size.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.collider.size.height},enumerable:!1,configurable:!0}),e.prototype.getAnimationName=function(t){return h[t]},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.collider=this.node.getComponent(cc.BoxCollider)},s([y],e)}(f.default);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],Monster:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c59ac5DtVtNA5c00hSJFXNZ","Monster");var r=t,i=e,a=o;cc._RF.push(i,"c59ac5DtVtNA5c00hSJFXNZ","Monster");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.MonsterState=void 0;var s,p=r("EventConfig"),f=r("EventHelper"),d=r("GameGlobaled"),y=r("EffectManager"),h=r("HpManager"),m=r("MonsterManager"),b=r("ChessRenderer"),v=r("Entity"),g=cc._decorator,_=g.ccclass;g.property,function(t){t[t.MOVE=0]="MOVE",t[t.ATTACK=1]="ATTACK",t[t.DIE=2]="DIE"}(s=a.MonsterState||(a.MonsterState={}));var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monsterData=null,e.path=[],e.currentPathIndex=0,e.currentState=s.MOVE,e.attackTimer=0,e.atkDD=1,e.hpDD=1,e.attackEvent=new cc.Event.EventCustom(o.MonsterAttack,!0),e.collider=null,e}var o;return l(e,t),o=e,Object.defineProperty(e.prototype,"bodyLocal",{get:function(){return cc.v3(0,this.collider.offset.y,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodyPosition",{get:function(){return this.node.position.add(cc.v3(0,this.collider.offset.y,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodyPositionToWorld",{get:function(){return this.node.convertToWorldSpaceAR(cc.v3(0,this.collider.offset.y,0))},enumerable:!1,configurable:!0}),e.prototype.onHurt=function(e){var o=t.prototype.onHurt.call(this,e);return h.default.instance.refreshEntity(this),o},e.prototype.onDead=function(){t.prototype.onDead.call(this),m.default.instance.remove(this),f.default.emit(p.default.MonsterDead,this),y.default.instance.create("Prefab/Game/Effect/MonsterDie",this.bodyPosition)},e.prototype.attack=function(){this.renderer.setAnimation(b.AnimationNames.Attack)},e.prototype.onAttack=function(){this.attackEvent.setUserData(this.data.atk.value),this.node.dispatchEvent(this.attackEvent)},Object.defineProperty(e.prototype,"type",{get:function(){return this.monsterData.type},enumerable:!1,configurable:!0}),e.prototype.init=function(e,o,n,r,i){t.prototype.init.call(this),this.monsterData=e,this.atkDD=o,this.hpDD=n,this.data.uid=i,this.data.atk.init(this.monsterData.atk*this.atkDD),this.data.hp.init(this.monsterData.hp*this.hpDD),this.data.ad.init(this.monsterData.ad),this.data.as.init(this.monsterData.as/1e3*2),this.data.spd.init(this.monsterData.spd),this.data.def.init(0),this.data.sdbId=e.id,this.path=r,this.currentPathIndex=-1,this.isDying=!1,this.path.length>0&&this.node.setPosition(this.path[0].x,this.path[0].y+d.default.monsterStartOffset*d.default.boardScale),this.setState(s.MOVE)},e.prototype.onLoad=function(){var t=this;this.renderer.listenAnimationComplete(b.AnimationNames.Attack,function(){t.renderer.setAnimation(b.AnimationNames.Stand),t.onAttack()}),this.collider=this.node.getComponent(cc.BoxCollider)},e.prototype.logicUpdate=function(e){if(t.prototype.logicUpdate.call(this,e),!(this.isDead||this.data.spd.value<=0))if(this.attackTimer+=e,this.currentState!==s.ATTACK){var o=cc.v2(this.node.position);if(this.path[this.path.length-1].sub(o).mag()<=this.data.ad.value+.5*d.default.gridSize){var n=this.path[this.path.length-1].sub(o);return this.renderer.node.scaleX=Math.abs(this.renderer.node.scaleX)*(n.x>0?-1:1),void this.setState(s.ATTACK)}for(var r=o,i=this.data.spd.value*e;i>0;){var a=this.path[this.currentPathIndex+1].sub(r),c=a.mag();if(!(i>=c)){r.addSelf(a.normalize().mul(i));break}if(i-=c,r=this.path[this.currentPathIndex+1],this.currentPathIndex++,this.currentPathIndex+1>=this.path.length)break}var l=r.sub(cc.v2(this.node.position));Math.abs(l.x)>.1&&(this.renderer.node.scaleX=Math.abs(this.renderer.node.scaleX)*(l.x>0?-1:1)),this.node.setPosition(r)}else this.attackTimer>=this.data.as.value&&(this.attackTimer=0,this.attack())},e.prototype.die=function(){this.isDying||(this.isDying=!0,this.onDead(),this.setState(s.DIE))},e.prototype.setState=function(t){switch(this.currentState=t,t){case s.MOVE:this.renderer.setAnimation(b.AnimationNames.Move);break;case s.ATTACK:this.renderer.setAnimation(b.AnimationNames.Stand);break;case s.DIE:this.renderer.setAnimation(b.AnimationNames.Die)}},Object.defineProperty(e.prototype,"remainPathCount",{get:function(){return this.path.length-this.currentPathIndex-1},enumerable:!1,configurable:!0}),e.MonsterAttack="MonsterAttack",o=u([_],e)}(v.default);a.default=w,cc._RF.pop(),cc._RF.pop()},{}],MoveTween:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f6988qnfsZDk4m0Uq4WegDn","MoveTween");var r=e,i=o;cc._RF.push(r,"f6988qnfsZDk4m0Uq4WegDn","MoveTween");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},u=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},s=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var p,f=cc._decorator,d=f.ccclass,y=f.property,h=f.menu;(function(t){t[t.cneterToTop=0]="cneterToTop",t[t.centerToBottom=1]="centerToBottom",t[t.centerToLeft=2]="centerToLeft",t[t.centerToRight=3]="centerToRight",t[t.topToCenter=4]="topToCenter",t[t.bottomToCenter=5]="bottomToCenter",t[t.leftToCenter=6]="leftToCenter",t[t.rightToCenter=7]="rightToCenter"})(p||(p={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showMoveType=p.cneterToTop,e.moveDistance=100,e.moveTime=.3,e.autoShow=!0,e.initPos=cc.Vec3.ZERO,e.tween=null,e}return c(e,t),e.prototype.show=function(t){return u(this,void 0,void 0,function(){var e=this;return s(this,function(){return this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).set({position:this.initPos,opacity:0}).to(this.moveTime,{position:this.getMovePos(this.showMoveType),opacity:255},{easing:"quadOut"}).call(function(){t&&t(),e.tween=null}).start(),[2]})})},e.prototype.hide=function(t){return u(this,void 0,void 0,function(){var e=this;return s(this,function(){return this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).to(this.moveTime,{position:this.initPos,opacity:0},{easing:"quadOut"}).call(function(){t&&t(),e.tween=null}).start(),[2]})})},e.prototype.move=function(t,e){return u(this,void 0,void 0,function(){var o=this;return s(this,function(){return this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).set({position:this.initPos,opacity:0}).to(this.moveTime,{position:this.getMovePos(t),opacity:255},{easing:"quadOut"}).call(function(){e&&e(),o.tween=null}).start(),[2]})})},e.prototype.onEnable=function(){this.autoShow&&this.show()},e.prototype.onDisable=function(){this.autoShow&&this.hide()},e.prototype.getMovePos=function(t){var e=this.initPos;switch(t){case p.cneterToTop:e.y+=this.moveDistance;break;case p.centerToBottom:e.y-=this.moveDistance;break;case p.centerToLeft:e.x-=this.moveDistance;break;case p.centerToRight:e.x+=this.moveDistance;break;case p.topToCenter:e.y-=this.moveDistance;break;case p.bottomToCenter:e.y+=this.moveDistance;break;case p.leftToCenter:e.x+=this.moveDistance;break;case p.rightToCenter:e.x-=this.moveDistance}return e},e.prototype.onLoad=function(){this.initPos=this.node.position},l([y({type:cc.Enum(p),displayName:"\u8282\u70b9\u6fc0\u6d3b\u7f13\u52a8\u7c7b\u578b"})],e.prototype,"showMoveType",void 0),l([y({step:1,displayName:"\u79fb\u52a8\u8ddd\u79bb"})],e.prototype,"moveDistance",void 0),l([y({step:.1,displayName:"\u79fb\u52a8\u65f6\u95f4"})],e.prototype,"moveTime",void 0),l([y({displayName:"\u662f\u5426\u81ea\u52a8\u663e\u793a"})],e.prototype,"autoShow",void 0),l([d,h("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f13\u52a8/\u8282\u70b9\u79fb\u52a8\u9700\u8c03\u7528show hide move\u65b9\u6cd5")],e)}(cc.Component);i.default=m,cc._RF.pop(),cc._RF.pop()},{}],NetHelper:[function(t,e,o){"use strict";cc._RF.push(e,"5f511mpCEZAwKukNk1P+tKO","NetHelper");var n=e,r=o;cc._RF.push(n,"5f511mpCEZAwKukNk1P+tKO","NetHelper"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.post=function(t,e){return void 0===e&&(e={}),new Promise(function(o,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&r.status>=200&&r.status<400){var t=r.responseText;o(JSON.parse(t))}},r.ontimeout=function(){n()},r.onerror=function(){n()},r.onabort=function(){n()},r.open("POST",t,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var i=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");r.send(i)})},t.get=function(t,e){return void 0===e&&(e={}),new Promise(function(o,n){var r=new XMLHttpRequest,i=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&"),a=i?t+"?"+i:t;r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<400){var t=r.responseText;o(JSON.parse(t))}else n("Get\u8bf7\u6c42 \u9519\u8bef\u4ee3\u7801 "+r.status+" - "+a)},r.ontimeout=function(){n("Get\u8bf7\u6c42 \u8d85\u65f6 - "+a)},r.open("GET",a,!0),r.send()})},t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],NightRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d1c454QM1dGFLAvhhBU2a0U","NightRenderer");var r=e,i=o;cc._RF.push(r,"d1c454QM1dGFLAvhhBU2a0U","NightRenderer");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stageCamera=null,e.lightCamera=null,e.material=null,e.sliderNight=null,e.nightMix=.5,e.materialSingle=null,e.spt=null,e}var o;return c(e,t),o=e,Object.defineProperty(e.prototype,"progress",{get:function(){return this.nightMix},set:function(t){this.nightMix=t,this.sliderNight&&(this.sliderNight.progress=this.nightMix)},enumerable:!1,configurable:!0}),e.prototype.slider=function(t){this.material.setProperty("nightMix",t.progress),this.materialSingle.setProperty("nightMix",t.progress)},e.prototype.cleanup=function(){this.progress=0},e.prototype.onLoad=function(){o.instance=this,this.nightMix=0,this.node.width=cc.winSize.width+2,this.node.height=cc.winSize.height+2,this.spt=this.node.addComponent(cc.Sprite),this.spt.srcBlendFactor=cc.macro.BlendFactor.ONE,this.spt.setMaterial(0,this.material);var t=new cc.RenderTexture;t.initWithSize(this.node.width,this.node.height,cc.game._renderContext.STENCIL_INDEX8);var e=new cc.SpriteFrame(t);this.spt.spriteFrame=e,this.stageCamera.targetTexture=t;var n=new cc.RenderTexture;n.initWithSize(this.node.width,this.node.height,cc.RenderTexture.DepthStencilFormat.RB_FMT_D24S8),this.lightCamera.clearFlags|=cc.Camera.ClearFlags.COLOR,this.lightCamera.backgroundColor=cc.color(0,0,0,0),this.lightCamera.targetTexture=n,this.material.setProperty("nightMix",this.nightMix),this.material.setProperty("lightTexture",n),this.materialSingle.setProperty("nightMix",this.nightMix),this.materialSingle.setProperty("lightTexture",n),this.sliderNight&&(this.sliderNight.progress=this.nightMix),cc.sys.WECHAT_GAME===cc.sys.platform&&(this.sliderNight.node.active=!1)},e.prototype.start=function(){},e.prototype.update=function(){},e.instance=null,l([p({type:cc.Camera,displayName:"\u573a\u666f\u6444\u50cf\u673a"})],e.prototype,"stageCamera",void 0),l([p({type:cc.Camera,displayName:"\u5149\u7ebf\u6444\u50cf\u673a"})],e.prototype,"lightCamera",void 0),l([p({type:cc.Material,displayName:"\u591c\u665a\u6750\u8d28"})],e.prototype,"material",void 0),l([p({type:cc.Slider,displayName:"\u591c\u665a\u7cfb\u6570\u6ed1\u52a8\u6761"})],e.prototype,"sliderNight",void 0),l([p({displayName:"\u591c\u665a\u7cfb\u6570"})],e.prototype,"nightMix",void 0),l([p({type:cc.Material,displayName:"\u591c\u665a\u5355\u72ec\u6750\u8d28"})],e.prototype,"materialSingle",void 0),o=l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],Objectvalues:[function(t,e){"use strict";cc._RF.push(e,"728e7NNYGNH65Q0JiW1o6P8","Objectvalues"),Object.values||(Object.values=function(t){if(t!==Object(t))throw new TypeError("Object.values called on a non-object");var e,o=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&o.push(t[e]);return o}),cc._RF.pop()},{}],OnShowScale:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7a92fTwyCZDRo+DZDGrytY9","OnShowScale");var r=t,i=e,a=o;cc._RF.push(i,"7a92fTwyCZDRo+DZDGrytY9","OnShowScale");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("TweenComponent"),p=cc._decorator,f=p.ccclass,d=(p.property,p.menu),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tempScale=0,e}return l(e,t),e.prototype.getTween=function(){return cc.tween(this.node).set({scale:.3}).to(.15,{scale:this.tempScale})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.tempScale=this.node.scale},u([f,d("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7f13\u52a8/\u663e\u793a\u65f6\u7f29\u653e")],e)}(s.default);a.default=y,cc._RF.pop(),cc._RF.pop()},{}],OpenBoxFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"861b7lYhnBGrrjC5bl0DxZb","OpenBoxFrame");var r=t,i=e,a=o;cc._RF.push(i,"861b7lYhnBGrrjC5bl0DxZb","OpenBoxFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("AutoJump"),d=r("FrameHelper"),y=cc._decorator,h=y.ccclass,m=y.menu,b=y.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxNode=null,e.title=null,e.autoJump=null,e.isAniPlaying=!1,e.callback=null,e.boxY=0,e}return l(e,t),e.prototype.onClickClose=function(){this.node.activeInHierarchy&&(this.isAniPlaying||(this.hideFrame(),this.callback&&this.callback()))},e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){return p(this,function(){return this.callback=t,[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.isAniPlaying=!0,this.autoJump.enabled=!1,this.PlayOpenBoxAni(),[2]})})},e.prototype.PlayOpenBoxAni=function(){return s(this,void 0,void 0,function(){var t=this;return p(this,function(){return cc.tween(this.boxNode).set({y:this.boxY+500,angle:0}).to(.2,{y:this.boxY,angle:0}).to(.1,{y:this.boxY+35,angle:-6}).to(.1,{y:this.boxY,angle:0}).to(.1,{y:this.boxY+35,angle:6}).to(.1,{y:this.boxY,angle:0}).call(function(){t.isAniPlaying=!1,t.autoJump.enabled=!0}).start(),[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:return e.sent(),this.node.on(cc.Node.EventType.TOUCH_END,this.onClickClose,this),this.boxY=this.boxNode.position.y,[2]}})})},e.prototype.start=function(){},e.frameInfo={name:"OpenBoxFrame",type:d.FrameType.Normal,bundleName:"Root",prefabName:"Prefab/Frame/ShopFrame/OpenBoxFrame",zIndex:9},u([b({type:cc.Node,displayName:"\u5b9d\u7bb1\u8282\u70b9"})],e.prototype,"boxNode",void 0),u([b({type:cc.Node,displayName:"\u6807\u9898\u8282\u70b9"})],e.prototype,"title",void 0),u([b({type:f.default,displayName:"\u6301\u7eed\u8df3\u52a8"})],e.prototype,"autoJump",void 0),u([h,m("\u754c\u9762/OpenBoxFrame \u6253\u5f00\u5b9d\u7bb1\u754c\u9762")],e)}(d.FrameBase);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],Params:[function(t,e,o){"use strict";cc._RF.push(e,"15c65kGMadKzpnX8aMgJfii","Params");var n=t,r=e,i=o;cc._RF.push(r,"7b5bd69FHpEKIZBNAFs5DG2","Params"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("LocalStorage"),c=function(){function t(){this._showParams={},this._gameParams={app_name:"",channel:"",version:""},this._userParams={openid:""},this._openidKey="sdk_openid",this._userParams.openid=a.default.getItem(this._openidKey)}return t.prototype.setShowParams=function(t){return this._showParams=t},t.prototype.getShowParams=function(t){return void 0===t&&(t=""),""===t?this._showParams:void 0===this._showParams[t]?"":this._showParams[t]},t.prototype.setGameParams=function(t){return t.channel="tt_minigame",this._gameParams=t},t.prototype.getGameParams=function(t){return void 0===t&&(t=""),""===t?this._gameParams:void 0===this._gameParams[t]?"":this._gameParams[t]},t.prototype.setUserParams=function(t){return a.default.setItem(this._openidKey,void 0===t.openid?"":t.openid),this._userParams=t},t.prototype.getUserParams=function(t){return void 0===t&&(t=""),""===t?this._userParams:void 0===this._userParams[t]?"":this._userParams[t]},t}();i.default=new c,cc._RF.pop(),cc._RF.pop()},{}],Particle:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"58844V2UMpOj5JnzjtVfXxS","Particle");var r=t,i=e,a=o;cc._RF.push(i,"58844V2UMpOj5JnzjtVfXxS","Particle");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("GameGlobaled"),f=r("EventHelper"),d=cc._decorator,y=d.ccclass,h=(d.property,d.requireComponent),m=d.menu,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.particle=null,e.data=null,e.lifeScale=1,e.speed=1,e}return l(e,t),e.prototype.play=function(){this.data||this.init(),this.setSpeed(p.default.speed),this.particle.resetSystem()},e.prototype.stop=function(){this.data||this.init(),this.particle.stopSystem()},e.prototype.cleanup=function(){this.data||this.init(),this.particle.resetSystem(),this.particle.stopSystem()},e.prototype.setSpeed=function(t){this.data||this.init(),this.speed=t,this.particle.speed=this.data.speed*t,this.particle.speedVar=this.data.speedVar*t,this.particle.life=this.data.life/t*this.lifeScale,this.particle.lifeVar=this.data.lifeVar/t*this.lifeScale,this.particle.emissionRate=this.data.emissionRate*t},e.prototype.scaleLife=function(t){this.lifeScale=t},e.prototype.onGameSpeedChange=function(t){this.setSpeed(t)},e.prototype.init=function(){this.particle=this.getComponent(cc.ParticleSystem),this.data={speed:this.particle.speed,speedVar:this.particle.speedVar,life:this.particle.life,lifeVar:this.particle.lifeVar,emissionRate:this.particle.emissionRate}},e.prototype.onEnable=function(){this.setSpeed(p.default.speed),f.default.on(s.default.GameSpeedChange,this.onGameSpeedChange,this)},e.prototype.onDisable=function(){f.default.off(s.default.GameSpeedChange,this.onGameSpeedChange,this)},e.prototype.onLoad=function(){},e.prototype.start=function(){},u([y,m("\u81ea\u5b9a\u4e49\u63a7\u4ef6/Particle \u7c92\u5b50"),h(cc.ParticleSystem)],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],PathFinder:[function(t,e,o){"use strict";cc._RF.push(e,"cb19erDwoVPXLGOZibp5+P5","PathFinder");var n=t,r=e,i=o;cc._RF.push(r,"cb19erDwoVPXLGOZibp5+P5","PathFinder"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("BoardData"),c=n("GameGlobaled"),l=n("GameDefine"),u=function(){function t(){this.directions=[{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:0}],this.boardData=null}return t.prototype.init=function(t){this.boardData=t},t.prototype.findPath=function(t,e){var o=this.findPathInternal(t,e);if(o)return{path:this.reconstructPath(o),buildingsToDestroy:[]};for(var n=this.boardData.clone();;){var r=this.findDestroyableBuildings(n);if(0===r.length)return{path:[],buildingsToDestroy:[]};for(var i=0,c=r;i<c.length;i++){var l=c[i],u=n.getCell(l.x,l.y).uid,s=this.getBuildingCells(n,u),p=s.map(function(t){return{pos:t,type:n.getCell(t.x,t.y).cellType}});s.forEach(function(t){n.getCell(t.x,t.y).cellType=a.CellType.EMPTY});var f=this.findPathWithTempBoard(t,e,n);if(f)return{path:this.reconstructPath(f),buildingsToDestroy:[l]};p.forEach(function(t){n.getCell(t.pos.x,t.pos.y).cellType=t.type})}var d=this.findBestBuildingToDestroy(r,t,e),y=n.getCell(d.x,d.y).uid;this.getBuildingCells(n,y).forEach(function(t){n.getCell(t.x,t.y).cellType=a.CellType.EMPTY})}},t.prototype.findPathInternal=function(t,e){var o=[],n=new Set,r={x:t.x,y:t.y,g:0,h:this.calculateHeuristic(t,e),f:0,parent:null};for(r.f=r.g+r.h,o.push(r);o.length>0;){var i=this.getLowestFNode(o);if(i.x===e.x&&i.y===e.y)return i;this.removeFromOpenList(o,i),n.add(this.nodeToString(i));for(var a=0,c=this.directions;a<c.length;a++){var l=c[a],u=i.x+l.x,s=i.y+l.y;if(this.isValidPosition(u,s)&&!n.has(this.nodeToString({x:u,y:s}))){var p=i.g+1,f={x:u,y:s,g:p,h:this.calculateHeuristic({x:u,y:s},e),f:0,parent:i};f.f=f.g+f.h;var d=this.findNodeInOpenList(o,f);d?p<d.g&&(d.g=p,d.f=d.g+d.h,d.parent=i):o.push(f)}}}return null},t.prototype.findPathWithTempBoard=function(t,e,o){var n=this.boardData;this.boardData=o;var r=this.findPathInternal(t,e);return this.boardData=n,r},t.prototype.findDestroyableBuildings=function(t){for(var e=[],o=new Set,n=t.basePos,r=0;r<c.default.boardSize.height;r++)for(var i=function(i){var c=t.getCell(i,r);if(c.cellType===a.CellType.TOWER&&-1!==c.uid&&!o.has(c.uid)){o.add(c.uid);var u=l.getBuildingCells(t,c.uid);if(u.length>0){var s=u[0].x,p=u[0].y;u.forEach(function(t){t.x<s&&(s=t.x),t.y<p&&(p=t.y)});var f=Math.abs(s-n.x)+Math.abs(p-n.y);e.push({x:s,y:p,distToBase:f})}}},l=this,u=0;u<c.default.boardSize.width;u++)i(u);return e.sort(function(t,e){return Math.abs(t.distToBase-e.distToBase)<=2?e.y-t.y:t.distToBase-e.distToBase}),e.map(function(t){return{x:t.x,y:t.y}})},t.prototype.getBuildingCells=function(t,e){for(var o=[],n=0;n<c.default.boardSize.height;n++)for(var r=0;r<c.default.boardSize.width;r++){var i=t.getCell(r,n);i.cellType===a.CellType.TOWER&&i.uid===e&&o.push({x:r,y:n})}return o},t.prototype.findBestBuildingToDestroy=function(t,e,o){for(var n=t[0],r=Number.MAX_VALUE,i=0,a=t;i<a.length;i++){var c=a[i],l=Math.abs(c.x-e.x)+Math.abs(c.y-e.y)+(Math.abs(c.x-o.x)+Math.abs(c.y-o.y));l<r&&(r=l,n=c)}return n},t.prototype.calculateHeuristic=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},t.prototype.getLowestFNode=function(t){for(var e=t[0],o=1;o<t.length;o++)t[o].f<e.f&&(e=t[o]);return e},t.prototype.removeFromOpenList=function(t,e){var o=t.findIndex(function(t){return t.x===e.x&&t.y===e.y});-1!==o&&t.splice(o,1)},t.prototype.findNodeInOpenList=function(t,e){return t.find(function(t){return t.x===e.x&&t.y===e.y})},t.prototype.isValidPosition=function(t,e){if(t<0||t>=c.default.boardSize.width||e<0||e>=c.default.boardSize.height)return!1;var o=this.boardData.getCell(t,e);return o.cellType!==a.CellType.OBSTACLE&&(o.cellType!==a.CellType.TOWER||o.id===l.TowerId.BASE)},t.prototype.nodeToString=function(t){return t.x+","+t.y},t.prototype.reconstructPath=function(t){for(var e=[],o=t;null!==o;){var n={x:o.x,y:o.y},r=this.boardData.getCell(n.x,n.y);r.cellType===a.CellType.TOWER&&(n.buildingToDestroy=r.id.toString()),e.unshift(n),o=o.parent}return e},t}();i.default=u,cc._RF.pop(),cc._RF.pop()},{}],PathLenghtRender:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c0e91pKk/lPboo9nDZRC8FL","PathLenghtRender");var r=t,i=e,a=o;cc._RF.push(i,"c0e91pKk/lPboo9nDZRC8FL","PathLenghtRender");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("EventHelper"),f=cc._decorator,d=f.ccclass,y=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stepLabel=null,e.isActive=!1,e}return l(e,t),e.prototype.setNode=function(t,e,o,n){this.isActive=n,this.stepLabel.string=t.toString(),this.node.x=e,this.node.y=o+this.node.height,this.node.active=n},e.prototype.setActive=function(t){this.node.active=!!t&&this.isActive},e.prototype.onLoad=function(){this.isActive=!1,p.default.on(s.default.SwitchPathLength,this.setActive,this)},u([y({type:cc.Label,displayName:"\u6b65\u6570"})],e.prototype,"stepLabel",void 0),u([d],e)}(cc.Component);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],PathRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b5584RdbjJBSIdOxzuNKhjr","PathRenderer");var r=t,i=e,a=o;cc._RF.push(i,"b5584RdbjJBSIdOxzuNKhjr","PathRenderer");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("RunDataHelper"),p=r("SettingData"),f=r("GameGlobaled"),d=r("PathLenghtRender"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(){function t(t,e,o){this.children=[],this.parent=null,this.position=cc.v2(t,e),this.pathLength=o}return t.prototype.addChild=function(t){t.parent=this,this.children.push(t)},t.prototype.forEachChild=function(t){for(var e=0,o=this.children;e<o.length;e++){var n=o[e];t(n,this),n.forEachChild(t)}},t.prototype.findPoint=function(t,e){if(!this.position)return null;if(this.position.x==t&&this.position.y==e)return this;for(var o=0,n=this.children;o<n.length;o++){var r=n[o].findPoint(t,e);if(r)return r}return null},t.prototype.getFullPath=function(){for(var t=[],e=this;e;)t.unshift(e),e=e.parent;return t},t}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pathLenghtPrefab=null,e.pathColor=new cc.Color(0,200,255,255),e.outlineColor=new cc.Color(150,100,20,255),e.arrowSpeed=60,e.arrowSpacing=100,e.arrowSize=12,e.lineSize=6,e.outlineSize=4,e.totalProgress=0,e.rootPoint=null,e.paths=[],e.graphicsLine=null,e.graphicsArrowOutLine=null,e.graphicsArrow=null,e.isEnable=!0,e.pathLenghtList=[],e}return l(e,t),e.prototype.setPath=function(t,e){this.paths=[],this.rootPoint=null,this.isEnable=e.length<1;for(var o=[],n=0;n<t.length;n++){var r=t[n],i=this.rootPoint;this.paths.push([]);for(var a=void 0,c=void 0,l=r.length-1;l>=0;l--){if(a=f.default.boardStartPos.x+r[l].x*f.default.gridSize+f.default.gridSize/2,c=f.default.boardStartPos.y+r[l].y*f.default.gridSize+f.default.gridSize/2,0==l&&o.push(cc.v2(a,c)),this.rootPoint){var u=this.rootPoint.findPoint(a,c);u||(u=new b(a,c,i.pathLength+f.default.gridSize),i.addChild(u)),i=u}else this.rootPoint=new b(a,c,0),i=this.rootPoint;this.paths[this.paths.length-1].push(cc.v2(a,c))}}for(l=0;l<this.pathLenghtList.length;l++)s.DataHelper.getData(p.default).isOpenPath&&l<o.length?this.pathLenghtList[l].getComponent(d.default).setNode(t[l].length,o[l].x,o[l].y,!0):this.pathLenghtList[l].getComponent(d.default).setNode(0,0,0,!1);this.graphicsArrow.clear(),this.graphicsArrowOutLine.clear(),this.graphicsLine.clear(),this.drawLine(this.graphicsLine,this.outlineColor,this.lineSize+this.outlineSize),this.drawLine(this.graphicsLine,this.isEnable?this.pathColor:cc.Color.RED,this.lineSize)},e.prototype.drawLine=function(t,e,o){t.strokeColor=e,t.lineWidth=o,t.lineJoin=cc.Graphics.LineJoin.ROUND;for(var n=0;n<this.paths.length;n++){for(var r=0;r<this.paths[n].length;r++)0===r?t.moveTo(this.paths[n][r].x,this.paths[n][r].y):t.lineTo(this.paths[n][r].x,this.paths[n][r].y);var i=this.paths[n];i.length>0&&(t.circle(i[i.length-1].x,i[i.length-1].y,.4*o),t.circle(i[0].x,i[0].y,.55*o))}this.rootPoint,t.stroke()},e.prototype.drawArrow=function(t,e,o){var n=this;void 0===o&&(o=0),t.fillColor=t.strokeColor=e;var r=function(e,r,i){var a=n.arrowSize+2*o,c=e+a*Math.cos(i)*.4,l=r+a*Math.sin(i)*.4,u=a-.8*n.lineSize,s=.8*Math.PI;t.moveTo(c+(a-u)*Math.cos(i-s),l+(a-u)*Math.sin(i-s)),t.lineTo(c+(a-u)*Math.cos(i+s),l+(a-u)*Math.sin(i+s)),t.lineTo(c+a*Math.cos(i+s),l+a*Math.sin(i+s)),t.lineTo(c+a*Math.cos(i-s),l+a*Math.sin(i-s))};(function e(i,a){void 0===a&&(a=0);var c=a;if(i.parent){var l=i.position.sub(i.parent.position);c=l.mag();var u=Math.atan2(-l.y,-l.x),s=l.normalize(),p=i.parent.position.add(s.mul(a));for(c-=a;c>0;)r(p.x-s.x*o*.5,p.y-s.y*o*.5,u),t.fill(),p=p.add(s.mul(n.arrowSpacing)),c-=n.arrowSpacing}for(var f=0;f<i.children.length;f++)e(i.children[f],-c)})(this.rootPoint,this.totalProgress-this.arrowSpacing)},e.prototype.onLoad=function(){var t=new cc.Node("ArrowOutline");t.parent=this.node,this.graphicsArrowOutLine=t.addComponent(cc.Graphics),(t=new cc.Node("Line")).parent=this.node,this.graphicsLine=t.addComponent(cc.Graphics),(t=new cc.Node("Arrow")).parent=this.node,this.graphicsArrow=t.addComponent(cc.Graphics);for(var e=0;e<10;e++){var o=cc.instantiate(this.pathLenghtPrefab);o.zIndex=10,o.parent=this.node,o.active=!1,this.pathLenghtList.push(o)}},e.prototype.update=function(t){this.rootPoint&&(this.totalProgress=(this.totalProgress+this.arrowSpeed*t)%this.arrowSpacing,this.graphicsArrowOutLine&&(this.graphicsArrowOutLine.clear(),this.drawArrow(this.graphicsArrowOutLine,this.outlineColor,this.outlineSize)),this.graphicsArrow&&(this.graphicsArrow.clear(),this.drawArrow(this.graphicsArrow,this.isEnable?this.pathColor:cc.Color.RED)))},u([m({type:cc.Prefab,displayName:"\u8def\u5f84\u957f\u5ea6\u9884\u5236\u4f53"})],e.prototype,"pathLenghtPrefab",void 0),u([m({displayName:"\u8def\u5f84\u989c\u8272"})],e.prototype,"pathColor",void 0),u([h],e)}(cc.Component);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],PauseFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7095ag1c6JCsp22zF1JA/B2","PauseFrame");var r=t,i=e,a=o;cc._RF.push(i,"7095ag1c6JCsp22zF1JA/B2","PauseFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Load"),d=r("TrackHelper"),y=r("GameGlobaled"),h=r("FrameHelper"),m=r("PlatformHelper"),b=r("RunDataHelper"),v=r("GameData"),g=r("GuideData"),_=r("MainFrame"),w=r("SetFrame"),S=r("GameFrame"),R=r("RankPanel"),O=r("SecondConfirmFrame"),P=cc._decorator,F=P.ccclass,T=P.menu,D=P.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnHome=null,e.rankPanel=null,e.nodeNone=null,e}return l(e,t),e.prototype.onBtnHome=function(){var t=b.DataHelper.getData(v.default),e=0,o=0;if(t.isAnyData&&(e=t.stage,o=t.roundIndex),d.default.trackEventBattleCancel(e,o),cc.sys.WECHAT_GAME===cc.sys.platform&&f.GameCannel===f.CannelType.Play800){var n=h.default.getFrame(S.default);m.PlatformHelper.platform.p8BattleCancel(n.gameStage.levelId,n.gameStage.roundIndex)}h.default.showFrame(O.default,"\u6295\u964d\u5e76\u9000\u51fa\u6e38\u620f\u5c06\u4e0d\u4f1a\u83b7\u5f97\u5956\u52b1\u54e6\uff0c\u4f60\u786e\u5b9a\u5417\uff1f",this.onSecondConfirm.bind(this))},e.prototype.onSecondConfirm=function(){var t=this;b.DataHelper.getData(v.default).cleanup(),h.default.showFrame(_.default).then(function(){h.default.hideFrame(S.default),t.hideFrame()})},e.prototype.onBtnSetting=function(){h.default.showFrame(w.default)},e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){return p(this,function(){return this.rankPanel.node.active=t.damageInfos.length>0,this.nodeNone.active=t.damageInfos.length<1,this.rankPanel.refresh(t),[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return y.default.isStop=!0,this.btnHome.interactable=b.DataHelper.getData(g.default).isFinished,[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return y.default.isStop=!1,[2]})})},e.prototype.start=function(){},e.frameInfo={name:"PauseFrame",type:h.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/PauseFrame",zIndex:11},u([D({type:cc.Button,displayName:"\u9000\u51fa\u6309\u94ae"})],e.prototype,"btnHome",void 0),u([D({type:R.default,displayName:"\u6392\u884c"})],e.prototype,"rankPanel",void 0),u([D({type:cc.Node,displayName:"\u7a7a\u63d0\u793a"})],e.prototype,"nodeNone",void 0),u([F,T("\u754c\u9762/PauseFrame \u6682\u505c\u754c\u9762")],e)}(h.FrameBase);a.default=k,cc._RF.pop(),cc._RF.pop()},{}],PlatformHelper:[function(t,e,o){"use strict";cc._RF.push(e,"8fdf0zLTn9PSal1usNkQN1a","PlatformHelper");var n=t,r=e,i=o;cc._RF.push(r,"8fdf0zLTn9PSal1usNkQN1a","PlatformHelper"),Object.defineProperty(i,"__esModule",{value:!0}),i.PlatformHelper=i.Platform=void 0;var a=n("TrackHelper"),c=n("DailyTaskData"),l=n("GameData"),u=n("SettingData"),s=n("RunDataHelper"),p=function(){function t(){this.isRecording=!1}return t.prototype.getPlatformName=function(){return"unknown"},t.prototype.init=function(){return this},t.prototype.login=function(){return new Promise(function(t){t("")})},t.prototype.showToast=function(t){cc.log(t)},t.prototype.showLoading=function(){},t.prototype.hideLoading=function(){},t.prototype.videoShare=function(t){this.showToast("\u89c6\u9891\u5206\u4eab"),t&&t()},t.prototype.startRecord=function(t){this.showToast("\u5f00\u59cb\u5f55\u5236"),t&&t()},t.prototype.stopRecord=function(t){this.showToast("\u7ed3\u675f\u5f55\u5236"),t&&t()},t.prototype.isSuccessRecord=function(){return!1},t.prototype.share=function(t){this.showToast("\u5206\u4eab"),t&&t()},t.prototype.shareToFriend=function(t){this.showToast("\u79c1\u4fe1\u5206\u4eab\u5230\u670b\u53cb"),t&&t()},t.prototype.video=function(t){this.showToast("\u89c6\u9891"),t&&t("")},t.prototype.bannerShow=function(){this.showToast("\u663e\u793aBanner")},t.prototype.bannerHide=function(){this.showToast("\u9690\u85cfBanner")},t.prototype.interstitialShow=function(){this.showToast("\u663e\u793a\u63d2\u5c4f\u5e7f\u544a")},t.prototype.shake=function(){this.showToast("\u9707\u52a8")},t.prototype.shakeLong=function(){this.showToast("\u9707\u52a8")},t.prototype.isDebug=function(){return!0},t.prototype.byteDanceOnShow=function(t){t&&t()},t.prototype.checkScene=function(t){t&&t()},t.prototype.navigateToScene=function(t){t&&t()},t.prototype.addToDesktop=function(t){t&&t()},t.prototype.requestSubscribeMessage=function(t,e){e&&e()},t.prototype.getRank=function(){},t.prototype.setOpendId=function(){},t.prototype.postScore=function(){},t}();i.Platform=p;var f=function(){function t(){}return t.setPlatform=function(t){this.platform=new t},t.init=function(){this.platform.init()},t.getPlatformName=function(){return this.platform.getPlatformName()},t.login=function(){return this.platform.login()},t.isRecording=function(){return this.platform.isRecording},t.startRecord=function(t){this.platform.startRecord(t)},t.stopRecord=function(t){this.platform.stopRecord(t)},t.isSuccessRecord=function(){return this.platform.isSuccessRecord()},t.videoShare=function(t){this.platform.videoShare(t)},t.share=function(t){this.platform.share(t)},t.shareToFriend=function(t){console.log("shareToFriend1"),this.platform.shareToFriend(t)},t.video=function(t,e,o){void 0===o&&(o=null),this.platform.video(function(o){s.DataHelper.getData(c.default).addTaskProgress(c.TaskType.WatchAd);var n=s.DataHelper.getData(l.default),r=0,i=0;n.isAnyData&&(r=n.stage,i=n.roundIndex),a.default.trackEventVideo(t,r,i),console.log("\u89c6\u9891\u5e7f\u544a\u6210\u529f"+o),e()},function(t){console.log("\u89c6\u9891\u5e7f\u544a\u5931\u8d25"+t),o&&o()})},t.bannerShow=function(t){void 0===t&&(t=0),this.platform.bannerShow(t)},t.bannerHide=function(t){void 0===t&&(t=0),this.platform.bannerHide(t)},t.showToast=function(t,e){void 0===e&&(e="success"),this.platform.showToast(t)},t.showLoading=function(t){this.platform.showLoading(t)},t.hideLoading=function(){this.platform.hideLoading()},t.interstitialShow=function(t){void 0===t&&(t=0),this.platform.interstitialShow(t)},t.shake=function(){s.DataHelper.getData(u.default).isOpenShake&&this.platform.shake()},t.isDebug=function(){return this.platform.isDebug()},t.byteDanceOnShow=function(t){this.platform.byteDanceOnShow(t)},t.checkScene=function(t){this.platform.checkScene(t)},t.navigateToScene=function(t){this.platform.navigateToScene(t)},t.addToDesktop=function(t){this.platform.addToDesktop(t)},t.requestSubscribeMessage=function(t,e){this.platform.requestSubscribeMessage(t,e)},t.getRank=function(){this.platform.getRank()},t.setOpendId=function(){this.platform.setOpendId()},t.postScore=function(t,e){var o=t+"_"+e;this.platform.postScore(o)},t.platform=(new p).init(),t.openId="",t}();i.PlatformHelper=f,cc._RF.pop(),cc._RF.pop()},{}],PoisonTower:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"975d7z3h4FNdJO0y7oBfBQn","PoisonTower");var r=t,i=e,a=o;cc._RF.push(i,"975d7z3h4FNdJO0y7oBfBQn","PoisonTower");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.PoisonTower=void 0;var s=r("ChessRenderer"),p=r("Tower"),f=cc._decorator,d=f.ccclass,y=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.attack=function(){this.renderer.setAnimation(s.AnimationNames.Attack,1)},e.prototype.onAttackComplete=function(){},e.prototype.attackStop=function(){},u([d],e)}(p.default));a.PoisonTower=y,cc._RF.pop(),cc._RF.pop()},{}],PoolNode:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"89e79PklMRIWYatBf1z9APM","PoolNode");var r=e,i=o;cc._RF.push(r,"89e79PklMRIWYatBf1z9APM","PoolNode");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.reuse=function(){},e.prototype.unuse=function(){},e.prototype.start=function(){},l([s],e)}(cc.Component));i.default=p,cc._RF.pop(),cc._RF.pop()},{}],Pool:[function(t,e,o){"use strict";cc._RF.push(e,"70f6aZwA/JMi4PKMY7qnAjs","Pool");var n=e,r=o;cc._RF.push(n,"70f6aZwA/JMi4PKMY7qnAjs","Pool"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){},cc._RF.pop(),cc._RF.pop()},{}],PowerData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"eea05D2ynhCUqGUYGQWCvlp","PowerData");var r=t,i=e,a=o;cc._RF.push(i,"eea05D2ynhCUqGUYGQWCvlp","PowerData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("RunDataHelper"),p=r("TimeUtil"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultData=function(){return{lastTimestamp:0,powerSave:30}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"PowerData"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var t=this.data.powerSave;return this.data.lastTimestamp>0&&t<30&&(t=Math.min(t+Math.floor((p.default.getTime()-this.data.lastTimestamp)/12e5),30)),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"powerMax",{get:function(){return 30},enumerable:!1,configurable:!0}),e.prototype.getTimeStr=function(){if(this.power>=30)return"";var t=p.default.getTime()-this.data.lastTimestamp,e=Math.ceil(Math.max((12e5-t%12e5)/1e3,0));return e<=0?"":p.default.convertSecondToString(e)},e.prototype.subPower=function(t){return void 0===t&&(t=1),this.calculatePower(),this.data.powerSave>=30&&this.data.powerSave-t<30&&(this.data.lastTimestamp=p.default.getTime()),this.data.powerSave=Math.max(0,this.data.powerSave-t),this.data.powerSave},e.prototype.addPower=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),e||this.calculatePower(),this.data.powerSave=this.data.powerSave+t,e&&(this.data.powerSave=Math.min(30,this.data.powerSave)),this.data.powerSave},e.prototype.calculatePower=function(){if(!(this.data.powerSave>=30)){var t=Math.floor((p.default.getTime()-this.data.lastTimestamp)/12e5);t>0&&(this.addPower(t,!0),this.data.powerSave>=30?this.data.lastTimestamp=p.default.getTime():this.data.lastTimestamp+=12e5*t)}},e.prototype.onUpdate=function(){p.default.getTime()-this.data.lastTimestamp>12e5&&this.calculatePower()},u([s.DirtyData],e.prototype,"subPower",null),u([s.DirtyData],e.prototype,"addPower",null),e}(s.RunDataBase);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],RankPanel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ca2e4G06FtEZJui1/VSKQBl","RankPanel");var r=t,i=e,a=o;cc._RF.push(i,"ca2e4G06FtEZJui1/VSKQBl","RankPanel");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("LayoutList"),p=r("sdbTower"),f=r("AssetBundleHelper"),d=r("StaticDBHelper"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutList=null,e.data=[],e.totalDamage=0,e.damageRank=null,e}return l(e,t),e.prototype.onTime=function(){this.node.activeInHierarchy&&this.damageRank&&this.refresh(this.damageRank)},e.prototype.refresh=function(t){this.damageRank=t,this.data=t.damageInfos,this.totalDamage=0;for(var e=0;e<this.data.length;e++)this.totalDamage+=this.data[e].realDamage;return this.layoutList.createItemsByLength(this.data.length),this.data.length},e.prototype.onItemCreate=function(t,e){var o,n=t.getChildByName("Pro").getComponent(cc.ProgressBar),r=t.getChildByName("Name").getComponent(cc.Label),i=t.getChildByName("Val").getComponent(cc.Label),a=t.getChildByName("ValPro").getComponent(cc.Label),c=t.getChildByName("Icon").getComponent(cc.Sprite),l=this.data[e];i.string=l.realDamage.toFixed(0);var u=(null===(o=this.data[0])||void 0===o?void 0:o.realDamage)||1,s=Math.min(1,Math.max(0,u>0?l.realDamage/u:0));n.progress=s;var y=d.default.getData(p.default,l.buildingType);r.string=y.name;var h=this.totalDamage>0?l.realDamage/this.totalDamage*100:0;a.string=h.toFixed(1)+"%",f.default.setSpriteFrame(c,y.icon).then(function(){})},e.prototype.onLoad=function(){this.layoutList.onItemCreate(this.onItemCreate.bind(this)),this.schedule(this.onTime.bind(this),1)},e.prototype.start=function(){},u([m({type:s.default,displayName:"\u5217\u8868"})],e.prototype,"layoutList",void 0),u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],Red:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"10685OoTxFMU4FhFRAUiTql","Red");var r=t,i=e,a=o;cc._RF.push(i,"10685OoTxFMU4FhFRAUiTql","Red");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("GameDefine"),f=r("sdbTowerLevel"),d=r("EventHelper"),y=r("RunDataHelper"),h=r("StaticDBHelper"),m=r("BagData"),b=r("DailyData"),v=r("DailyTaskData"),g=r("StageData"),_=r("SweepData"),w=r("TowerData"),S=cc._decorator,R=S.ccclass,O=S.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redType="",e}return l(e,t),e.prototype.refreshMainRed=function(t){if(this.redType==t){var e=!1;switch(t){case"shop":e=y.DataHelper.getData(b.default).isShopRed&&y.DataHelper.getData(g.default).isUnlockSystem(g.SysyemName.Shop);break;case"hero":var o=y.DataHelper.getData(w.default).getTowerLevel(p.default.HeroTowerId),n=h.default.filterData(f.default,{towerId:p.default.HeroTowerId,level:o})[0].card;e=y.DataHelper.getData(m.default).getItemCount(p.default.ItemHeroGemId)>=n&&y.DataHelper.getData(g.default).isUnlockSystem(g.SysyemName.HeroLevelup);break;case"battle":e=y.DataHelper.getData(g.default).getEnableRewardList().length>0;break;case"tower":for(var r=y.DataHelper.getData(m.default).getItemCount(p.default.ItemCoinId),i=[101,102,103,104,105,106,107,108,109,110],a=0;a<i.length;a++){var c=y.DataHelper.getData(w.default).getTowerLevel(i[a]);if(c){var l=h.default.filterData(f.default,{towerId:i[a],level:c})[0];if(l&&r>=l.coin&&y.DataHelper.getData(m.default).getItemCount(i[a])>=l.card){e=!0;break}}}break;case"sweep":e=Math.floor(y.DataHelper.getData(_.default).getIdleTimeSecond/3600)>=1;break;case"dailyTask":e=y.DataHelper.getData(v.default).isDailyTaskRed}this.node.active=e}},e.prototype.onLoad=function(){d.default.on(s.default.refreshMainRed,this.refreshMainRed,this),this.refreshMainRed(this.redType)},u([O({displayName:"\u7ea2\u70b9\u7c7b\u578b"})],e.prototype,"redType",void 0),u([R],e)}(cc.Component);a.default=P,cc._RF.pop(),cc._RF.pop()},{}],RenderUtil:[function(t,e,o){"use strict";cc._RF.push(e,"8b375vq1mVBH4rR1tt+v+id","RenderUtil");var n=e,r=o;cc._RF.push(n,"8b375vq1mVBH4rR1tt+v+id","RenderUtil"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.getRenderTexture=function(t,e){if(void 0===e&&(e=-1),!cc.isValid(t))return null;var o=new cc.RenderTexture,n=Math.floor(t.width),r=Math.floor(t.height);o.initWithSize(n,r,36168);var i=new cc.Node;i.parent=t;var a=i.addComponent(cc.Camera);return a.clearFlags|=cc.Camera.ClearFlags.COLOR,e>-1&&(a.cullingMask=e),a.backgroundColor=cc.color(0,0,0,0),a.zoomRatio=cc.winSize.height/r,a.targetTexture=o,a.render(t),i.destroy(),o},t.renderWithMaterial=function(t,e,o){e instanceof cc.Material&&(o=e,e=new cc.RenderTexture);var n=new cc.Node;n.setParent(cc.Canvas.instance.node);var r=n.addComponent(cc.Sprite);r.sizeMode=cc.Sprite.SizeMode.RAW,r.trim=!1,r.spriteFrame=new cc.SpriteFrame(t);var i=t.width,a=t.height;e.initWithSize(i,a),o instanceof cc.Material&&r.setMaterial(0,o);var c=new cc.Node;c.setParent(n);var l=c.addComponent(cc.Camera);return l.clearFlags|=cc.Camera.ClearFlags.COLOR,l.backgroundColor=cc.color(0,0,0,0),l.zoomRatio=cc.winSize.height/a,l.targetTexture=e,l.render(n),c.destroy(),n.destroy(),e},t.getScaleToRoot=function(t){for(var e=cc.Canvas.instance.node,o=cc.v2(1,1),n=t;n!==e;)o.x*=n.scaleX,o.y*=n.scaleY,n=n.parent;return o},t.getPixelsData=function(t,e){if(void 0===e&&(e=!0),!cc.isValid(t))return null;var o=Math.floor(t.width),n=Math.floor(t.height),r=new cc.Node;r.parent=t;var i=r.addComponent(cc.Camera);i.clearFlags|=cc.Camera.ClearFlags.COLOR,i.backgroundColor=cc.color(0,0,0,0),i.zoomRatio=cc.winSize.height/n;var a=new cc.RenderTexture;a.initWithSize(o,n,cc.game._renderContext.STENCIL_INDEX8),i.targetTexture=a,i.render(t);var c=a.readPixels();if(a.destroy(),r.destroy(),e){for(var l=c.length,u=4*o,s=new Uint8Array(l),p=0,f=l-u;p<l;p+=u,f-=u)for(var d=0;d<u;d++)s[p+d]=c[f+d];return s}return c},t.flipY=function(t,e){for(var o=t.length,n=new Uint8Array(o),r=0,i=o-e;r<o;r+=e,i-=e)for(var a=0;a<e;a++)n[r+a]=t[i+a];return n},t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],RendererManager:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5ea57BWvLlGSJhX1Ne+djrV","RendererManager");var r=t,i=e,a=o;cc._RF.push(i,"5ea57BWvLlGSJhX1Ne+djrV","RendererManager");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Factory"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeStage=null,e.nodeBullet=null,e.nodeDamage=null,e.nodeArea=null,e.nodeMarker=null,e.prefabDestoryMarker=null,e.rendererList=[],e.destoryMarkers=[],e}var o;return l(e,t),o=e,Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.registerRenderer=function(t){t&&this.rendererList.push(t)},e.prototype.unregisterRenderer=function(t){var e=this.rendererList.indexOf(t);-1!==e&&this.rendererList.splice(e,1)},e.prototype.createDestroyMarker=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(o){switch(o.label){case 0:return[4,f.default.instance.create(this.prefabDestoryMarker)];case 1:return(e=o.sent()).parent=this.nodeMarker,e.position=this.nodeMarker.convertToNodeSpaceAR(t),e.active=!0,this.destoryMarkers.push(e),[2]}})})},e.prototype.showDestroyMarkers=function(){this.destoryMarkers.forEach(function(t){return t.active=!0})},e.prototype.hideDestroyMarkers=function(){this.destoryMarkers.forEach(function(t){return t.active=!1})},e.prototype.clearupDestroyMarkers=function(){this.destoryMarkers.forEach(function(t){return t.destroy()}),this.destoryMarkers=[]},e.prototype.logicUpdate=function(t){this.rendererList.forEach(function(e){e.logicUpdate(t),e.node.zIndex=.5*cc.macro.MAX_ZINDEX-Math.round(e.node.position.y/10)})},e.prototype.onLoad=function(){o._instance=this},e.prototype.start=function(){},e._instance=null,u([h({type:cc.Node,displayName:"\u573a\u666f\u8282\u70b9"})],e.prototype,"nodeStage",void 0),u([h({type:cc.Node,displayName:"\u5b50\u5f39\u8282\u70b9"})],e.prototype,"nodeBullet",void 0),u([h({type:cc.Node,displayName:"\u4f24\u5bb3\u8282\u70b9"})],e.prototype,"nodeDamage",void 0),u([h({type:cc.Node,displayName:"\u4f24\u5bb3\u533a\u57df"})],e.prototype,"nodeArea",void 0),u([h({type:cc.Node,displayName:"\u6807\u8bc6\u8282\u70b9"})],e.prototype,"nodeMarker",void 0),u([h({type:cc.Prefab,displayName:"\u62c6\u9664\u9884\u5236\u4f53"})],e.prototype,"prefabDestoryMarker",void 0),o=u([y],e)}(cc.Component);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],ReportQueue:[function(t,e,o){"use strict";cc._RF.push(e,"c54cc6E3HFGNqKsHWYWZzA2","ReportQueue");var n=t,r=e,i=o;cc._RF.push(r,"9eca2Cmw3JLuYlp+n8N98Vq","ReportQueue"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("LocalStorage"),c=new(function(){function t(){this._list=[],this._storageKey="sdk_report_list";var t=a.default.getItem(this._storageKey);this._list=t?JSON.parse(t):[]}return t.prototype.push=function(t){var e=this._list.push(t);return this.refeshStorage(),e},t.prototype.pop=function(){var t=this._list.shift();return this.refeshStorage(),t},t.prototype.range=function(t,e){var o=this._list.splice(t,e);return this.refeshStorage(),o},t.prototype.refeshStorage=function(){var t=JSON.stringify(this._list);return a.default.setItem(this._storageKey,t)},t.prototype.len=function(){return this._list.length},t.prototype.getList=function(){return this._list},t}());i.default=c,cc._RF.pop(),cc._RF.pop()},{}],Report:[function(t,e,o){"use strict";cc._RF.push(e,"3c164bmVrJP1YmvvQ4GAGPH","Report");var n=t,r=e,i=o;cc._RF.push(r,"67847rDLClFlJpZK/65dT0I","Report"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("Api"),c=n("function"),l=n("TimeManage"),u=n("config"),s=function(){function t(){}return t.prototype.click=function(){if(window.params.getShowParams("w_cid")||window.params.getShowParams("clickid")){var t={yw_track_channel:"tt_ttmn",yw_app_name:window.params.getGameParams("app_name"),yw_channel:window.params.getGameParams("channel"),yw_version:window.params.getGameParams("version"),yw_opi:window.params.getUserParams("openid")};t=Object.assign(t,window.params.getShowParams()),window.Logger.info("## \u4e0a\u62a5\u76d1\u6d4b\u6570\u636e",t),a.click(t,function(t){window.Logger.info("## \u4e0a\u62a5\u76d1\u6d4b\u6570\u636e\u5b8c\u6210",t)},function(t){window.Logger.error("## \u76d1\u6d4b\u6570\u636e\u4e0a\u62a5\u5931\u8d25;",t)},function(){})}},t.prototype.active=function(){c.getServerTime(function(t){var e=[{d_type:"u_op",t:c.getClientTime(),act:"active",wds:"\u6fc0\u6d3b",clickid:window.params.getShowParams("clickid")}],o={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(e),b_t:t.data.data.time};o=c.getSign(o),window.Logger.info("## \u4e0a\u62a5\u6fc0\u6d3b",o),a.report(o,function(){},function(t){window.Logger.error("## \u6fc0\u6d3b\u4e0a\u62a5\u5931\u8d25;",t)},function(){})})},t.prototype.online=function(){var t=l.default.getEndClientTime(),e=l.default.getOnlineTime();l.default.removeStartClientTime(),l.default.removeEndClientTime(),c.getServerTime(function(o){var n=[{d_type:"u_op",t:t,act:"time",wds:"\u65f6\u957f",tab1:e,clickid:window.params.getShowParams("clickid")}],r={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(n),b_t:o.data.data.time};r=c.getSign(r),window.Logger.info("## \u4e0a\u62a5\u5728\u7ebf\u65f6\u957f",r),a.report(r,function(){},function(t){window.Logger.error("## \u5728\u7ebf\u65f6\u957f\u4e0a\u62a5\u5931\u8d25;",t)},function(){})})},t.prototype.userInfo=function(){c.getServerTime(function(t){var e=[{d_type:"u",platform:"tt_minigame",t:c.getClientTime(),clickid:window.params.getShowParams("clickid"),requestid:window.params.getShowParams("requestid"),os:window.params.getShowParams("os"),imei:window.params.getShowParams("imei"),android_id:window.params.getShowParams("android_id"),mac:window.params.getShowParams("mac"),idfa:window.params.getShowParams("idfa"),idfa_md5:window.params.getShowParams("idfa_md5"),d_m:window.params.getShowParams("d_m"),idfv:window.params.getShowParams("idfv"),oaid:window.params.getShowParams("oaid")}],o={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(e),b_t:t.data.data.time};o=c.getSign(o),window.Logger.info("## \u4e0a\u62a5\u7528\u6237\u4fe1\u606f",o),a.report(o,function(t){window.Logger.info("## \u4e0a\u62a5\u7528\u6237\u4fe1\u606f\u6210\u529f;",t)},function(t){window.Logger.error("## \u4e0a\u62a5\u7528\u6237\u4fe1\u606f\u5931\u8d25;",t)},function(){})})},t.prototype.adRequest=function(t){var e={d_type:"ad_ac",t:c.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_request",wds:"\u5e7f\u544a\u8bf7\u6c42",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adFill=function(t){var e={d_type:"ad_ac",t:c.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_fill",wds:"\u5e7f\u544a\u586b\u5145",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adClick=function(t){var e={d_type:"ad_ac",t:c.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_click",wds:"\u5e7f\u544a\u89e6\u53d1",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adImpression=function(t){var e={d_type:"ad_ac",t:c.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_impression",wds:"\u5e7f\u544a\u5c55\u793a",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adImpressionDone=function(t){var e={d_type:"ad_ac",t:c.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_impression_done",wds:"\u5e7f\u544a\u64ad\u653e\u5b8c\u6210",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.other=function(t,e){var o={d_type:"u_op",t:c.getClientTime(),clickid:window.params.getShowParams("clickid"),act:t,wds:e};window.reportQueue.push(o),this.checkReportQueue()},t.prototype.checkReportQueue=function(t){var e=this;void 0===t&&(t=!0),t&&!l.default.getFirstReportServerTime()&&(l.default.setFirstReportServerTime(),l.default.setFirstReportClientTime()),window.Logger.info("## \u5f53\u524d\u4e8b\u4ef6\u961f\u5217\u60c5\u51b5;","\u4e8b\u4ef6\u961f\u5217\u603b\u6570\uff08"+window.reportQueue.len()+"\uff09\uff08\u9650\u5236\u6570\u4e3a\uff1a"+u.LIMIT_REPORT_COUNT+"\uff09","\u8ddd\u79bb\u9996\u4e2a\u4e8b\u4ef6\u65f6\u957f\uff08"+(c.getClientTime()-l.default.getFirstReportClientTime())+"\uff09\uff08\u9650\u5236\u65f6\u957f\u4e3a\uff1a"+u.LIMIT_REPORT_INTERVAL+"\uff09",l.default.getFirstReportClientTime(),window.reportQueue.len()>=u.LIMIT_REPORT_COUNT||l.default.getFirstReportClientTime()&&c.getClientTime()-l.default.getFirstReportClientTime()>=u.LIMIT_REPORT_INTERVAL),window.reportQueue.len()>0&&(window.reportQueue.len()>=u.LIMIT_REPORT_COUNT||l.default.getFirstReportClientTime()&&c.getClientTime()-l.default.getFirstReportClientTime()>=u.LIMIT_REPORT_INTERVAL)&&setTimeout(function(){e.reportQueue()},500)},t.prototype.reportQueue=function(t){if(void 0===t&&(t=0),!(Object.keys(window.params.getGameParams()).length<=0)&&window.params.getUserParams("openid")){var e=window.reportQueue.range(0,0===t?window.reportQueue.len():t),o={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(e),b_t:l.default.getFirstReportServerTime()};l.default.removeFirstReportServerTime(),l.default.removeFirstReportClientTime(),o=c.getSign(o),window.Logger.info("## \u4e0a\u62a5\u4e8b\u4ef6\u961f\u5217",o,e),a.report(o,function(){},function(t){window.Logger.error("## \u4e8b\u4ef6\u961f\u5217\u4e0a\u62a5\u5931\u8d25;",t)},function(){})}},t}();i.default=new s,cc._RF.pop(),cc._RF.pop()},{}],Request:[function(t,e,o){"use strict";cc._RF.push(e,"0d736DyR0hCDoTpTm0lyEC2","Request");var n=e,r=o;cc._RF.push(n,"078d8Iw5ppEgqVv29K4Ck07","Request"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.get=function(t){if(window.tt)return t.method="GET",t.header={"content-type":"application/x-www-form-urlencoded"},window.wxapi.request(t)},t.post=function(t){if(window.tt)return t.method="POST",t.header={"content-type":"application/x-www-form-urlencoded"},window.wxapi.request(t)},t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],ReviveFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"1865aQvRihC4IegpbV6g7Tw","ReviveFrame");var r=t,i=e,a=o;cc._RF.push(i,"1865aQvRihC4IegpbV6g7Tw","ReviveFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("EventConfig"),d=r("EventHelper"),y=r("FrameHelper"),h=r("PlatformHelper"),m=cc._decorator,b=m.ccclass,v=m.menu,g=m.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pbTime=null,e.lbTime=null,e.timeMax=10,e.time=0,e.onRevive=null,e.isPlaying=!1,e}return l(e,t),e.prototype.onBtnClose=function(){d.default.emit(f.default.LevelFail),this.hideFrame()},e.prototype.onBtnRevive=function(){var t=this;this.isPlaying=!1,h.PlatformHelper.video("Revive",function(){t.onRevive&&t.onRevive(),t.hideFrame()},function(){t.isPlaying=!0})},e.prototype.refreshTime=function(){this.lbTime.string=Math.ceil(this.time).toString(),this.pbTime.progress=1-this.time/this.timeMax},e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){return p(this,function(){return this.time=this.timeMax,this.onRevive=t,this.refreshTime(),[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return t.prototype.onShow.call(this),this.isPlaying=!0,[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return t.prototype.onHide.call(this),this.time=this.timeMax,[2]})})},e.prototype.start=function(){},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.time=this.timeMax},e.prototype.update=function(t){this.isPlaying&&(this.time-=t,this.refreshTime(),this.time<=0&&(this.isPlaying=!1,d.default.emit(f.default.LevelFail),this.hideFrame()))},e.frameInfo={name:"ReviveFrame",type:y.FrameType.Model,bundleName:"Root",prefabName:"Prefab/Frame/ReviveFrame",zIndex:11},u([g({type:cc.ProgressBar,displayName:"\u8fdb\u5ea6\u6761"})],e.prototype,"pbTime",void 0),u([g({type:cc.Label,displayName:"\u6570\u503c"})],e.prototype,"lbTime",void 0),u([b,v("\u754c\u9762/ReviveFrame \u590d\u6d3b\u754c\u9762")],e)}(y.FrameBase);a.default=_,cc._RF.pop(),cc._RF.pop()},{}],RichTextUtil:[function(t,e,o){"use strict";cc._RF.push(e,"985febXDdFMeoC3DauQQ6EG","RichTextUtil");var n=t,r=e,i=o;cc._RF.push(r,"985febXDdFMeoC3DauQQ6EG","RichTextUtil");var a=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},c=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=n("AssetBundleHelper"),u=n("StaticDBHelper"),s=function(){function t(){}return t.init=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return t=this,[4,l.default.getAsset(cc.SpriteAtlas,"Resources/AutoAtlas")];case 1:return t.sa=e.sent(),[2]}})})},t.initGradeLabel=function(t,e){switch(e){case 2:t.string="\u975e\u51e1",t.node.color=cc.color(51,51,255);break;case 3:t.string="\u7a00\u6709",t.node.color=cc.color(255,255,51);break;case 4:t.string="\u4f20\u8bf4",t.node.color=cc.color(255,51,255);break;default:t.string="\u666e\u901a",t.node.color=cc.color(136,136,136)}},t.initSalaryLabel=function(t,e){t.string=(e>0?"+":"")+e},t.outlineBBCode=function(t,e){return void 0===e&&(e=4),"<outline color=#000000 width="+e+">"+t+"</c>"},t.charToColor=function(t){switch(t){case"r":return"ff3333";case"g":return"33ff33";case"b":return"3333ff";case"y":return"ffff33";case"v":return"ff33ff";case"w":return"888888";default:return"ffffff"}},t.colorBBCode=function(t,e){return"<color=#"+this.charToColor(e)+">"+t+"</c>"},t.imgBBCode=function(t,e){var o=e.getRect();return t.id<1e5?(o.width*=4,o.height*=4):(o.width*=2.5,o.height*=2.5),'<img src="'+t.icon+'" align=center width='+o.width+" height="+o.height+' click="onClick" param="'+t.id+'"/> '},t.addSpriteFrameToImageAtlas=function(t,e){return a(this,void 0,void 0,function(){var o,n;return c(this,function(r){switch(r.label){case 0:return t.imageAtlas||(t.imageAtlas=new cc.SpriteAtlas),t.imageAtlas._spriteFrames[e]?[3,2]:(o=t.imageAtlas._spriteFrames,n=e,[4,l.default.getAsset(cc.SpriteFrame,"Resources/Icon/"+e)]);case 1:o[n]=r.sent(),r.label=2;case 2:return[2,t.imageAtlas._spriteFrames[e]]}})})},t.initSalaryRichText=function(){return a(this,void 0,void 0,function(){return c(this,function(){return[2]})})},t.initMsg=function(t,e){return a(this,void 0,void 0,function(){return c(this,function(){return[2,this.initInfoRichText(t,e,6)]})})},t.initInfoRichText=function(t,e,o){return void 0===o&&(o=4),a(this,void 0,void 0,function(){var n,r,i,a,s,p,f=this;return c(this,function(c){switch(c.label){case 0:if(t.string="",n=(n=e).replace(/\[.*?\]/gi,function(t){return f.colorBBCode(t.slice(3,-1),t[1])}),r=[],n=n.replace(/\{.*?\}/gi,function(t){if("g"===t[1]){var e=+t.slice(3,-1),o=u.default.getTableByName("Symbol");for(var n in o)o[n].group.includes(e)&&r.push(o[n]);for(var n in o=u.default.getTableByName("Item"))o[n].group.includes(e)&&r.push(o[n])}else if("s"===t[1]){e=+t.slice(3,-1);var i=u.default.getDataByTableName("Symbol",""+e);i||(i=u.default.getDataByTableName("Item",""+e)),i?r.push(i):cc.error("RichText Icon Error : ID = "+e)}return t}),i=[],cc.sys.platform!==cc.sys.DESKTOP_BROWSER)return[3,2];for(t.imageAtlas||(t.imageAtlas=new cc.SpriteAtlas),s=0;s<r.length;s++)t.imageAtlas._spriteFrames[r[s].icon]||i.push(l.default.getAsset(cc.SpriteFrame,"Resources/Icon/"+r[s].icon));return[4,Promise.all(i)];case 1:for(a=c.sent(),s=0;s<a.length;s++)t.imageAtlas._spriteFrames[a[s].name]=a[s];return[3,5];case 2:return null!==this.sa?[3,4]:(p=this,[4,l.default.getAsset(cc.SpriteAtlas,"Resources/AutoAtlas")]);case 3:p.sa=c.sent(),c.label=4;case 4:t.imageAtlas=this.sa,c.label=5;case 5:return n=n.replace(/\{.*?\}/gi,function(e){var o="";if("g"===e[1]){var n=+e.slice(3,-1),r=u.default.getTableByName("Symbol");for(var i in r)r[i].group.includes(n)&&(o+=f.imgBBCode(r[i],t.imageAtlas._spriteFrames[r[i].icon]));for(var i in r=u.default.getTableByName("Item"))r[i].group.includes(n)&&(o+=f.imgBBCode(r[i],t.imageAtlas._spriteFrames[r[i].icon]));o=o.slice(0,-1)}else if("s"===e[1]){n=+e.slice(3,-1);var a=u.default.getDataByTableName("Symbol",""+n);a||(a=u.default.getDataByTableName("Item",""+n)),o+=f.imgBBCode(a,t.imageAtlas._spriteFrames[a.icon])}return o}),n=this.outlineBBCode(n,o),t.string=n,[2]}})})},t.sa=null,t}();i.default=s,cc._RF.pop(),cc._RF.pop()},{}],RotateMotion:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c717bMEQfNKko49F+NjKwKT","RotateMotion");var r=e,i=o;cc._RF.push(r,"c717bMEQfNKko49F+NjKwKT","RotateMotion");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rotateSpeed=360,e}return c(e,t),e.prototype.onLoad=function(){},e.prototype.update=function(t){this.node.angle+=this.rotateSpeed*t},l([p({displayName:"\u6bcf\u79d2\u65cb\u8f6c\u5ea6\u6570"})],e.prototype,"rotateSpeed",void 0),l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],RunDataHelper:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"8738f30zvlB/qpU3ECITTm3","RunDataHelper");var r=t,i=e,a=o;cc._RF.push(i,"8738f30zvlB/qpU3ECITTm3","RunDataHelper"),Object.defineProperty(a,"__esModule",{value:!0}),a.DataHelper=a.RunDataBase=a.DirtyData=void 0;var c=r("EventHelper");a.DirtyData=function(t,e,o){var n=o.value;return o.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.isDirty=!0,n.apply(this,t)},o};var l=function(){function t(t){void 0===t&&(t=null),this.data={},this._isDirty=!1,this.dataParent=null,this.data=this.defaultData(),this.loadLocalStorage(),this.dataParent=t,this.onInit()}return t.prototype.sectio=function(){throw new Error("Method not implemented.")},t.prototype.onInit=function(){},t.prototype.onUpdate=function(){},Object.defineProperty(t.prototype,"isSaveEnable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isDirty},set:function(t){this._isDirty=t,this._isDirty&&this.dataParent&&(this.dataParent.isDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.setDirtyStateRecursively=function(e){for(var o in this.isDirty=!1,this.data){var r=this.data[o];if("object"==n(r))if(r instanceof t)r.setDirtyStateRecursively(e);else if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]instanceof t&&r[i].setDirtyStateRecursively(e)}},t.prototype.getNestedData=function(){return this.data},t.prototype.toJSON=function(){return JSON.stringify(this.getNestedData())},t.prototype.initByJSON=function(t){var e=JSON.parse(t);for(var o in this.data)e.hasOwnProperty(o)||(e[o]=this.data[o]);this.data=e},t.prototype.initByObject=function(t){for(var e in t)this.data.hasOwnProperty(e)&&(this.data[e]=t[e])},t.arrayImprot=function(t,e,o){return e.map(function(e){var n=new o(t);return n.initByObject(e),n})},t.arrayExport=function(t){return t.map(function(t){return t.getNestedData()})},t.prototype.saveLocalStorage=function(){if(this.dataParent)return this.dataParent.saveLocalStorage();cc.sys.localStorage.setItem(this.localStorageKey,this.toJSON()),this.setDirtyStateRecursively(!1)},t.prototype.loadLocalStorage=function(){var t=cc.sys.localStorage.getItem(this.localStorageKey);if(!t)return this.saveLocalStorage();this.initByJSON(t)},t.prototype.cleanupLocalStorage=function(){cc.sys.localStorage.removeItem(this.localStorageKey),this.data=this.defaultData(),this.saveLocalStorage()},t}();a.RunDataBase=l;var u=function(){function t(){this.dataMap=new Map}return t.prototype.registerUpdate=function(){cc.director.getScheduler().enableForTarget(this),cc.director.getScheduler().scheduleUpdate(this,0,!1)},t.cleanup=function(){cc.director.getScheduler().unscheduleUpdate(this.instance),this.instance=null},t.init=function(){this.instance=new t,this.instance.registerUpdate()},t.getData=function(t){return this.instance||this.init(),this.instance.dataMap.has(t)||this.instance.dataMap.set(t,new t),this.instance.dataMap.get(t)},t.toJSON=function(){var e={};return this.instance.dataMap.forEach(function(t){e[t.localStorageKey]=t.toJSON()}),e.version=t.version,e.time=(new Date).getTime(),JSON.stringify(e)},t.initByJSON=function(e){var o=JSON.parse(e);if((null==o?void 0:o.version)==t.version)for(var n in o)cc.sys.localStorage.getItem(n)||cc.sys.localStorage.setItem(n,o[n]);else console.log("\u7248\u672c\u4e0d\u4e00\u81f4")},t.addRefreshListener=function(e,o,n){c.default.on(t.EVENT_REFRESH_DATA+this.getData(e).localStorageKey,o,n)},t.removeRefreshListener=function(e,o,n){c.default.off(t.EVENT_REFRESH_DATA+this.getData(e).localStorageKey,o,n)},t.emitRefreshEvent=function(e){c.default.emit(t.EVENT_REFRESH_DATA+this.getData(e).localStorageKey)},t.prototype.update=function(e){this.dataMap.forEach(function(o){o.isDirty&&(o.saveLocalStorage(),c.default.emit(t.EVENT_REFRESH_DATA+o.localStorageKey,o)),o.onUpdate(e)})},t.EVENT_REFRESH_DATA="EVENT_REFRESH_DATA_",t.version="1.0.0",t}();a.DataHelper=u,cc._RF.pop(),cc._RF.pop()},{}],ScrollList:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"9a33e3AXelJmps4xdb3eqKu","ScrollList");var r=t,i=e,a=o;cc._RF.push(i,"9a33e3AXelJmps4xdb3eqKu","ScrollList");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},f=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(a,"__esModule",{value:!0});var d=r("LayoutItem"),y=r("LayoutList"),h=cc._decorator,m=h.ccclass,b=(h.property,h.menu),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.layout=null,e.width=0,e.height=0,e}return l(e,t),e.prototype.getCloneNode=function(){return this.prefab?cc.instantiate(this.prefab):cc.instantiate(this.node.children[0])},e.prototype.fixNodeSize=function(){},e.prototype.createItemsByLength=function(e,o){var n,r;return void 0===o&&(o=!0),s(this,void 0,void 0,function(){return p(this,function(i){switch(i.label){case 0:return null===(n=this.scrollView)||void 0===n||n.stopAutoScroll(),o&&(null===(r=this.scrollView)||void 0===r||r.scrollToTopLeft()),[4,t.prototype.createItemsByLength.call(this,e)];case 1:return i.sent(),this.refreshVisible(),this.layout&&this.layout.updateLayout(),[2]}})})},e.prototype.createItem=function(e){var o,n;if(this.scrollView){var r=t.prototype.createItem.call(this,e),i=this.scrollView.getScrollOffset();if(this.type===y.ListDirection.Horizontal){var a=(c=Math.floor(-i.x/this.prefabSize.width-.5)*this.height)+this.height*(this.width+2);null===(o=r.getComponent(d.default))||void 0===o||o.setVisible(e>=c&&e<a)}else{var c;a=(c=Math.floor(i.y/(this.prefabSize.height+this.spacing.y))*this.width)+this.width*(this.height+2),null===(n=r.getComponent(d.default))||void 0===n||n.setVisible(e>=c&&e<a)}return r}},e.prototype.refreshVisible=function(){var t,e;if(this.scrollView){var o,n=this.scrollView.getScrollOffset();if(this.type===y.ListDirection.Horizontal)for(var r=(o=Math.floor(-n.x/this.prefabSize.width-.5)*this.height)+this.height*(this.width+2),i=0;i<this.length&&!(i>=this.nodeList.length);i++)null===(t=this.nodeList[i].getComponent(d.default))||void 0===t||t.setVisible(i>=o&&i<r);else for(r=(o=Math.floor(n.y/(this.prefabSize.height+this.spacing.y))*this.width)+this.width*(this.height+2),i=0;i<this.length&&!(i>=this.nodeList.length);i++)null===(e=this.nodeList[i].getComponent(d.default))||void 0===e||e.setVisible(i>=o&&i<r)}},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.prefab||(this.node.children[0].active=!1);var e=f(this.node.children),o=new cc.Node;o.width=this.node.width,o.height=this.node.height,o.addComponent(cc.Mask),o.name="mask",o.parent=this.node;for(var n=this.prefab?0:1;n<e.length;n++)e[n].parent=o;var r=this.node.getComponent(cc.Sprite);if(r){this.layoutNode.addComponent(cc.Sprite).spriteFrame=r.spriteFrame,this.layoutNode.color=cc.Color.YELLOW;var i=new cc.Node;i.parent=this.layoutNode,i.addComponent(cc.Sprite).spriteFrame=r.spriteFrame,i.color=cc.Color.BLACK,i.width=i.height=5}this.layoutNode.width=this.node.width,this.layoutNode.anchorX=0,this.layoutNode.anchorY=1,this.layout=this.layoutNode.getComponent(cc.Layout),this.scrollView=this.addComponent(cc.ScrollView),this.scrollView.horizontal=this.type===y.ListDirection.Horizontal,this.scrollView.vertical=this.type===y.ListDirection.Vertical,this.scrollView.content=this.layoutNode,this.node.on("scrolling",this.refreshVisible,this);var a=this.layoutNode.getComponent(cc.Layout);a&&(a.resizeMode=cc.Layout.ResizeMode.CONTAINER),this.length>0&&(this.layout.updateLayout(),this.scrollView.scrollToTopLeft()),this.width=0,this.height=0;var c=this.getCloneNode();if(0===c.width||0===c.height)cc.warn("ScrollList Prefab Size Error : width or height equal to 0");else{for(var l=this.node.width;l>0;)l>=c.width&&this.width++,l-=c.width+this.spacing.x;for(l=this.node.height;l>0;)l>=c.height&&this.height++,l-=c.height+this.spacing.y}},e.prototype.onDestroy=function(){},e.prototype.start=function(){},u([m,b("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u6eda\u52a8\u5217\u8868")],e)}(y.default);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],SecondConfirmFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"a5f1elkf39IjZB76iJ7AQKD","SecondConfirmFrame");var r=t,i=e,a=o;cc._RF.push(i,"a5f1elkf39IjZB76iJ7AQKD","SecondConfirmFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("FrameHelper"),d=cc._decorator,y=d.ccclass,h=d.menu,m=d.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbContent=null,e.onConfirm=null,e}return l(e,t),e.prototype.onBtnConfirm=function(){this.onConfirm&&this.onConfirm(),this.hideFrame()},e.prototype.onBtnBack=function(){this.hideFrame()},e.prototype.beforeShow=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return this.lbContent.string=t,this.onConfirm=e,[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.start=function(){},e.frameInfo={name:"SecondConfirmFrame",type:f.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/SecondConfirmFrame",zIndex:11},u([m({type:cc.Label,displayName:"\u786e\u8ba4\u63d0\u793a"})],e.prototype,"lbContent",void 0),u([y,h("\u754c\u9762/SecondConfirmFrame \u4e8c\u6b21\u786e\u8ba4\u754c\u9762")],e)}(f.FrameBase);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],SelectCardFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"86233B4HblPH5Wfu71Ri0A2","SelectCardFrame");var r=t,i=e,a=o;cc._RF.push(i,"86233B4HblPH5Wfu71Ri0A2","SelectCardFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("TrackHelper"),d=r("FormatLabel"),y=r("LayoutList"),h=r("sdbCard"),m=r("GameGlobaled"),b=r("EffectManager"),v=r("TowerManager"),g=r("FrameHelper"),_=r("GuideHelper"),w=r("PlatformHelper"),S=r("RunDataHelper"),R=r("SoundHelper"),O=r("StaticDBHelper"),P=r("GameData"),F=r("TowerData"),T=r("MathUtil"),D=r("TimeUtil"),k=r("TopFrame"),C=r("GameFrame"),L=r("SelectCardItem"),B=cc._decorator,j=B.ccclass,x=B.menu,I=B.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectLayout=null,e.lbLevel=null,e.nodeTitle=null,e.prefabFly=null,e.effectTowerUp=null,e.btnRefresh=null,e.btnSelectAll=null,e.lbRefresh=null,e.nodeTip=null,e.nodeHide=null,e.cards=null,e.onSelect=null,e.isEnableSelect=!0,e.tweenHide=null,e.level=0,e}return l(e,t),e.prototype.playSelectAnimation=function(t){return s(this,void 0,void 0,function(){var e,o,n,r,i,a,c,l,u,s,f,d,y,m,_,w=this;return p(this,function(p){switch(p.label){case 0:if(this.node.pauseSystemEvents(!0),!this.isEnableSelect)return[2];for(this.isEnableSelect=!1,e=1===t.length?1.2:1.1,o=function(o){var r=n.selectLayout.nodeList[o];t.find(function(t){return r==t.node})?cc.tween(r).to(.12,{scale:e},{easing:cc.easing.sineOut}).start():cc.tween(r).to(.12,{scale:.7},{easing:cc.easing.sineOut}).start()},n=this,c=0;c<this.selectLayout.nodeList.length;c++)o(c);return[4,D.default.delay(.12)];case 1:for(p.sent(),r=[],c=0;c<t.length;c++)r.push(t[c].playAnimation());return[4,Promise.all(r)];case 2:for(p.sent(),this.hideFrame(),i=[],a=[],r=[],c=0;c<t.length;c++){if(l=t[c],u=l.data.id,i.push(u),s=O.default.getData(h.default,u),!(f=g.default.getFrame(C.default)))return[2];for(d=0;d<s.target.length;d++)a.indexOf(s.target[d])<0&&a.push(s.target[d]),y=l.node.convertToWorldSpaceAR(cc.Vec3.ZERO),(m=f.getTowerCardItem(s.target[d]))&&(_=m.node.convertToWorldSpaceAR(cc.Vec3.ZERO),k.default.flyItem(this.prefabFly,y,_,.6,function(t){cc.tween(t).set({scale:1,opacity:255}).to(.2,{scale:3,opacity:0}).call(function(){t.getComponentInChildren(cc.ParticleSystem).resetSystem(),t.scale=1,t.opacity=255,k.default.remove(t)}).start()}))}return this.onSelect(i),v.default.instance.buildings.forEach(function(t){a.includes(t.id)&&b.default.instance.create(w.effectTowerUp,t.node.position)}),[2]}})})},e.prototype.onSelectItem=function(t){return s(this,void 0,void 0,function(){var e,o;return p(this,function(){return R.default.playUiSfx("OptionSelect"),e=t.getUserData(),this.playSelectAnimation([e]),o=g.default.getFrame(C.default),f.default.trackEventChooseCard(e.data.id,o.gameStage.levelId,o.gameStage.roundIndex),[2]})})},e.prototype.onItemCreate=function(t,e){t.getComponent(L.default).init(this.cards[e],e)},e.prototype.onBtnRefresh=function(){var t=this;w.PlatformHelper.video("SelectCardRefresh",function(){S.DataHelper.getData(P.default).SubRefreshTimes(),t.refreshBtn(),t.random(!0)})},e.prototype.onBtnSelectAllCard=function(){return s(this,void 0,void 0,function(){var t=this;return p(this,function(){return w.PlatformHelper.video("SelectAllCard",function(){return s(t,void 0,void 0,function(){var t,e,o,n;return p(this,function(){for(t=[],this.cards.forEach(function(e){t.push(e.id)}),this.btnSelectAll.active=!1,S.DataHelper.getData(P.default).SubSelectAllTimes(),this.onSelect(t),e=[],o=0;o<this.selectLayout.nodeList.length;o++)n=this.selectLayout.nodeList[o].getComponent(L.default),e.push(n);return this.playSelectAnimation(e),[2]})})}),[2]})})},e.prototype.random=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=3);var o=g.default.getFrame(C.default),n=S.DataHelper.getData(F.default).getUnlockCards();console.log("getUnlockCards",o.gameStage.roundIndex,o.gameStage.hpProgress),n=n.filter(function(t){return!(14015===t.id&&o.gameStage.roundIndex>=7||14016===t.id&&o.gameStage.roundIndex>=5||14017===t.id&&o.gameStage.hpProgress>.5)});for(var r=S.DataHelper.getData(P.default).cards,i=S.DataHelper.getData(P.default).towers,a=[],c=!1,l=!0,u=function(t){if(r.includes(n[t].id))return"continue";if(!i.includes(n[t].towerId))return"continue";if(n[t].pre.find(function(t){return!r.includes(t)}))return"continue";if(n.find(function(e){return e.over==n[t].id}))return"continue";var e=a.find(function(e){return e.id==n[t].over});e&&a.splice(a.indexOf(e),1),a.push(n[t])},s=0;s<n.length;s++)u(s);this.cards=[];var p=new Set,f=a.filter(function(t){return t.quality>1}),d=f.length>0;if(d||(l=!1),_.default.isGuiding&&0==_.default.guideId){if(2==this.level)return this.cards=[O.default.getData(h.default,10003)],this.selectLayout.createItemsByLength(this.cards.length),void(this.btnRefresh.active=!1);if(3==this.level)return this.cards=[O.default.getData(h.default,10001)],this.selectLayout.createItemsByLength(this.cards.length),void(this.btnRefresh.active=!1);if(4==this.level)return this.cards=[O.default.getData(h.default,10009)],this.selectLayout.createItemsByLength(this.cards.length),void(this.btnRefresh.active=!1);if(5==this.level)return this.cards=[O.default.getData(h.default,1015),O.default.getData(h.default,3013),O.default.getData(h.default,1014)],this.selectLayout.createItemsByLength(this.cards.length),void(this.btnRefresh.active=!1)}if(t&&d){var y=f[Math.floor(T.default.random()*f.length)];this.cards.push(y),p.add(y.towerId),a=a.filter(function(t){return t.id!==y.id}),c=!0,e--}var m=[],b=0;for(s=0;s<a.length;s++)0!=a[s].pro&&(m.push(a[s].pro),b+=a[s].pro);if(0==b)return 0===this.cards.length?void this.selectLayout.createItemsByLength(0):void this.selectLayout.createItemsByLength(this.cards.length);var v=0;for(s=0;s<e&&s<m.length;s++){for(var w=Math.floor(T.default.random()*b),R=!1,D=0;D<m.length;D++)if((w-=m[D])<0&&!p.has(a[D].towerId)){this.cards.push(a[D]),p.add(a[D].towerId),b=m[D],m[D]=0,R=!0,a[D].quality>1&&(c=!0);break}if(!R){if(v>=10)break;p.clear(),s--,v++}}this.selectLayout.createItemsByLength(this.cards.length),c&&(l=!1),this.nodeTip.active=l},e.prototype.force=function(t){this.cards=[];for(var e=0;e<t.length;e++)this.cards.push(O.default.getData(h.default,t[e]));this.selectLayout.createItemsByLength(this.cards.length)},e.prototype.refreshBtn=function(){var t=S.DataHelper.getData(P.default).refreshTimes;this.btnRefresh.active=t>0,this.lbRefresh.string="\u8fd8\u53ef\u4f7f\u7528("+t+"/3)"},e.prototype.onHideStart=function(){this.node.opacity=0},e.prototype.onHideEnd=function(){this.node.opacity=255},e.prototype.beforeShow=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return this.level=t,this.lbLevel.setFormatLabel({level:t}),this.onSelect=e,this.refreshBtn(),this.random(),this.btnSelectAll.active=S.DataHelper.getData(P.default).selectAllTimes>0,this.cards.length<1?(this.onSelect([]),[2,!1]):[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.isEnableSelect=!0,this.node.resumeSystemEvents(!0),R.default.playUiSfx("OptionPopup"),[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.isEnableSelect=!0,this.node.resumeSystemEvents(!0),m.default.isStop=!1,[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.selectLayout.onItemCreate(this.onItemCreate.bind(this)),this.node.on(L.default.EventSelectItem,this.onSelectItem,this),this.nodeHide.on(cc.Node.EventType.TOUCH_START,this.onHideStart,this),this.nodeHide.on(cc.Node.EventType.TOUCH_END,this.onHideEnd,this),this.nodeHide.on(cc.Node.EventType.TOUCH_CANCEL,this.onHideEnd,this)},e.prototype.start=function(){},e.frameInfo={name:"SelectCardFrame",type:g.FrameType.Model,bundleName:"Root",prefabName:"Prefab/Frame/SelectCardFrame",zIndex:12},u([I({type:y.default,displayName:"\u9009\u5361\u5217\u8868"})],e.prototype,"selectLayout",void 0),u([I({type:d.default,displayName:"\u7b49\u7ea7\u6587\u5b57"})],e.prototype,"lbLevel",void 0),u([I({type:cc.Node,displayName:"\u6807\u9898"})],e.prototype,"nodeTitle",void 0),u([I({type:cc.Prefab,displayName:"\u9009\u5361\u98de\u884c\u7279\u6548"})],e.prototype,"prefabFly",void 0),u([I({type:cc.Prefab,displayName:"\u5347\u7ea7\u7279\u6548"})],e.prototype,"effectTowerUp",void 0),u([I({type:cc.Node,displayName:"\u5237\u65b0\u6309\u94ae"})],e.prototype,"btnRefresh",void 0),u([I({type:cc.Node,displayName:"\u5168\u9009\u6309\u94ae"})],e.prototype,"btnSelectAll",void 0),u([I({type:cc.Label,displayName:"\u5237\u65b0\u6b21\u6570"})],e.prototype,"lbRefresh",void 0),u([I({type:cc.Node,displayName:"\u5fc5\u51fa\u9ad8\u7ea7\u80fd\u529b\u63d0\u793a"})],e.prototype,"nodeTip",void 0),u([I({type:cc.Node,displayName:"\u9690\u85cf\u8282\u70b9"})],e.prototype,"nodeHide",void 0),u([j,x("\u754c\u9762/SelectCardFrame \u9009\u5361\u754c\u9762")],e)}(g.FrameBase);a.default=N,cc._RF.pop(),cc._RF.pop()},{}],SelectCardItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0eb4fY+qv9HyKPwLsZJjejC","SelectCardItem");var r=t,i=e,a=o;cc._RF.push(i,"0eb4fY+qv9HyKPwLsZJjejC","SelectCardItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("ImageLoader"),d=r("LayoutItem"),y=r("LayoutList"),h=r("sdbTower"),m=r("AssetBundleHelper"),b=r("FrameHelper"),v=r("LangHelper"),g=r("RunDataHelper"),_=r("StaticDBHelper"),w=r("GameData"),S=r("TowerData"),R=r("RichTextUtil"),O=r("CardInfoFrame"),P=cc._decorator,F=P.ccclass,T=P.property,D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptIcon=null,e.lbName=null,e.lbDesc=null,e.imgBg=null,e.effNode=null,e.colorList=[],e.colorDescList=[],e.preList=null,e.nodeIconBg=null,e.tweenShow=null,e.data=null,e.list=[],e}var o;return l(e,t),o=e,Object.defineProperty(e.prototype,"id",{get:function(){return this.data.id},enumerable:!1,configurable:!0}),e.prototype.onBtnVideo=function(){cc.log("onBtnVideo")},e.prototype.playStarAnimation=function(t,e){return s(this,void 0,void 0,function(){var o;return p(this,function(n){switch(n.label){case 0:return e&&((o=e.getComponent(sp.Skeleton)).node.active=!0,o.setAnimation(0,"animation",!1),o.setCompleteListener(function(){o.node.active=!1,o.setCompleteListener(null)})),[4,cc.tween(t).set({opacity:160,scale:8,active:!0}).to(.3,{opacity:255,scale:1},{easing:cc.easing.backOut}).asyncStart()];case 1:return n.sent(),[4,new Promise(function(e){var o=t.children[0].getComponent(sp.Skeleton);o.node.active=!0,o.setAnimation(0,"animation",!1),o.setCompleteListener(function(){o.node.active=!1,o.setCompleteListener(null),e(null)})})];case 2:return n.sent(),[2]}})})},e.prototype.playAnimation=function(){return s(this,void 0,void 0,function(){var t,e,o,n,r,i,a,c;return p(this,function(l){switch(l.label){case 0:for(t=[],e=0;e<this.preList.nodeList.length&&(o=this.preList.nodeList[e]).active;e++)for(n=o.getChildByName("Layout"),r=n.children.filter(function(t){return t.active}).length,i=0;i<n.childrenCount&&i<r;i++)if(!(a=n.children[i]).children[0].active){c=i===r-1,t.push(this.playStarAnimation(a.children[0],c?o.getChildByName("Effect"):null));break}return[4,Promise.all(t)];case 1:return l.sent(),[2]}})})},e.prototype.onBtnClick=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(){return cc.log("onBtnClick"),(t=new cc.Event.EventCustom(o.EventSelectItem,!0)).setUserData(this),this.node.dispatchEvent(t),[2]})})},e.prototype.setLbDesc=function(t){var e=v.default.getStr(this.data.desc),o=e.indexOf("+");if(-1!==o){var n=e.substring(0,o),r=e.substring(o);e="<color=#"+(t.quality>1?"5B441F":"39475F")+">"+n+"</color>"+R.default.colorBBCode(r,"r")}else e="<color=#"+(t.quality>1?"5B441F":"39475F")+">"+e+"</color>";var i=this.lbDesc.fontSize||24;this.lbDesc.maxWidth=8*i,this.lbDesc.string=e},e.prototype.init=function(t){var e=this;if(this.data=t,this.lbName.string=v.default.getStr(this.data.name),this.setLbDesc(t),this.imgBg.select(t.quality>1?0:1),this.effNode.active=t.quality>1,this.nodeIconBg.active=t.quality>1,this.lbName.getComponent(cc.LabelOutline).color=this.colorList[t.quality>1?0:1],this.tweenShow&&this.tweenShow.stop(),this.tweenShow=cc.tween(this.node).set({scale:0,opacity:0}).to(.3,{scale:1,opacity:255},{easing:cc.easing.backInOut}).call(function(){e.tweenShow=null}).start(),this.data.quality>1)m.default.setSpriteFrame(this.sptIcon,this.data.icon).then(function(){e.sptIcon.node.scale=1.25});else{var o=_.default.getData(h.default,this.data.towerId);m.default.setSpriteFrame(this.sptIcon,o.icon).then(function(){e.sptIcon.node.scale=.8})}this.list=[];for(var n=g.DataHelper.getData(S.default).getUnlockCards(),r=g.DataHelper.getData(w.default).cards,i=function(t){if(n[t].quality<2)return"continue";if(r.includes(n[t].id))return"continue";if(!n[t].pre.includes(a.data.id))return"continue";if(n.find(function(e){return e.over==n[t].id}))return"continue";var e=a.list.find(function(e){return e.id==n[t].over});e&&a.list.splice(a.list.indexOf(e),1),a.list.push({data:n[t],count:0})},a=this,c=0;c<n.length;c++)i(c);for(c=0;c<this.list.length;c++)for(var l=0;l<this.list[c].data.pre.length;l++)r.includes(this.list[c].data.pre[l])&&this.list[c].count++;this.preList.createItemsByLength(this.list.length)},e.prototype.onItemCreate=function(t,e){var o=this.list[e],n=(t.getComponent(d.default),t.getChildByName("Icon").getComponent(cc.Sprite)),r=t.getChildByName("Layout");m.default.setSpriteFrame(n,o.data.icon);for(var i=0;i<r.childrenCount;i++)r.children[i].active=i<o.data.pre.length,r.children[i].children[0].active=i<o.count;t.getComponent(cc.Button).clickEvents[0].customEventData=o.data.id},e.prototype.onPreClick=function(t,e){b.default.showFrame(O.default,e,!0)},e.prototype.onLoad=function(){this.preList.onItemCreate(this.onItemCreate.bind(this))},e.prototype.start=function(){},e.EventSelectItem="EventSelevtItem",u([T({type:cc.Sprite,displayName:"\u56fe\u7247"})],e.prototype,"sptIcon",void 0),u([T({type:cc.Label,displayName:"\u540d\u5b57"})],e.prototype,"lbName",void 0),u([T({type:cc.RichText,displayName:"\u63cf\u8ff0"})],e.prototype,"lbDesc",void 0),u([T({type:f.default,displayName:"\u80cc\u666f"})],e.prototype,"imgBg",void 0),u([T({type:cc.Node,displayName:"\u7279\u6548"})],e.prototype,"effNode",void 0),u([T({type:cc.Color,displayName:"\u6807\u9898\u989c\u8272"})],e.prototype,"colorList",void 0),u([T({type:cc.Color,displayName:"\u8bf4\u660e\u989c\u8272"})],e.prototype,"colorDescList",void 0),u([T({type:y.default,displayName:"\u524d\u7f6e\u5217\u8868"})],e.prototype,"preList",void 0),u([T({type:cc.Node,displayName:"icon\u80cc\u666f"})],e.prototype,"nodeIconBg",void 0),o=u([F],e)}(cc.Component);a.default=D,cc._RF.pop(),cc._RF.pop()},{}],SelectGroundFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"cbc00KIUBZAwKzkMC0USSZQ","SelectGroundFrame");var r=t,i=e,a=o;cc._RF.push(i,"cbc00KIUBZAwKzkMC0USSZQ","SelectGroundFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("LayoutList"),d=r("DragItem"),y=r("GameGlobaled"),h=r("FrameHelper"),m=r("PlatformHelper"),b=r("RunDataHelper"),v=r("SoundHelper"),g=r("GameData"),_=r("SelectCardItem"),w=r("SelectGroundItem"),S=cc._decorator,R=S.ccclass,O=S.menu,P=S.property,F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectLayout=null,e.btnSelectAll=null,e.nodeHide=null,e.onSelect=null,e.groundList=[],e}return l(e,t),e.prototype.onSelectItem=function(t,e){return s(this,void 0,void 0,function(){var t;return p(this,function(){return v.default.playUiSfx("OptionSelect"),t=+e,this.onSelect([this.groundList[t]]),this.hideFrame(),[2]})})},e.prototype.onItemCreate=function(t,e){t.getChildByName("button").getComponent(cc.Button).clickEvents[0].customEventData=e.toString();var o=t.getComponent(w.default),n={type:d.DragItemType.Foundation,foundationIndex:this.groundList[e],video:!1},r=y.default.gridSizeWorld;o.init(n,r,y.default.sfFoundation)},e.prototype.onBtnSelectAllCard=function(){return s(this,void 0,void 0,function(){var t=this;return p(this,function(){return m.PlatformHelper.video("SelectAllGround",function(){return s(t,void 0,void 0,function(){return p(this,function(){return this.onSelect(this.groundList),this.btnSelectAll.active=!1,b.DataHelper.getData(g.default).SubSelectAllGroundTimes(),this.hideFrame(),[2]})})}),[2]})})},e.prototype.onHideStart=function(){this.node.opacity=0},e.prototype.onHideEnd=function(){this.node.opacity=255},e.prototype.beforeShow=function(t,e){return s(this,void 0,void 0,function(){return p(this,function(){return this.groundList=t,this.onSelect=e,this.selectLayout.createItemsByLength(this.groundList.length),this.btnSelectAll.active=b.DataHelper.getData(g.default).selectAllGroundTimes>0,[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.node.resumeSystemEvents(!0),v.default.playUiSfx("OptionPopup"),[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.node.resumeSystemEvents(!0),y.default.isStop=!1,[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.selectLayout.onItemCreate(this.onItemCreate.bind(this)),this.node.on(_.default.EventSelectItem,this.onSelectItem,this),this.nodeHide.on(cc.Node.EventType.TOUCH_START,this.onHideStart,this),this.nodeHide.on(cc.Node.EventType.TOUCH_END,this.onHideEnd,this),this.nodeHide.on(cc.Node.EventType.TOUCH_CANCEL,this.onHideEnd,this)},e.prototype.start=function(){},e.frameInfo={name:"SelectGroundFrame",type:h.FrameType.Model,bundleName:"Root",prefabName:"Prefab/Frame/SelectGroundFrame",zIndex:12},u([P({type:f.default,displayName:"\u9009\u5361\u5217\u8868"})],e.prototype,"selectLayout",void 0),u([P({type:cc.Node,displayName:"\u5168\u9009\u6309\u94ae"})],e.prototype,"btnSelectAll",void 0),u([P({type:cc.Node,displayName:"\u9690\u85cf\u8282\u70b9"})],e.prototype,"nodeHide",void 0),u([R,O("\u754c\u9762/SelectGroundFrame \u9009\u5730\u5757\u754c\u9762")],e)}(h.FrameBase);a.default=F,cc._RF.pop(),cc._RF.pop()},{}],SelectGroundItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"fcfb0EhBEFHarn2SEpT/rmE","SelectGroundItem");var r=t,i=e,a=o;cc._RF.push(i,"fcfb0EhBEFHarn2SEpT/rmE","SelectGroundItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameDefine"),d=r("GameGlobaled"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBody=null,e.foundations=[],e.data=null,e.sfFoundation=null,e.size=cc.Size.ZERO,e}return l(e,t),e.prototype.getData=function(){return this.data},Object.defineProperty(e.prototype,"bodyWidth",{get:function(){return 120},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,o){return s(this,void 0,void 0,function(){var n,r,i,a;return p(this,function(){for(this.data=t,this.sfFoundation=o,n=f.FOUNDATION_CONFIGS[this.data.foundationIndex].map,this.size.width=n[0].length,this.size.height=n.length,this.foundations.forEach(function(t){return t.destroy()}),r=0;r<this.size.width;r++)for(i=0;i<this.size.height;i++)0!=n[i][r]&&((a=new cc.Node).parent=this.nodeBody,a.scale=Math.min(e/this.sfFoundation.getOriginalSize().width,e/this.sfFoundation.getOriginalSize().height)*d.default.boardBoxScale,a.addComponent(cc.Sprite).spriteFrame=this.sfFoundation,a.setPosition((r-this.size.width/2+.5)*e,(i-this.size.height/2+.5)*e),this.foundations.push(a));return this.nodeBody.scale=.65,[2]})})},e.prototype.onLoad=function(){},e.prototype.start=function(){},u([m({type:cc.Node,displayName:"\u4e3b\u4f53"})],e.prototype,"nodeBody",void 0),u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],SetFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"eb957ecNe1NLJPeCEZYqzdR","SetFrame");var r=t,i=e,a=o;cc._RF.push(i,"eb957ecNe1NLJPeCEZYqzdR","SetFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("ImageLoader"),d=r("EventConfig"),y=r("EventHelper"),h=r("FrameHelper"),m=r("RunDataHelper"),b=r("SoundHelper"),v=r("SettingData"),g=cc._decorator,_=g.ccclass,w=g.menu,S=g.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicLoader=null,e.soundLoader=null,e.pathLengthLoader=null,e.uidLabel=null,e}return l(e,t),e.prototype.onCloseFrame=function(){this.hideFrame()},e.prototype.onClickMusic=function(){var t=!m.DataHelper.getData(v.default).isOpenMusic;b.default.isBgmOn=t,this.musicLoader.select(m.DataHelper.getData(v.default).isOpenMusic?0:1)},e.prototype.onClickSound=function(){var t=!m.DataHelper.getData(v.default).isOpenEffect;b.default.isSfxO=t,this.soundLoader.select(m.DataHelper.getData(v.default).isOpenEffect?0:1)},e.prototype.onClickPath=function(){var t=!m.DataHelper.getData(v.default).isOpenPath;m.DataHelper.getData(v.default).isOpenPath=t,this.pathLengthLoader.select(t?0:1),y.default.emit(d.default.SwitchPathLength,t)},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.musicLoader.select(m.DataHelper.getData(v.default).isOpenMusic?0:1),this.soundLoader.select(m.DataHelper.getData(v.default).isOpenEffect?0:1),this.pathLengthLoader.select(m.DataHelper.getData(v.default).isOpenPath?0:1),this.uidLabel.string="UID:",[2,!0]})})},e.prototype.start=function(){},e.frameInfo={name:"SetFrame",type:h.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/SetFrame",zIndex:12},u([S({type:f.default,displayName:"\u97f3\u4e50"})],e.prototype,"musicLoader",void 0),u([S({type:f.default,displayName:"\u97f3\u6548"})],e.prototype,"soundLoader",void 0),u([S({type:f.default,displayName:"\u8def\u5f84\u957f\u5ea6"})],e.prototype,"pathLengthLoader",void 0),u([S({type:cc.Label,displayName:"uid"})],e.prototype,"uidLabel",void 0),u([_,w("\u754c\u9762/SetFrame \u8bbe\u7f6e\u754c\u9762")],e)}(h.FrameBase);a.default=R,cc._RF.pop(),cc._RF.pop()},{}],SettingData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"84b74Rc2rVK252rmaHziult","SettingData");var r=t,i=e,a=o;cc._RF.push(i,"84b74Rc2rVK252rmaHziult","SettingData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("RunDataHelper"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultData=function(){return{_isOpenMusic:!0,_isOpenEffect:!0,_isOpenShake:!1,_isOpenPath:!1,uid:""}},e.prototype.setUid=function(t){this.data.uid=t},Object.defineProperty(e.prototype,"uid",{get:function(){return this.data.uid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"SettingData"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenMusic",{get:function(){return this.data._isOpenMusic},set:function(t){this.setOpenMusic(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenShake",{get:function(){return this.data._isOpenShake},set:function(t){this.setOpenShake(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenPath",{get:function(){return null==this.data._isOpenPath&&(this.data._isOpenPath=!1),this.data._isOpenPath},set:function(t){this.setOpenPath(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenEffect",{get:function(){return this.data._isOpenEffect},set:function(t){this.setOpenEffect(t)},enumerable:!1,configurable:!0}),e.prototype.setOpenMusic=function(t){this.data._isOpenMusic=t},e.prototype.setOpenEffect=function(t){this.data._isOpenEffect=t},e.prototype.setOpenShake=function(t){this.data._isOpenShake=t},e.prototype.setOpenPath=function(t){this.data._isOpenPath=t},e.prototype.onUpdate=function(){},u([s.DirtyData],e.prototype,"setUid",null),u([s.DirtyData],e.prototype,"setOpenMusic",null),u([s.DirtyData],e.prototype,"setOpenEffect",null),u([s.DirtyData],e.prototype,"setOpenShake",null),u([s.DirtyData],e.prototype,"setOpenPath",null),e}(s.RunDataBase);a.default=p,cc._RF.pop(),cc._RF.pop()},{}],ShopBuyFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c2f9azJdtVCWptsc6woXliv","ShopBuyFrame");var r=t,i=e,a=o;cc._RF.push(i,"c2f9azJdtVCWptsc6woXliv","ShopBuyFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("LangHelper"),d=r("ImageLoader"),y=r("EventConfig"),h=r("AssetBundleHelper"),m=r("EventHelper"),b=r("FrameHelper"),v=r("RunDataHelper"),g=r("DayItem"),_=r("DailyTaskData"),w=cc._decorator,S=w.ccclass,R=w.menu,O=w.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameLb=null,e.desLb=null,e.iconSpt=null,e.adImg=null,e.diamImg=null,e.coinImg=null,e.costLb=null,e.countLb=null,e.iconLoader=null,e.shop=null,e}return l(e,t),e.prototype.onClickClose=function(){this.hideFrame()},e.prototype.onClickBuy=function(){this.shop.listType==g.ShopListType.debris?m.default.emit(y.default.BuyItem,this.shop.id):this.shop.listType==g.ShopListType.coin&&m.default.emit(y.default.DiamondBuyCoin,this.shop),v.DataHelper.getData(_.default).addTaskProgress(_.TaskType.BuyItem),this.hideFrame()},e.prototype.beforeShow=function(t,e){return s(this,void 0,void 0,function(){var o=this;return p(this,function(){return this.shop=e,this.nameLb.string=f.default.getStr(t.name),this.desLb.string=f.default.getStr(t.desc),this.costLb.string="x"+e.cost,this.countLb.string="x"+e.count,this.iconLoader.select(t.quality),h.default.setSpriteFrame(this.iconSpt,t.icon).then(function(){o.iconSpt.node.scale=Math.min(70/o.iconSpt.node.width,70/o.iconSpt.node.height)}),this.coinImg.active=2==this.shop.costType,this.diamImg.active=1==this.shop.costType,this.adImg.active=0==this.shop.costType,[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:return e.sent(),[2]}})})},e.prototype.start=function(){},e.frameInfo={name:"ShopBuyFrame",type:b.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/ShopFrame/ShopBuyFrame",zIndex:9},u([O({type:cc.Label,displayName:"\u7269\u54c1\u540d\u79f0"})],e.prototype,"nameLb",void 0),u([O({type:cc.Label,displayName:"\u8bf4\u660e"})],e.prototype,"desLb",void 0),u([O({type:cc.Sprite,displayName:"\u7269\u54c1\u56fe\u6807"})],e.prototype,"iconSpt",void 0),u([O({type:cc.Node,displayName:"\u89c6\u9891\u56fe\u6807"})],e.prototype,"adImg",void 0),u([O({type:cc.Node,displayName:"\u94bb\u77f3\u56fe\u6807"})],e.prototype,"diamImg",void 0),u([O({type:cc.Node,displayName:"\u91d1\u5e01\u56fe\u6807"})],e.prototype,"coinImg",void 0),u([O({type:cc.Label,displayName:"\u82b1\u8d39"})],e.prototype,"costLb",void 0),u([O({type:cc.Label,displayName:"\u6570\u91cf"})],e.prototype,"countLb",void 0),u([O({type:d.default,displayName:"icon\u80cc\u666f\u52a0\u8f7d\u5668"})],e.prototype,"iconLoader",void 0),u([S,R("\u754c\u9762/ShopBuyFrame \u8d2d\u4e70\u8be6\u8bf7\u754c\u9762")],e)}(b.FrameBase);a.default=P,cc._RF.pop(),cc._RF.pop()},{}],ShopFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2e169Q1Uo5Bbp6O5brBy5xq","ShopFrame");var r=t,i=e,a=o;cc._RF.push(i,"2e169Q1Uo5Bbp6O5brBy5xq","ShopFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("EventConfig"),d=r("GameDefine"),y=r("sdbItem"),h=r("sdbShop"),m=r("EventHelper"),b=r("FrameHelper"),v=r("PlatformHelper"),g=r("RunDataHelper"),_=r("StaticDBHelper"),w=r("BagData"),S=r("DailyData"),R=r("DailyTaskData"),O=r("HeroStoryData"),P=r("Tools"),F=r("TipsFrame"),T=r("GetItemFrame"),D=r("BoxNode"),k=r("CoinItem"),C=r("DayNode"),L=r("GameItem"),B=r("ShopBuyFrame"),j=cc._decorator,x=j.ccclass,I=j.menu,N=j.property,A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shopScrollView=null,e.coinItems=[],e.coinRed=null,e.dayNode=null,e.boxNode=null,e.gameItems=[],e.itemNode=null,e.coinList=[],e}return l(e,t),e.prototype.onClickItem=function(t,e){var o=+e;console.log(o);var n=0;50007==e?n=1:50008==e&&(n=2);var r=g.DataHelper.getData(S.default).getVideoBuyItemList(n);r>_.default.getConfig("videoBuyItemCount")?b.default.showFrame(F.default,"\u4eca\u65e5\u83b7\u5f97\u6b21\u6570\u5df2\u7528\u5b8c\uff0c\u8bf7\u660e\u65e5\u518d\u6765\uff01"):(0==r?(g.DataHelper.getData(w.default).addItemCount(o,1),g.DataHelper.getData(S.default).addVideoBuyItem(n),b.default.showFrame(T.default,T.default.GetType.item,[{id:o,count:1}])):v.PlatformHelper.video("ShopGameItem",function(){g.DataHelper.getData(w.default).addItemCount(o,2),g.DataHelper.getData(S.default).addVideoBuyItem(n),b.default.showFrame(T.default,T.default.GetType.item,[{id:o,count:2}])}),this.refreshGameList())},e.prototype.onClickCoin=function(t,e){var o=this,n=this.coinList[+e];if(0==n.costType){var r=g.DataHelper.getData(S.default).shopCoinFreeTimes;if(r>=_.default.getConfig("DayCoinTimes"))return this.videoCallBack(n),this.refreshCoinRed(),g.DataHelper.getData(R.default).addTaskProgress(R.TaskType.BuyItem),void m.default.emit(f.default.refreshMainRed,"shop");if(r<=0)return void b.default.showFrame(F.default,"\u4eca\u65e5\u83b7\u5f97\u6b21\u6570\u5df2\u7528\u5b8c\uff0c\u8bf7\u660e\u65e5\u518d\u6765\uff01");v.PlatformHelper.video("ShopCoin",function(){g.DataHelper.getData(R.default).addTaskProgress(R.TaskType.BuyItem),o.videoCallBack(n)})}else 1==n.costType&&b.default.showFrame(B.default,_.default.getData(y.default,d.default.ItemCoinId),n)},e.prototype.videoCallBack=function(t){var e=[{id:d.default.ItemCoinId,count:t.count}];b.default.showFrame(T.default,T.default.GetType.item,e),P.default.addToBagByRewardList(e),g.DataHelper.getData(S.default).reduceShopCoinFreeTimes(),this.refreshCoinList(),m.default.emit(f.default.refreshMainRed,"shop"),m.default.emit(f.default.refreshMainRed,"tower")},e.prototype.onDiamondBuyCoin=function(t){t.cost>g.DataHelper.getData(w.default).getItemCount(d.default.ItemDiamondId)?b.default.showFrame(F.default,6):(g.DataHelper.getData(w.default).subItemCount(d.default.ItemDiamondId,t.cost),g.DataHelper.getData(w.default).addItemCount(d.default.ItemCoinId,t.count),b.default.showFrame(T.default,T.default.GetType.item,[{id:d.default.ItemCoinId,count:t.count}]),m.default.emit(f.default.refreshMainRed,"tower"))},e.prototype.refreshCoinList=function(){for(var t=0;t<this.coinList.length;t++)this.coinItems[t].setItem(this.coinList[t])},e.prototype.refreshCoinRed=function(){this.coinRed.active=g.DataHelper.getData(S.default).shopCoinFreeTimes>=_.default.getConfig("DayCoinTimes")},e.prototype.refreshGameList=function(){g.DataHelper.getData(O.default).baseTowerGetRewardId,this.itemNode.active=!1;for(var t=0;t<this.gameItems.length;t++)this.gameItems[t].setItem(t)},e.prototype.beforeShow=function(t){return void 0===t&&(t=!1),s(this,void 0,void 0,function(){return p(this,function(){return this.shopScroll(t),this.dayNode.initDay(),this.boxNode.refreshBoxLv(),this.refreshCoinList(),this.refreshCoinRed(),this.refreshGameList(),[2,!0]})})},e.prototype.shopScroll=function(t){void 0===t&&(t=!1),t?this.shopScrollView.scrollToBottom(.1):this.shopScrollView.scrollToTop(.1)},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:return e.sent(),this.coinList=_.default.filterData(h.default,{listType:2}),m.default.on(f.default.DiamondBuyCoin,this.onDiamondBuyCoin,this),[2]}})})},e.prototype.start=function(){},e.frameInfo={name:"ShopFrame",type:b.FrameType.Full,bundleName:"Root",prefabName:"Prefab/Frame/ShopFrame/ShopFrame",zIndex:2},u([N({type:cc.ScrollView,displayName:"\u5546\u5e97\u5217\u8868"})],e.prototype,"shopScrollView",void 0),u([N({type:k.default,displayName:"\u91d1\u5e01\u5217\u8868"})],e.prototype,"coinItems",void 0),u([N({type:cc.Node,displayName:"\u91d1\u5e01\u7ea2\u70b9"})],e.prototype,"coinRed",void 0),u([N({type:C.default,displayName:"\u6bcf\u65e5\u5546\u5e97"})],e.prototype,"dayNode",void 0),u([N({type:D.default,displayName:"\u5b9d\u7bb1"})],e.prototype,"boxNode",void 0),u([N({type:L.default,displayName:"\u6e38\u620f\u9053\u5177\u5217\u8868"})],e.prototype,"gameItems",void 0),u([N({type:cc.Node,displayName:"\u9053\u5177"})],e.prototype,"itemNode",void 0),u([x,I("\u754c\u9762/ShopFrame \u5546\u5e97\u754c\u9762")],e)}(b.FrameBase);a.default=A,cc._RF.pop(),cc._RF.pop()},{}],ShopItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2cee1zOiXtDWa81Fxs0GHxo","ShopItem");var r=t,i=e,a=o;cc._RF.push(i,"2cee1zOiXtDWa81Fxs0GHxo","ShopItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ImageLoader"),p=r("AssetBundleHelper"),f=cc._decorator,d=f.ccclass,y=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.countLb=null,e.bgImg=null,e.icon=null,e}return l(e,t),e.prototype.init=function(t,e,o){void 0===e&&(e=-1),void 0===o&&(o=""),this.countLb.string=t.toString(),e>-1&&this.bgImg.select(e),""!=o&&p.default.setSpriteFrame(this.icon,o)},u([y({type:cc.Label,displayName:"\u6570\u91cf"})],e.prototype,"countLb",void 0),u([y({type:s.default,displayName:"\u80cc\u666f\u56fe\u7247"})],e.prototype,"bgImg",void 0),u([y({type:cc.Sprite,displayName:"\u56fe\u6807"})],e.prototype,"icon",void 0),u([d],e)}(cc.Component);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],Show:[function(t,e,o){"use strict";cc._RF.push(e,"669ceCCpLNNHZbbgQi3Jo6z","Show");var n=e,r=o;cc._RF.push(n,"57c4b1mvuBGn5D38/cJ7dqA","Show"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.show=function(t){window.tt&&window.wxapi.onShow(t)},t}();r.default=new i,cc._RF.pop(),cc._RF.pop()},{}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"2947fT5VP1KyrxnHx1b3MtZ","Singleton");var n=e,r=o;cc._RF.push(n,"2947fT5VP1KyrxnHx1b3MtZ","Singleton"),Object.defineProperty(r,"__esModule",{value:!0}),r.Singleton=void 0,r.Singleton=function(){return function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return this.inst||(this.inst=new this),this.inst},enumerable:!1,configurable:!0}),t.inst=null,t}()},cc._RF.pop(),cc._RF.pop()},{}],SkillFactory:[function(t,e,o){"use strict";cc._RF.push(e,"a579cfGmS1HW4f3SSjKT3mT","SkillFactory");var n=e,r=o;cc._RF.push(n,"a579cfGmS1HW4f3SSjKT3mT","SkillFactory"),Object.defineProperty(r,"__esModule",{value:!0}),r.skillClass=void 0,r.skillClass=function(t){return function(e){e._skillName=t,i.register(e)}};var i=function(){function t(){}return t.register=function(t){if(!t._skillName)throw new Error(t.name+" \u7c7b\u5fc5\u987b\u4f7f\u7528 @sdbClass \u88c5\u9970\u5668 \u4e14\u53c2\u6570\u4e0d\u4e3a\u7a7a");this.classData[t._skillName]=t},t.clone=function(t){var e=this.classData[t.skillName];if(!e)return cc.error("\u672a\u627e\u5230\u6280\u80fd\u7c7b "+t.skillName),null;this.skillPoll[e._skillName]||(this.skillPoll[e._skillName]=[]);var o=this.skillPoll[e._skillName].length>0?this.skillPoll[e._skillName].shift():null;return o||(o=new e),o.setParam(t.getParam()),o.setData(t.skillData),t.paramObj&&o.setParamObject(t.paramObj),o},t.getByData=function(t,e){void 0===e&&(e="");var o=this.classData[t.class];if(!o)return cc.error("\u672a\u627e\u5230\u6280\u80fd\u7c7b "+t.class),null;this.skillPoll[o._skillName]||(this.skillPoll[o._skillName]=[]);var n=this.skillPoll[o._skillName].length>0?this.skillPoll[o._skillName].shift():null;return n||(n=new o),""===e&&(e=t.param),n.setData(t),n.setParam(e),n},t.getByMonster=function(t,e){void 0===e&&(e="");var o=this.classData[t.class];if(!o)return cc.error("\u672a\u627e\u5230\u6280\u80fd\u7c7b "+t.class),null;this.skillPoll[o._skillName]||(this.skillPoll[o._skillName]=[]);var n=this.skillPoll[o._skillName].length>0?this.skillPoll[o._skillName].shift():null;return n||(n=new o),""===e&&(e=t.param),n.setData(null),n.setParam(e),n},t.getByClass=function(t){var e=this.classData[t._skillName];if(!e)return cc.error("\u672a\u627e\u5230\u6280\u80fd\u7c7b "+t._skillName),null;this.skillPoll[e._skillName]||(this.skillPoll[e._skillName]=[]);var o=this.skillPoll[e._skillName].length>0?this.skillPoll[e._skillName].shift():null;return o||(o=new e),o},t.put=function(t){t.cleanup(),this.skillPoll[t.skillName].push(t)},t.cleanup=function(){for(var t in this.skillPoll)this.skillPoll[t]=[]},t.skillPoll={},t.classData={},t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],Skill_AttackCount:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"a6d23cNM05GEa54Ovcl3SvJ","Skill_AttackCount");var r=t,i=e,a=o;cc._RF.push(i,"a6d23cNM05GEa54Ovcl3SvJ","Skill_AttackCount");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.attackCount.valueValUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.attackCount.valueValUpRemove(this.key)},u([p.skillClass("Skill_AttackCount")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_AttackTime:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2d9b43q4XNF2KvVk4LattL+","Skill_AttackTime");var r=t,i=e,a=o;cc._RF.push(i,"2d9b43q4XNF2KvVk4LattL+","Skill_AttackTime");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.fireTime.valuePerUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.fireTime.valuePerUpRemove(this.key)},u([p.skillClass("Skill_AttackTime")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatAttackCount:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"eca62jOEOxKgK9BLy7Mt95/","Skill_BatAttackCount");var r=t,i=e,a=o;cc._RF.push(i,"eca62jOEOxKgK9BLy7Mt95/","Skill_BatAttackCount");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.batAttackCounts+=Number(this.param)},e.prototype.cleanup=function(){this.owner.weapon.batAttackCounts-=Number(this.param)},u([p.skillClass("Skill_BatAttackCount")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatCountAndCrit:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"66eeau3Z9VCo5qs4MlTNx3e","Skill_BatCountAndCrit");var r=t,i=e,a=o;cc._RF.push(i,"66eeau3Z9VCo5qs4MlTNx3e","Skill_BatCountAndCrit");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.maxBatCount+=1},e.prototype.cleanup=function(){this.owner.weapon.maxBatCount-=1},e.prototype.onBullet=function(t){t.critRate+=Number(this.param)},u([p.skillClass("Skill_BatCountAndCrit")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatCount:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"208ac96vdpMn6E5ANlxWqUT","Skill_BatCount");var r=t,i=e,a=o;cc._RF.push(i,"208ac96vdpMn6E5ANlxWqUT","Skill_BatCount");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.maxBatCount+=Number(this.param)},e.prototype.cleanup=function(){this.owner.weapon.maxBatCount-=Number(this.param)},u([p.skillClass("Skill_BatCount")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatCritByMerge:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e9b10yYZFtCvLQuy9u4zlHG","Skill_BatCritByMerge");var r=t,i=e,a=o;cc._RF.push(i,"e9b10yYZFtCvLQuy9u4zlHG","Skill_BatCritByMerge");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){var e=this.owner.weapon.getTowerLevel();t.critRate+=Number(this.param)*e},u([p.skillClass("Skill_BatCritByMerge")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatCritDamage:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0ddfb/3xzNDPKyWHAptfXe/","Skill_BatCritDamage");var r=t,i=e,a=o;cc._RF.push(i,"0ddfb/3xzNDPKyWHAptfXe/","Skill_BatCritDamage");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.critDamage=Number(this.param)},u([p.skillClass("Skill_BatCritDamage")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatExplodeEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e51a8SWpY5GQrf7bhnqdUai","Skill_BatExplodeEx");var r=t,i=e,a=o;cc._RF.push(i,"e51a8SWpY5GQrf7bhnqdUai","Skill_BatExplodeEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.explodeType=2},e.prototype.cleanup=function(){this.owner.weapon.explodeType=0},u([p.skillClass("Skill_BatExplodeEx")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatExplode:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c6fb62UANdHk5DMYYHl+1iQ","Skill_BatExplode");var r=t,i=e,a=o;cc._RF.push(i,"c6fb62UANdHk5DMYYHl+1iQ","Skill_BatExplode");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.explodeType=1},e.prototype.cleanup=function(){this.owner.weapon.explodeType=0},u([p.skillClass("Skill_BatExplode")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatKillAttackCount:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"08f46lpwlVNf7bB//ID0tFX","Skill_BatKillAttackCount");var r=t,i=e,a=o;cc._RF.push(i,"08f46lpwlVNf7bB//ID0tFX","Skill_BatKillAttackCount");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.addAtackOnKill=!0},e.prototype.cleanup=function(){this.owner.weapon.addAtackOnKill=!1},u([p.skillClass("Skill_BatKillAttackCount")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatPoisonEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0e0c1HUlJFECbYv7sIuQiSX","Skill_BatPoisonEx");var r=t,i=e,a=o;cc._RF.push(i,"0e0c1HUlJFECbYv7sIuQiSX","Skill_BatPoisonEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=r("Skill"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.addKey(f.AttackDataKey.Poison)},e.prototype.onKill=function(){},u([p.skillClass("Skill_BatPoisonEx")],e)}(s.default);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Skill_BatPoison:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"1843a8sxiRH/p97lI7UeqL5","Skill_BatPoison");var r=t,i=e,a=o;cc._RF.push(i,"1843a8sxiRH/p97lI7UeqL5","Skill_BatPoison");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=r("Skill"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.addKey(f.AttackDataKey.Poison)},u([p.skillClass("Skill_BatPoison")],e)}(s.default);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletBoom:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d7f487fdCxHMqNg5UFi1H7o","Skill_BulletBoom");var r=t,i=e,a=o;cc._RF.push(i,"d7f487fdCxHMqNg5UFi1H7o","Skill_BulletBoom");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.addKey(s.AttackDataKey.Boom,this.param)},u([p.skillClass("Skill_BulletBoom")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletCount:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f63afUvyQdAwKLB1t1bnffG","Skill_BulletCount");var r=t,i=e,a=o;cc._RF.push(i,"f63afUvyQdAwKLB1t1bnffG","Skill_BulletCount");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.bulletCount.valueValUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.bulletCount.valueValUpRemove(this.key)},u([p.skillClass("Skill_BulletCount")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletDizziness:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7f679U6RgFDjqvZaV2ljEFc","Skill_BulletDizziness");var r=t,i=e,a=o;cc._RF.push(i,"7f679U6RgFDjqvZaV2ljEFc","Skill_BulletDizziness");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.addKey(s.AttackDataKey.Dizziness)},u([p.skillClass("Skill_BulletDizziness")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletLife:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"165d6Ht3GVGNJiZw6Sv3i9K","Skill_BulletLife");var r=t,i=e,a=o;cc._RF.push(i,"165d6Ht3GVGNJiZw6Sv3i9K","Skill_BulletLife");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.bulletLife.valuePerUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.bulletLife.valuePerUpRemove(this.key)},u([p.skillClass("Skill_BulletLife")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletPoison:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6f085PLHPdMrpH3c8KqQl+E","Skill_BulletPoison");var r=t,i=e,a=o;cc._RF.push(i,"6f085PLHPdMrpH3c8KqQl+E","Skill_BulletPoison");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.addKey(s.AttackDataKey.Poison)},u([p.skillClass("Skill_BulletPoison")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletSize:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"da36fLqO1ZLq55PC2mPbqZU","Skill_BulletSize");var r=t,i=e,a=o;cc._RF.push(i,"da36fLqO1ZLq55PC2mPbqZU","Skill_BulletSize");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.bulletSize.valuePerUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.bulletSize.valuePerUpRemove(this.key)},u([p.skillClass("Skill_BulletSize")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletSlow:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6b0b9IsJW9K/ZPLjVQYcYdn","Skill_BulletSlow");var r=t,i=e,a=o;cc._RF.push(i,"6b0b9IsJW9K/ZPLjVQYcYdn","Skill_BulletSlow");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.addKey(s.AttackDataKey.Slow)},u([p.skillClass("Skill_BulletSlow")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletSpeed:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"327347OB8hENol1WycxqoGN","Skill_BulletSpeed");var r=t,i=e,a=o;cc._RF.push(i,"327347OB8hENol1WycxqoGN","Skill_BulletSpeed");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.bulletSpeed.valuePerUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.bulletSpeed.valuePerUpRemove(this.key)},u([p.skillClass("Skill_BulletSpeed")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletTransmit:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"480f4kIAGJPZajRLn6Z8WmT","Skill_BulletTransmit");var r=t,i=e,a=o;cc._RF.push(i,"480f4kIAGJPZajRLn6Z8WmT","Skill_BulletTransmit");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.transmitCount.valueValUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.transmitCount.valueValUpRemove(this.key)},u([p.skillClass("Skill_BulletTransmit")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletType:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f03212/wBdPQrQE4T8CbRp9","Skill_BulletType");var r=t,i=e,a=o;cc._RF.push(i,"f03212/wBdPQrQE4T8CbRp9","Skill_BulletType");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.addBulletType(this.param)},u([p.skillClass("Skill_BulletType")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_BulletVulnerable:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d79d34wWdxMi5i8Bzfx+5x2","Skill_BulletVulnerable");var r=t,i=e,a=o;cc._RF.push(i,"d79d34wWdxMi5i8Bzfx+5x2","Skill_BulletVulnerable");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.addKey(s.AttackDataKey.Vulnerable,this.param)},u([p.skillClass("Skill_BulletVulnerable")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_CDTemp:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f8cbdrFrBpIIZh7ubqlQ0FQ","Skill_CDTemp");var r=t,i=e,a=o;cc._RF.push(i,"f8cbdrFrBpIIZh7ubqlQ0FQ","Skill_CDTemp");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Buff_CD"),p=r("Skill"),f=r("SkillFactory"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attackCount=0,e.cdUp="",e.cdUpTime="",e.last=0,e}return l(e,t),e.prototype.tidyParam=function(t){var e=t.split("&");this.attackCount=parseInt(e[0]),this.cdUp=e[1],this.cdUpTime=e[2],this.last=0},e.prototype.onAttack=function(){this.owner.getSkill(s.default)?this.last=this.owner.weapon.attackHis:(this.owner.weapon.attackHis-this.last)%this.attackCount==0&&this.owner.addSkillByClass(s.default,!0,this.cdUp+"&"+this.cdUpTime)},u([f.skillClass("Skill_CDTemp")],e)}(p.default);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Skill_CD:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"03163E4GsFNJJvbC4pWoOV1","Skill_CD");var r=t,i=e,a=o;cc._RF.push(i,"03163E4GsFNJJvbC4pWoOV1","Skill_CD");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.data.as.valuePerUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.data.as.valuePerUpRemove(this.key)},u([p.skillClass("Skill_CD")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_CritDamage:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d67ferU6F9Bx4KVNIzFK+3H","Skill_CritDamage");var r=t,i=e,a=o;cc._RF.push(i,"d67ferU6F9Bx4KVNIzFK+3H","Skill_CritDamage");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.critDamage+=this.param},u([p.skillClass("Skill_CritDamage")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_Crit:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c7af3fng09PIoiTZK4+3W+x","Skill_Crit");var r=t,i=e,a=o;cc._RF.push(i,"c7af3fng09PIoiTZK4+3W+x","Skill_Crit");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.critRate+=Number(this.param)},u([p.skillClass("Skill_Crit")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_Damage:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c8343ZIJNdEiZk/xc+/CQgn","Skill_Damage");var r=t,i=e,a=o;cc._RF.push(i,"c8343ZIJNdEiZk/xc+/CQgn","Skill_Damage");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.data.atk.addPre(this.param)},u([p.skillClass("Skill_Damage")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_DieBoom:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b7dc38qo0BEjbHHTGrTtuL3","Skill_DieBoom");var r=t,i=e,a=o;cc._RF.push(i,"b7dc38qo0BEjbHHTGrTtuL3","Skill_DieBoom");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EffectManager"),p=r("TowerManager"),f=r("Monster"),d=r("Skill"),y=r("SkillFactory"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fireDistance=100,e}return l(e,t),e.prototype.onDead=function(){if(console.log("dead"),s.default.instance.create("Prefab/Game/Effect/FireBoom",this.owner.node.position),p.default.instance.base.node.position.sub(this.owner.node.position).mag()<this.fireDistance){var t=new cc.Event.EventCustom(f.default.MonsterAttack,!0);t.setUserData(this.owner.data.atk.value),this.owner.node.dispatchEvent(t)}},u([y.skillClass("Skill_DieBoom")],e)}(d.default);a.default=h,cc._RF.pop(),cc._RF.pop()},{}],Skill_FanBigger:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"9ed70YjIRNHaJtBUPejkgAD","Skill_FanBigger");var r=t,i=e,a=o;cc._RF.push(i,"9ed70YjIRNHaJtBUPejkgAD","Skill_FanBigger");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),u([p.skillClass("Skill_FanBigger")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FanEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"164d6NZIuZMTby+ADd2WQYy","Skill_FanEx");var r=t,i=e,a=o;cc._RF.push(i,"164d6NZIuZMTby+ADd2WQYy","Skill_FanEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.turnCount=0,e.bulletCount=0,e}return l(e,t),e.prototype.tidyParam=function(t){var e=t.split("&");this.turnCount=parseInt(e[0]),this.bulletCount=parseFloat(e[1])},e.prototype.onJoin=function(){this.owner.weapon.ex(this.turnCount,this.bulletCount)},u([p.skillClass("Skill_FanEx")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FanPassCD:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"32b52qtrbVBxZaSrX5zxRsE","Skill_FanPassCD");var r=t,i=e,a=o;cc._RF.push(i,"32b52qtrbVBxZaSrX5zxRsE","Skill_FanPassCD");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.passCD()},u([p.skillClass("Skill_FanPassCD")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FireBallBounceEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e5099SecrBGI5SqTF7EVAfi","Skill_FireBallBounceEx");var r=t,i=e,a=o;cc._RF.push(i,"e5099SecrBGI5SqTF7EVAfi","Skill_FireBallBounceEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.canBounce=!0,this.owner.weapon.addBounceOnKill=!0},e.prototype.cleanup=function(){this.owner.weapon.canBounce=!1,this.owner.weapon.addBounceOnKill=!1},u([p.skillClass("Skill_FireBallBounceEx")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FireBallBounce:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2ccaehKltlAXbF7u0mWU5Ex","Skill_FireBallBounce");var r=t,i=e,a=o;cc._RF.push(i,"2ccaehKltlAXbF7u0mWU5Ex","Skill_FireBallBounce");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.canBounce=!0},e.prototype.cleanup=function(){this.owner.weapon.canBounce=!1},u([p.skillClass("Skill_FireBallBounce")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FireBallExtraShot:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"80a57C9th9KC5rXHPGeHESp","Skill_FireBallExtraShot");var r=t,i=e,a=o;cc._RF.push(i,"80a57C9th9KC5rXHPGeHESp","Skill_FireBallExtraShot");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.canExtraShot=!0},e.prototype.cleanup=function(){this.owner.weapon.canExtraShot=!1},u([p.skillClass("Skill_FireBallExtraShot")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FireBallLowHpForceCrit:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0afe3SqHBlOsZu60evA5odZ","Skill_FireBallLowHpForceCrit");var r=t,i=e,a=o;cc._RF.push(i,"0afe3SqHBlOsZu60evA5odZ","Skill_FireBallLowHpForceCrit");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.lowHpForceCrit=this.param},e.prototype.cleanup=function(){this.owner.weapon.lowHpForceCrit=0},u([p.skillClass("Skill_FireBallLowHpForceCrit")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FireBallPowerup:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"eab0as4Da1KBbERwSa0ApyW","Skill_FireBallPowerup");var r=t,i=e,a=o;cc._RF.push(i,"eab0as4Da1KBbERwSa0ApyW","Skill_FireBallPowerup");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aoeRangePercent=0,e.damagePercent=0,e}return l(e,t),e.prototype.tidyParam=function(t){var e=t.split("&");this.aoeRangePercent=parseFloat(e[0]),this.damagePercent=parseInt(e[1])},e.prototype.onJoin=function(){this.owner.weapon.aoeRangePercent=this.aoeRangePercent,this.owner.data.atk.valuePerUp(this.key,this.damagePercent)},u([p.skillClass("Skill_FireBallPowerup")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FlameEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"edf44Dd8QlCdKI6Zp/2/69n","Skill_FlameEx");var r=t,i=e,a=o;cc._RF.push(i,"edf44Dd8QlCdKI6Zp/2/69n","Skill_FlameEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.count=0,e.isGrow=!1,e}return l(e,t),e.prototype.tidyParam=function(t){var e=t.split("&");this.count=parseInt(e[0]),this.isGrow=parseInt(e[1])>0},e.prototype.onBullet=function(t){t.hasKey(s.AttackDataKey.Index)&&(t.getKey(s.AttackDataKey.Index),t.addKey(s.AttackDataKey.SuperBullet),this.isGrow&&t.addKey(s.AttackDataKey.BulletGrow))},u([p.skillClass("Skill_FlameEx")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FlameSweep:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7d275iOWv5Dn734oS8/74Tm","Skill_FlameSweep");var r=t,i=e,a=o;cc._RF.push(i,"7d275iOWv5Dn734oS8/74Tm","Skill_FlameSweep");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.setSweepAngle(this.param),this.owner.weapon.fireTime.valuePerUp(this.key,20)},e.prototype.cleanup=function(){this.owner.weapon.setSweepAngle(0),this.owner.weapon.fireTime.valuePerUpRemove(this.key)},u([p.skillClass("Skill_FlameSweep")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_FlashEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"93f5bQoZWpBBYbGB2jOD7zM","Skill_FlashEx");var r=t,i=e,a=o;cc._RF.push(i,"93f5bQoZWpBBYbGB2jOD7zM","Skill_FlashEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.probabilityList=[],e}return l(e,t),e.prototype.tidyParam=function(t){var e=t.split("&");this.probabilityList=[];for(var o=0;o<e.length;o++){var n=parseInt(e[o])/100;this.probabilityList.push(n)}},e.prototype.onBullet=function(t){for(var e=Math.random(),o=0;o<this.probabilityList.length;o++){if(e<this.probabilityList[o])return void t.addKey(s.AttackDataKey.SuperBullet,o+1);e-=this.probabilityList[o]}},u([p.skillClass("Skill_FlashEx")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_ForceCirt:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"134cfVkUaVJpLqgarr7gUKy","Skill_ForceCirt");var r=t,i=e,a=o;cc._RF.push(i,"134cfVkUaVJpLqgarr7gUKy","Skill_ForceCirt");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Buff_Cirt"),p=r("Skill"),f=r("SkillFactory"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onAttack=function(){this.owner.weapon.attackHis%this.param==0&&this.owner.addSkillByClass(s.default,!0,"100")},u([f.skillClass("Skill_ForceCirt")],e)}(p.default);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Skill_GetCoin:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c88b4baRtREJrsBxs2t+G1J","Skill_GetCoin");var r=t,i=e,a=o;cc._RF.push(i,"c88b4baRtREJrsBxs2t+G1J","Skill_GetCoin");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onSelect=function(t){t.coinTemp+=this.param},u([p.skillClass("Skill_GetCoin")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_IceBall:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2c61fddkWxJ84IEjmbc7/N2","Skill_IceBall");var r=t,i=e,a=o;cc._RF.push(i,"2c61fddkWxJ84IEjmbc7/N2","Skill_IceBall");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.hasIceBall=!0,this.owner.weapon.iceBallCD=this.param},e.prototype.cleanup=function(){this.owner.weapon.hasIceBall=!1},u([p.skillClass("Skill_IceBall")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_IcePenetrate:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"4d01a8g0aNDS5no13ULacku","Skill_IcePenetrate");var r=t,i=e,a=o;cc._RF.push(i,"4d01a8g0aNDS5no13ULacku","Skill_IcePenetrate");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.isPenetrateBullet=!0},e.prototype.cleanup=function(){this.owner.weapon.isPenetrateBullet=!1},u([p.skillClass("Skill_IcePenetrate")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_IcePriorityBoss:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5a4f3Zqt+ZCkISwjGKD29nJ","Skill_IcePriorityBoss");var r=t,i=e,a=o;cc._RF.push(i,"5a4f3Zqt+ZCkISwjGKD29nJ","Skill_IcePriorityBoss");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.isPriorityBoss=!0},e.prototype.cleanup=function(){this.owner.weapon.isPriorityBoss=!1},u([p.skillClass("Skill_IcePriorityBoss")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_IceRain:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f5bfailbMFD56f8+deMwnXt","Skill_IceRain");var r=t,i=e,a=o;cc._RF.push(i,"f5bfailbMFD56f8+deMwnXt","Skill_IceRain");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=0,e.cd=8,e}return l(e,t),e.prototype.reset=function(){this.time=0},e.prototype.onDamage=function(t){this.time>this.cd&&(this.time=0,t.addKey(s.AttackDataKey.SuperBullet,this.param))},e.prototype.logicUpdate=function(t){this.time+=t},u([p.skillClass("Skill_IceRain")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_IsFindNotPoisonFirst:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0c270FZX2JI05q1FnbCO8nN","Skill_IsFindNotPoisonFirst");var r=t,i=e,a=o;cc._RF.push(i,"0c270FZX2JI05q1FnbCO8nN","Skill_IsFindNotPoisonFirst");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.isFindNotPoisonFirst=!0},e.prototype.cleanup=function(){this.owner.weapon.isFindNotPoisonFirst=!1},u([p.skillClass("Skill_IsFindNotPoisonFirst")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_JuDuXinXing:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ec91aOSanJHapJsPOOiZjc2","Skill_JuDuXinXing");var r=t,i=e,a=o;cc._RF.push(i,"ec91aOSanJHapJsPOOiZjc2","Skill_JuDuXinXing");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onAttack=function(){this.owner.weapon.attackHis%this.param==0&&this.owner.weapon.juDuXinXing()},u([p.skillClass("Skill_JuDuXinXing")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_KillBoom:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"9b1926u7/tC877Tyxg27yfe","Skill_KillBoom");var r=t,i=e,a=o;cc._RF.push(i,"9b1926u7/tC877Tyxg27yfe","Skill_KillBoom");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.setKillBoomDistance(this.param)},u([p.skillClass("Skill_KillBoom")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_LeiDianChangYu:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c3b78laGhJFErX8+W9rGzL7","Skill_LeiDianChangYu");var r=t,i=e,a=o;cc._RF.push(i,"c3b78laGhJFErX8+W9rGzL7","Skill_LeiDianChangYu");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attackCount=0,e.ad=0,e}return l(e,t),e.prototype.tidyParam=function(t){var e=t.split("&");this.attackCount=parseInt(e[0]),this.ad=parseFloat(e[1])},e.prototype.onAttack=function(){this.owner.weapon.attackHis%this.attackCount==0&&this.owner.weapon.leiDianChangYu(this.ad/100)},u([p.skillClass("Skill_LeiDianChangYu")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_MagicEx:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b457f3fT6tEFbibOt1NXnNv","Skill_MagicEx");var r=t,i=e,a=o;cc._RF.push(i,"b457f3fT6tEFbibOt1NXnNv","Skill_MagicEx");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){this.owner.weapon.attackHis%this.param==0&&t.addKey(s.AttackDataKey.SuperBullet)},u([p.skillClass("Skill_MagicEx")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_MagicResidue:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"9c06e4sEqxAK6awGbZX4utP","Skill_MagicResidue");var r=t,i=e,a=o;cc._RF.push(i,"9c06e4sEqxAK6awGbZX4utP","Skill_MagicResidue");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameGlobaled"),p=r("Skill"),f=r("SkillFactory"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){s.default.debuffDizzinessTime.valuePerUp(this.key,this.param)},e.prototype.onBullet=function(t){t.addKey(p.AttackDataKey.BulletResidue)},e.prototype.cleanup=function(){s.default.debuffDizzinessTime.valuePerUpRemove(this.key)},u([f.skillClass("Skill_MagicResidue")],e)}(p.default);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Skill_MagicSweep:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"eb412bCHEJDg76LEuFsVhzG","Skill_MagicSweep");var r=t,i=e,a=o;cc._RF.push(i,"eb412bCHEJDg76LEuFsVhzG","Skill_MagicSweep");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameGlobaled"),p=r("Skill"),f=r("SkillFactory"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){t.addKey(p.AttackDataKey.BulletRotate,s.default.towerMagicSweepAngle/2)},u([f.skillClass("Skill_MagicSweep")],e)}(p.default);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Skill_MoreCoin:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"fb4bae+gKBPaJYEYb+b6R7b","Skill_MoreCoin");var r=t,i=e,a=o;cc._RF.push(i,"fb4bae+gKBPaJYEYb+b6R7b","Skill_MoreCoin");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onSelect=function(t){t.coinEx+=this.param},u([p.skillClass("Skill_MoreCoin")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_MorePoison:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6ebde822MdENYvy8BezTMzo","Skill_MorePoison");var r=t,i=e,a=o;cc._RF.push(i,"6ebde822MdENYvy8BezTMzo","Skill_MorePoison");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.poisonMoreCountProbability.valueValUp(this.key,this.param/100)},e.prototype.cleanup=function(){this.owner.weapon.poisonMoreCountProbability.valueValUpRemove(this.key)},u([p.skillClass("Skill_MorePoison")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_Penetrate:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6bafbHPlWxFkrGtCcHZQrxE","Skill_Penetrate");var r=t,i=e,a=o;cc._RF.push(i,"6bafbHPlWxFkrGtCcHZQrxE","Skill_Penetrate");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.penetrate+=this.param},u([p.skillClass("Skill_Penetrate")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_PoisonDamage:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"a8c94eT5PZGxoSDSrSiJywX","Skill_PoisonDamage");var r=t,i=e,a=o;cc._RF.push(i,"a8c94eT5PZGxoSDSrSiJywX","Skill_PoisonDamage");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.poisonDamage.valuePerUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.poisonDamage.valuePerUpRemove(this.key)},u([p.skillClass("Skill_PoisonDamage")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_PoisonLife:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f1408RM/6BBdI+Zp5089t4R","Skill_PoisonLife");var r=t,i=e,a=o;cc._RF.push(i,"f1408RM/6BBdI+Zp5089t4R","Skill_PoisonLife");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.poisonLife.valuePerUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.poisonLife.valuePerUpRemove(this.key)},u([p.skillClass("Skill_PoisonLife")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_PreSword:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"583e9Wwn2xIw7v5o1UMnx7R","Skill_PreSword");var r=t,i=e,a=o;cc._RF.push(i,"583e9Wwn2xIw7v5o1UMnx7R","Skill_PreSword");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MathUtil"),p=r("Skill"),f=r("SkillFactory"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){s.default.random()<=this.param/100&&t.addKey(p.AttackDataKey.InfinitePenetrate)},u([f.skillClass("Skill_ProPenetrate")],e)}(p.default);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Skill_ProPenetrate:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e2e38ZK4f1EmoKyBPaNXaXS","Skill_ProPenetrate");var r=t,i=e,a=o;cc._RF.push(i,"e2e38ZK4f1EmoKyBPaNXaXS","Skill_ProPenetrate");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("MathUtil"),p=r("Skill"),f=r("SkillFactory"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onBullet=function(t){s.default.random()<=this.param/100&&t.addKey(p.AttackDataKey.InfinitePenetrate)},u([f.skillClass("Skill_ProPenetrate")],e)}(p.default);a.default=d,cc._RF.pop(),cc._RF.pop()},{}],Skill_Range:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f2071bec1BJvpHSEqBZl2AE","Skill_Range");var r=t,i=e,a=o;cc._RF.push(i,"f2071bec1BJvpHSEqBZl2AE","Skill_Range");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.data.ad.valuePerUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.data.ad.valuePerUpRemove(this.key)},u([p.skillClass("Skill_Range")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_Recover:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"377160Hl9ZMApjRf1qjZR5/","Skill_Recover");var r=t,i=e,a=o;cc._RF.push(i,"377160Hl9ZMApjRf1qjZR5/","Skill_Recover");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onSelect=function(t){t.hpRecover(this.param)},u([p.skillClass("Skill_Recover")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_RefreshCost:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"bbac43cO4xE4qOHqt8Vu8TB","Skill_RefreshCost");var r=t,i=e,a=o;cc._RF.push(i,"bbac43cO4xE4qOHqt8Vu8TB","Skill_RefreshCost");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onSelect=function(t){t.costEx-=this.param},u([p.skillClass("Skill_RefreshCost")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_SwordBoth:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"609bfwyRMNE7JqEF9yfjDZx","Skill_SwordBoth");var r=t,i=e,a=o;cc._RF.push(i,"609bfwyRMNE7JqEF9yfjDZx","Skill_SwordBoth");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.fireWeight.valueValUp(this.key,50),this.owner.weapon.thunderWeight.valueValUp(this.key,50)},e.prototype.cleanup=function(){this.owner.weapon.fireWeight.valueValUpRemove(this.key),this.owner.weapon.thunderWeight.valueValUpRemove(this.key)},u([p.skillClass("Skill_SwordBoth")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_SwordDamageUpWithLife:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"67f36f1WrJN7LDUxZmJDX9R","Skill_SwordDamageUpWithLife");var r=t,i=e,a=o;cc._RF.push(i,"67f36f1WrJN7LDUxZmJDX9R","Skill_SwordDamageUpWithLife");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.paramValues=[0,0],e}return l(e,t),e.prototype.tidyParam=function(t){var e=t.split("&");this.paramValues=[parseInt(e[0])/100,parseInt(e[1])/100]},e.prototype.onJoin=function(){this.owner.weapon.damageIncreaseRate.valueValUp(this.key,this.paramValues[0]),this.owner.weapon.maxBonus.valueValUp(this.key,this.paramValues[1])},e.prototype.cleanup=function(){this.owner.weapon.damageIncreaseRate.valueValUpRemove(this.key),this.owner.weapon.maxBonus.valueValUpRemove(this.key)},u([p.skillClass("Skill_SwordDamageUpWithLife")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_SwordFire:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f1a662ObndGi5veOQllyCEB","Skill_SwordFire");var r=t,i=e,a=o;cc._RF.push(i,"f1a662ObndGi5veOQllyCEB","Skill_SwordFire");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.fireWeight.valueValUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.fireWeight.valueValUpRemove(this.key)},u([p.skillClass("Skill_SwordFire")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_SwordKillAddLife:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"55d89OUBWNF86KwWlCKaFHh","Skill_SwordKillAddLife");var r=t,i=e,a=o;cc._RF.push(i,"55d89OUBWNF86KwWlCKaFHh","Skill_SwordKillAddLife");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.killAddLife.valueValUp(this.key,this.param/100)},e.prototype.cleanup=function(){this.owner.weapon.killAddLife.valueValUpRemove(this.key)},u([p.skillClass("Skill_SwordKillAddLife")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_SwordThunder:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"37203rM0CxFGqnLRgGC8gJp","Skill_SwordThunder");var r=t,i=e,a=o;cc._RF.push(i,"37203rM0CxFGqnLRgGC8gJp","Skill_SwordThunder");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Skill"),p=r("SkillFactory"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onJoin=function(){this.owner.weapon.thunderWeight.valueValUp(this.key,this.param)},e.prototype.cleanup=function(){this.owner.weapon.thunderWeight.valueValUpRemove(this.key)},u([p.skillClass("Skill_SwordThunder")],e)}(s.default);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],Skill_TowerLevelup:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"19b02JWVy5J5bpUix7cbJn1","Skill_TowerLevelup");var r=t,i=e,a=o;cc._RF.push(i,"19b02JWVy5J5bpUix7cbJn1","Skill_TowerLevelup");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameDefine"),p=r("AssetBundleHelper"),f=r("MathUtil"),d=r("EffectManager"),y=r("TowerManager"),h=r("Skill"),m=r("SkillFactory"),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onSelect=function(t){var e=[];y.default.instance.buildings.forEach(function(t){t.towerData.id!==s.TowerId.BASE&&e.push(t)});for(var o=99,n=0,r=0,i=e;r<i.length;r++){var a=i[r];a.level<o&&(o=a.level),a.level>n&&(n=a.level)}if(4===n&&(n-=1),(o=Math.min(o,n))!==n&&(o+=1),0!==(e=e.filter(function(t){return t.level>=o&&t.level<=n})).length){var c=f.default.randomArray(e);c.levelup(),t.boardData.buildingPut(c.x,c.y,c.uid,c.towerData.id,c.level),p.default.getAsset(cc.Prefab,"Prefab/Game/Effect/TowerLevelup").then(function(t){d.default.instance.create(t,c.node.position)})}},u([m.skillClass("Skill_TowerLevelup")],e)}(h.default);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],Skill:[function(t,e,o){"use strict";cc._RF.push(e,"fbb4eLmKJpIlr68w+VFOlsR","Skill");var n=t,r=e,i=o;cc._RF.push(r,"fbb4eLmKJpIlr68w+VFOlsR","Skill"),Object.defineProperty(i,"__esModule",{value:!0}),i.AttackData=i.AttackDataKey=void 0;var a=n("CocosUtil"),c=n("UuidUtil");(function(t){t.Index="Index",t.InfinitePenetrate="InfinitePenetrate",t.Boom="Boom",t.Slow="Slow",t.Dizziness="Dizziness",t.Poison="Poison",t.Vulnerable="Vulnerable",t.SuperBullet="SuperBullet",t.BulletResidue="BulletResidue",t.BulletRotate="BulletRotate",t.BulletGrow="BulletGrow",t.Fix="Fix"})(i.AttackDataKey||(i.AttackDataKey={}));var l=function(){function t(t){this.entityData=null,this.onceSkills=[],this.addSkills=[],this.damage=0,this.keys=new Map,this.critRate=0,this.critDamage=150,this.entityData=t,this.damage=t.atk.value}return t.prototype.clone=function(){return a.default.deepClone(this)},t.prototype.addKey=function(t,e){void 0===e&&(e=!0),this.keys.set(t,e)},t.prototype.hasKey=function(t){return this.keys.has(t)},t.prototype.getKey=function(t){return this.keys.get(t)},t.prototype.removeKey=function(t){this.keys.delete(t)},t}();i.AttackData=l;var u=function(){function t(){if(this.uuid="",this.owner=null,this.param=0,this.paramStr="",this.skillData=null,this.paramObj=null,null==this.constructor._skillName)throw new Error(this.constructor.name+" \u7c7b\u5fc5\u987b\u4f7f\u7528 @skillClass \u88c5\u9970\u5668");this.uuid=c.default.create()}return Object.defineProperty(t.prototype,"skillName",{get:function(){return this.constructor._skillName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.skillData?""+this.skillData.id:this.skillName},enumerable:!1,configurable:!0}),t.prototype.setData=function(t){this.skillData=t},t.prototype.setOwner=function(t){this.owner=t},t.prototype.setParam=function(t){this.paramStr=t,this.tidyParam(t)},t.prototype.setParamObject=function(t){this.paramObj=t},t.prototype.getParam=function(){return this.paramStr},t.prototype.tidyParam=function(t){this.param=parseInt(t)},Object.defineProperty(t.prototype,"isMainBaseSkill",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.reset=function(){},t.prototype.cleanup=function(){},t.prototype.onSelect=function(){},t.prototype.onJoin=function(){},t.prototype.onAttack=function(){},t.prototype.onBullet=function(){},t.prototype.onDamage=function(){},t.prototype.onHurt=function(){},t.prototype.onDead=function(){},t.prototype.onKill=function(){},t.prototype.logicUpdate=function(){},t}();i.default=u,cc._RF.pop(),cc._RF.pop()},{}],SoundConfig:[function(t,e,o){"use strict";cc._RF.push(e,"e6433wbwodLSa+cYjAXUSUq","SoundConfig");var n=e,r=o;cc._RF.push(n,"e6433wbwodLSa+cYjAXUSUq","SoundConfig"),Object.defineProperty(r,"__esModule",{value:!0}),r.SOUND_BASE_DIR=void 0,r.SOUND_BASE_DIR="Resources/Sound/";var i=function(){function t(){}return t.Get=function(t){return r.SOUND_BASE_DIR+t},t.Bgm=r.SOUND_BASE_DIR+"BGM",t.Coin=[r.SOUND_BASE_DIR+"text0",r.SOUND_BASE_DIR+"text1",r.SOUND_BASE_DIR+"text2",r.SOUND_BASE_DIR+"text3",r.SOUND_BASE_DIR+"text4",r.SOUND_BASE_DIR+"text5",r.SOUND_BASE_DIR+"text6",r.SOUND_BASE_DIR+"text7",r.SOUND_BASE_DIR+"text8",r.SOUND_BASE_DIR+"text9"],t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],SoundHelper:[function(t,e,o){"use strict";cc._RF.push(e,"bff6ayPzZ9P/Yu772FIxFOz","SoundHelper");var n=t,r=e,i=o;cc._RF.push(r,"bff6ayPzZ9P/Yu772FIxFOz","SoundHelper");var a=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},c=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=n("SettingData"),u=n("TimeUtil"),s=n("AssetBundleHelper"),p=n("RunDataHelper"),f=function(){function t(){}return t.cleanupAll=function(){this.chipList={},this._playingBattleSfx={}},Object.defineProperty(t,"isBgmOn",{get:function(){return this._isBgmOn},set:function(t){if(this._isBgmOn=t,this._isBgmOn&&""!==this.curBgm){var e=this.curBgm;this.curBgm="",this.playMusic(e)}else cc.audioEngine.stopMusic();p.DataHelper.getData(l.default).isOpenMusic=this._isBgmOn},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isSfxO",{get:function(){return this._isSfxOn},set:function(t){this._isSfxOn=t,p.DataHelper.getData(l.default).isOpenEffect=this._isSfxOn},enumerable:!1,configurable:!0}),t.loadSetting=function(){this._isBgmOn=p.DataHelper.getData(l.default).isOpenMusic,this._isSfxOn=p.DataHelper.getData(l.default).isOpenEffect},t.reloadDir=function(t){return a(this,void 0,void 0,function(){var e=this;return c(this,function(o){switch(o.label){case 0:return[4,s.default.getAssetBundles("Sound")];case 1:return o.sent().loadDir(t,cc.AudioClip,function(o,n){if(!o)for(var r=0;r<n.length;r++)e.chipList[t+"/"+n[r].name]=n[r]}),[2]}})})},t.loadAudioChip=function(t){return a(this,void 0,Promise,function(){var e;return c(this,function(o){switch(o.label){case 0:return e=this.chipList[t],this.chipList[t]?[3,2]:[4,s.default.getAsset(cc.AudioClip,t,"Sound")];case 1:e=o.sent(),this.chipList[t]=e,o.label=2;case 2:return[2,e]}})})},t.playMusic=function(t){return a(this,void 0,void 0,function(){var e;return c(this,function(o){switch(o.label){case 0:return t===this.curBgm?[2]:(this.curBgm=t,this._isBgmOn?[4,this.loadAudioChip(t)]:[2]);case 1:return(e=o.sent())?(cc.audioEngine.playMusic(e,!0),[2]):[2]}})})},t.replay=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return this._isBgmOn?(cc.audioEngine.stopAll(),[4,this.loadAudioChip(this.curBgm)]):[2];case 1:return(t=e.sent())?(cc.audioEngine.playMusic(t,!0),[2]):[2]}})})},t.playUiSfx=function(t){return a(this,void 0,void 0,function(){return c(this,function(){return this._isSfxOn?(this._playSfx(t),[2]):[2]})})},t.playBattleSfx=function(t){return a(this,void 0,void 0,function(){var e=this;return c(this,function(){return this._isSfxOn?(this._playingBattleSfx.hasOwnProperty(t)||(this._playingBattleSfx[t]=0),this._playingBattleSfx[t]>3?[2]:(this._playingBattleSfx[t]++,this._playSfx(t,function(){e._playingBattleSfx[t]--}),[2])):[2]})})},t._playSfx=function(t,e){return void 0===e&&(e=null),a(this,void 0,void 0,function(){var o;return c(this,function(n){switch(n.label){case 0:return this._isSfxOn?[4,this.loadAudioChip(t)]:[2];case 1:return(o=n.sent())?(cc.audioEngine.playEffect(this.chipList[t],!1),e&&u.default.delay(o.duration).then(function(){e(o.duration)}),[2]):[2]}})})},t._isBgmOn=!0,t._isSfxOn=!0,t.curBgm="",t._playingBattleSfx={},t.chipList={},t}();i.default=f,cc._RF.pop(),cc._RF.pop()},{}],StageData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"a6e7d4vzIlFzrkH5creQfe6","StageData");var r=t,i=e,a=o;cc._RF.push(i,"a6e7d4vzIlFzrkH5creQfe6","StageData");var c,l,u=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.SysyemName=void 0;var p,f=r("GameDefine"),d=r("sdbRound"),y=r("sdbStage"),h=r("RunDataHelper"),m=r("StaticDBHelper"),b=r("Tools");(function(t){t[t.TowerLevelup=0]="TowerLevelup",t[t.HeroLevelup=1]="HeroLevelup",t[t.Shop=2]="Shop",t[t.QuickBattle=3]="QuickBattle",t[t.TimeReward=4]="TimeReward",t[t.Dungeon=5]="Dungeon"})(p=a.SysyemName||(a.SysyemName={}));var v=((l={})[p.TowerLevelup]=1,l[p.HeroLevelup]=2,l[p.Shop]=2,l[p.QuickBattle]=1,l[p.TimeReward]=3,l[p.Dungeon]=4,l),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.defaultData=function(){return{}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"StageData"},enumerable:!1,configurable:!0}),e.prototype.onInit=function(){},Object.defineProperty(e.prototype,"stage",{get:function(){for(var t=Object.keys(this.data),e=0,o=0;o<t.length;o++)this.data[t[o]].passCount>0&&e<parseInt(t[o])&&(e=parseInt(t[o]));return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unlock",{get:function(){for(var t=Object.keys(this.data),e=0,o=0;o<t.length;o++)this.data[t[o]].passCount>0&&e<parseInt(t[o])&&(e=Math.max(e,parseInt(t[o])));var n=m.default.getData(y.default,e+1);return n?n.stage:e},enumerable:!1,configurable:!0}),e.prototype.getPassCount=function(t){return this.data.hasOwnProperty(t)?this.data[t].passCount:0},e.prototype.isPass=function(t){return this.getPassCount(t)>0},e.prototype.isPassIndex=function(t,e){return!!this.data.hasOwnProperty(t)&&this.data[t].passIndexs.includes(e)},e.prototype.isGetReward=function(t,e){return!!this.data.hasOwnProperty(t)&&this.data[t].rewardIndexs.includes(e)},e.prototype.GetReward=function(t,e){if(!this.data.hasOwnProperty(t))return[];if(this.data[t].rewardIndexs.includes(e))return[];var o=m.default.getData(y.default,t)["reward"+e];if(!this.data[t].passIndexs.includes(o[0]))return[];for(var n=[],r=1;r<o.length;r++)n.push({id:parseInt(o[r][0]),count:parseInt(o[r][1])});return b.default.addToBagByRewardList(n),this.data[t].rewardIndexs.push(e),n},e.prototype.getEnableRewardList=function(){var t=[];for(var e in this.data)if("0"!==e){var o=m.default.getData(y.default,e);if(!o)break;for(var n=0;n<3;n++){var r=o["reward"+n][0];if(this.data[e].passIndexs.includes(r)&&!this.data[e].rewardIndexs.includes(n)){t.push(e);break}}}return t},e.prototype.saveData=function(t,e,o){if(t===f.StageType.Normal){if(this.data.hasOwnProperty(e)||(this.data[e]={id:e,rewardIndexs:[],passIndexs:[],passCount:0}),o>-1)for(var n=0;n<=o;n++)this.data[e].passIndexs.includes(n)||this.data[e].passIndexs.push(n);var r=0;return m.default.filterData(d.default,{type:f.StageType.Normal,stage:e}).forEach(function(t){return r=Math.max(r,t.round)}),o>=r&&(this.data[e].passCount++,!0)}},e.prototype.isUnlockSystem=function(t){return!!v[t]&&this.stage>=v[t]},e.prototype.getSystemUnlockStage=function(t){return v[t]||0},s([h.DirtyData],e.prototype,"GetReward",null),s([h.DirtyData],e.prototype,"saveData",null),e}(h.RunDataBase);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],Stain:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2a4b2HNJXdOWaxY+IfPXJY7","Stain");var r=t,i=e,a=o;cc._RF.push(i,"2a4b2HNJXdOWaxY+IfPXJY7","Stain");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EffectDelayRemove"),p=cc._decorator,f=p.ccclass,d=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e}return l(e,t),Object.defineProperty(e.prototype,"scale",{set:function(t){this.sprite.node.scale=t},enumerable:!1,configurable:!0}),e.prototype.play=function(e){t.prototype.play.call(this,e),this.sprite.node.angle=360*Math.random(),this.scale=1},e.prototype.logicUpdate=function(e){t.prototype.logicUpdate.call(this,e);var o=Math.min(.5*this.life,.2),n=Math.max(this.timestamp-(this.life-o),0)/o;this.sprite.node.opacity=255*(1-n)},e.prototype.start=function(){},u([d({type:cc.Sprite,displayName:"\u7cbe\u7075"})],e.prototype,"sprite",void 0),u([f],e)}(s.default);a.default=y,cc._RF.pop(),cc._RF.pop()},{}],StaticDBHelper:[function(t,e,o){"use strict";cc._RF.push(e,"f0140986ilCHKWLV4rB70OR","StaticDBHelper");var n=t,r=e,i=o;cc._RF.push(r,"f0140986ilCHKWLV4rB70OR","StaticDBHelper");var a=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},c=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.sdbClass=void 0;var l=n("Version"),u=n("AssetBundleHelper");i.sdbClass=function(t){return function(e){e.sdbKey=t,s.register(e)}};var s=function(){function t(){}return t.register=function(t){if(!t.hasOwnProperty("sdbKey"))throw new Error(t.name+" \u7c7b\u5fc5\u987b\u4f7f\u7528 @sdbClass \u88c5\u9970\u5668");this.classData[t.sdbKey]=t},t.filterData=function(t,e){var o=this.lists[t.sdbKey];if(!o){if(!(o=Object.values(this.tables[t.sdbKey])))return[];this.lists[t.sdbKey]=o}for(var n=Object.keys(e),r=0;r<n.length;r++)if(!o[0].hasOwnProperty(n[r]))return cc.error("\u9759\u6001\u6570\u636e\u7c7b \u7b5b\u9009 "+t.name+" \u9519\u8bef - \u53c2\u6570 "+n[r]+" \u4e0d\u5b58\u5728"),[];var i=Object.values(e);return o.filter(function(t){for(var e=0;e<n.length;e++)if(t[n[e]]!=i[e])return!1;return!0})},t.filterDataBySection=function(t,e,o){void 0===o&&(o=[]);var n=this.lists[t.sdbKey];if(!n){if(!(n=Object.values(this.tables[t.sdbKey])))return[];this.lists[t.sdbKey]=n}for(var r=Object.keys(e),i=0;i<r.length;i++)if(!n[0].hasOwnProperty(r[i]))return cc.error("\u9759\u6001\u6570\u636e\u7c7b \u7b5b\u9009 "+t.name+" \u9519\u8bef - \u53c2\u6570 "+r[i]+" \u4e0d\u5b58\u5728"),[];var a=Object.values(e);return n.filter(function(t){for(var e=0;e<r.length;e++)if(o.includes(r[e])){if(t[r[e]][0]>a[e])return!1;if(t[r[e]][1]<a[e])return!1}else if(t[r[e]]!=a[e])return!1;return!0})},t.getTable=function(t){return this.tables[t.sdbKey]},t.getData=function(t,e){var o=this.tables[t.sdbKey][e];return l.checkDebugVer()&&null==o&&cc.warn("\u9759\u6001\u6570\u636e\u7c7b \u83b7\u53d6 "+t.name+" \u6570\u636e\u9519\u8bef - key:"+e+" \u4e0d\u5b58\u5728"),o},t.getConfig=function(t){var e=this.tables.Config[t].value;return e.length<2?e[0]:e},t.getTableByName=function(t){return this.tables[t]?this.tables[t]:null},t.getDataByTableName=function(t,e){return this.tables[t]&&this.tables[t][e]?this.tables[t][e]:null},t.tidyTable=function(t){var e={};if(!t.head||!t.data||t.head.length<1)return console.error("\u65e0\u6548\u7684\u9759\u6001\u6570\u636e: Missing 'head' or 'data'."),e;for(var o=t.head[0],n=0,r=t.data.length;n<r;n++){for(var i={},a=0;a<t.head.length;a++)i[t.head[a]]=t.data[n][a];e[i[o]]=i}return e},t.tidyByClass=function(t,e){var o={};if(!t.head||!t.data||t.head.length<1)return console.error("\u65e0\u6548\u7684\u9759\u6001\u6570\u636e: Missing 'head' or 'data'."),o;for(var n=t.head[1][0],r=0,i=t.data.length;r<i;r++){var a=new e;a.remark=t.data[r][0];for(var c=1;c<t.head.length;c++)a[t.head[c][0]]=t.data[r][c];o[a[n]]=a}return o},t.readFile=function(t,e){return void 0===e&&(e="Root"),a(this,void 0,void 0,function(){var o,n;return c(this,function(r){switch(r.label){case 0:return[4,u.default.getAsset(cc.JsonAsset,t,e)];case 1:for(n in o=r.sent(),this.classData)if(o.name===n)return this.tables[o.name]=this.tidyByClass(o.json,this.classData[n]),[2];return this.tables[o.name]=this.tidyTable(o.json),[2]}})})},t.loadStaticDB=function(t,e){return void 0===e&&(e="Root"),a(this,void 0,void 0,function(){var o,n,r,i=this;return c(this,function(a){switch(a.label){case 0:return[4,u.default.getAssetBundles(e)];case 1:return o=a.sent(),n=o.getDirWithPath(t),r=n.map(function(t){return i.readFile(t.path,e)}),[4,Promise.all(r)];case 2:return a.sent(),[2]}})})},t.tables={},t.lists={},t.classData={},t}();i.default=s,cc._RF.pop(),cc._RF.pop()},{}],StorageSync:[function(t,e,o){"use strict";cc._RF.push(e,"4d79bHUmatADI5PNRReMmc3","StorageSync");var n=e,r=o;cc._RF.push(n,"2700aw6kopLJq9HS9NmcIww","StorageSync"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.getItem=function(t){if(window.tt)return window.wxapi.getStorageSync(t)},t.setItem=function(t,e){if(window.tt)return window.wxapi.setStorageSync(t,e)},t.removeItem=function(t){if(window.tt)return window.wxapi.removeStorageSync(t)},t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],StringUtil:[function(t,e,o){"use strict";cc._RF.push(e,"44b28wu+/1Be73YeV1leHYJ","StringUtil");var n=e,r=o;cc._RF.push(n,"44b28wu+/1Be73YeV1leHYJ","StringUtil"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.FormatString=function(t,e){for(var o=Object.keys(e),n=0;n<o.length;n++)t=(t=t.replace(new RegExp("\\$\\{"+o[n]+"\\}","g"),""+e[o[n]])).replace(new RegExp("\\#\\{"+o[n]+"\\}","g"),""+ +e[o[n]]/1e3);return t},t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],SweepBtnNode:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6418fqad6hIZ6wjOQVcwdjc","SweepBtnNode");var r=e,i=o;cc._RF.push(r,"6418fqad6hIZ6wjOQVcwdjc","SweepBtnNode");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sweepLb=null,e.powerNode=null,e.videoNode=null,e.powerLb=null,e}return c(e,t),e.prototype.setNode=function(t){this.sweepLb.string="\u5feb\u901f\u5de1\u903b",this.videoNode.active=t,this.powerLb.string=t?"":"5",this.powerNode.active=!t,this.powerLb.node.active=!t},l([p({type:cc.Label,displayName:"\u5de1\u903b"})],e.prototype,"sweepLb",void 0),l([p({type:cc.Node,displayName:"\u5de1\u903b\u4f53\u529b"})],e.prototype,"powerNode",void 0),l([p({type:cc.Node,displayName:"\u89c6\u9891"})],e.prototype,"videoNode",void 0),l([p({type:cc.Label,displayName:"\u5de1\u903b\u4f53\u529b"})],e.prototype,"powerLb",void 0),l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],SweepData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"34e93/BGbxHpaHvSVuRhYTj","SweepData");var r=t,i=e,a=o;cc._RF.push(i,"34e93/BGbxHpaHvSVuRhYTj","SweepData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("RunDataHelper"),p=r("TimeUtil"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultData=function(){return{getTime:0,sweepPowerCount:0,sweepVideoCount:0,recoverTime:0}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"SweepData"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curTime",{get:function(){return Math.floor((p.default.getTime()-this.data.getTime)/1e3)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getIdleTimeString",{get:function(){return p.default.convertSecondToString(this.curTime)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getIdleTimeSecond",{get:function(){return this.curTime>e.MAX_IDLE_FULL_TIME?e.MAX_IDLE_FULL_TIME:this.curTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isIdleTimeFull",{get:function(){return this.curTime>=e.MAX_IDLE_FULL_TIME},enumerable:!1,configurable:!0}),e.prototype.addGetTime=function(t){this.data.getTime+=36e5*t},e.prototype.restGetTime=function(){this.data.getTime=p.default.getTime()},Object.defineProperty(e.prototype,"sweepPowerCount",{get:function(){return this.data.sweepPowerCount},enumerable:!1,configurable:!0}),e.prototype.reduceSweepPowerCount=function(){return this.data.sweepPowerCount>0&&this.data.sweepPowerCount--,this.data.sweepPowerCount},Object.defineProperty(e.prototype,"sweepVideoCount",{get:function(){return this.data.sweepVideoCount},enumerable:!1,configurable:!0}),e.prototype.reduceSweepVideoCount=function(){return this.data.sweepVideoCount>0&&this.data.sweepVideoCount--,this.data.sweepVideoCount},e.prototype.refreshDataByTodayTime=function(){null!=this.data.getTime&&0!=this.data.getTime||(this.data.getTime=p.default.getTime());var t=p.default.getTodayStartTimestamp();this.data.recoverTime<t&&(this.data.recoverTime=t,this.data.sweepPowerCount=e.MAX_SWEEP_POWER_COUNT,this.data.sweepVideoCount=e.MAX_SWEEP_VIDEO_COUNT)},e.prototype.loadLocalStorage=function(){t.prototype.loadLocalStorage.call(this),this.refreshDataByTodayTime()},e.MAX_SWEEP_POWER_COUNT=3,e.MAX_SWEEP_VIDEO_COUNT=5,e.MAX_IDLE_FULL_TIME=28800,u([s.DirtyData],e.prototype,"addGetTime",null),u([s.DirtyData],e.prototype,"restGetTime",null),u([s.DirtyData],e.prototype,"reduceSweepPowerCount",null),u([s.DirtyData],e.prototype,"reduceSweepVideoCount",null),u([s.DirtyData],e.prototype,"refreshDataByTodayTime",null),e}(s.RunDataBase);a.default=f,cc._RF.pop(),cc._RF.pop()},{}],SweepFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ebd13231j1IT6z2cEnFKEdI","SweepFrame");var r=t,i=e,a=o;cc._RF.push(i,"ebd13231j1IT6z2cEnFKEdI","SweepFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("ButtonCommon"),d=r("EventConfig"),y=r("GameDefine"),h=r("sdbStage"),m=r("EventHelper"),b=r("FrameHelper"),v=r("PlatformHelper"),g=r("RunDataHelper"),_=r("SoundHelper"),w=r("StaticDBHelper"),S=r("BagData"),R=r("DailyTaskData"),O=r("StageData"),P=r("SweepData"),F=r("Tools"),T=r("TipsFrame"),D=r("GetItemFrame"),k=r("BuyTVFrame"),C=r("SweepBtnNode"),L=cc._decorator,B=L.ccclass,j=L.menu,x=L.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curChapterLabel=null,e.coinHourLabel=null,e.fragmentHourLabel=null,e.sweepCountLabel=null,e.sweepTimeLabel=null,e.coinTotalLabel=null,e.fragmentTotalLabel=null,e.getBtn=null,e.sweepBtn=null,e.noRewardNode=null,e.rewardNode=null,e.sweepBtnNode=null,e.stageSdb=null,e.getTime=0,e.getCoin=0,e.getFragment=0,e.hourCoin=0,e.hourFragment=0,e}return l(e,t),e.prototype.onCloseFrame=function(){this.hideFrame()},e.prototype.onClickGet=function(){if(this.getTime<1)b.default.showFrame(T.default,"\u6682\u65e0\u5956\u52b1\u9886\u53d6");else{var t=[];t.push({id:y.default.ItemCoinId,count:this.getCoin}),F.default.getRewardByDebris(t,this.getFragment),F.default.addToBagByRewardList(t),this.getTime>=8?g.DataHelper.getData(P.default).restGetTime():g.DataHelper.getData(P.default).addGetTime(this.getTime),b.default.showFrame(D.default,D.default.GetType.item,t),this.getTime=0,this.refershByGetTime(),g.DataHelper.getData(R.default).addTaskProgress(R.TaskType.GetHangUp),m.default.emit(d.default.refreshMainRed,"sweep")}},e.prototype.onClickSweep=function(){var t=this;if(g.DataHelper.getData(P.default).sweepPowerCount>0){var e=w.default.getConfig("LevelConsumption");if(g.DataHelper.getData(S.default).getItemCount(y.default.ItemPower)<e)return void b.default.showFrame(k.default);_.default.playUiSfx("sweepBtn"),g.DataHelper.getData(P.default).reduceSweepPowerCount(),g.DataHelper.getData(S.default).subItemCount(y.default.ItemPower,w.default.getConfig("LevelConsumption")),this.getSweepReward(),this.refreshBySweep(),g.DataHelper.getData(R.default).addTaskProgress(R.TaskType.QuickPatrol)}else{if(!(g.DataHelper.getData(P.default).sweepVideoCount>0))return void b.default.showFrame(T.default,"\u4eca\u65e5\u5de1\u903b\u6b21\u6570\u5df2\u7528\u5b8c\uff0c\u8bf7\u660e\u65e5\u518d\u6765");v.PlatformHelper.video("Sweep",function(){g.DataHelper.getData(P.default).reduceSweepVideoCount(),_.default.playUiSfx("sweepBtn"),t.getSweepReward(),t.refreshBySweep(),g.DataHelper.getData(R.default).addTaskProgress(R.TaskType.QuickPatrol)})}},e.prototype.getSweepReward=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return t=F.default.getBattleReward(this.stageSdb,1),F.default.addToBagByRewardList(t),[4,b.default.showFrame(D.default,D.default.GetType.item,t)];case 1:return e.sent(),[2]}})})},e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){var t,e;return p(this,function(){return t=g.DataHelper.getData(O.default).stage,this.stageSdb=w.default.getData(h.default,t),this.curChapterLabel.string=t+"."+this.stageSdb.name,this.hourCoin=16+Math.floor(t/3*5),e=Math.floor(t/3),this.hourFragment=0==e?1:e,this.coinHourLabel.string=this.hourCoin+"/\u5c0f\u65f6",this.fragmentHourLabel.string=this.hourFragment+"/\u5c0f\u65f6",this.refreshBySweep(),this.refershByGetTime(),[2,!0]})})},e.prototype.refreshBySweep=function(){var t=g.DataHelper.getData(P.default);this.sweepCountLabel.string=t.sweepPowerCount>0?"\u5feb\u901f\u5de1\u903b\u6b21\u6570:"+t.sweepPowerCount+"/3":t.sweepVideoCount>0?"\u89c6\u9891\u5de1\u903b\u6b21\u6570:"+t.sweepVideoCount+"/5":"\u6682\u65e0\u5de1\u903b\u6b21\u6570",this.sweepBtn.setGary(t.sweepPowerCount<=0&&t.sweepVideoCount<=0),this.sweepBtnNode.setNode(t.sweepPowerCount<=0)},e.prototype.refershByGetTime=function(){if(this.rewardNode.active=this.getTime>=1,this.noRewardNode.active=this.getTime<1,this.getBtn.setGary(this.getTime<1),this.stageSdb){var t=this.getTime*this.hourCoin,e=this.getTime*this.hourFragment;this.getCoin==t&&this.getFragment==e||(this.getCoin=t,this.getFragment=e,this.coinTotalLabel.string=this.getCoin+"",this.fragmentTotalLabel.string=this.getFragment+""),m.default.emit(d.default.refreshMainRed,"Sweep")}},e.prototype.start=function(){},e.prototype.update=function(){var t=g.DataHelper.getData(P.default),e=Math.floor(t.getIdleTimeSecond/3600);this.sweepTimeLabel.string=t.isIdleTimeFull?"\u5df2\u8fbe\u5230\u6700\u5927\u6302\u673a\u65f6\u95f4":t.getIdleTimeString,this.getTime!=e&&(this.getTime=e,this.refershByGetTime())},e.SWEEP_ONCE_TIME=4,e.frameInfo={name:"SweepFrame",type:b.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/SweepFrame",zIndex:9},u([x({type:cc.Label,displayName:"\u5f53\u524d\u7ae0\u8282"})],e.prototype,"curChapterLabel",void 0),u([x({type:cc.Label,displayName:"\u91d1\u5e01\u6bcf\u5c0f\u65f6\u6536\u76ca"})],e.prototype,"coinHourLabel",void 0),u([x({type:cc.Label,displayName:"\u788e\u7247\u6bcf\u5c0f\u65f6\u6536\u76ca"})],e.prototype,"fragmentHourLabel",void 0),u([x({type:cc.Label,displayName:"\u626b\u8361\u6b21\u6570"})],e.prototype,"sweepCountLabel",void 0),u([x({type:cc.Label,displayName:"\u6302\u673a\u6536\u76ca\u65f6\u95f4"})],e.prototype,"sweepTimeLabel",void 0),u([x({type:cc.Label,displayName:"\u91d1\u5e01\u603b\u6536\u76ca"})],e.prototype,"coinTotalLabel",void 0),u([x({type:cc.Label,displayName:"\u788e\u7247\u603b\u6536\u76ca"})],e.prototype,"fragmentTotalLabel",void 0),u([x({type:f.default,displayName:"\u9886\u53d6\u6309\u94ae"})],e.prototype,"getBtn",void 0),u([x({type:f.default,displayName:"\u626b\u8361\u6309\u94ae"})],e.prototype,"sweepBtn",void 0),u([x({type:cc.Node,displayName:"\u6682\u65e0\u5956\u52b1"})],e.prototype,"noRewardNode",void 0),u([x({type:cc.Node,displayName:"\u5956\u52b1\u8282\u70b9"})],e.prototype,"rewardNode",void 0),u([x({type:C.default,displayName:"\u626b\u8361\u8282\u70b9"})],e.prototype,"sweepBtnNode",void 0),u([B,j("\u754c\u9762/SweepFrame \u626b\u8361\u754c\u9762")],e)}(b.FrameBase);a.default=I,cc._RF.pop(),cc._RF.pop()},{}],TabBtnBar:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"cb0fa8/iy1AqIo/d7wquvuB","TabBtnBar");var r=t,i=e,a=o;cc._RF.push(i,"cb0fa8/iy1AqIo/d7wquvuB","TabBtnBar");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ToggleButtonByNode"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=(p.executeInEditMode,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnList=[],e.event=new cc.Component.EventHandler,e.selectedExtraWidth=80,e.animDuration=.5,e.easing="sineOut",e.index=0,e.lockList=[],e.isLock=!1,e.originalPositions=[],e}return l(e,t),e.prototype.lock=function(){this.lockList=[];for(var t=0;t<this.btnList.length;t++)this.btnList[t].isEnableClose&&(this.lockList.push(this.btnList[t]),this.btnList[t].isEnableClose=!1);this.isLock=!0},e.prototype.unlock=function(){for(var t=0;t<this.lockList.length;t++)this.lockList[t].isEnableClose=!0;this.isLock=!1},e.prototype.pushBtn=function(t){this.btnList.push(t);var e=this.btnList.length-1;this.btnList[e].isEnableClose=!1,this.btnList[e].setEvent(this.node,"TabBtnBar","onTouchTab",e)},e.prototype.setEvent=function(t,e,o,n){this.event.target=t,this.event.component=e,this.event.handler=o,this.event.customEventData=n},e.prototype.chooseTab=function(t){this.btnList[t].setOpen(!0)},e.prototype.onTouchTab=function(t,e){this.index=e;for(var o=0;o<this.btnList.length;o++)o!==this.index&&this.btnList[o].setOpen(!1);this.updateButtonPositions(e),this.event&&this.event.emit([e,this.event.customEventData])},e.prototype.onLoad=function(){this.originalPositions=this.btnList.map(function(t){return cc.v2(t.node.position.x,t.node.position.y)});for(var t=0;t<this.btnList.length;t++)this.btnList[t].setOpen(0===t),this.btnList[t].isEnableClose=!1,this.btnList[t].setEvent(this.node,"TabBtnBar","onTouchTab",t);this.btnList.length>0&&this.updateButtonPositions(0)},e.prototype.getTargetX=function(t,e){var o=this.originalPositions[t],n=this.selectedExtraWidth/2,r=this.btnList.length;if(0===t)return o.x;if(t===r-1)return o.x;if(t<e){var i=(e-t)/e;return o.x-n*i}return t>e?(i=(t-e)/(r-e-1),o.x+n*i):o.x},e.prototype.updateButtonPositions=function(t){for(var e=0;e<this.btnList.length;e++){var o=this.btnList[e],n=this.getTargetX(e,t);o.targetX=n,cc.tween(o.node).to(this.animDuration,{x:n},{easing:cc.easing[this.easing]}).start()}},e.prototype.start=function(){},u([d({type:s.default,displayName:"\u5f00\u5173\u6309\u94ae\u5217\u8868"})],e.prototype,"btnList",void 0),u([d({type:cc.Component.EventHandler,displayName:"\u6309\u94ae\u4e8b\u4ef6"})],e.prototype,"event",void 0),u([f,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u5206\u680f\u6309\u94ae\u7ec4")],e)}(cc.Component));a.default=h,cc._RF.pop(),cc._RF.pop()},{}],TabList:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0b8f6RlrSlKWKYqDYoouGyn","TabList");var r=t,i=e,a=o;cc._RF.push(i,"0b8f6RlrSlKWKYqDYoouGyn","TabList");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("LayoutList"),p=r("ToggleButtonByNode"),f=cc._decorator,d=f.ccclass,y=f.property,h=f.menu,m=(f.executeInEditMode,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnList=[],e.layoutList=null,e.data=null,e.index=0,e.onTouchTabFunc=null,e}return l(e,t),Object.defineProperty(e.prototype,"list",{get:function(){return this.layoutList},enumerable:!1,configurable:!0}),e.prototype.getLayout=function(){return this.layoutList},e.prototype.setData=function(t){this.data=t},e.prototype.onItemCreate=function(t){this.layoutList.onItemCreate(t)},e.prototype.onTouchTabEvent=function(t){this.onTouchTabFunc=t},e.prototype.chooseTab=function(t){this.btnList.length<1||(this.btnList[t]?this.btnList[t].setOpen(!0):this.btnList[this.btnList.length-1].setOpen(!0))},e.prototype.onTouchTab=function(t,e){if(!this.onTouchTabFunc||this.onTouchTabFunc(e,this.layoutList)){this.index=e;for(var o=0;o<this.btnList.length;o++)o!==this.index&&this.btnList[o].setOpen(!1);this.data&&this.data[this.index]&&this.layoutList.createItemsByLength(this.data[this.index].length)}else t.setOpen(!1)},e.prototype.onLoad=function(){for(var t=0;t<this.btnList.length;t++)this.btnList[t].isEnableClose=!1,this.btnList[t].setEvent(this.node,"TabList","onTouchTab",t)},e.prototype.start=function(){},u([y({type:p.default,displayName:"\u5f00\u5173\u6309\u94ae\u5217\u8868"})],e.prototype,"btnList",void 0),u([y({type:s.default,displayName:"\u81ea\u52a8\u5e03\u5c40\u5217\u8868"})],e.prototype,"layoutList",void 0),u([d,h("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u5206\u680f\u5217\u8868")],e)}(cc.Component));a.default=m,cc._RF.pop(),cc._RF.pop()},{}],TankMonster:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b9133nMx9lPE5wglADCb9Nw","TankMonster");var r=t,i=e,a=o;cc._RF.push(i,"b9133nMx9lPE5wglADCb9Nw","TankMonster");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("Monster"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),u([f],e)}(s.default));a.default=d,cc._RF.pop(),cc._RF.pop()},{}],TaskBoxTipNode:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d3289ZIb+RDV47ciLOr6FX2","TaskBoxTipNode");var r=t,i=e,a=o;cc._RF.push(i,"d3289ZIb+RDV47ciLOr6FX2","TaskBoxTipNode");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ImageLoader"),p=r("GameDefine"),f=r("EventHelper"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveNode=null,e.layoutNode=null,e}var o;return l(e,t),o=e,e.prototype.onClickClose=function(){this.node.active=!1},e.prototype.showBox=function(t,e){if(0!=e.length){this.moveNode.position=t,this.node.active=!0;for(var o=0;o<this.layoutNode.children.length;o++)this.layoutNode.children[o].active=!1;var n=[p.default.ItemCoinId,p.default.ItemDiamondId,p.default.ItemHeroGemId,p.default.ItemPower];for(o=0;o<e.length;o++){var r=this.layoutNode.children[o];r.active=!0;var i=r.getComponentInChildren(s.default),a=n.indexOf(e[o].id);i.select(a>=0?a:4),r.getComponentInChildren(cc.Label).string=e[o].count.toString()}}},e.prototype.onLoad=function(){this.node.active=!1,f.default.on(o.SHOW_TASK_BOX,this.showBox,this)},e.SHOW_TASK_BOX="SHOW_TASK_BOX",u([h({type:cc.Node,displayName:"\u79fb\u52a8\u8282\u70b9"})],e.prototype,"moveNode",void 0),u([h({type:cc.Node,displayName:"\u5217\u8868\u8282\u70b9"})],e.prototype,"layoutNode",void 0),o=u([y],e)}(cc.Component);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],TaskBox:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"11b47RGoWhONYweiapCPrYL","TaskBox");var r=t,i=e,a=o;cc._RF.push(i,"11b47RGoWhONYweiapCPrYL","TaskBox");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ImageLoader"),p=r("AutoRock"),f=r("EventHelper"),d=r("FrameHelper"),y=r("RunDataHelper"),h=r("DailyTaskData"),m=r("Tools"),b=r("GetItemFrame"),v=r("DailyTaskFrame"),g=r("TaskBoxTipNode"),_=cc._decorator,w=_.ccclass,S=_.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxImage=null,e.redPoint=null,e.activeValue=0,e.autoRock=null,e.reward=null,e.isClick=!1,e}return l(e,t),e.prototype.onClickBox=function(){var t=[];if(t.push(this.reward),this.isClick){y.DataHelper.getData(h.default).getBox(this.activeValue),m.default.addToBagByRewardList(t),d.default.showFrame(b.default,b.default.GetType.item,t);var e=new cc.Event.EventCustom(v.default.REFRESH_TASK,!0);this.node.dispatchEvent(e)}else f.default.emit(g.default.SHOW_TASK_BOX,this.node.position,t)},e.prototype.initBox=function(t){this.reward=t;var e=y.DataHelper.getData(h.default);this.isClick=e.isShowBoxRedPoint(this.activeValue),this.boxImage.select(e.isBoxGet(this.activeValue)?1:0),this.redPoint.active=this.isClick,this.autoRock.enabled=this.isClick},u([S({type:s.default,displayName:"\u5b9d\u7bb1\u56fe\u7247"})],e.prototype,"boxImage",void 0),u([S({type:cc.Node,displayName:"\u5b9d\u7bb1\u7ea2\u70b9"})],e.prototype,"redPoint",void 0),u([S({step:1,min:0,max:100,displayName:"\u6d3b\u8dc3\u5ea6"})],e.prototype,"activeValue",void 0),u([S({type:p.default,displayName:"\u81ea\u52a8\u8df3\u52a8"})],e.prototype,"autoRock",void 0),u([w],e)}(cc.Component);a.default=R,cc._RF.pop(),cc._RF.pop()},{}],TaskItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"3b9adr43n1CeKBG6d0H6+Q2","TaskItem");var r=t,i=e,a=o;cc._RF.push(i,"3b9adr43n1CeKBG6d0H6+Q2","TaskItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ButtonCommon"),p=r("GameDefine"),f=r("FrameHelper"),d=r("RunDataHelper"),y=r("BagData"),h=r("DailyTaskData"),m=r("GetItemFrame"),b=r("DailyTaskFrame"),v=cc._decorator,g=v.ccclass,_=v.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getBtn=null,e.getBtnLabel=null,e.taskLabel=null,e.progressLabel=null,e.rewardLabel=null,e.progressBar=null,e.data=null,e.progress=0,e}return l(e,t),e.prototype.onClickBtn=function(){if(!(this.progress<1||this.data.isGet)){d.DataHelper.getData(h.default).getTaskReward(this.data.id),d.DataHelper.getData(y.default).addItemCount(p.default.ItemDiamondId,5);var t=new cc.Event.EventCustom(b.default.REFRESH_TASK,!0);this.node.dispatchEvent(t),f.default.showFrame(m.default,m.default.GetType.item,[{id:p.default.ItemDiamondId,count:5}])}},e.prototype.refreshTask=function(t){this.data=t,this.taskLabel.string=t.name;var e=d.DataHelper.getData(h.default).getTaskProgress(this.data.id);this.progressLabel.string=e+"/"+this.data.count,this.progress=e/this.data.count,this.progressBar.progress=this.progress,this.getBtn.setGary(this.progress<1||this.data.isGet),this.getBtnLabel.string=this.data.isGet?"\u5df2\u5b8c\u6210":this.progress<1?"\u672a\u5b8c\u6210":"\u9886\u53d6",this.rewardLabel.string=this.data.activeValue+""},u([_({type:s.default,displayName:"\u9886\u53d6\u6309\u94ae"})],e.prototype,"getBtn",void 0),u([_({type:cc.Label,displayName:"\u9886\u53d6\u6309\u94ae\u6587\u672c"})],e.prototype,"getBtnLabel",void 0),u([_({type:cc.Label,displayName:"\u4efb\u52a1\u63cf\u8ff0"})],e.prototype,"taskLabel",void 0),u([_({type:cc.Label,displayName:"\u4efb\u52a1\u8fdb\u5ea6\u6587\u672c"})],e.prototype,"progressLabel",void 0),u([_({type:cc.Label,displayName:"\u5b8c\u6210\u5956\u52b1\u8fdb\u5ea6"})],e.prototype,"rewardLabel",void 0),u([_({type:cc.ProgressBar,displayName:"\u4efb\u52a1\u8fdb\u5ea6\u6761"})],e.prototype,"progressBar",void 0),u([g],e)}(cc.Component);a.default=w,cc._RF.pop(),cc._RF.pop()},{}],TimeManage:[function(t,e,o){"use strict";cc._RF.push(e,"b203f8IUKpHpJnWhfwV7GIk","TimeManage");var n=t,r=e,i=o;cc._RF.push(r,"92262q//9JN2pSq8nxYFAdQ","TimeManage"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("function"),c=n("LocalStorage"),l=function(){function t(){this._startClientTime="sdk_s_c_t",this._endClientTime="sdk_e_c_t",this._firstReportServerTime="sdk_s_b_t",this._firstReportClientTime="sdk_c_b_t",this.lockGetFirstServerTime="sdk_lock_get_fst"}return t.prototype.setStartClientTime=function(){c.default.setItem(this._startClientTime,a.getClientTime())},t.prototype.getStartClientTime=function(){var t=c.default.getItem(this._startClientTime);return t>0?t:0},t.prototype.removeStartClientTime=function(){c.default.removeItem(this._startClientTime)},t.prototype.setEndClientTime=function(){c.default.setItem(this._endClientTime,a.getClientTime())},t.prototype.getEndClientTime=function(){var t=c.default.getItem(this._endClientTime);return t>0?t:0},t.prototype.removeEndClientTime=function(){c.default.removeItem(this._endClientTime)},t.prototype.getOnlineTime=function(){var t=this.getStartClientTime(),e=this.getEndClientTime();return t>0&&e>0?e-t:0},t.prototype.setFirstReportServerTime=function(){var t=this;c.default.getItem(this.lockGetFirstServerTime)||(c.default.setItem(this.lockGetFirstServerTime,a.getClientTime()),a.getServerTime(function(e){try{c.default.setItem(t._firstReportServerTime,e.data.data.time),c.default.removeItem(t.lockGetFirstServerTime)}catch(i){}}))},t.prototype.getFirstReportServerTime=function(){return c.default.getItem(this._firstReportServerTime)},t.prototype.removeFirstReportServerTime=function(){return c.default.removeItem(this._firstReportServerTime)},t.prototype.setFirstReportClientTime=function(){c.default.setItem(this._firstReportClientTime,a.getClientTime())},t.prototype.getFirstReportClientTime=function(){return c.default.getItem(this._firstReportClientTime)},t.prototype.removeFirstReportClientTime=function(){return c.default.removeItem(this._firstReportClientTime)},t}();i.default=new l,cc._RF.pop(),cc._RF.pop()},{}],TimePanel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d6f5fZi9zNLTLDisQc+PAqn","TimePanel");var r=t,i=e,a=o;cc._RF.push(i,"d6f5fZi9zNLTLDisQc+PAqn","TimePanel");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("ImageLoader"),d=r("BetweenMove"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodePanel=null,e.nodeColorBar=null,e.imgNight=null,e.moveNight=null,e.nodeStar=null,e.lbProgress=null,e.isShowNight=!1,e.prefabStar=null,e.pool=new cc.NodePool,e.progress=0,e}return l(e,t),e.prototype.createStar=function(){var t=this;if(!(this.progress>.8)){var e=this.pool.get();e||(e=cc.instantiate(this.prefabStar)),e.active=!0,e.parent=this.nodeStar,e.x=(this.nodeStar.width+e.width)/2,e.y=Math.random()*this.nodeStar.height*.5,cc.tween(e).to(3+1*Math.random(),{x:-e.x}).call(function(){t.pool.put(e)}).start()}},e.prototype.setProgress=function(t,e){this.progress=t,this.nodePanel.angle=180*t,this.nodeColorBar.opacity=255*t,this.lbProgress.string=e<=-1?"\u221e":e.toFixed(0),t>=1?this.showDay():this.showNight()},e.prototype.reset=function(){this.nodePanel.angle=0,this.nodeColorBar.opacity=0,this.showNight(!0)},e.prototype.showNight=function(t){return void 0===t&&(t=!1),s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return this.isShowNight?[2]:(this.isShowNight=!0,t?(this.imgNight.select(0),this.moveNight.moveBack(!0),[2]):[4,this.moveNight.moveTo()]);case 1:return e.sent(),this.imgNight.select(0),this.moveNight.moveBack(),[2]}})})},e.prototype.showDay=function(t){return void 0===t&&(t=!1),s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return this.isShowNight?(this.isShowNight=!1,t?(this.imgNight.select(1),this.moveNight.moveBack(!0),[2]):[4,this.moveNight.moveTo()]):[2];case 1:return e.sent(),this.imgNight.select(1),this.moveNight.moveBack(),[2]}})})},e.prototype.onLoad=function(){this.prefabStar=this.nodeStar.children[0],this.prefabStar.active=!1,this.schedule(this.createStar.bind(this),.5)},e.prototype.start=function(){},u([m({type:cc.Node,displayName:"\u9762\u677f"})],e.prototype,"nodePanel",void 0),u([m({type:cc.Node,displayName:"\u8272\u6761"})],e.prototype,"nodeColorBar",void 0),u([m({type:f.default,displayName:"\u663c\u591c\u56fe"})],e.prototype,"imgNight",void 0),u([m({type:d.default,displayName:"\u663c\u591c\u79fb\u52a8"})],e.prototype,"moveNight",void 0),u([m({type:cc.Node,displayName:"\u6d41\u661f\u8282\u70b9"})],e.prototype,"nodeStar",void 0),u([m({type:cc.Label,displayName:"\u8fdb\u5ea6"})],e.prototype,"lbProgress",void 0),u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],TimeRemain:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c1c39i2hdhK+rVNOk/7yz+d","TimeRemain");var r=t,i=e,a=o;cc._RF.push(i,"c1c39i2hdhK+rVNOk/7yz+d","TimeRemain");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("FbfAnimation"),p=r("GameGlobaled"),f=r("SoundHelper"),d=cc._decorator,y=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tween=null,e}return l(e,t),e.prototype.setSpriteFrame=function(e){t.prototype.setSpriteFrame.call(this,e),f.default.playUiSfx("Time"),this.tween&&this.tween.stop(),this.tween=cc.tween(this.sprite.node).set({scale:3,opacity:0}).to(.2,{scale:1,opacity:255},{easing:cc.easing.backIn}).delay(.5).set({opacity:0}).start(p.default.speed)},u([y],e)}(s.default));a.default=h,cc._RF.pop(),cc._RF.pop()},{}],TimeTip:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"30257Ng5y5F2o0WRW2B3HrN","TimeTip");var r=e,i=o;cc._RF.push(r,"30257Ng5y5F2o0WRW2B3HrN","TimeTip");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=[{time:30,msg:"\u575a\u5b8830\u79d2\uff0c\u5929\u4eae\u540e\u602a\u7269\u6d88\u4ea1"},{time:20,msg:"\u575a\u5b8820\u79d2\uff0c\u5929\u4eae\u540e\u602a\u7269\u6d88\u4ea1"}],d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbText=null,e.tween=null,e.lastShowIndex=-1,e}return c(e,t),e.prototype.reset=function(){this.lastShowIndex=-1},e.prototype.show=function(t){for(var e=this,o=0;o<f.length;o++)if(o>this.lastShowIndex&&t<=f[o].time)return this.lastShowIndex=o,this.node.active=!0,this.lbText.string=f[o].msg,this.tween&&this.tween.stop(),void(this.tween=cc.tween(this.node).delay(3).call(function(){e.node.active=!1,e.tween=null}).start())},e.prototype.start=function(){},l([p({type:cc.Label,displayName:"\u6587\u672c"})],e.prototype,"lbText",void 0),l([s],e)}(cc.Component);i.default=d,cc._RF.pop(),cc._RF.pop()},{}],TimeUtil:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"4eedftOZzZMZ75wCIge84WI","TimeUtil");var r=e,i=o;cc._RF.push(r,"4eedftOZzZMZ75wCIge84WI","TimeUtil"),Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(){}return t.setServerTimeOffset=function(t){this.serverTimeOffset=t-(new Date).getTime()},t.debugTimeStart=function(){this.debugTime=(new Date).getTime()},t.debugTimeEnd=function(){cc.log("debugTime :",(new Date).getTime()-this.debugTime,"ms")},t.delay=function(t){return void 0===t&&(t=0),new Promise(function(e){cc.Canvas.instance.scheduleOnce(function(){e(null)},t)})},t.awaitTween=function(t){return new Promise(function(e){t.call(function(){e(null)}).start()})},t.getTodayStartTimestamp=function(){return new Date((new Date).setHours(0,0,0,0)).getTime()},t.getNextdayStartTimestamp=function(){return new Date((new Date).setHours(0,0,0,0)+this.OneDayTimestampOffset).getTime()},t.getResidueTimestamp=function(){return this.OneDayTimestampOffset-(this.getTime()-this.getTodayStartTimestamp())},t.getDateByTimestamp=function(t){return new Date(t)},t.getDate=function(){return new Date},t.getTime=function(){return(new Date).getTime()+this.serverTimeOffset},t.convertSecondToString=function(t){var e=Math.floor(Math.max(t,0)),o=Math.floor(e/60),n=e-60*o;if(o<60)return(o>9?"":"0")+o+":"+(n>9?"":"0")+n;var r=Math.floor(o/60);return(r>9?"":"0")+r+":"+((o-=60*r)>9?"":"0")+o+":"+(n>9?"":"0")+n},t.getHour=function(t){return void 0===t&&(t=null),new Date(t).getHours()},t.isToday=function(t){if(t){switch(n(t)){case"string":t=new Date(t.replace(/-/,"/"));break;case"number":t=new Date(t)}return new Date,(new Date).setHours(0,0,0,0)===t.setHours(0,0,0,0)}},t.formatDatapublicformatDate=function(t,e){if(t){switch(e||(e="yyyy-MM-dd"),n(t)){case"string":t=new Date(t.replace(/-/,"/"));break;case"number":t=new Date(t)}if(t instanceof Date){var o={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return e.replace(/(yyyy|MM?|dd?|HH?|mm?|ss?)/g,function(){return o[arguments[0]]})}}},t.OneDayTimestampOffset=846e5,t.OneHourItemsOffset=36e5,t.serverTimeOffset=0,t.debugTime=0,t}();i.default=a,cc._RF.pop(),cc._RF.pop()},{}],TipsFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"9f298hnQtFAzLQA6u2X7pi0","TipsFrame");var r=t,i=e,a=o;cc._RF.push(i,"9f298hnQtFAzLQA6u2X7pi0","TipsFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("LangHelper"),d=r("FrameHelper"),y=cc._decorator,h=y.ccclass,m=y.menu,b=y.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbTips=null,e}return l(e,t),e.prototype.onClickExit=function(){this.hideFrame()},e.prototype.onlickFree=function(){},e.prototype.onShow=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(){return e="string"==typeof t?t:"tips."+t,this.lbTips.string=f.default.getStr(e),[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){},e.frameInfo={name:"TipsFrame",type:d.FrameType.Normal,bundleName:"Root",prefabName:"Prefab/Frame/TipsFrame",zIndex:20},u([b({type:cc.Label,displayName:"\u63d0\u793a\u6587\u4ef6"})],e.prototype,"lbTips",void 0),u([h,m("\u754c\u9762/TipsFrame \u6587\u5b57\u63d0\u793a\u754c\u9762")],e)}(d.FrameBase);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],ToggleButtonByNode:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"1a422CQH0NOfq4DnSYBo8fI","ToggleButtonByNode");var r=t,i=e,a=o;cc._RF.push(i,"1a422CQH0NOfq4DnSYBo8fI","ToggleButtonByNode");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("SoundHelper"),p=cc._decorator,f=p.ccclass,d=p.property,y=p.menu,h=p.executeInEditMode,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOpen=!1,e.targetX=0,e.isEnableClose=!0,e.isInteractable=!0,e.nodeOn=null,e.nodeOff=null,e.soundFileName="",e.btn=null,e.param=null,e.onTouchUninteractable=null,e.event=new cc.Component.EventHandler,e.eventOff=new cc.Component.EventHandler,e.scaleOn=1.1,e.scaleOff=.9,e.orgY=0,e}return l(e,t),Object.defineProperty(e.prototype,"editorIsOpen",{get:function(){return this.isOpen},set:function(t){this.setOpen(t)},enumerable:!1,configurable:!0}),e.prototype.setEvent=function(t,e,o,n){this.event.target=t,this.event.component=e,this.event.handler=o,this.param=n},e.prototype.setOpen=function(t){this.isOpen=t,this.nodeOn&&(this.isOpen&&(this.node.height=this.nodeOn.height,this.node.width=this.nodeOn.width),this.nodeOn.active=this.isOpen),this.nodeOff&&(this.isOpen||(this.node.height=this.nodeOff.height,this.node.width=this.nodeOff.width)),this.isOpen&&this.event?this.event.emit([this,this.param]):this.eventOff&&this.eventOff.emit([this,this.param]),cc.tween(this.nodeOff).to(.2,{scale:this.isOpen?this.scaleOn:this.scaleOff,y:this.isOpen?this.orgY+25:this.orgY},{easing:cc.easing.sineInOut}).start()},e.prototype.listenUninteractable=function(t){this.onTouchUninteractable=t},e.prototype.onTouch=function(){this.isOpen&&!this.isEnableClose||(this.isInteractable?(this.setOpen(!this.isOpen),""!==this.soundFileName&&s.default.playUiSfx(this.soundFileName)):this.onTouchUninteractable&&this.onTouchUninteractable())},e.prototype.onLoad=function(){if(cc.sys.platform!==cc.sys.EDITOR_PAGE){this.btn=this.addComponent(cc.Button);var t=new cc.Component.EventHandler;t.target=this.node,t.component="ToggleButtonByNode",t.handler="onTouch",this.btn.clickEvents.push(t)}this.orgY=this.nodeOff.y},e.prototype.start=function(){},u([d({displayName:"\u5f00\u5173"})],e.prototype,"editorIsOpen",null),u([d({displayName:"\u5f00\u5173",visible:!1})],e.prototype,"isOpen",void 0),u([d({displayName:"\u662f\u5426\u5141\u8bb8\u5173\u95ed"})],e.prototype,"isEnableClose",void 0),u([d({displayName:"\u662f\u5426\u53ef\u4ea4\u4e92"})],e.prototype,"isInteractable",void 0),u([d({type:cc.Node,displayName:"\u5f00\u542f\u72b6\u6001"})],e.prototype,"nodeOn",void 0),u([d({type:cc.Node,displayName:"\u5173\u95ed\u72b6\u6001"})],e.prototype,"nodeOff",void 0),u([d({displayName:"\u97f3\u6548\u6587\u4ef6\u540d"})],e.prototype,"soundFileName",void 0),u([d({type:cc.Component.EventHandler,displayName:"\u5f00\u4e8b\u4ef6"})],e.prototype,"event",void 0),u([d({type:cc.Component.EventHandler,displayName:"\u5173\u4e8b\u4ef6"})],e.prototype,"eventOff",void 0),u([f,h,y("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u5f00\u5173\u6309\u94ae")],e)}(cc.Component);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],Tools:[function(t,e,o){"use strict";cc._RF.push(e,"498bfEZSHJNGJcmlTEU48Ip","Tools");var n=t,r=e,i=o;cc._RF.push(r,"498bfEZSHJNGJcmlTEU48Ip","Tools"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("GameDefine"),c=n("sdbProb"),l=n("LangHelper"),u=n("RunDataHelper"),s=n("StaticDBHelper"),p=n("BagData"),f=n("TowerData"),d=function(){function t(){}return t.getBattleReward=function(t,e){void 0===e&&(e=1);var o={},n=Math.floor(t.coin*e),r=Math.floor(t.diamond*e),i=Math.floor(t.card*e);n>0&&(o[a.default.ItemCoinId]={id:a.default.ItemCoinId,count:n}),r>0&&(o[a.default.ItemDiamondId]={id:a.default.ItemDiamondId,count:r});for(var c=u.DataHelper.getData(f.default).getUnlockTowers(),l=0;l<i;l++){var s=c[Math.floor(Math.random()*c.length)];o.hasOwnProperty(s.id)?o[s.id].count+=1:o[s.id]={id:s.id,count:1}}return Object.values(o)},t.getRewardByDebris=function(t,e){void 0===t&&(t=[]);for(var o=u.DataHelper.getData(f.default).getUnlockTowers(),n=0;n<e;n++){for(var r=o[Math.floor(Math.random()*o.length)],i=!0,a=0;a<t.length;a++)if(t[a].id==r.id){t[a].count+=1,i=!1;break}i&&t.push({id:r.id,count:1})}},t.addToBagByRewardList=function(t){void 0===t&&(t=[]);for(var e=0;e<t.length;e++)u.DataHelper.getData(p.default).addItemCount(t[e].id,t[e].count)},t.getCardInfo=function(t){return l.default.getStr(t.desc)},t.addRandCard=function(t,e,o){for(var n=s.default.getData(c.default,t),r=0,i=0;i<n.pro.length;i++)r+=n.pro[i];for(i=0;i<e;i++)for(var a=Math.floor(Math.random()*r),l=0,u=0;u<n.pro.length;u++)if((l+=n.pro[u])>=a){for(var p=!1,f=0;f<o.length;f++)if(o[f].id==n.debrisIdList[u]){o[f].count++,p=!0;break}p||o.push({id:n.debrisIdList[u],count:1});break}},t}();i.default=d,cc._RF.pop(),cc._RF.pop()},{}],TopFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"0958bD6eT9Cq5xj4FXFAXpd","TopFrame");var r=t,i=e,a=o;cc._RF.push(i,"0958bD6eT9Cq5xj4FXFAXpd","TopFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("FrameHelper"),d=r("Factory"),y=cc._decorator,h=y.ccclass,m=y.menu,b=(y.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return l(e,t),o=e,e.flyItem=function(t,e,o,n,r){return void 0===r&&(r=null),s(this,void 0,void 0,function(){var i,a;return p(this,function(c){switch(c.label){case 0:return this.frame?[4,d.default.instance.create(t)]:[2];case 1:return(i=c.sent())?(i.parent=this.frame.node,i.setPosition(this.frame.node.convertToNodeSpaceAR(e)),a=this.frame.node.convertToNodeSpaceAR(o),cc.tween(i).to(n,{x:a.x,y:a.y}).call(function(){r?r(i):d.default.instance.remove(i)}).start(),[2]):[2]}})})},e.remove=function(t){d.default.instance.remove(t)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),o.frame=this},e.prototype.start=function(){},e.frameInfo={name:"TopFrame",type:f.FrameType.Normal,bundleName:"Root",prefabName:"Prefab/Frame/TopFrame",zIndex:cc.macro.MAX_ZINDEX},e.frame=null,o=u([h,m("\u754c\u9762/TopFrame \u9876\u5c42\u754c\u9762")],e)}(f.FrameBase));a.default=b,cc._RF.pop(),cc._RF.pop()},{}],TowerAtt:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"395e1AhrhpOH66nAfdGjh3x","TowerAtt");var r=e,i=o;cc._RF.push(r,"395e1AhrhpOH66nAfdGjh3x","TowerAtt");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nowLabel=null,e.nextLabel=null,e}return c(e,t),e.prototype.setAtt=function(t,e,o,n){void 0===e&&(e=0),void 0===o&&(o=0),void 0===n&&(n="");var r=e-t;this.nowLabel.string=t.toFixed(o)+n,this.nextLabel.string="+"+r.toFixed(o),this.nextLabel.node.active=r>0},l([p({type:cc.Label,displayName:"\u5f53\u524d\u503c"})],e.prototype,"nowLabel",void 0),l([p({type:cc.Label,displayName:"\u4e0b\u4e00\u7b49\u7ea7\u503c"})],e.prototype,"nextLabel",void 0),l([s],e)}(cc.Component);i.default=f,cc._RF.pop(),cc._RF.pop()},{}],TowerBaseRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"60f2dDAPehOL56AYpLsA1JY","TowerBaseRenderer");var r=t,i=e,a=o;cc._RF.push(i,"60f2dDAPehOL56AYpLsA1JY","TowerBaseRenderer");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ChessRenderer"),p=r("TowerRenderer"),f=cc._decorator,d=f.ccclass,y=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=this.getAnimationName(s.AnimationNames.Stand),o=this.getAnimationName(s.AnimationNames.Attack);this.spine.setMix(e,o,.1)},e.prototype.start=function(){},u([d],e)}(p.default));a.default=y,cc._RF.pop(),cc._RF.pop()},{}],TowerCardItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"3c6c2MkLLVEOrCTOOEwxPfO","TowerCardItem");var r=t,i=e,a=o;cc._RF.push(i,"3c6c2MkLLVEOrCTOOEwxPfO","TowerCardItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("InsetByScale"),p=r("sdbTower"),f=r("TowerSelectFrame"),d=r("AssetBundleHelper"),y=r("FrameHelper"),h=r("StaticDBHelper"),m=cc._decorator,b=m.ccclass,v=m.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptIcon=null,e.lbCount=null,e.sptEffect=null,e.id=0,e}return l(e,t),e.prototype.init=function(t,e,o){var n=this;if(this.id=t,0==t)return this.sptIcon.spriteFrame=null,void(this.lbCount.node.active=!1);var r=h.default.getData(p.default,this.id);d.default.setSpriteFrame(this.sptIcon,r.icon).then(function(){var t;null===(t=n.sptIcon.getComponent(s.default))||void 0===t||t.refresh(),o&&(n.sptEffect.node.active=!0,n.sptEffect.setAnimation(0,"animation",!1))}),e>0?(this.lbCount.string=e.toString(),this.lbCount.node.active=!0):this.lbCount.node.active=!1},e.prototype.onCompleteListener=function(){this.sptEffect.node.active=!1},e.prototype.onTouchEnd=function(){0!=this.id&&y.default.showFrame(f.default,this.id)},e.prototype.onLoad=function(){this.sptEffect.setCompleteListener(this.onCompleteListener.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.start=function(){},u([v({type:cc.Sprite,displayName:"\u56fe\u7247"})],e.prototype,"sptIcon",void 0),u([v({type:cc.Label,displayName:"\u6570\u91cf"})],e.prototype,"lbCount",void 0),u([v({type:sp.Skeleton,displayName:"\u7279\u6548"})],e.prototype,"sptEffect",void 0),u([b],e)}(cc.Component);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],TowerData:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"944f7QYFjdD1K1aHzm8Pcu/","TowerData");var r=t,i=e,a=o;cc._RF.push(i,"944f7QYFjdD1K1aHzm8Pcu/","TowerData");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameDefine"),p=r("sdbCard"),f=r("sdbTower"),d=r("RunDataHelper"),y=r("StaticDBHelper"),h=r("Version"),m=r("StageData"),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MaxLv=30,e}return l(e,t),e.prototype.defaultData=function(){return{towers:{}}},Object.defineProperty(e.prototype,"localStorageKey",{get:function(){return"TowerData"},enumerable:!1,configurable:!0}),e.prototype.levelup=function(t){return this.data.towers.hasOwnProperty(t)||(this.data.towers[t]=1),this.data.towers[t]+1>this.MaxLv?null:(this.data.towers[t]++,this.data.towers[t])},e.prototype.getTowerLevel=function(t){if(this.data.towers.hasOwnProperty(t)){var e=+this.data.towers[t];return e>this.MaxLv&&(e=this.MaxLv),e}return 1},e.prototype.getUnlockTowers=function(){var t=y.default.getTable(f.default),e=d.DataHelper.getData(m.default).stage,o=[];for(var n in t)parseInt(n)>=s.TowerId.BASE||(t[n].unlock<=e||h.getUrlParam("unlock"))&&o.push(t[n]);return o},e.prototype.getUnlockCards=function(){var t=[],e=y.default.getTable(p.default);for(var o in e)(e[o].unlock<=this.getTowerLevel(e[o].towerId)||h.getUrlParam("unlock"))&&t.push(e[o]);return t},e.prototype.getBaseTower=function(){var t=[];for(var e in t.push(s.TowerId.BASE),this.data.towers)parseInt(e)>s.TowerId.BASE&&t.push(parseInt(e));return t},e.prototype.unlockTower=function(t){this.data.towers.hasOwnProperty(t)||(this.data.towers[t]=1)},u([d.DirtyData],e.prototype,"levelup",null),u([d.DirtyData],e.prototype,"unlockTower",null),e}(d.RunDataBase);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],TowerFlameRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e7790Fn8uFNXaLsSiRkptYG","TowerFlameRenderer");var r=t,i=e,a=o;cc._RF.push(i,"e7790Fn8uFNXaLsSiRkptYG","TowerFlameRenderer");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameGlobaled"),p=r("ChessRenderer"),f=r("TowerRenderer"),d=cc._decorator,y=d.ccclass,h=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.setAnimation=function(e,o){if(void 0===o&&(o=0),this.spine){if(this.spine.timeScale=s.default.speed,e==p.AnimationNames.Attack){var n=this.getAnimationName(e);n&&this.spine.setAnimation(o,n,!0);var r=this.listenEventMap[p.AnimationEvents.Attack];return r&&r(),!0}return t.prototype.setAnimation.call(this,e,o)}},e.prototype.onLoad=function(){},e.prototype.start=function(){},u([y],e)}(f.default));a.default=h,cc._RF.pop(),cc._RF.pop()},{}],TowerFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"3dd85NbLHRDIqYbUmJj/W98","TowerFrame");var r=t,i=e,a=o;cc._RF.push(i,"3dd85NbLHRDIqYbUmJj/W98","TowerFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("LayoutList"),d=r("EventConfig"),y=r("GameDefine"),h=r("sdbTower"),m=r("EventHelper"),b=r("FrameHelper"),v=r("StaticDBHelper"),g=r("TowerItem"),_=cc._decorator,w=_.ccclass,S=_.menu,R=_.property,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TowerList=null,e.TowerDataList=[],e}return l(e,t),e.prototype.beforeShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.TowerList.createItemsByLength(this.TowerDataList.length),[2,!0]})})},e.prototype.refresh=function(){this.TowerList.createItemsByLength(this.TowerDataList.length)},e.prototype.hide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return t.prototype.hide.call(this),[2]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onTowerListCreate=function(t,e){t.getComponent(g.default).setTower(this.TowerDataList[e].id)},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){var e,o;return p(this,function(n){switch(n.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:for(o in n.sent(),m.default.on(d.default.TowerLvUp,this.refresh,this),e=v.default.getTable(h.default))e[o].id<y.TowerId.BASE&&this.TowerDataList.push(e[o]);return this.TowerDataList.sort(function(t,e){return t.unlock!==e.unlock?t.unlock<e.unlock?-1:1:t.id<e.id?-1:1}),this.TowerList.onItemCreate(this.onTowerListCreate.bind(this)),[2]}})})},e.prototype.start=function(){},e.frameInfo={name:"TowerFrame",type:b.FrameType.Full,bundleName:"Root",prefabName:"Prefab/Frame/TowerFrame/TowerFrame",zIndex:2},u([R({type:f.default,displayName:"\u5df2\u4e0a\u9635\u5217\u8868"})],e.prototype,"TowerList",void 0),u([w,S("\u754c\u9762/TowerFrame \u5854\u754c\u9762")],e)}(b.FrameBase);a.default=O,cc._RF.pop(),cc._RF.pop()},{}],TowerInfoFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ffaa0bg02FACqHl4rKawHG0","TowerInfoFrame");var r=t,i=e,a=o;cc._RF.push(i,"ffaa0bg02FACqHl4rKawHG0","TowerInfoFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("LayoutList"),d=r("AssetBundleHelper"),y=r("FrameHelper"),h=cc._decorator,m=h.ccclass,b=h.menu,v=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptIcon=null,e.lbName=null,e.lbDesc=null,e.layout=null,e.nodeClose=null,e.tower=null,e.attList=[],e}return l(e,t),e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){var e=this;return p(this,function(){return this.tower=t,this.lbName.string=t.towerData.name,this.lbDesc.string=t.towerData.desc,d.default.setSpriteFrame(this.sptIcon,t.towerData.icon).then(function(){e.sptIcon.node.scale=110/Math.max(e.sptIcon.node.width,e.sptIcon.node.height)}),this.attList=t.weapon.getAttInfoList(),this.layout.createItemsByLength(this.attList.length),[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onItemCreate=function(t,e){var o=t.getChildByName("Name").getComponent(cc.Label),n=t.getChildByName("Value").getComponent(cc.Label);o.string=this.attList[e].name,n.string=this.attList[e].value},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:return e.sent(),this.layout.onItemCreate(this.onItemCreate.bind(this)),this.nodeClose.on(cc.Node.EventType.TOUCH_END,this.hide,this),[2]}})})},e.prototype.start=function(){},e.frameInfo={name:"TowerInfoFrame",type:y.FrameType.Model,bundleName:"Root",prefabName:"Prefab/Frame/TowerInfoFrame",zIndex:30},u([v({type:cc.Sprite,displayName:"Icon"})],e.prototype,"sptIcon",void 0),u([v({type:cc.Label,displayName:"\u540d\u5b57"})],e.prototype,"lbName",void 0),u([v({type:cc.Label,displayName:"\u63cf\u8ff0"})],e.prototype,"lbDesc",void 0),u([v({type:f.default,displayName:"\u5c5e\u6027\u5217\u8868"})],e.prototype,"layout",void 0),u([v({type:cc.Node,displayName:"\u5173\u95ed"})],e.prototype,"nodeClose",void 0),u([m,b("\u754c\u9762/TowerInfoFrame \u5854\u4fe1\u606f\u754c\u9762")],e)}(y.FrameBase);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],TowerItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"784bb+qSZtAyYYCxWSPrV/w","TowerItem");var r=t,i=e,a=o;cc._RF.push(i,"784bb+qSZtAyYYCxWSPrV/w","TowerItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ImageLoader"),p=r("sdbTower"),f=r("sdbTowerLevel"),d=r("AssetBundleHelper"),y=r("FrameHelper"),h=r("LangHelper"),m=r("RunDataHelper"),b=r("StaticDBHelper"),v=r("BagData"),g=r("StageData"),_=r("TowerData"),w=r("TowerUpFrame"),S=cc._decorator,R=S.ccclass,O=S.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardNode=null,e.lockNode=null,e.cardSpt=null,e.groundSpt=null,e.progressBar=null,e.progressLb=null,e.cardLevel=null,e.qualityLoader=null,e.upFlag=null,e.unLockLb=null,e.towerBtn=null,e.towerId=null,e.isLock=!1,e.isMax=!1,e}return l(e,t),e.prototype.setTower=function(t,e){void 0===e&&(e=!1),this.towerId=t;var o=b.default.getData(p.default,t),n=m.DataHelper.getData(_.default).getTowerLevel(t),r=b.default.filterData(f.default,{towerId:t,level:n})[0];this.isMax=n>=m.DataHelper.getData(_.default).MaxLv,this.qualityLoader.select(o.quality-1),this.cardLevel.string=h.default.formatStr("ui.32",{lv:n});var i=m.DataHelper.getData(v.default).getItemCount(+t);d.default.setSpriteFrame(this.cardSpt,o.icon),d.default.setSpriteFrame(this.groundSpt,"Texture/TowerWar/Tower/"+o.groundImg);var a=this.isMax?0:r.card,c=i/a;this.progressLb.string=i+"/"+a,this.progressBar.progress=c,this.upFlag.active=c>=1,this.isLock=!1,o.unlock>0&&(this.isLock=!m.DataHelper.getData(g.default).isPass(o.unlock),this.unLockLb.string="\u901a\u8fc7\u7b2c"+o.unlock+"\u7ae0\u8282\u89e3\u9501"),this.lockNode.active=this.isLock,this.towerBtn.interactable=!e},e.prototype.onClick=function(){this.isLock||y.default.showFrame(w.default,this.towerId)},u([O({type:cc.Node,displayName:"\u5361\u724c\u8282\u70b9"})],e.prototype,"cardNode",void 0),u([O({type:cc.Node,displayName:"\u4e0a\u9501\u8282\u70b9"})],e.prototype,"lockNode",void 0),u([O({type:cc.Sprite,displayName:"\u5361\u724c\u56fe\u7247"})],e.prototype,"cardSpt",void 0),u([O({type:cc.Sprite,displayName:"\u5360\u5730\u56fe\u7247"})],e.prototype,"groundSpt",void 0),u([O({type:cc.ProgressBar,displayName:"\u788e\u7247\u5347\u7ea7\u8fdb\u5ea6"})],e.prototype,"progressBar",void 0),u([O({type:cc.Label,displayName:"\u788e\u7247\u5347\u7ea7\u8fdb\u5ea6"})],e.prototype,"progressLb",void 0),u([O({type:cc.Label,displayName:"\u5361\u724c\u7b49\u7ea7"})],e.prototype,"cardLevel",void 0),u([O({type:s.default,displayName:"\u80cc\u666f\u54c1\u8d28\u52a0\u8f7d\u5668"})],e.prototype,"qualityLoader",void 0),u([O({type:cc.Node,displayName:"\u5347\u7ea7\u6807\u8bc6"})],e.prototype,"upFlag",void 0),u([O({type:cc.Label,displayName:"\u89e3\u9501\u7ae0\u8282"})],e.prototype,"unLockLb",void 0),u([O({type:cc.Button,displayName:"\u5854\u6309\u94ae"})],e.prototype,"towerBtn",void 0),u([R],e)}(cc.Component);a.default=P,cc._RF.pop(),cc._RF.pop()},{}],TowerMagicRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"3f660srRAhAxoM2Ro6LW2nD","TowerMagicRenderer");var r=t,i=e,a=o;cc._RF.push(i,"3f660srRAhAxoM2Ro6LW2nD","TowerMagicRenderer");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("GameGlobaled"),p=r("ChessRenderer"),f=r("TowerRenderer"),d=cc._decorator,y=d.ccclass,h=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.setAnimation=function(e,o){if(void 0===o&&(o=0),this.spine){if(this.spine.timeScale=s.default.speed,e==p.AnimationNames.Attack){var n=this.getAnimationName(e);n&&this.spine.setAnimation(o,n,!0);var r=this.listenEventMap[p.AnimationEvents.Attack];return r&&r(),!0}return t.prototype.setAnimation.call(this,e,o)}},e.prototype.start=function(){},u([y],e)}(f.default));a.default=h,cc._RF.pop(),cc._RF.pop()},{}],TowerManager:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5730awsgZNGCLq3fzGuLtHp","TowerManager");var r=t,i=e,a=o;cc._RF.push(i,"5730awsgZNGCLq3fzGuLtHp","TowerManager");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("sdbTower"),d=r("sdbTowerBattle"),y=r("sdbTowerLevel"),h=r("StaticDBHelper"),m=r("Factory"),b=r("GameGlobaled"),v=r("GameDefine"),g=r("Tower"),_=r("RendererManager"),w=r("RunDataHelper"),S=r("TowerData"),R=r("ChessRenderer"),O=r("sdbHeroSkin"),P=r("HeroStoryData"),F=cc._decorator,T=F.ccclass,D=(F.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buildings=new Map,e.buildingUuid=1e3,e.base=null,e}var o;return l(e,t),o=e,e.prototype.generateId=function(){return this.buildingUuid++},e.prototype.create=function(t,e,o,n){return void 0===n&&(n=-1),s(this,void 0,void 0,function(){var r,i,a,c,l,u;return p(this,function(s){switch(s.label){case 0:return r=h.default.getData(f.default,t),i=h.default.filterData(d.default,{towerId:r.id,level:e})[0],a=w.DataHelper.getData(S.default).getTowerLevel(t),c=h.default.filterData(y.default,{towerId:r.id,level:a})[0],[4,m.default.instance.create("Prefab/Game/tower/"+r.prefab)];case 1:return(l=s.sent()).parent=_.default.instance.nodeStage,n<0?n=this.generateId():this.buildingUuid=Math.max(n+1,this.buildingUuid),(u=l.getComponent(g.default)).cleanup(),u.init(r,i,c,n>=0?n:this.generateId()),u.setPositionByXY(o.x,o.y),_.default.instance.registerRenderer(u.renderer),this.buildings.set(u.uid,u),v.TowerId.BASE===t&&(this.base=u),[2,u.uid]}})})},e.prototype.createBaseTower=function(t,e,o,n){return void 0===n&&(n=-1),s(this,void 0,void 0,function(){var r,i,a,c,l,u,s;return p(this,function(p){switch(p.label){case 0:return r=h.default.getData(f.default,t),i=h.default.filterData(d.default,{towerId:r.id,level:e})[0],a=w.DataHelper.getData(S.default).getTowerLevel(t),c=h.default.filterData(y.default,{towerId:r.id,level:a})[0],l=h.default.getData(O.default,w.DataHelper.getData(P.default).onBattleBaseTower),[4,m.default.instance.create("Prefab/Game/tower/"+l.prefab)];case 1:return(u=p.sent()).parent=_.default.instance.nodeStage,n<0?n=this.generateId():this.buildingUuid=Math.max(n+1,this.buildingUuid),(s=u.getComponent(g.default)).cleanup(),s.init(r,i,c,n>=0?n:this.generateId()),s.setPositionByXY(o.x,o.y),_.default.instance.registerRenderer(s.renderer),this.buildings.set(s.uid,s),v.TowerId.BASE<=t&&(this.base=s),[2,s.uid]}})})},e.prototype.resetPosition=function(t){var e=this.get(t);e.node.setPosition(b.default.boardStartPos.x+e.x*b.default.gridSize+e.width/2,b.default.boardStartPos.y+e.y*b.default.gridSize+e.height/2)},e.prototype.get=function(t){return this.buildings.get(t)},e.prototype.remove=function(t){var e=this.buildings.get(t);e&&(e.cleanup(),this.buildings.delete(t),m.default.instance.remove(e.node),_.default.instance.unregisterRenderer(e.renderer))},e.prototype.move=function(t,e){var o=this.get(t);o&&o.setPositionByXY(e.x,e.y)},e.prototype.levelup=function(t){var e=this.get(t);e&&(e.renderer.setAnimation(R.AnimationNames.Compound),e.levelup())},e.prototype.cleanup=function(){this.buildings.forEach(function(t){t.cleanup(),m.default.instance.remove(t.node),_.default.instance.unregisterRenderer(t.renderer)}),this.buildings.clear()},e.prototype.reset=function(){this.buildings.forEach(function(t){t.reset(),t.skillList.forEach(function(t){t.reset()})})},e.prototype.logicUpdate=function(t){this.buildings.forEach(function(e){e.logicUpdate(t)})},e.prototype.onLoad=function(){o.instance=this},e.prototype.start=function(){},e.instance=null,o=u([T],e)}(cc.Component));a.default=D,cc._RF.pop(),cc._RF.pop()},{}],TowerPoisonRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5810e2caDFKdJyzQiOb53Cu","TowerPoisonRenderer");var r=t,i=e,a=o;cc._RF.push(i,"5810e2caDFKdJyzQiOb53Cu","TowerPoisonRenderer");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("TowerRenderer"),p=cc._decorator,f=p.ccclass,d=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lightNode=null,e}return l(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.lightNode.active=e.level>1},e.prototype.start=function(){},u([d({type:cc.Node,displayName:"\u836f\u74f6\u5149"})],e.prototype,"lightNode",void 0),u([f],e)}(s.default);a.default=y,cc._RF.pop(),cc._RF.pop()},{}],TowerRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f92db4VMAdPHJjMsKbugdIx","TowerRenderer");var r=t,i=e,a=o;cc._RF.push(i,"f92db4VMAdPHJjMsKbugdIx","TowerRenderer");var c,l,u=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var p=r("GameDefine"),f=r("ChessRenderer"),d=r("ChessSpineRenderer"),y=r("ImageLoader"),h=cc._decorator,m=h.ccclass,b=h.property,v=((l={})[f.AnimationNames.Attack]="attack",l[f.AnimationNames.Stand]="wait",l[f.AnimationNames.Down]="down",l[f.AnimationNames.Compound]="merge",l),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=null,e}return u(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e);var o=p.TOWER_CONFIGS[e.towerId];this.size.width=o[0].length,this.size.height=o.length,this.level&&this.level.select(e.level-1),e.towerId!==p.TowerId.BASE&&this.spine.setSkin(e.level.toString())},e.prototype.getAnimationName=function(t){return v[t]},e.prototype.start=function(){},s([b({type:y.default,displayName:"\u7b49\u7ea7"})],e.prototype,"level",void 0),s([m],e)}(d.default);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],TowerSelectFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c1d6dzdw85NNbFqvOYaZ6Hu","TowerSelectFrame");var r=t,i=e,a=o;cc._RF.push(i,"c1d6dzdw85NNbFqvOYaZ6Hu","TowerSelectFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("FormatLabel"),d=r("sdbCard"),y=r("sdbTower"),h=r("AssetBundleHelper"),m=r("FrameHelper"),b=r("RunDataHelper"),v=r("StaticDBHelper"),g=r("GameData"),_=cc._decorator,w=_.ccclass,S=_.menu,R=_.property,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptIcon=null,e.lbName=null,e.formatCount=null,e.lbMsg=null,e.nodeTouch=null,e}return l(e,t),e.prototype.onTouchEnd=function(){this.hideFrame()},e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){var e,o,n,r,i,a,c=this;return p(this,function(){for(e=v.default.getData(y.default,t),h.default.setSpriteFrame(this.sptIcon,e.icon).then(function(){c.sptIcon.node.scale=Math.min(120/c.sptIcon.node.width,120/c.sptIcon.node.height)}),this.lbName.string=e.name,o=b.DataHelper.getData(g.default).cards,n=[],r="",i=0;i<o.length;i++)(a=v.default.getData(d.default,o[i])).default>0||a.target.includes(t)&&(n.push(a),r+="["+a.name+"]\u3001");return this.lbMsg.string=r.substring(0,r.length-1),this.formatCount.setFormatLabel({count:n.length}),[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return t.prototype.onHide.call(this),[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.nodeTouch.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.frameInfo={name:"TowerSelectFrame",type:m.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/TowerSelectFrame",zIndex:20},u([R({type:cc.Sprite,displayName:"\u56fe\u6807"})],e.prototype,"sptIcon",void 0),u([R({type:cc.Label,displayName:"\u540d\u79f0"})],e.prototype,"lbName",void 0),u([R({type:f.default,displayName:"\u6570\u91cf"})],e.prototype,"formatCount",void 0),u([R({type:cc.Label,displayName:"\u5361"})],e.prototype,"lbMsg",void 0),u([R({type:cc.Node,displayName:"\u70b9\u51fb\u8282\u70b9"})],e.prototype,"nodeTouch",void 0),u([w,S("\u754c\u9762/TowerSelectFrame \u5854\u5df2\u9009\u5361\u724c\u754c\u9762")],e)}(m.FrameBase);a.default=O,cc._RF.pop(),cc._RF.pop()},{}],TowerSkill:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d0117mEEQBMQ4ux/Ynyvvus","TowerSkill");var r=t,i=e,a=o;cc._RF.push(i,"d0117mEEQBMQ4ux/Ynyvvus","TowerSkill");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("FrameHelper"),p=r("RunDataHelper"),f=r("TowerData"),d=r("CardInfoFrame"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockNode=null,e.levelLabel=null,e.descLabel=null,e.skillData=null,e}return l(e,t),e.prototype.setSkill=function(t){this.skillData=t;var e=p.DataHelper.getData(f.default).getTowerLevel(t.target[0])<t.unlock,o=t.skillName;this.lockNode.active=e,this.levelLabel.string=t.unlock+"\u7ea7",this.descLabel.string=o},e.prototype.onClick=function(){s.default.showFrame(d.default,this.skillData.id,!1)},u([m({type:cc.Node,displayName:"\u4e0a\u9501\u8282\u70b9"})],e.prototype,"lockNode",void 0),u([m({type:cc.Label,displayName:"\u6280\u80fd\u7b49\u7ea7"})],e.prototype,"levelLabel",void 0),u([m({type:cc.Label,displayName:"\u6280\u80fd\u63cf\u8ff0"})],e.prototype,"descLabel",void 0),u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],TowerSpriteRenderer:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2ed7ajR/z1GBLyKtKfR0oqu","TowerSpriteRenderer");var r=t,i=e,a=o;cc._RF.push(i,"2ed7ajR/z1GBLyKtKfR0oqu","TowerSpriteRenderer");var c,l,u=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var p=r("GameDefine"),f=r("ChessRenderer"),d=r("ChessSpriteRenderer"),y=cc._decorator,h=y.ccclass,m=y.property,b=((l={})[f.AnimationNames.Attack]="attack",l[f.AnimationNames.Stand]="wait",l),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbLevel=null,e}return u(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e);var o=p.TOWER_CONFIGS[e.towerId];this.size.width=o[0].length,this.size.height=o.length,this.lbLevel&&(this.lbLevel.string=e.level.toString())},e.prototype.getAnimationName=function(t){return b[t]},e.prototype.start=function(){},s([m({type:cc.Label,displayName:"\u7b49\u7ea7"})],e.prototype,"lbLevel",void 0),s([h],e)}(d.default);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],TowerUpFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ab6b8x+5zVKaatH0j3M8zX5","TowerUpFrame");var r=t,i=e,a=o;cc._RF.push(i,"ab6b8x+5zVKaatH0j3M8zX5","TowerUpFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("TrackHelper"),d=r("LayoutList"),y=r("MateralsLoader"),h=r("EventConfig"),m=r("GameDefine"),b=r("sdbCard"),v=r("sdbTower"),g=r("sdbTowerLevel"),_=r("EventHelper"),w=r("FrameHelper"),S=r("LangHelper"),R=r("RunDataHelper"),O=r("SoundHelper"),P=r("StaticDBHelper"),F=r("BagData"),T=r("TowerData"),D=r("TipsFrame"),k=r("TowerAtt"),C=r("TowerItem"),L=r("TowerSkill"),B=cc._decorator,j=B.ccclass,x=B.menu,I=B.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attList=[],e.skillList=null,e.tower=null,e.towerName=null,e.towerDesc=null,e.upCost=null,e.upBtnLabel=null,e.upBtnMateralsLoader=null,e.testBtn=null,e.towerUpEffect=null,e.towerData=null,e.skillData=[],e.isMax=!1,e.costCoin=0,e.costDebris=0,e}var o;return l(e,t),o=e,e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(){return e=P.default.getData(v.default,t),this.towerData=e,this.towerName.string=e.name,this.towerDesc.string=e.desc,this.refresh(e),[2,!0]})})},e.prototype.refresh=function(t){this.tower.getComponent(C.default).setTower(t.id,!0),this.refreshAtt(t),this.skillData=[];for(var e=P.default.filterData(b.default,{towerId:t.id}),o=function(t){e[t].unlock>1&&(n.skillData.find(function(o){return o.unlock===e[t].unlock})||n.skillData.push(e[t]))},n=this,r=0;r<e.length;r++)o(r);this.skillData.sort(function(t,e){return t.unlock-e.unlock}),this.skillList.createItemsByLength(this.skillData.length)},e.prototype.hide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return t.prototype.hide.call(this),[2]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onClickAddTestDebris=function(){R.DataHelper.getData(T.default).levelup(this.towerData.id),this.refresh(this.towerData),_.default.emit(h.default.TowerLvUp)},e.prototype.onClickClose=function(){this.towerUpEffect.node.active=!1,w.default.hideFrame(o)},e.prototype.onBtnUpClick=function(){if(this.isMax)w.default.showFrame(D.default,"\u5df2\u6ee1\u7ea7");else{if(R.DataHelper.getData(F.default).getItemCount(this.towerData.id)<this.costDebris)return void w.default.showFrame(D.default,"\u788e\u7247\u4e0d\u8db3");if(R.DataHelper.getData(F.default).getItemCount(m.default.ItemCoinId)<this.costCoin)return void w.default.showFrame(D.default,"\u91d1\u5e01\u4e0d\u8db3");O.default.playUiSfx("towerUp"),R.DataHelper.getData(F.default).subItemCount(m.default.ItemCoinId,this.costCoin),R.DataHelper.getData(F.default).subItemCount(this.towerData.id,this.costDebris);var t=R.DataHelper.getData(T.default).levelup(this.towerData.id);this.refresh(this.towerData),this.towerUpEffect.node.active=!0,this.towerUpEffect.setAnimation(1,"animation",!1),w.default.showFrame(D.default,"\u5347\u7ea7\u6210\u529f"),_.default.emit(h.default.TowerLvUp),_.default.emit(h.default.refreshMainRed,"tower"),f.default.trackEventTowerLevelup(this.towerData.id,t)}},e.prototype.refreshAtt=function(t){var e=+R.DataHelper.getData(T.default).getTowerLevel(t.id),o=P.default.filterData(g.default,{towerId:t.id,level:e})[0];this.isMax=e>=R.DataHelper.getData(T.default).MaxLv;var n=this.isMax?{hp:0,atk:0,as:0,ad:0}:P.default.filterData(g.default,{towerId:t.id,level:e+1})[0];this.attList[0].setAtt(o.hp,n.hp),this.attList[1].setAtt(o.atk,n.atk),this.attList[2].setAtt(o.as/1e3,n.as/1e3,2),this.attList[3].setAtt(o.ad,n.ad),this.costCoin=this.isMax?0:+o.coin,this.costDebris=this.isMax?0:+o.card,this.upCost.string=this.costCoin.toString();var r=this.costCoin<=R.DataHelper.getData(F.default).getItemCount(50001)&&this.costDebris<=R.DataHelper.getData(F.default).getItemCount(this.towerData.id)&&!this.isMax;this.upBtnMateralsLoader.select(r?0:1),this.upBtnLabel.string=this.isMax?S.default.getStr("btn.12"):S.default.getStr("btn.9")},e.prototype.onSkillListCreate=function(t,e){t.getComponent(L.default).setSkill(this.skillData[e])},e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,t.prototype.onLoad.call(this)];case 1:return e.sent(),this.skillList.onItemCreate(this.onSkillListCreate.bind(this)),[2]}})})},e.prototype.start=function(){},e.frameInfo={name:"TowerUpFrame",type:w.FrameType.Model,bundleName:"Root",prefabName:"Prefab/Frame/TowerFrame/TowerUpFrame",zIndex:6},e.Tower_Att_Size=4,u([I({type:k.default,displayName:"\u5c5e\u6027\u5217\u8868"})],e.prototype,"attList",void 0),u([I({type:d.default,displayName:"\u6280\u80fd\u5217\u8868"})],e.prototype,"skillList",void 0),u([I({type:cc.Node,displayName:"\u5854item"})],e.prototype,"tower",void 0),u([I({type:cc.Label,displayName:"\u5854\u540d\u79f0"})],e.prototype,"towerName",void 0),u([I({type:cc.Label,displayName:"\u5854\u7b80\u4ecb"})],e.prototype,"towerDesc",void 0),u([I({type:cc.Label,displayName:"\u5347\u7ea7\u8d39\u7528"})],e.prototype,"upCost",void 0),u([I({type:cc.Label,displayName:"\u5347\u7ea7\u6309\u94ae\u6587\u5b57"})],e.prototype,"upBtnLabel",void 0),u([I({type:y.default,displayName:"\u5347\u7ea7\u6309\u94ae"})],e.prototype,"upBtnMateralsLoader",void 0),u([I({type:cc.Node,displayName:"\u6d4b\u8bd5\u6309\u94ae"})],e.prototype,"testBtn",void 0),u([I({type:sp.Skeleton,displayName:"\u5854\u5347\u7ea7\u7279\u6548"})],e.prototype,"towerUpEffect",void 0),o=u([j,x("\u754c\u9762/TowerUpFrame \u5854\u5347\u7ea7\u754c\u9762")],e)}(w.FrameBase);a.default=N,cc._RF.pop(),cc._RF.pop()},{}],Tower:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d9838ul4j5OM7UE23ifpI7Y","Tower");var r=t,i=e,a=o;cc._RF.push(i,"d9838ul4j5OM7UE23ifpI7Y","Tower");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0}),a.TowerType=void 0;var s=r("sdbTowerBattle"),p=r("StaticDBHelper"),f=r("GameGlobaled"),d=r("ChessRenderer"),y=r("Entity"),h=cc._decorator,m=h.ccclass;h.property,(a.TowerType||(a.TowerType={})).Flame="Flame";var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.xy=cc.Vec2.ZERO,e.towerData=null,e.battleData=null,e.levelData=null,e}return l(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.battleData.towerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.battleData.level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.xy.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.xy.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.renderer.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.renderer.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showRangead",{get:function(){return this.data.ad.value},enumerable:!1,configurable:!0}),e.prototype.init=function(e,o,n,r){var i;t.prototype.init.call(this),this.data.uid=r,this.data.sdbId=e.id,this.towerData=e,this.levelData=n,this.setBattleData(o),null===(i=this.weapon)||void 0===i||i.init(this,this.data),this.renderer.setAnimation(d.AnimationNames.Stand),this.onInit()},e.prototype.setBattleData=function(t){var e;this.battleData=t,this.levelData?(this.data.atk.init(this.levelData.atk*this.battleData.atk/100),this.data.hp.init(this.levelData.hp*this.battleData.hp/100),this.data.ad.init(this.levelData.ad*this.battleData.ad/100),this.data.as.init(this.levelData.as*this.battleData.as/100),this.data.spd.init(0)):(this.data.atk.init(0),this.data.hp.init(0),this.data.ad.init(0),this.data.as.init(0),this.data.spd.init(0)),null===(e=this.renderer)||void 0===e||e.init(this.battleData)},e.prototype.levelup=function(){this.setBattleData(p.default.filterData(s.default,{towerId:this.battleData.towerId,level:this.battleData.level+1})[0])},e.prototype.onInit=function(){},e.prototype.setPositionByXY=function(t,e){var o;this.setXY(t,e),this.node.setPosition(f.default.boardStartPos.x+t*f.default.gridSize+this.renderer.width/2,f.default.boardStartPos.y+e*f.default.gridSize+this.renderer.height/2),null===(o=this.weapon)||void 0===o||o.setCenterPosition(this.node.position.clone())},e.prototype.setXY=function(t,e){this.xy.x=t,this.xy.y=e},e.prototype.reset=function(){var e;t.prototype.reset.call(this),null===(e=this.weapon)||void 0===e||e.reset()},e.prototype.cleanup=function(){var e;t.prototype.cleanup.call(this),null===(e=this.weapon)||void 0===e||e.cleanup()},e.prototype.logicUpdate=function(e){var o,n;t.prototype.logicUpdate.call(this,e),null===(o=this.weapon)||void 0===o||o.tryAttack(),null===(n=this.weapon)||void 0===n||n.logicUpdate(e)},e.prototype.onAttack=function(){this.weapon.checkAttack()},e.prototype.onAttackComplete=function(){this.renderer.setAnimation(d.AnimationNames.Stand),this.weapon.checkAttackFinish()},e.prototype.onComoundComplete=function(){this.renderer.setAnimation(d.AnimationNames.Stand)},e.prototype.attack=function(){this.renderer.setAnimation(d.AnimationNames.Attack)},e.prototype.attackStop=function(){this.renderer.setAnimation(d.AnimationNames.Stand)},e.prototype.onLoad=function(){this.renderer.listenAnimationComplete(d.AnimationNames.Attack,this.onAttackComplete.bind(this)),this.renderer.listenAnimationComplete(d.AnimationNames.Compound,this.onComoundComplete.bind(this)),this.renderer.listenAnimationEvent(d.AnimationEvents.Attack,this.onAttack.bind(this))},e.prototype.start=function(){},e.uid=0,u([m],e)}(y.default);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],TrackHelper:[function(t,e,o){"use strict";cc._RF.push(e,"a149diec1NLO4rF54c3vmX6","TrackHelper");var n=e,r=o;cc._RF.push(n,"168aeFkJdFEoKSdzteTHb+/","TrackHelper");var i=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},a=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Track=void 0;var c=function(){function t(){this.openId=""}return t.prototype.init=function(){return i(this,void 0,void 0,function(){return a(this,function(){return[2]})})},t.prototype.setOpenId=function(){},t.prototype.getOpenId=function(){return i(this,void 0,Promise,function(){return a(this,function(){return[2,""]})})},t.prototype.getUid=function(){},t.prototype.trackEvent=function(t,e){void 0===e&&(e={}),cc.log("[\u57cb\u70b9]trackEvent: "+t+", "+JSON.stringify(e))},t.prototype.trackEventLogin=function(t){void 0===t&&(t=""),cc.log("[\u57cb\u70b9]trackEventLogin: "+t)},t.prototype.trackEventLoadingProgress=function(t){cc.log("[\u57cb\u70b9]trackEventLoadingProgress: "+t)},t.prototype.trackEventGuide=function(t,e){cc.log("[\u57cb\u70b9]trackEventGuide: "+(1e3*t+e))},t.prototype.trackEventEnterGame=function(){cc.log("[\u57cb\u70b9]trackEventEnterGame")},t.prototype.trackEventBattleStart=function(){cc.log("[\u57cb\u70b9]trackEventBattleStart")},t.prototype.trackEventBattleWin=function(){cc.log("[\u57cb\u70b9]trackEventBattleWin")},t.prototype.trackEventBattleLose=function(){cc.log("[\u57cb\u70b9]trackEventBattleLose")},t.prototype.trackEventBattleCancel=function(){cc.log("[\u57cb\u70b9]trackEventBattleCancel")},t.prototype.trackEventBattleRoundStart=function(){cc.log("[\u57cb\u70b9]trackEventBattleRoundStart")},t.prototype.trackEventBattleRoundWin=function(){cc.log("[\u57cb\u70b9]trackEventBattleRoundStart")},t.prototype.trackEventBattleRoundLose=function(){cc.log("[\u57cb\u70b9]trackEventBattleRoundStart")},t.prototype.trackEventVideo=function(t){cc.log("[\u57cb\u70b9]trackEventVideo: "+t)},t.prototype.trackEventTowerLevelup=function(t,e){cc.log("[\u57cb\u70b9]trackEventTowerLevelup: "+t+", "+e)},t.prototype.trackEventHeroLevelup=function(t){cc.log("[\u57cb\u70b9]trackEventHeroLevelup: "+t)},t.prototype.trackEventShopBuy=function(t){cc.log("[\u57cb\u70b9]trackEventShopBuy: "+t)},t.prototype.trackEventChooseTower=function(t){cc.log("[\u57cb\u70b9]trackChooseTower: "+t)},t.prototype.trackEventChooseCard=function(t){cc.log("[\u57cb\u70b9]trackChooseCard: "+t)},t.prototype.Login=function(){cc.log("[\u57cb\u70b9]trackLogin")},t.prototype.AgreePrivacy=function(){cc.log("[\u57cb\u70b9]trackAgreePrivacy")},t.prototype.Reported=function(t,e){cc.log("[\u57cb\u70b9]trackReported: "+t+" "+e)},t.prototype.PayEnvent=function(t,e,o){cc.log("[\u57cb\u70b9]trackPayEnvent: "+t+" "+e+o)},t.prototype.UserAdd=function(t){cc.log("[\u57cb\u70b9]trackUserAdd: "+t)},t.prototype.AdShowEevent=function(t){cc.log("[\u57cb\u70b9]trackAdShowEevent: "+t)},t.prototype.PlayRewardedVideoAd=function(){cc.log("[\u57cb\u70b9]trackPlayRewardedVideoAd")},t.prototype.TutorialFinish=function(){cc.log("[\u57cb\u70b9]trackTutorialFinish")},t.prototype.CreateRole=function(){cc.log("[\u57cb\u70b9]CreateRole")},t}();r.Track=c;var l=function(){function t(){}return t.setPlatform=function(t){this.track=new t},t.init=function(){var t;return i(this,void 0,void 0,function(){return a(this,function(){return[2,null===(t=this.track)||void 0===t?void 0:t.init()]})})},t.setOpenId=function(t){var e;null===(e=this.track)||void 0===e||e.setOpenId(t)},t.getOpenId=function(){var t,e;return i(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,null===(t=this.track)||void 0===t?void 0:t.getOpenId()];case 1:return o=n.sent(),null===(e=this.track)||void 0===e||e.setOpenId(o),[2,o]}})})},t.getUid=function(){var t;return null===(t=this.track)||void 0===t?void 0:t.getUid()},t.trackEventLogin=function(t){var e;void 0===t&&(t=""),null===(e=this.track)||void 0===e||e.trackEventLogin(t)},t.trackEventLoadingProgress=function(t){var e;null===(e=this.track)||void 0===e||e.trackEventLoadingProgress(t)},t.trackEventGuide=function(t,e){var o;null===(o=this.track)||void 0===o||o.trackEventGuide(t,e)},t.trackEventEnterGame=function(){var t;null===(t=this.track)||void 0===t||t.trackEventEnterGame()},t.trackEventBattleStart=function(t,e){var o;null===(o=this.track)||void 0===o||o.trackEventBattleStart(t,e)},t.trackEventBattleWin=function(t,e,o){var n;null===(n=this.track)||void 0===n||n.trackEventBattleWin(t,e,o)},t.trackEventBattleLose=function(t,e){var o;null===(o=this.track)||void 0===o||o.trackEventBattleLose(t,e)},t.trackEventBattleCancel=function(t,e){var o;null===(o=this.track)||void 0===o||o.trackEventBattleCancel(t,e)},t.trackEventBattleRoundStart=function(t,e){var o;null===(o=this.track)||void 0===o||o.trackEventBattleRoundStart(t,e)},t.trackEventBattleRoundWin=function(t,e,o){var n;null===(n=this.track)||void 0===n||n.trackEventBattleRoundWin(t,e,o)},t.trackEventBattleRoundLose=function(t,e){var o;null===(o=this.track)||void 0===o||o.trackEventBattleRoundLose(t,e)},t.trackEventVideo=function(t,e,o){var n;null===(n=this.track)||void 0===n||n.trackEventVideo(t,e,o)},t.trackEventTowerLevelup=function(t,e){var o;null===(o=this.track)||void 0===o||o.trackEventTowerLevelup(t,e)},t.trackEventHeroLevelup=function(t){var e;null===(e=this.track)||void 0===e||e.trackEventHeroLevelup(t)},t.trackEventShopBuy=function(t){var e;null===(e=this.track)||void 0===e||e.trackEventShopBuy(t)},t.trackEventChooseTower=function(t,e,o){var n;null===(n=this.track)||void 0===n||n.trackEventChooseTower(t,e,o)},t.trackEventChooseCard=function(t,e,o){var n;null===(n=this.track)||void 0===n||n.trackEventChooseCard(t,e,o)},t.Login=function(){var t;null===(t=this.track)||void 0===t||t.Login()},t.AgreePrivacy=function(){var t;null===(t=this.track)||void 0===t||t.AgreePrivacy()},t.Reported=function(t,e){var o;null===(o=this.track)||void 0===o||o.Reported(t,e)},t.PayEnvent=function(t,e,o){var n;null===(n=this.track)||void 0===n||n.PayEnvent(t,e,o)},t.UserAdd=function(t){var e;null===(e=this.track)||void 0===e||e.UserAdd(t)},t.AdShowEevent=function(t){var e;null===(e=this.track)||void 0===e||e.AdShowEevent(t)},t.PlayRewardedVideoAd=function(t,e,o){var n;null===(n=this.track)||void 0===n||n.PlayRewardedVideoAd(t,e,o)},t.TutorialFinish=function(){var t;null===(t=this.track)||void 0===t||t.TutorialFinish()},t.CreateRole=function(){var t;null===(t=this.track)||void 0===t||t.CreateRole()},t.track=new c,t}();r.default=l,cc._RF.pop(),cc._RF.pop()},{}],TweenComponent:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c5527FO3KBEc4q/viF25L9I","TweenComponent");var r=t,i=e,a=o;cc._RF.push(i,"c5527FO3KBEc4q/viF25L9I","TweenComponent");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("GameGlobaled"),f=r("EventHelper"),d=cc._decorator,y=d.ccclass,h=d.property,m=(d.menu,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTimeScale=!1,e.tween=null,e}return l(e,t),e.prototype.onEnable=function(){this.tween=this.getTween(),this.tween.start(this.isTimeScale?p.default.speed:0)},e.prototype.onDisable=function(){this.tween.stop(),this.tween=null},e.prototype.onGameSpeedChange=function(){this.tween&&this.tween.timeScale(p.default.speed)},e.prototype.onLoad=function(){this.isTimeScale&&f.default.on(s.default.GameSpeedChange,this.onGameSpeedChange,this)},u([h({displayName:"\u662f\u5426\u9002\u7528\u6e38\u620f\u52a0\u901f"})],e.prototype,"isTimeScale",void 0),u([y],e)}(cc.Component));a.default=m,cc._RF.pop(),cc._RF.pop()},{}],UintIcon:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"727f20cQ3tNaYTJiInoKutU","UintIcon");var r=t,i=e,a=o;cc._RF.push(i,"727f20cQ3tNaYTJiInoKutU","UintIcon");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("IconBase"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sptShadow=null,e.nodeExp=null,e.lbExp=null,e.proExpNo=null,e.proExpYes=null,e.sptLevel=null,e.y=0,e}return l(e,t),e.prototype.init=function(){return s(this,void 0,void 0,function(){return p(this,function(){return[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.y=this.sptIcon.node.y,this.nodeExp&&(this.proExpNo.progress=0,this.proExpYes.progress=1)},e.prototype.start=function(){},u([h({type:cc.Sprite,displayName:"\u9634\u5f71"})],e.prototype,"sptShadow",void 0),u([h({type:cc.Node,displayName:"\u7ecf\u9a8c\u8282\u70b9"})],e.prototype,"nodeExp",void 0),u([h({type:cc.Label,displayName:"\u7ecf\u9a8c"})],e.prototype,"lbExp",void 0),u([h({type:cc.ProgressBar,displayName:"\u7ecf\u9a8c\u6761-\u4e0d\u6ee1"})],e.prototype,"proExpNo",void 0),u([h({type:cc.ProgressBar,displayName:"\u7ecf\u9a8c\u6761-\u6ee1"})],e.prototype,"proExpYes",void 0),u([h({type:cc.Sprite,displayName:"\u5fbd\u7ae0Icon"})],e.prototype,"sptLevel",void 0),u([y],e)}(f.default);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],UuidUtil:[function(t,e,o){"use strict";cc._RF.push(e,"857c9pjYIVG1a6wsS5/IR0t","UuidUtil");var n=e,r=o;cc._RF.push(n,"857c9pjYIVG1a6wsS5/IR0t","UuidUtil"),Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){}return t.create=function(){return this.id++,"uuid"+this.id},t.id=0,t}();r.default=i,cc._RF.pop(),cc._RF.pop()},{}],Version:[function(t,e,o){"use strict";cc._RF.push(e,"63bc8gleWBGoJCvCNYdvoiz","Version");var n=e,r=o;cc._RF.push(n,"63bc8gleWBGoJCvCNYdvoiz","Version"),Object.defineProperty(r,"__esModule",{value:!0}),r.getUrlParam=r.showFsmDebug=r.showRvoDebug=r.checkDebugVer=r.Version=void 0,r.Version="V1.0418.01";var i=-1;r.checkDebugVer=function(){return-1==i&&(i="1"===r.getUrlParam("debug")?1:0),1==i};var a=-1;r.showRvoDebug=function(){return-1==a&&(a="1"===r.getUrlParam("rvo")?1:0),1==a};var c=-1;r.showFsmDebug=function(){return-1==c&&(c="1"===r.getUrlParam("fsm")?1:0),1==c},r.getUrlParam=function(t){var e=window.location.search;if(!e)return null;for(var o=0,n=(e.startsWith("?")?e.slice(1):e).split("&");o<n.length;o++){var r=n[o].split("="),i=r[0],a=r[1];if(decodeURIComponent(i)===t)return decodeURIComponent(a)}return null},cc._RF.pop(),cc._RF.pop()},{}],Vesions:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c765byrM9FFgpEMPu4HIku3","Vesions");var r=e,i=o;cc._RF.push(r,"c765byrM9FFgpEMPu4HIku3","Vesions");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(i,"__esModule",{value:!0});var u=cc._decorator,s=u.ccclass,p=(u.property,u.menu),f=u.requireComponent,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return c(e,t),e.prototype.onLoad=function(){if(this.label=this.getComponent(cc.Label),this.node.anchorX=1,window.versions)this.label.string=window.versions;else{var t=new Date,e=""+t.getFullYear()+String(t.getMonth()+1).padStart(2,"0")+String(t.getDate()).padStart(2,"0")+"-"+String(t.getHours()).padStart(2,"0")+String(t.getMinutes()).padStart(2,"0");this.label.string=e}this.label.node.zIndex=100},e.prototype.start=function(){},l([s,f(cc.Label),p("\u81ea\u5b9a\u4e49\u63a7\u4ef6/\u7248\u672c\u53f7")],e)}(cc.Component);i.default=d,cc._RF.pop(),cc._RF.pop()},{}],WeaponArrow:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e9b599RA1NDMK1dsNHGJmL2","WeaponArrow");var r=t,i=e,a=o;cc._RF.push(i,"e9b599RA1NDMK1dsNHGJmL2","WeaponArrow");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameDefine"),d=r("MathUtil"),y=r("GameGlobaled"),h=r("EffectManager"),m=r("MonsterManager"),b=r("TowerRenderer"),v=r("Debuff_Dizziness"),g=r("Debuff_Poison"),_=r("Debuff_Slow"),w=r("Skill"),S=r("WeaponBullet"),R=cc._decorator,O=R.ccclass,P=R.property,F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefabB=null,e.bulletPrefabD=null,e.bulletPrefabH=null,e.bulletPrefabL=null,e.effectFireBoom=null,e.prefabMap=new Map,e.prefabIndex=0,e.fireDistance=0,e.weaponBone=null,e.target=null,e}return l(e,t),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.prefabMap.clear(),this.prefabMap.set(f.Elemental.Ice,null),this.prefabMap.set(f.Elemental.Fire,null),this.prefabMap.set(f.Elemental.Poison,null),this.prefabMap.set(f.Elemental.Thunder,null),this.fireDistance=y.default.towerArrowFireDistance,this.weaponBone=e.getComponent(b.default).spine.findBone("center")},e.prototype.getBulletType=function(){this.prefabIndex++;var t=Array.from(this.prefabMap.keys());return this.prefabIndex>=t.length&&(this.prefabIndex=0),t[this.prefabIndex]},e.prototype.tryAttack=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.readyAttacking?[2]:this.cd>0?[2]:(this.target=this.getFrontMostEnemy(),this.target?(this.weaponBone&&(this.weaponBone.rotation=d.default.getAngleByDir(this.getTargetDir(this.target))-90),this.owner.attack(),this.readyAttacking=!0,[2]):[2])})})},e.prototype.checkAttack=function(){this.readyAttacking=!1,this.target=null;var e=this.getFrontMostEnemy();if(e){t.prototype.checkAttack.call(this);var o=this.getTargetDir(e),n=y.default.towerArrowAngle*Math.PI/180;o=o.rotate(-n*(this.bulletCount.value-1)/2);for(var r=this.getBulletType(),i=0;i<this.bulletCount.value;i++)this.attack(this.getAttackData(),o.clone(),r),o.rotateSelf(n);this.resetCd()}},e.prototype.attack=function(e,o,n){return s(this,void 0,void 0,function(){var r,i;return p(this,function(a){switch(a.label){case 0:if(t.prototype.attack.call(this,e),r=this.prefabMap.get(n))switch(n){case f.Elemental.Ice:e.addKey(w.AttackDataKey.Slow);break;case f.Elemental.Fire:e.addKey(w.AttackDataKey.Boom);break;case f.Elemental.Poison:e.addKey(w.AttackDataKey.Poison);break;case f.Elemental.Thunder:e.addKey(w.AttackDataKey.Dizziness)}else r=this.bulletPrefab;return this.skillBulletProcess(e),[4,this.createBullet(r,e,this.onHit.bind(this))];case 1:return null==(i=a.sent())||i.init(o,this.penetrate),[2]}})})},e.prototype.onHit=function(t,e,o){var n=this;if(o.hasKey(w.AttackDataKey.Slow))t&&cc.isValid(t)&&(this.makeDamage(t,e,o),t.addSkillByClass(_.default));else if(o.hasKey(w.AttackDataKey.Boom))h.default.instance.create(this.effectFireBoom,e),m.default.instance.listAll.forEach(function(t){t.node.position.sub(e).mag()<=n.fireDistance&&n.makeDamage(t,e,o)});else if(o.hasKey(w.AttackDataKey.Dizziness))t&&cc.isValid(t)&&(this.makeDamage(t,e,o),t.addSkillByClass(v.default));else if(o.hasKey(w.AttackDataKey.Poison)){if(t&&cc.isValid(t)){this.makeDamage(t,e,o);var r=.2*this.data.atk.value+"&"+y.default.debuffPoisonLife;t.addSkillByClass(g.default,!1,r)}}else t&&cc.isValid(t)&&this.makeDamage(t,e,o)},e.prototype.reset=function(){t.prototype.reset.call(this),this.prefabIndex=0,this.target=null},e.prototype.addBulletType=function(t){var e=null;switch(t){case f.Elemental.Fire:e=this.bulletPrefabH;break;case f.Elemental.Poison:e=this.bulletPrefabD;break;case f.Elemental.Thunder:e=this.bulletPrefabL;break;case f.Elemental.Ice:e=this.bulletPrefabB}e&&this.prefabMap.set(t,e)},e.prototype.start=function(){},u([P({type:cc.Prefab,displayName:"\u5b50\u5f39(\u51b0)"})],e.prototype,"bulletPrefabB",void 0),u([P({type:cc.Prefab,displayName:"\u5b50\u5f39(\u6bd2)"})],e.prototype,"bulletPrefabD",void 0),u([P({type:cc.Prefab,displayName:"\u5b50\u5f39(\u706b)"})],e.prototype,"bulletPrefabH",void 0),u([P({type:cc.Prefab,displayName:"\u5b50\u5f39(\u96f7)"})],e.prototype,"bulletPrefabL",void 0),u([P({type:cc.Prefab,displayName:"\u7206\u70b8(\u706b)"})],e.prototype,"effectFireBoom",void 0),u([O],e)}(S.default);a.default=F,cc._RF.pop(),cc._RF.pop()},{}],WeaponBase:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"9bea3o2Pc5GsaEkLquIIRkf","WeaponBase");var r=t,i=e,a=o;cc._RF.push(i,"9bea3o2Pc5GsaEkLquIIRkf","WeaponBase");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("WeaponBullet"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeClickSpeed=null,e.tempSpeedup=0,e.attackIndex=0,e}return l(e,t),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.tempSpeedup=0,this.attackIndex=0},e.prototype.resetCd=function(){t.prototype.resetCd.call(this),this.tempSpeedup=0},e.prototype.reset=function(){t.prototype.reset.call(this)},e.prototype.tryAttack=function(){this.cd-this.tempSpeedup>0||this.readyAttacking||this.findNearestTarget()&&(this.attackIndex=0,this.owner.attack(),this.readyAttacking=!0)},e.prototype.checkAttack=function(){t.prototype.checkAttack.call(this);var e=this.findNearestTarget();if(e){var o=this.getTargetDir(e),n=20*Math.PI/180;o=o.rotate(-n*(this.bulletCount.value-1)/2);for(var r=0;r<this.bulletCount.value;r++)this.attack(this.getAttackData(),e,o.clone()),o.rotateSelf(n)}else this.readyAttacking=!1},e.prototype.checkAttackFinish=function(){this.attackIndex++,this.attackIndex>=this.attackCount.value?(this.resetCd(),this.readyAttacking=!1):this.owner.attack()},e.prototype.attack=function(e,o,n){return s(this,void 0,void 0,function(){var r;return p(this,function(i){switch(i.label){case 0:return t.prototype.attack.call(this,e),this.skillBulletProcess(e),[4,this.createBullet(this.bulletPrefab,e,this.makeDamage.bind(this))];case 1:return null==(r=i.sent())||r.init(o,n),[2]}})})},e.prototype.onClickSpeed=function(){this.tempSpeedup=Math.min(this.tempSpeedup+200,500)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.nodeClickSpeed.on(cc.Node.EventType.TOUCH_END,this.onClickSpeed,this)},e.prototype.start=function(){},u([h({type:cc.Node,displayName:"\u70b9\u51fb\u52a0\u901f"})],e.prototype,"nodeClickSpeed",void 0),u([y],e)}(f.default);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],WeaponBat:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"4d295/L8/FIlZvs+sqt/Oea","WeaponBat");var r=t,i=e,a=o;cc._RF.push(i,"4d295/L8/FIlZvs+sqt/Oea","WeaponBat");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("WeaponBullet"),d=cc._decorator,y=d.ccclass,h=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spawnPoints=[],e.maxBatCount=2,e.addAtackOnKill=!1,e.currentBatCount=0,e.occupiedSpawnPoints=new Map,e.batAttackCounts=6,e.isInitialPhase=!1,e.explodeType=0,e}return l(e,t),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.maxBatCount=2,this.addAtackOnKill=!1,this.batAttackCounts=6,this.isInitialPhase=!1},e.prototype.reset=function(){t.prototype.reset.call(this),this.resetSpawnPoints(),this.cd=0,this.isInitialPhase=!0},e.prototype.resetSpawnPoints=function(){for(var t=0;t<this.spawnPoints.length;t++)this.occupiedSpawnPoints.set(t,!1);this.currentBatCount=0},e.prototype.tryAttack=function(){return s(this,void 0,void 0,function(){return p(this,function(){return!this.isInitialPhase&&this.cd>0?[2]:this.currentBatCount>=this.maxBatCount?(this.isInitialPhase&&(this.isInitialPhase=!1),[2]):(this.owner.attack(),this.attack(this.getAttackData()),this.resetCd(),[2])})})},e.prototype.getAvailableSpawnPoint=function(){var t=Array.from(this.occupiedSpawnPoints.entries()).filter(function(t){return t[0],!t[1]}).map(function(t){return t[0]});if(0===t.length)return null;var e=t[Math.floor(Math.random()*t.length)];return{node:this.spawnPoints[e],index:e}},e.prototype.attack=function(e){return s(this,void 0,void 0,function(){var o,n;return p(this,function(r){switch(r.label){case 0:return(o=this.getAvailableSpawnPoint())?(t.prototype.attack.call(this,e),[4,this.createBullet(this.bulletPrefab,this.skillBulletProcess(e),this.makeDamage.bind(this),o.index,o.node)]):[2];case 1:return(n=r.sent())?(this.occupiedSpawnPoints.set(o.index,!0),this.currentBatCount++,n.init(this.getFrontMostEnemy(),this.batAttackCounts,o.index,this.addAtackOnKill,this.takeOff.bind(this),this.ad),[2]):[2]}})})},e.prototype.takeOff=function(t){this.occupiedSpawnPoints.set(t,!1),this.currentBatCount--},e.prototype.createBullet=function(e,o,n,r,i){return s(this,void 0,void 0,function(){var r,a;return p(this,function(c){switch(c.label){case 0:return[4,t.prototype.createBullet.call(this,e,o,n)];case 1:return(r=c.sent())?(a=i.convertToWorldSpaceAR(cc.v2(10*Math.random()-5,10*Math.random()-5)),r.node.setPosition(r.node.parent.convertToNodeSpaceAR(a)),[2,r]):[2,null]}})})},u([h({type:cc.Node,displayName:"\u8759\u8760\u51fa\u751f\u70b9"})],e.prototype,"spawnPoints",void 0),u([y],e)}(f.default);a.default=m,cc._RF.pop(),cc._RF.pop()},{}],WeaponBullet:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"bfd2bQRUT1H0IcxfCBc1ZOj","WeaponBullet");var r=t,i=e,a=o;cc._RF.push(i,"bfd2bQRUT1H0IcxfCBc1ZOj","WeaponBullet");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("TimeUtil"),d=r("GameGlobaled"),y=r("BulletManager"),h=r("AttValue"),m=(r("Tower"),r("Weapon")),b=cc._decorator,v=b.ccclass,g=b.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefab=null,e.bulletCount=new h.AttValue,e.attackCount=new h.AttValue,e.bulletSize=new h.AttValue,e.bulletSpeed=new h.AttValue,e.bulletLife=new h.AttValue,e.penetrate=0,e.readyAttacking=!1,e}return l(e,t),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.bulletCount.init(1),this.attackCount.init(1),this.bulletSize.init(1),this.bulletSpeed.init(1),this.bulletLife.init(0),this.readyAttacking=!1,this.penetrate=0},e.prototype.getTargetDir=function(t){var e=t.bodyPositionToWorld.sub(this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)).normalize();return cc.v2(e)},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.bulletCount.cleanup(),this.bulletSize.cleanup(),this.bulletSpeed.cleanup(),this.bulletLife.cleanup()},e.prototype.reset=function(){t.prototype.reset.call(this),this.readyAttacking=!1},e.prototype.tryAttack=function(){this.cd>0||this.findNearestTarget()&&(this.attack(this.getAttackData()),this.resetCd())},e.prototype.addBulletType=function(){},e.prototype.skillBulletProcess=function(t){return this.owner.skillList.forEach(function(e){return e.onBullet(t)}),t},e.prototype.createBullet=function(t,e,o){return s(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return[4,y.default.instance.create(t,this.node.convertToWorldSpaceAR(cc.Vec2.ZERO))];case 1:if(!(n=r.sent()))return[2];n.setData(e),n.setHitFunc(o),r.label=2;case 2:return d.default.speed<=0?[4,f.default.delay(.1)]:[3,4];case 3:return r.sent(),[3,2];case 4:return[2,n]}})})},e.prototype.getTowerLevel=function(){return this.owner.level},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){},u([g({type:cc.Prefab,displayName:"\u5b50\u5f39"})],e.prototype,"bulletPrefab",void 0),u([v],e)}(m.default);a.default=_,cc._RF.pop(),cc._RF.pop()},{}],WeaponFan:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"de8a2wQOK1NAYBAtIHvvv7N","WeaponFan");var r=t,i=e,a=o;cc._RF.push(i,"de8a2wQOK1NAYBAtIHvvv7N","WeaponFan");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameGlobaled"),d=r("Debuff_Slow"),y=r("Skill"),h=r("WeaponBullet"),m=cc._decorator,b=m.ccclass,v=m.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefabIce=null,e.bulletPrefabEx=null,e.turnCount=0,e.isPassCD=!1,e.isCreateForever=!1,e.exTurnCount=0,e.exBulletCount=0,e.curTurn=0,e.bulletList=[],e.lastBulletCount=0,e}return l(e,t),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.turnCount=f.default.towerFanTurnCount,this.exTurnCount=0,this.exBulletCount=0,this.curTurn=0,this.lastBulletCount=0,this.isPassCD=!1,this.isCreateForever=!1},e.prototype.ex=function(t,e){this.exTurnCount=t,this.exBulletCount=e},e.prototype.passCD=function(){this.isPassCD=!0},e.prototype.onTurn=function(){return s(this,void 0,void 0,function(){var t,e,o;return p(this,function(n){switch(n.label){case 0:if(this.lastBulletCount!=this.bulletCount.value){for(e=0;e<this.bulletList.length;e++)this.bulletList[e].remove();return this.bulletList=[],this.curTurn=0,this.owner.attack(),[2]}if(this.curTurn++,!(this.exBulletCount>=0&&this.curTurn%this.exTurnCount==0))return[3,4];t=2*Math.PI/this.exBulletCount,e=0,n.label=1;case 1:return e<this.exBulletCount?[4,this.createBullet(this.bulletPrefabEx,this.skillBulletProcess(this.getAttackData()),this.onHit.bind(this))]:[3,4];case 2:null==(o=n.sent())||o.init(this.centerPosition,this.bulletSpeed.value,t*e),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},e.prototype.tryAttack=function(){this.cd>0||this.readyAttacking||(this.readyAttacking=!0,this.isPassCD?this.isCreateForever||(this.isCreateForever=!0,this.owner.attack()):this.owner.attack())},e.prototype.checkAttack=function(){this.readyAttacking=!1,t.prototype.checkAttack.call(this),this.curTurn=0,this.lastBulletCount=this.bulletCount.value;var e=2*Math.PI/this.bulletCount.value;this.bulletList=[];for(var o=0;o<this.bulletCount.value;o++)this.attack(this.getAttackData(),e*o);if(!this.isPassCD){this.resetCd();var n=this.turnCount;this.cd+=n}},e.prototype.attack=function(e,o){return void 0===o&&(o=0),s(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return t.prototype.attack.call(this,e),this.skillBulletProcess(e),n=this.bulletPrefab,e.hasKey(y.AttackDataKey.Slow)&&(n=this.bulletPrefabIce),[4,this.createBullet(n,e,this.onHit.bind(this))];case 1:return(r=i.sent())?(r.init(this.centerPosition,this.ad-r.node.width*this.bulletSize.value*.5,this.isPassCD?-1:this.turnCount,this.bulletSpeed.value,o),r.node.scale=this.bulletSize.value,this.bulletList.push(r),0==o&&r.listenTurn(this.onTurn.bind(this)),[2]):[2]}})})},e.prototype.onHit=function(t,e,o){t&&cc.isValid(t)&&(this.makeDamage(t,e,o),o.hasKey(y.AttackDataKey.Slow)&&t.addSkillByClass(d.default))},e.prototype.reset=function(){t.prototype.reset.call(this),this.isCreateForever=!1,this.bulletList=[]},e.prototype.start=function(){},u([v({type:cc.Prefab,displayName:"\u5b50\u5f39 - \u51b0"})],e.prototype,"bulletPrefabIce",void 0),u([v({type:cc.Prefab,displayName:"\u5b50\u5f39 - \u98de\u884c"})],e.prototype,"bulletPrefabEx",void 0),u([b],e)}(h.default);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],WeaponFireBall:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e124bI+GiVPCYWp52AKMaaQ","WeaponFireBall");var r=t,i=e,a=o;cc._RF.push(i,"e124bI+GiVPCYWp52AKMaaQ","WeaponFireBall");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("WeaponBullet"),d=cc._decorator,y=d.ccclass,h=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.addBounceOnKill=!1,e.bounceCount=0,e.lowHpForceCrit=0,e.aoeRangePercent=0,e._canExtraShot=!1,e.extraShotCount=0,e.attackIndex=0,e}return l(e,t),Object.defineProperty(e.prototype,"canBounce",{set:function(t){this.bounceCount=t?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canExtraShot",{set:function(t){this._canExtraShot=t},enumerable:!1,configurable:!0}),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.addBounceOnKill=!1,this.bounceCount=0,this.lowHpForceCrit=0,this.canExtraShot=!1,this.attackIndex=0,this.extraShotCount=0,this.aoeRangePercent=0},e.prototype.tryAttack=function(){this.cd>0||this.readyAttacking||this.getFrontMostEnemy()&&(this.owner.attack(),this.readyAttacking=!0,this.attackIndex=0,this._canExtraShot&&(this.extraShotCount=Math.floor(3*Math.random())+1))},e.prototype.checkAttack=function(){var e=this.getFrontMostEnemy();if(e){t.prototype.checkAttack.call(this),this.attack(this.getAttackData(),e),this.attackIndex++;var o=this.bulletCount.value+this.extraShotCount;this.attackIndex>=o?(this.resetCd(),this.readyAttacking=!1):this.owner.attack()}else this.readyAttacking=!1},e.prototype.attack=function(e,o){return s(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return t.prototype.attack.call(this,e),this.skillBulletProcess(e),[4,this.createBullet(this.bulletPrefab,e,this.onHit.bind(this))];case 1:return null==(n=r.sent())||n.init(o,this.bounceCount,this.addBounceOnKill,this.aoeRangePercent),[2]}})})},e.prototype.onHit=function(t,e,o){this.lowHpForceCrit>0&&t.data.hp.value/t.data.hp.max<=this.lowHpForceCrit/100&&(o.critRate=100),this.makeDamage(t,e,o)},u([y],e)}(f.default));a.default=h,cc._RF.pop(),cc._RF.pop()},{}],WeaponFlame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6c0a8/zPIRFVoU6zboaoNE+","WeaponFlame");var r=t,i=e,a=o;cc._RF.push(i,"6c0a8/zPIRFVoU6zboaoNE+","WeaponFlame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("MathUtil"),d=r("MonsterManager"),y=r("TowerRenderer"),h=r("AttValue"),m=r("Skill"),b=r("WeaponBullet"),v=cc._decorator,g=v.ccclass,_=v.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletParticlePrefab=null,e.bulletExPrefab=null,e.nodeWeaponBone=null,e.bulletPariticle=null,e.weaponBone=null,e.dir=null,e.fireTime=new h.AttValue,e.fireTimeTemp=0,e.fireIndex=0,e.fireTotal=0,e.fireStep=.2,e.killBoomDistance=0,e.speedSweep=60,e.speedSweepTemp=0,e.sweepAngle=0,e.curSweepAngle=0,e}return l(e,t),Object.defineProperty(e.prototype,"firing",{get:function(){return this.fireTimeTemp>=0&&this.fireTimeTemp<this.fireTime.value},enumerable:!1,configurable:!0}),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.weaponBone=e.getComponent(y.default).spine.findBone("center"),this.fireTime.cleanup(),this.fireTime.init(2),this.curSweepAngle=0,this.fireIndex=-1,this.fireTotal=Math.ceil(this.fireTime.value/this.fireStep)-1,this.fireTimeTemp=0,this.killBoomDistance=0},e.prototype.getTargetDir=function(t){var e=t.bodyPositionToWorld.sub(this.nodeWeaponBone.convertToWorldSpaceAR(cc.Vec3.ZERO)).normalize();return cc.v2(e)},e.prototype.reset=function(){var e,o;t.prototype.reset.call(this),this.fireTimeTemp=-1,this.curSweepAngle=0,this.fireIndex=0,this.dir=null,this.resetCd(),null===(e=this.bulletPariticle)||void 0===e||e.remove(),this.bulletPariticle=null,null===(o=this.owner)||void 0===o||o.attackStop(),this.setRotation(0)},e.prototype.cleanup=function(){t.prototype.cleanup.call(this),this.sweepAngle=0,this.killBoomDistance=0},e.prototype.setSweepAngle=function(t){this.sweepAngle=t/2},e.prototype.setKillBoomDistance=function(t){this.killBoomDistance=t},e.prototype.tryAttack=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(){return this.dir?[2]:!(t=this.findNearestTarget())||this.cd>0?(this.dir=null,[2]):(this.speedSweepTemp=this.speedSweep,this.dir=this.getTargetDir(t),this.setRotation(f.default.getAngleByDir(this.dir)-90),this.owner.attack(),[2])})})},e.prototype.checkAttack=function(){var e=this;this.dir&&(t.prototype.checkAttack.call(this),this.fireTimeTemp=0,this.createBullet(this.bulletParticlePrefab,null,null).then(function(t){var o;e.bulletPariticle=t,null===(o=e.bulletPariticle)||void 0===o||o.init(e.dir,e.data.ad)}))},e.prototype.attack=function(e,o){return s(this,void 0,void 0,function(){var n,r,i,a;return p(this,function(c){switch(c.label){case 0:return e.addKey(m.AttackDataKey.Index,this.fireTotal-this.fireIndex),this.fireIndex++,t.prototype.attack.call(this,e,o),[4,this.createBullet(this.bulletPrefab,this.skillBulletProcess(e),this.onHit.bind(this))];case 1:return(n=c.sent())?(n.init(o.rotate(f.default.getRadianByAngle(this.curSweepAngle)),this.data.ad.value-40),e.hasKey(m.AttackDataKey.SuperBullet)?((r=this.getAttackData()).damage*=5,[4,this.createBullet(this.bulletExPrefab,this.skillBulletProcess(r),this.makeDamage.bind(this))]):[3,3]):[2];case 2:i=c.sent(),a=cc.v2(-1,0).rotate(f.default.getRadianByAngle(this.weaponBone.rotation)),null==i||i.init(a,e.hasKey(m.AttackDataKey.BulletGrow)?1:0),c.label=3;case 3:return[2]}})})},e.prototype.onHit=function(t,e,o){var n=this;this.makeDamage(t,e,o),this.killBoomDistance>0&&t.isDead&&d.default.instance.listAll.forEach(function(t){t.node.position.sub(e).mag()<=n.killBoomDistance&&n.makeDamage(t,e,o)})},e.prototype.setRotation=function(t){var e;null===(e=this.bulletPariticle)||void 0===e||e.setAngle(t)},e.prototype.logicUpdate=function(e){var o;if(t.prototype.logicUpdate.call(this,e),this.dir&&this.firing)return null===(o=this.bulletPariticle)||void 0===o||o.setPositionByWorld(this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)),this.sweepAngle>0?(Math.abs(this.curSweepAngle)>=this.sweepAngle&&(this.speedSweepTemp*=-1),this.curSweepAngle+=e*this.speedSweepTemp):this.curSweepAngle=0,this.setRotation(f.default.getAngleByDir(this.dir)-90+this.curSweepAngle),this.fireTimeTemp+=e,Math.floor(this.fireTimeTemp/this.fireStep)>this.fireIndex&&this.attack(this.getAttackData(),this.dir),this.fireTimeTemp>=this.fireTime.value?(this.fireTimeTemp=0,this.curSweepAngle=0,this.fireIndex=0,this.dir=null,this.resetCd(),this.owner.attackStop(),this.bulletPariticle.remove(),void(this.bulletPariticle=null)):void 0},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.update=function(){},u([_({type:cc.Prefab,displayName:"\u7c92\u5b50\u5b50\u5f39"})],e.prototype,"bulletParticlePrefab",void 0),u([_({type:cc.Prefab,displayName:"\u8d85\u7ea7\u5b50\u5f39"})],e.prototype,"bulletExPrefab",void 0),u([_({type:cc.Node,displayName:"\u9009\u62e9\u6302\u70b9"})],e.prototype,"nodeWeaponBone",void 0),u([g],e)}(b.default);a.default=w,cc._RF.pop(),cc._RF.pop()},{}],WeaponFlash:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"23d80T6WQRA7JUeAQj1CPFs","WeaponFlash");var r=t,i=e,a=o;cc._RF.push(i,"23d80T6WQRA7JUeAQj1CPFs","WeaponFlash");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameGlobaled"),d=r("AttValue"),y=r("Debuff_Dizziness"),h=r("Skill"),m=r("WeaponBullet"),b=cc._decorator,v=b.ccclass,g=b.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefabEx=null,e.bulletPrefabLeidian=null,e.targetList=[],e.attackIndex=0,e.transmitCount=new d.AttValue,e.thunderboltList=[],e}return l(e,t),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.transmitCount.init(2),this.attackIndex=0},e.prototype.thunderbolt=function(t){return s(this,void 0,void 0,function(){var e,o;return p(this,function(n){switch(n.label){case 0:return(e=this.getAttackData()).damage*=.5,this.skillBulletProcess(e),[4,this.createBullet(this.bulletPrefabEx,e,this.makeDamage.bind(this))];case 1:return(o=n.sent())?(o.init(t.target,t.position),[2]):[2]}})})},e.prototype.leiDianChangYu=function(t){return s(this,void 0,void 0,function(){var e;return p(this,function(o){switch(o.label){case 0:return[4,this.createBullet(this.bulletPrefabLeidian,this.skillBulletProcess(this.getAttackData()),this.onHit.bind(this))];case 1:return(e=o.sent())?(e.node.position=this.owner.node.position,e.init(f.default.towerFlashLeidianDistance*t),[2]):[2]}})})},e.prototype.tryAttack=function(){if(!(this.cd>0||this.targetList.length>0)){var t=this.findNearestTarget();t&&(this.targetList=[t],this.owner.attack())}},e.prototype.checkAttack=function(){t.prototype.checkAttack.call(this),this.targetList=[];for(var e=0;e<this.bulletCount.value;e++){var o=this.findNearestTarget(this.targetList);if(!o)break;this.targetList.push(o),this.attack(this.getAttackData(),o)}this.targetList=[],this.attackIndex=0,this.resetCd()},e.prototype.attack=function(e,o){return s(this,void 0,void 0,function(){var n,r,i;return p(this,function(a){switch(a.label){case 0:return t.prototype.attack.call(this,e),this.skillBulletProcess(e),n=this.targetList,[4,this.createBullet(this.bulletPrefab,e,this.onHit.bind(this))];case 1:return(r=a.sent())?(i=this.owner.node.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)),r.init(null,i,o,this.transmitCount.value,n),r.node.scale=this.bulletSize.value,[2]):[2]}})})},e.prototype.onHit=function(t,e,o){if(t&&cc.isValid(t)){if(t.addSkillByClass(y.default),o.hasKey(h.AttackDataKey.SuperBullet))for(var n=o.getKey(h.AttackDataKey.SuperBullet),r=0;r<n;r++)this.thunderboltList.push({delay:.3*r,target:t,position:e});this.makeDamage(t,e,o)}},e.prototype.logicUpdate=function(e){t.prototype.logicUpdate.call(this,e);for(var o=0;o<this.thunderboltList.length;){var n=this.thunderboltList[o];n.delay-=e,n.delay<=0?(this.thunderbolt(n),this.thunderboltList.splice(o,1)):o++}},e.prototype.reset=function(){t.prototype.reset.call(this),this.targetList=[],this.attackIndex=0},e.prototype.start=function(){},u([g({type:cc.Prefab,displayName:"\u843d\u96f7"})],e.prototype,"bulletPrefabEx",void 0),u([g({type:cc.Prefab,displayName:"\u96f7\u7535\u529b\u573a"})],e.prototype,"bulletPrefabLeidian",void 0),u([v],e)}(m.default);a.default=_,cc._RF.pop(),cc._RF.pop()},{}],WeaponIce:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"41ae0TEkBNKLKvBLtKhzb2E","WeaponIce");var r=t,i=e,a=o;cc._RF.push(i,"41ae0TEkBNKLKvBLtKhzb2E","WeaponIce");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("Debuff_Slow"),d=r("Skill"),y=r("WeaponBullet"),h=cc._decorator,m=h.ccclass,b=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabIceRain=null,e.isPenetrateBullet=!1,e.hasIceBall=!1,e.isPriorityBoss=!1,e.iceBallPrefab=null,e.iceStraight=null,e.iceBallCooldown=0,e.iceBallCD=12,e.attackIndex=0,e.target=null,e}return l(e,t),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.isPenetrateBullet=!1,this.hasIceBall=!1,this.isPriorityBoss=!1,this.iceBallCooldown=0,this.attackIndex=0},e.prototype.reset=function(){t.prototype.reset.call(this),this.target=null},e.prototype.logicUpdate=function(e){t.prototype.logicUpdate.call(this,e),this.iceBallCooldown>0&&(this.iceBallCooldown-=e)},e.prototype.tryAttack=function(){this.readyAttacking||this.cd>0||this.findNearestTarget()&&(this.attackIndex=0,this.owner.attack(),this.readyAttacking=!0)},e.prototype.checkAttack=function(){this.isPriorityBoss&&(this.target=this.findNearestBoss()),this.target||(this.target=this.findNearestTarget()),this.target?(t.prototype.checkAttack.call(this),this.attack(this.getAttackData(),this.target),this.attackIndex++,this.attackIndex>=this.bulletCount.value?(this.target=null,this.resetCd(),this.readyAttacking=!1):this.owner.attack()):this.readyAttacking=!1},e.prototype.attack=function(e,o){return s(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return t.prototype.attack.call(this,e),this.skillBulletProcess(e),n=null,this.hasIceBall&&this.iceBallCooldown<=0?[4,this.createSpecialBall(this.iceBallPrefab,e,this.onHit.bind(this))]:[3,2];case 1:return(n=r.sent())?(this.iceBallCooldown=this.iceBallCD,this.initPenetrate(n,this.getTargetDir(o)),[3,6]):[2];case 2:return this.isPenetrateBullet?[4,this.createBullet(this.iceStraight,e,this.onHit.bind(this))]:[3,4];case 3:return(n=r.sent())?(this.initPenetrate(n,this.getTargetDir(o)),[3,6]):[2];case 4:return[4,this.createBullet(this.bulletPrefab,e,this.onHit.bind(this))];case 5:if(!(n=r.sent()))return[2];this.initTrackBullet(n,o),r.label=6;case 6:return[2]}})})},e.prototype.initPenetrate=function(t,e){null==t||t.init(e,-1,this.ad)},e.prototype.initTrackBullet=function(t,e){null==t||t.init(e)},e.prototype.onHit=function(t,e,o){return s(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return this.makeDamage(t,e,o),t.addSkillByClass(f.default),o.hasKey(d.AttackDataKey.SuperBullet)?(n=null,n=t&&t.node.parent&&cc.isValid(t.node)?t.node.position.clone():e,[4,this.createBullet(this.prefabIceRain,this.skillBulletProcess(this.getAttackData()),this.onRainHit.bind(this))]):[3,2];case 1:null==(r=i.sent())||r.init(n,o.getKey(d.AttackDataKey.SuperBullet)),i.label=2;case 2:return[2]}})})},e.prototype.onRainHit=function(t,e,o){this.makeDamage(t,e,o),t.addSkillByClass(f.default)},e.prototype.createSpecialBall=function(t,e,o){return s(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return[4,this.createBullet(t,e,o)];case 1:return[2,n.sent()]}})})},e.prototype.start=function(){},u([b({type:cc.Prefab,displayName:"\u51b0\u96e8\u9884\u5236\u4f53"})],e.prototype,"prefabIceRain",void 0),u([b({type:cc.Prefab,displayName:"\u51b0\u7403"})],e.prototype,"iceBallPrefab",void 0),u([b({type:cc.Prefab,displayName:"\u7a7f\u523a"})],e.prototype,"iceStraight",void 0),u([m],e)}(y.default);a.default=v,cc._RF.pop(),cc._RF.pop()},{}],WeaponMagic:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"20205anYDpIPbZe+X7LgnS8","WeaponMagic");var r=t,i=e,a=o;cc._RF.push(i,"20205anYDpIPbZe+X7LgnS8","WeaponMagic");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameGlobaled"),d=r("Debuff_Dizziness"),y=r("Skill"),h=r("WeaponBullet"),m=cc._decorator,b=m.ccclass,v=m.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletExRotate=null,e.bulletExPrefab=null,e}return l(e,t),e.prototype.tryAttack=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.readyAttacking?[2]:this.cd>0?[2]:this.findNearestTarget()?(this.owner.attack(),this.readyAttacking=!0,[2]):[2]})})},e.prototype.checkAttack=function(){var e=this.findNearestTarget();if(e){t.prototype.checkAttack.call(this);var o=this.getTargetDir(e);this.attack(this.getAttackData(),o)}else this.readyAttacking=!1},e.prototype.attack=function(e,o){return s(this,void 0,void 0,function(){var n,r,i,a,c;return p(this,function(l){switch(l.label){case 0:return t.prototype.attack.call(this,e),this.skillBulletProcess(e),e.hasKey(y.AttackDataKey.SuperBullet)?[4,this.createBullet(this.bulletExPrefab,e,this.onHit.bind(this))]:[3,2];case 1:return null==(c=l.sent())||c.init(o,f.default.towerMagicSuperResidue,0,5,this.finishAttack.bind(this)),[3,7];case 2:return n=e.hasKey(y.AttackDataKey.BulletResidue)?f.default.towerMagicNormalResidue:0,e.hasKey(y.AttackDataKey.BulletRotate)?(r=e.getKey(y.AttackDataKey.BulletRotate),[4,this.createBullet(this.bulletExRotate,e,this.onHit.bind(this))]):[3,5];case 3:return null==(i=l.sent())||i.init(o,n,-r,this.bulletSize.value,this.finishAttack.bind(this)),[4,this.createBullet(this.bulletExRotate,e,this.onHit.bind(this))];case 4:return null==(a=l.sent())||a.init(o,n,r,this.bulletSize.value),[3,7];case 5:return[4,this.createBullet(this.bulletPrefab,e,this.onHit.bind(this))];case 6:null==(c=l.sent())||c.init(o,n,0,this.bulletSize.value,this.finishAttack.bind(this)),l.label=7;case 7:return[2]}})})},e.prototype.finishAttack=function(){this.resetCd(),this.readyAttacking=!1},e.prototype.onHit=function(t,e,o){t&&cc.isValid(t)&&(this.makeDamage(t,e,o),o.hasKey(y.AttackDataKey.Dizziness)&&t.addSkillByClass(d.default))},u([v({type:cc.Prefab,displayName:"\u6a2a\u626b\u5b50\u5f39"})],e.prototype,"bulletExRotate",void 0),u([v({type:cc.Prefab,displayName:"\u8d85\u7ea7\u5b50\u5f39"})],e.prototype,"bulletExPrefab",void 0),u([b],e)}(h.default);a.default=g,cc._RF.pop(),cc._RF.pop()},{}],WeaponPoison:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"27de8ZN9MpCX4phcFf0wyI5","WeaponPoison");var r=t,i=e,a=o;cc._RF.push(i,"27de8ZN9MpCX4phcFf0wyI5","WeaponPoison");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameGlobaled"),d=r("EffectManager"),y=r("MonsterManager"),h=r("AttValue"),m=r("Debuff_Poison"),b=r("Debuff_Vulnerable"),v=r("Skill"),g=r("WeaponBullet"),_=cc._decorator,w=_.ccclass,S=_.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabBoom=null,e.prefabJudu=null,e.attackIndex=0,e.poisonLife=new h.AttValue,e.poisonDamage=new h.AttValue,e.poisonMoreCountProbability=new h.AttValue,e.isFindNotPoisonFirst=!1,e}return l(e,t),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.poisonLife.cleanup(),this.poisonLife.init(f.default.debuffPoisonLife),this.poisonDamage.cleanup(),this.poisonDamage.init(f.default.debuffPoisonDamage),this.poisonMoreCountProbability.cleanup(),this.poisonMoreCountProbability.init(0),this.attackIndex=0,this.isFindNotPoisonFirst=!1},e.prototype.findNotPoisonTarget=function(){var t=this,e=null,o=this.ad;return y.default.instance.listAll.forEach(function(n){if(n&&cc.isValid(n)&&!n.isDead&&!n.getSkill(m.default)){var r=n.node.position.sub(t.centerPosition).mag();r<=o&&(e=n,o=r)}}),e||this.findNearestTarget()},e.prototype.tryAttack=function(){this.readyAttacking||this.cd>0||this.findNearestTarget()&&(this.attackIndex=0,this.owner.attack(),this.readyAttacking=!0)},e.prototype.checkAttack=function(){var e;(e=this.isFindNotPoisonFirst?this.findNotPoisonTarget():this.findNearestTarget())?(t.prototype.checkAttack.call(this),this.attack(this.getAttackData(),e),this.attackIndex++,this.attackIndex>=this.bulletCount.value?(this.resetCd(),this.readyAttacking=!1):this.owner.attack()):this.readyAttacking=!1},e.prototype.attack=function(e,o){return s(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return t.prototype.attack.call(this,e),this.skillBulletProcess(e),[4,this.createBullet(this.bulletPrefab,e,this.onHit.bind(this))];case 1:return null==(n=r.sent())||n.init(o),[2]}})})},e.prototype.juDuXinXing=function(){return s(this,void 0,void 0,function(){var t;return p(this,function(e){switch(e.label){case 0:return[4,this.createBullet(this.prefabJudu,this.skillBulletProcess(this.getAttackData()),this.onHit.bind(this))];case 1:return null==(t=e.sent())||t.init(f.default.towerPoisonJuduDistance),[2]}})})},e.prototype.onHit=function(t,e,o){var n=this,r=this.data.atk.value*this.poisonDamage.value+"&"+this.poisonLife.value,i=function(t){n.makeDamage(t,e,o);var i=1;Math.random()<n.poisonMoreCountProbability.value&&(i=3);for(var a=0;a<i;a++)t.addSkillByClass(m.default,!1,r);o.hasKey(v.AttackDataKey.Vulnerable)&&t.addSkillByClass(b.default,!0,o.getKey(v.AttackDataKey.Vulnerable))};if(o.hasKey(v.AttackDataKey.Boom)){var a=o.getKey(v.AttackDataKey.Boom);d.default.instance.create(this.prefabBoom,e),y.default.instance.listAll.forEach(function(t){t.node.position.sub(e).mag()<=a&&i(t)})}else i(t)},e.prototype.start=function(){},u([S({type:cc.Prefab,displayName:"\u7206\u70b8\u7279\u6548"})],e.prototype,"prefabBoom",void 0),u([S({type:cc.Prefab,displayName:"\u5267\u6bd2\u65b0\u661f"})],e.prototype,"prefabJudu",void 0),u([w],e)}(g.default);a.default=R,cc._RF.pop(),cc._RF.pop()},{}],WeaponSword:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"28de4oLzxVMcYo+Qqvm/MMB","WeaponSword");var r=t,i=e,a=o;cc._RF.push(i,"28de4oLzxVMcYo+Qqvm/MMB","WeaponSword");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("GameDefine"),d=r("GameGlobaled"),y=r("EffectManager"),h=r("MonsterManager"),m=r("AttValue"),b=r("Debuff_Dizziness"),v=r("Skill"),g=r("WeaponBullet"),_=cc._decorator,w=_.ccclass,S=_.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefabFire=null,e.bulletPrefabDThunder=null,e.effectFireBoom=null,e.fireWeight=new m.AttValue,e.thunderWeight=new m.AttValue,e.killAddLife=new m.AttValue,e.damageIncreaseRate=new m.AttValue,e.maxBonus=new m.AttValue,e}return l(e,t),e.prototype.init=function(e,o,n){t.prototype.init.call(this,e,o,n),this.bulletLife.cleanup(),this.bulletLife.init(d.default.towerSwordLife),this.fireWeight.cleanup(),this.fireWeight.init(0),this.thunderWeight.cleanup(),this.thunderWeight.init(0),this.killAddLife.cleanup(),this.killAddLife.init(0),this.damageIncreaseRate.cleanup(),this.damageIncreaseRate.init(0),this.maxBonus.cleanup(),this.maxBonus.init(0)},e.prototype.tryAttack=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.readyAttacking?[2]:this.cd>0?[2]:this.findNearestTarget()?(this.owner.attack(),this.readyAttacking=!0,[2]):[2]})})},e.prototype.checkAttack=function(){this.readyAttacking=!1,t.prototype.checkAttack.call(this);for(var e=0;e<this.bulletCount.value;e++)this.attack(this.getAttackData());this.resetCd()},e.prototype.attack=function(e){return s(this,void 0,void 0,function(){var o,n;return p(this,function(r){switch(r.label){case 0:switch(t.prototype.attack.call(this,e),this.getBulletByRandom()){case f.Elemental.Fire:e.addKey(v.AttackDataKey.Boom),o=this.bulletPrefabFire;break;case f.Elemental.Thunder:e.addKey(v.AttackDataKey.Dizziness),o=this.bulletPrefabDThunder;break;case f.Elemental.Normal:o=this.bulletPrefab}return[4,this.createBullet(o,this.skillBulletProcess(e),this.onHit.bind(this))];case 1:return(n=r.sent())?(n.init(this.bulletLife.value,this.killAddLife.value,this.damageIncreaseRate.value,this.maxBonus.value),n.node.scale=this.bulletSize.value,[2]):[2]}})})},e.prototype.onHit=function(t,e,o){var n=this;o.hasKey(v.AttackDataKey.Boom)?(y.default.instance.create(this.effectFireBoom,e),h.default.instance.listAll.forEach(function(t){t.node.position.sub(e).mag()<=d.default.towerSwordAttackDistance&&n.makeDamage(t,e,o)})):o.hasKey(v.AttackDataKey.Dizziness)?t&&cc.isValid(t)&&(this.makeDamage(t,e,o),t.addSkillByClass(b.default)):t&&cc.isValid(t)&&this.makeDamage(t,e,o)},e.prototype.getBulletByRandom=function(){var t=100*Math.random();return t<this.fireWeight.value?f.Elemental.Fire:(t-=this.fireWeight.value)<this.thunderWeight.value?f.Elemental.Thunder:f.Elemental.Normal},u([S({type:cc.Prefab,displayName:"\u98de\u5251(\u706b)"})],e.prototype,"bulletPrefabFire",void 0),u([S({type:cc.Prefab,displayName:"\u98de\u5251(\u96f7)"})],e.prototype,"bulletPrefabDThunder",void 0),u([S({type:cc.Prefab,displayName:"\u7206\u70b8(\u706b)"})],e.prototype,"effectFireBoom",void 0),u([w],e)}(g.default);a.default=R,cc._RF.pop(),cc._RF.pop()},{}],WeaponTransmitBullet:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"71eb08goaVPfoMfsFI+/Rdl","WeaponTransmitBullet");var r=t,i=e,a=o;cc._RF.push(i,"71eb08goaVPfoMfsFI+/Rdl","WeaponTransmitBullet");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("BulletManager"),d=r("WeaponBullet"),y=cc._decorator,h=y.ccclass,m=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chainCount=3,e.chainDamageRate=.5,e}return l(e,t),e.prototype.attack=function(t){return s(this,void 0,void 0,function(){var e,o,n,r=this;return p(this,function(){return e=[],this.id,o=this.atk,(n=function(i,a){return void 0===i&&(i=null),void 0===a&&(a=null),s(r,void 0,void 0,function(){var r,c,l,u=this;return p(this,function(s){switch(s.label){case 0:return i&&e.push(i),e.length>=this.chainCount?[2]:(r=i?this.findNearestTarget(e):t)?(a||(a=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),[4,f.default.instance.create(this.bulletPrefab,a)]):[2];case 1:return(c=s.sent())?((l=this.getAttackData()).damage=o,null==c||c.init(t,l,function(t){u.makeDamage.bind(u),o*=u.chainDamageRate,n(r,t.node.convertToWorldSpaceAR(cc.Vec2.ZERO))}),[2]):[2]}})})})(),[2]})})},u([h],e)}(d.default));a.default=m,cc._RF.pop(),cc._RF.pop()},{}],Weapon:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"124281XRytK2rIpjEOYSJiJ","Weapon");var r=t,i=e,a=o;cc._RF.push(i,"124281XRytK2rIpjEOYSJiJ","Weapon");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("EventConfig"),p=r("GameDefine"),f=r("EventHelper"),d=r("SoundHelper"),y=r("MathUtil"),h=r("DamageManager"),m=r("MonsterManager"),b=r("Skill"),v=cc._decorator,g=v.ccclass,_=v.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sound="",e.owner=null,e.centerPosition=null,e.data=null,e.param=0,e.attackHis=0,e.isStopCD=!1,e.cd=0,e}return l(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.data?this.data.sdbId:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"atk",{get:function(){return this.data?this.data.atk.value:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ad",{get:function(){return this.data?this.data.ad.value:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"as",{get:function(){return this.data?this.data.as.value:0},enumerable:!1,configurable:!0}),e.prototype.getAttInfoList=function(){return[{name:"\u653b\u51fb",value:this.atk.toFixed(0)},{name:"\u653b\u901f",value:(this.as/1e3).toFixed(1)+" \u6b21/\u79d2"},{name:"\u5c04\u7a0b",value:this.ad.toFixed(0)}]},e.prototype.init=function(t,e){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this.owner=t,this.data=e,this.isStopCD=!1},e.prototype.setEntityData=function(t){this.data=t},e.prototype.setCenterPosition=function(t){this.centerPosition=t},e.prototype.addParam=function(t){this.param|=t},e.prototype.tryAttack=function(){},e.prototype.checkAttack=function(){this.attackHis++,this.owner.skillList.forEach(function(t){return t.onAttack()})},e.prototype.checkAttackFinish=function(){},e.prototype.attack=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.isStopCD=!0,d.default.playBattleSfx(this.sound)},e.prototype.reset=function(){this.resetCd()},e.prototype.cleanup=function(){this.reset()},e.prototype.resetCd=function(){this.cd=1e3/this.as,this.isStopCD=!1},e.prototype.findNearestTarget=function(t){var e=this;void 0===t&&(t=[]);var o=null,n=this.ad;return m.default.instance.listAll.forEach(function(r){if(r&&cc.isValid(r)&&!r.isDead&&r.node.parent&&!(t.indexOf(r)>=0)){var i=r.node.position.sub(e.centerPosition).mag();i<=n&&(o=r,n=i)}}),o},e.prototype.findNearestBoss=function(t){var e=this;void 0===t&&(t=[]);var o=null,n=this.ad;return m.default.instance.listAll.forEach(function(r){var i=r;if(i&&cc.isValid(i)&&!i.isDead&&i.node.parent&&!(t.indexOf(i)>=0||i.type!=p.MonsterType.Special&&i.type!=p.MonsterType.Boss)){var a=i.node.position.sub(e.centerPosition).mag();a<=n&&(o=i,n=a)}}),o},e.prototype.getFrontMostEnemy=function(){var t=this;return m.default.instance.listAll.reduce(function(e,o){if(o.isDead)return e;if(t.owner.node.position.sub(o.node.position).len()>t.ad)return e;if(!e||e.isDead)return o;var n=e.remainPathCount||0;return(o.remainPathCount||0)<n?o:e},null)},e.prototype.makeDamage=function(t,e,o){this.owner.skillList.forEach(function(t){return t.onDamage(o)});var n=t.data.hp.value,r=t.bodyPosition,i=100*y.default.random()<=o.critRate,a=Math.ceil(o.damage*(i?o.critDamage/100:1));if(a=t.onHurt(a)){t.isDead&&this.owner.skillList.forEach(function(e){return e.onKill(t)});var c={buildingType:this.id,realDamage:Math.min(n,a),overDamage:Math.max(0,a-n)};f.default.emit(s.default.MonsterDamaged,c),i?h.default.instance.createCrit(a,r):h.default.instance.create(a,r)}},e.prototype.getAttackData=function(){var t=new b.AttackData(this.data);return t.critRate=1,t},e.prototype.logicUpdate=function(t){!this.isStopCD&&this.cd>0&&(this.cd-=t)},e.prototype.onLoad=function(){},e.prototype.start=function(){},u([_({displayName:"\u97f3\u6548"})],e.prototype,"sound",void 0),u([g],e)}(cc.Component);a.default=w,cc._RF.pop(),cc._RF.pop()},{}],WechatBaoWeiWanDou:[function(t,e,o){"use strict";cc._RF.push(e,"0f1529zZcZF4L8pdK7wkng4","WechatBaoWeiWanDou");var n=t,r=e,i=o;cc._RF.push(r,"0f1529zZcZF4L8pdK7wkng4","WechatBaoWeiWanDou");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("Load"),u=n("PlatformHelper"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"videoIds",{get:function(){return["adunit-8f2e3deb49c3f6cb"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bannerIds",{get:function(){return[""]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareMessage",{get:function(){return["\u636e\u8bf4\u53ea\u67091%\u7684\u73a9\u5bb6\u80fd\u901a\u5173\u7b2c10\u5173\uff0c\u4f60\u80fd\u505a\u5230\u5417\uff1f","\u4fdd\u536b\u6211\u65b9\u5154\u730e\u624b\uff01","\u7b56\u7565\u4e0e\u667a\u6167\u7684\u8003\u9a8c\uff0c\u7b49\u4f60\u6765\u6311\u6218\uff01","\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u5854\u9632\u6e38\u620f\uff0c\u70e7\u8111\u53c8\u597d\u73a9\uff01","\u9ad8\u667a\u5546\u624d\u80fd\u8fc7\u5173\u7684\u5854\u9632\u6e38\u620f"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareImg",{get:function(){return[]},enumerable:!1,configurable:!0}),e}(n("Wechat").default);i.default=s,cc.sys.WECHAT_GAME===cc.sys.platform&&l.GameCannel===l.CannelType.BaoWeiWanDou&&u.PlatformHelper.setPlatform(s),cc._RF.pop(),cc._RF.pop()},{}],WechatGameClubButton:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"30e1169yyxDJKk5nqinTMMw","WechatGameClubButton");var r=t,i=e,a=o;cc._RF.push(i,"30e1169yyxDJKk5nqinTMMw","WechatGameClubButton");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f,d=r("PlatformHelper"),y=cc._decorator,h=y.ccclass,m=y.property;(function(t){t[t.green=0]="green",t[t.white=1]="white",t[t.dark=2]="dark",t[t.light=3]="light"})(f||(f={}));var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=f.green,e.systemInfo=null,e.btn=null,e}return l(e,t),e.prototype.getSystemInfo=function(){return s(this,void 0,void 0,function(){var t=this;return p(this,function(){return[2,new Promise(function(e){wx.getSystemInfo({success:function(o){t.systemInfo=o,e(o)},fail:function(){},complete:function(){}})})]})})},e.prototype.getStyle=function(){if(!this.systemInfo)return null;var t=this.node.getBoundingBoxToWorld(),e=cc.winSize.height-t.yMax,o=t.xMin,n=t.height/cc.winSize.height*this.systemInfo.screenHeight,r=t.width/cc.winSize.width*this.systemInfo.screenWidth;return e=e/cc.winSize.height*this.systemInfo.screenHeight,{left:o=o/cc.winSize.width*this.systemInfo.screenWidth,top:e,width:r,height:n}},e.prototype.onPositionChanged=function(){if(this.btn){var t=this.getStyle();t&&(this.btn.style.left=t.left,this.btn.style.top=t.top)}},e.prototype.onClickBtn=function(){console.log("click")},e.prototype.onEnable=function(){var t;null===(t=this.btn)||void 0===t||t.show(),this.onPositionChanged()},e.prototype.onDisable=function(){var t;null===(t=this.btn)||void 0===t||t.hide()},e.prototype.onDestroy=function(){var t,e;null===(t=this.btn)||void 0===t||t.destroy(),null===(e=this.btn)||void 0===e||e.offTap(this.onClickBtn.bind(this))},e.prototype.onLoad=function(){var t=this;"Wechat"===d.PlatformHelper.getPlatformName()&&this.getSystemInfo().then(function(){t.btn=wx.createGameClubButton({type:"image",icon:f[t.icon],style:t.getStyle()}),t.btn.onTap(t.onClickBtn.bind(t))})},e.prototype.start=function(){this.schedule(this.onPositionChanged.bind(this),1)},u([m({type:cc.Enum(f),displayName:"Icon"})],e.prototype,"icon",void 0),u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],WechatGameClub:[function(t,e,o){"use strict";cc._RF.push(e,"aae0bDckZRM2LzvOSKRXdGF","WechatGameClub");var n=t,r=e,i=o;cc._RF.push(r,"aae0bDckZRM2LzvOSKRXdGF","WechatGameClub");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("Load"),u=n("PlatformHelper"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"videoIds",{get:function(){return["adunit-c2dc6afad482595a"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bannerIds",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareMessage",{get:function(){return["\u636e\u8bf4\u53ea\u67091%\u7684\u73a9\u5bb6\u80fd\u901a\u5173\u7b2c10\u5173\uff0c\u4f60\u80fd\u505a\u5230\u5417\uff1f","\u4fdd\u536b\u6211\u65b9\u96c5\u5178\u5a1c\uff01","\u7b56\u7565\u4e0e\u667a\u6167\u7684\u8003\u9a8c\uff0c\u7b49\u4f60\u6765\u6311\u6218\uff01","\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u5854\u9632\u6e38\u620f\uff0c\u70e7\u8111\u53c8\u597d\u73a9\uff01","\u9ad8\u667a\u5546\u624d\u80fd\u8fc7\u5173\u7684\u5854\u9632\u6e38\u620f"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareImg",{get:function(){return[]},enumerable:!1,configurable:!0}),e}(n("Wechat").default);i.default=s,cc.sys.WECHAT_GAME===cc.sys.platform&&l.GameCannel===l.CannelType.GameClub&&u.PlatformHelper.setPlatform(s),cc._RF.pop(),cc._RF.pop()},{}],WechatHu:[function(t,e,o){"use strict";cc._RF.push(e,"f3dc2sGjLxI6LyaYO5oI202","WechatHu");var n=t,r=e,i=o;cc._RF.push(r,"f3dc2sGjLxI6LyaYO5oI202","WechatHu");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("Load"),u=n("PlatformHelper"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"videoIds",{get:function(){return["adunit-c2dc6afad482595a"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bannerIds",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareMessage",{get:function(){return["\u636e\u8bf4\u53ea\u67091%\u7684\u73a9\u5bb6\u80fd\u901a\u5173\u7b2c10\u5173\uff0c\u4f60\u80fd\u505a\u5230\u5417\uff1f","\u4fdd\u536b\u6211\u65b9\u96c5\u5178\u5a1c\uff01","\u7b56\u7565\u4e0e\u667a\u6167\u7684\u8003\u9a8c\uff0c\u7b49\u4f60\u6765\u6311\u6218\uff01","\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u5854\u9632\u6e38\u620f\uff0c\u70e7\u8111\u53c8\u597d\u73a9\uff01","\u9ad8\u667a\u5546\u624d\u80fd\u8fc7\u5173\u7684\u5854\u9632\u6e38\u620f"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareImg",{get:function(){return[{id:"4BoDC6PLToqNi28PYC06SA==",url:"https://mmocgame.qpic.cn/wechatgame/EuAfv2l1p63Kw6dpMicibnyn3QcRN3thYVWBj1xoslOyRx3R5wib1mhQwckhHeIia6yP/0"},{id:"oNvggfpuSA2z9JWCCCwGtw==",url:"https://mmocgame.qpic.cn/wechatgame/vq4H3PqHCBiceFP5rUPvicg7tZ0uXZtVciaTmnEp4Nib1xWjTWSNFJE8LQfk6p2DUs8x/0"},{id:"gjeaf32/QcSs/VKvxE++YA==",url:"https://mmocgame.qpic.cn/wechatgame/lKfed54Z7CN2XgtAjxRibYicWX6FxgzubVLHACrkj1jBnk5dwn0icaTmREF8MzxfBjH/0"}]},enumerable:!1,configurable:!0}),e}(n("Wechat").default);i.default=s,cc.sys.WECHAT_GAME===cc.sys.platform&&l.GameCannel===l.CannelType.Hu&&u.PlatformHelper.setPlatform(s),cc._RF.pop(),cc._RF.pop()},{}],WechatPlay800:[function(t,e,o){"use strict";cc._RF.push(e,"bf0cc33pshKWq5O1mmyBoI+","WechatPlay800");var n=t,r=e,i=o;cc._RF.push(r,"bf0cc33pshKWq5O1mmyBoI+","WechatPlay800");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("Load"),u=n("PlatformHelper"),s=n("Wechat"),p=n("RunDataHelper"),f=n("StageData"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sid="",e.uid="",e}return c(e,t),Object.defineProperty(e.prototype,"videoIds",{get:function(){return["adunit-709e4bfd75c99b58"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bannerIds",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareMessage",{get:function(){return["\u636e\u8bf4\u53ea\u67091%\u7684\u73a9\u5bb6\u80fd\u901a\u5173\u7b2c10\u5173\uff0c\u4f60\u80fd\u505a\u5230\u5417\uff1f","\u4fdd\u536b\u6211\u65b9\u96c5\u5178\u5a1c\uff01","\u7b56\u7565\u4e0e\u667a\u6167\u7684\u8003\u9a8c\uff0c\u7b49\u4f60\u6765\u6311\u6218\uff01","\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u5854\u9632\u6e38\u620f\uff0c\u70e7\u8111\u53c8\u597d\u73a9\uff01","\u9ad8\u667a\u5546\u624d\u80fd\u8fc7\u5173\u7684\u5854\u9632\u6e38\u620f"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareImg",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this;return this.isInit?this:(this.isInit=!0,console.log("P8 Init"),P8SDK.login().then(function(e){console.log(e),t.uid=e.data.uid}),P8SDK.wxADinit({adUnitId:this.videoIds[0],adSlot:"\u6fc0\u52b1\u89c6\u9891"}),console.log("P8 Finish"),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){console.log("onShareAppMessage");var e=t.shareMessage[Math.floor(Math.random()*t.shareMessage.length)],o=t.shareImg[Math.floor(Math.random()*t.shareImg.length)];return{title:e,imageUrlId:o.id,imageUrl:o.url}}),wx.updateShareMenu({withShareTicket:!0,success:function(){console.log("UpdateShareMenu")}}),wx.setKeepScreenOn({keepScreenOn:!0,success:function(){console.log("keepScreenOn Success")},fail:function(){console.log("keepScreenOn Fail")}}),wx.onAudioInterruptionBegin(function(){console.log("onAudioInterruptionBegin")}),this)},e.prototype.video=function(t,e){var o=this;console.log("p8 video"),this.showLoading("\u52a0\u8f7d\u4e2d..."),P8SDK.videoADShow(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u770b\u5b8c \u5956\u52b1\u5c0f\u7ea2\u82b1"),t&&t(),o.hideLoading()},function(){console.log("\u6fc0\u52b1\u89c6\u9891\u6ca1\u770b\u5b8c \u4e0d\u7ed9\u5c0f\u7ea2\u82b1"),e&&e(),o.hideLoading()},function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5f02\u5e38 ",t),e&&e(),o.hideLoading(),o.showToast("\u76ee\u524d\u6ca1\u6709\u5e7f\u544a\u3002")},"\u5e7f\u544a\u5c55\u793a\u4f4d\u7f6e\u9009\u586b",function(){o.hideLoading(),console.log("\u6fc0\u52b1\u89c6\u9891\u5f00\u59cb\u5c55\u793a")})},e.prototype.p8LevelPass=function(t){var e={level:t,sid:this.sid,roleid:this.uid,rolename:this.uid,vip:"",onlinetime:"",oaid:""};P8LogSDK.upGradeRecord(e).then(function(t){console.log(t)})},e.prototype.p8BattleEnter=function(t,e){var o={level:t+"-"+e,level_status:"0"};P8LogSDK.levelUpGrade(o)},e.prototype.p8BattleWin=function(t,e){var o={level:t+"-"+e,level_status:"1"};P8LogSDK.levelUpGrade(o)},e.prototype.p8BattleLose=function(t,e){var o={level:t+"-"+e,level_status:"2"};P8LogSDK.levelUpGrade(o)},e.prototype.p8BattleCancel=function(t,e){var o={level:t+"-"+e,level_status:"3"};P8LogSDK.levelUpGrade(o)},e.prototype.p8New=function(){var t=p.DataHelper.getData(f.default).stage,e={sid:this.sid,roleid:this.uid,rolename:this.uid,level:t.toString()};P8LogSDK.signLog(e).then(function(t){console.log(t)})},e.prototype.p8Login=function(){console.log("P8 Login");var t=p.DataHelper.getData(f.default).stage,e={sid:this.sid,roleid:this.uid,rolename:this.uid,level:t.toString(),vip:"",username:"",onlinetime:""};P8LogSDK.pushLoginData(e).then(function(t){console.log(t)});var o=cc.sys.localStorage.getItem("p8uid")||"";this.uid!==o&&""===o&&(this.p8New(),cc.sys.localStorage.setItem("p8uid",this.uid))},e.prototype.p8Guide=function(){var t={sid:this.sid,uid:this.uid};P8LogSDK.tutorialFinish(t)},e}(s.default);i.default=d,cc.sys.WECHAT_GAME===cc.sys.platform&&l.GameCannel===l.CannelType.Play800&&u.PlatformHelper.setPlatform(d),cc._RF.pop(),cc._RF.pop()},{}],WechatYongWang:[function(t,e,o){"use strict";cc._RF.push(e,"d37f977xMZFU4ByfVnH8sq0","WechatYongWang");var n=t,r=e,i=o;cc._RF.push(r,"d37f977xMZFU4ByfVnH8sq0","WechatYongWang");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("Load"),u=n("PlatformHelper"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"videoIds",{get:function(){return["adunit-9e4513e7b91396eb"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bannerIds",{get:function(){return["adunit-88a8c3f93fb02d14"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareMessage",{get:function(){return["\u636e\u8bf4\u53ea\u67091%\u7684\u73a9\u5bb6\u80fd\u901a\u5173\u7b2c10\u5173\uff0c\u4f60\u80fd\u505a\u5230\u5417\uff1f","\u4fdd\u536b\u6211\u65b9\u96c5\u5178\u5a1c\uff01","\u7b56\u7565\u4e0e\u667a\u6167\u7684\u8003\u9a8c\uff0c\u7b49\u4f60\u6765\u6311\u6218\uff01","\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u5854\u9632\u6e38\u620f\uff0c\u70e7\u8111\u53c8\u597d\u73a9\uff01","\u9ad8\u667a\u5546\u624d\u80fd\u8fc7\u5173\u7684\u5854\u9632\u6e38\u620f"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareImg",{get:function(){return[]},enumerable:!1,configurable:!0}),e}(n("Wechat").default);i.default=s,cc.sys.WECHAT_GAME===cc.sys.platform&&l.GameCannel===l.CannelType.YongWang&&u.PlatformHelper.setPlatform(s),cc._RF.pop(),cc._RF.pop()},{}],WechatZhai:[function(t,e,o){"use strict";cc._RF.push(e,"239b3fiK7ZJ1ax7BzbbV68g","WechatZhai");var n=t,r=e,i=o;cc._RF.push(r,"239b3fiK7ZJ1ax7BzbbV68g","WechatZhai");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("Load"),u=n("PlatformHelper"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),Object.defineProperty(e.prototype,"videoIds",{get:function(){return["adunit-f67bd3f4c1e105cb"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bannerIds",{get:function(){return["adunit-81a3cbc3be314bd9"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareMessage",{get:function(){return["\u636e\u8bf4\u53ea\u67091%\u7684\u73a9\u5bb6\u80fd\u901a\u5173\u7b2c10\u5173\uff0c\u4f60\u80fd\u505a\u5230\u5417\uff1f","\u4fdd\u536b\u6211\u65b9\u96c5\u5178\u5a1c\uff01","\u7b56\u7565\u4e0e\u667a\u6167\u7684\u8003\u9a8c\uff0c\u7b49\u4f60\u6765\u6311\u6218\uff01","\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u5854\u9632\u6e38\u620f\uff0c\u70e7\u8111\u53c8\u597d\u73a9\uff01","\u9ad8\u667a\u5546\u624d\u80fd\u8fc7\u5173\u7684\u5854\u9632\u6e38\u620f"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareImg",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this;if(this.isInit)return this;this.isInit=!0;var e={gameId:"1833162806817991",submissionVersion:1,umaKey:"",videoAdId:this.videoIds[0],bannerAdId:this.bannerIds[0],CustomAdId:""};return window.sdkInit("wxMiniGame",e,function(){console.log("Zhai SdkInit Success")}),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){console.log("onShareAppMessage");var e=t.shareMessage[Math.floor(Math.random()*t.shareMessage.length)],o=t.shareImg[Math.floor(Math.random()*t.shareImg.length)];return{title:e,imageUrlId:o.id,imageUrl:o.url}}),wx.updateShareMenu({withShareTicket:!0,success:function(){console.log("UpdateShareMenu")}}),wx.setKeepScreenOn({keepScreenOn:!0,success:function(){console.log("keepScreenOn Success")},fail:function(){console.log("keepScreenOn Fail")}}),wx.onAudioInterruptionBegin(function(){console.log("onAudioInterruptionBegin")}),this},e.prototype.video=function(t,e){window.FLJ.showVideoAd(this.videoIds[0],function(o){1===o?t&&t():e&&e()})},e.prototype.bannerShow=function(){window.FLJ.showBannerAd(this.bannerIds[0],function(){})},e.prototype.bannerHide=function(){window.FLJ.hideBannerAd()},e}(n("Wechat").default);i.default=s,cc.sys.WECHAT_GAME===cc.sys.platform&&l.GameCannel===l.CannelType.Zhai&&u.PlatformHelper.setPlatform(s),cc._RF.pop(),cc._RF.pop()},{}],Wechat:[function(t,e,o){"use strict";cc._RF.push(e,"fe89ed9HjZFYYmNoEwWvsu2","Wechat");var n=t,r=e,i=o;cc._RF.push(r,"fe89ed9HjZFYYmNoEwWvsu2","Wechat");var a,c=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var l=n("TrackHelper"),u=n("PlatformHelper"),s=function(t){function e(){var e=t.call(this)||this;return e.isInit=!1,e.videos=[],e.callbackSuccess=null,e.callbackFail=null,e.callbackCancel=null,e.videoIndex=0,e.banners=[],e}return c(e,t),Object.defineProperty(e.prototype,"videoIds",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bannerIds",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareMessage",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareImg",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.getPlatformName=function(){return"Wechat"},e.prototype.init=function(){var t=this;return this.isInit?this:(this.isInit=!0,this.videoIds.forEach(function(e){var o=wx.createRewardedVideoAd({adUnitId:e});o.onLoad(t.onVideoLoad.bind(t)),o.onError(t.onVideoError.bind(t)),o.onClose(t.onVideoClose.bind(t)),t.videos.push(o)}),this.bannerIds.forEach(function(e){var o=wx.createBannerAd({adUnitId:e,style:{left:0,top:0,width:300,height:230}});o.onError(t.onBannerError.bind(t)),o.onResize(function(){var t=wx.getSystemInfoSync();o.style.left=(t.windowWidth-o.style.realWidth)/2,o.style.top=t.windowHeight-o.style.realHeight}),t.banners.push(o)}),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){console.log("onShareAppMessage");var e=t.shareMessage[Math.floor(Math.random()*t.shareMessage.length)],o=t.shareImg[Math.floor(Math.random()*t.shareImg.length)];return{title:e,imageUrlId:o.id,imageUrl:o.url}}),wx.updateShareMenu({withShareTicket:!0,success:function(){console.log("UpdateShareMenu")}}),wx.setKeepScreenOn({keepScreenOn:!0,success:function(){console.log("keepScreenOn Success")},fail:function(){console.log("keepScreenOn Fail")}}),wx.onAudioInterruptionBegin(function(){console.log("onAudioInterruptionBegin")}),this)},e.prototype.login=function(){return new Promise(function(t,e){wx.login({success:function(o){o.code?(console.log(o.code),t(o.code)):(console.log("\u767b\u5f55\u5931\u8d25\uff01"+o.errMsg),e(o.errMsg))},fail:function(t){console.log("\u767b\u5f55\u5931\u8d25\uff01"+t.errMsg),e(t.errMsg)}})})},e.prototype.showToast=function(t,e){wx.showToast({title:t,icon:e||"none",duration:2e3})},e.prototype.showLoading=function(t){wx.showLoading({title:t})},e.prototype.hideLoading=function(){wx.hideLoading()},e.prototype.startRecord=function(t){t&&t()},e.prototype.stopRecord=function(t){t&&t()},e.prototype.videoShare=function(t){t&&t()},e.prototype.share=function(t){t&&t()},e.prototype.video=function(t,e){var o=this;this.callbackSuccess=t,this.callbackCancel=e;var n=this.videos[this.videoIndex];if(!n)return this.showToast("\u76ee\u524d\u6ca1\u6709\u5e7f\u544a");this.showLoading("\u52a0\u8f7d\u4e2d..."),n.show().then(function(){o.hideLoading()}).catch(function(){return o.hideLoading(),o.showToast("\u76ee\u524d\u6ca1\u6709\u5e7f\u544a")}),this.videoIndex++,this.videoIndex>=this.videos.length&&(this.videoIndex=0)},e.prototype.requestSubscribeMessage=function(){},e.prototype.onVideoLoad=function(){console.debug("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},e.prototype.onVideoError=function(t){console.debug("\u89c6\u9891\u5e7f\u544a\u9519\u8bef:",t)},e.prototype.onVideoClose=function(t){t&&t.isEnded||void 0===t?(this.callbackSuccess&&this.callbackSuccess(),l.default.AdShowEevent("reward")):(this.showToast("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u9886\u53d6\u5956\u52b1"),this.callbackCancel&&this.callbackCancel())},e.prototype.bannerShow=function(t){this.banners[t]&&this.banners[t].show()},e.prototype.bannerHide=function(t){this.banners[t]&&this.banners[t].hide()},e.prototype.onBannerError=function(t){console.debug("Banner\u9519\u8bef:",t)},e.prototype.shake=function(){wx.vibrateShort({type:"light"})},e.prototype.shakeLong=function(){wx.vibrateLong({})},e.prototype.isDebug=function(){return"release"!==window.__wxConfig.envVersion},e.prototype.postMessage=function(t){wx.getOpenDataContext()?wx.getOpenDataContext().postMessage(t):console.error(">>>>>> getOpenDataContext is null")},e.prototype.getRank=function(){this.postMessage({event:"getRank"})},e.prototype.setOpendId=function(){this.postMessage({event:"setOpenid",openid:u.PlatformHelper.openId})},e.prototype.postScore=function(t){this.postMessage({event:"setScore",score:t})},e}(u.Platform);i.default=s,cc._RF.pop(),cc._RF.pop()},{}],WinFrame:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"c20fdwPOAVEiL36rwWysT9e","WinFrame");var r=t,i=e,a=o;cc._RF.push(i,"c20fdwPOAVEiL36rwWysT9e","WinFrame");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c},s=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},p=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var f=r("LayoutList"),d=r("FrameHelper"),y=r("PlatformHelper"),h=r("RunDataHelper"),m=r("StaticDBHelper"),b=r("DailyData"),v=r("Tools"),g=r("TimeUtil"),_=r("YWCloundHelper"),w=r("GetItemFrame"),S=r("MainFrame"),R=r("GameFrame"),O=r("WinRewardItem"),P=cc._decorator,F=P.ccclass,T=P.menu,D=P.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardScroll=null,e.videoLabel=null,e.rewardTitle=null,e.btnsNode=null,e.ribbon=null,e.btnDouble=null,e.rewardList=[],e}return l(e,t),e.prototype.onClickClose=function(){var t=this;d.default.showFrame(S.default).then(function(){t.hideFrame(),d.default.hideFrame(R.default)})},e.prototype.onClickVideo=function(){var t=this;y.PlatformHelper.video("WinDouble",function(){t.btnDouble.interactable=!1,v.default.addToBagByRewardList(t.rewardList),d.default.showFrame(w.default,w.default.GetType.item,t.rewardList),h.DataHelper.getData(b.default).subWinDouble(),t.setVideoLabel()})},e.prototype.animationRest=function(){this.rewardTitle.opacity=0,this.btnsNode.opacity=0,this.btnsNode.scale=0},e.prototype.animationShow=function(){return s(this,void 0,void 0,function(){var t,e;return p(this,function(o){switch(o.label){case 0:return cc.tween(this.rewardTitle).set({scale:0}).to(.15,{scale:1.3,opacity:255}).to(.05,{scale:1}).start(),[4,g.default.delay(.3)];case 1:o.sent(),t=0,o.label=2;case 2:return t<this.rewardScroll.nodeList.length?(e=this.rewardScroll.nodeList[t].getComponent(O.default),[4,g.default.delay(.1)]):[3,5];case 3:o.sent(),e.animationShow(),o.label=4;case 4:return t++,[3,2];case 5:return[4,g.default.delay(.2)];case 6:return o.sent(),cc.tween(this.btnsNode).to(.15,{scale:1.2,opacity:255}).to(.05,{scale:1}).start(),[4,g.default.delay(.2)];case 7:return o.sent(),this.ribbon.resetSystem(),[2]}})})},e.prototype.onCreateRewrd=function(t,e){t.getComponent(O.default).setItem(this.rewardList[e])},e.prototype.setVideoLabel=function(){this.videoLabel.string=h.DataHelper.getData(b.default).winDoubleVideoTimes+"/"+m.default.getConfig("winDoubleVideoTimes")},e.prototype.beforeShow=function(t){return s(this,void 0,void 0,function(){return p(this,function(){return this.rewardList=t,this.rewardScroll.createItemsByLength(this.rewardList.length),this.animationRest(),this.setVideoLabel(),this.btnDouble.node.active=t.length>0,this.btnDouble.interactable=!0,_.default.save(),[2,!0]})})},e.prototype.onShow=function(){return s(this,void 0,void 0,function(){return p(this,function(){return this.animationShow(),[2]})})},e.prototype.onHide=function(){return s(this,void 0,void 0,function(){return p(this,function(){return t.prototype.onHide.call(this),[2]})})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.rewardScroll.onItemCreate(this.onCreateRewrd.bind(this))},e.frameInfo={name:"WinFrame",type:d.FrameType.ModelScale,bundleName:"Root",prefabName:"Prefab/Frame/WinFrame",zIndex:10},u([D({type:f.default,displayName:"\u5956\u52b1\u5217\u8868"})],e.prototype,"rewardScroll",void 0),u([D({type:cc.Label,displayName:"\u89c6\u9891\u5269\u4f59\u6b21\u6570"})],e.prototype,"videoLabel",void 0),u([D({type:cc.Node,displayName:"\u5956\u52b1title"})],e.prototype,"rewardTitle",void 0),u([D({type:cc.Node,displayName:"\u6309\u94ae\u8282\u70b9"})],e.prototype,"btnsNode",void 0),u([D({type:cc.ParticleSystem,displayName:"\u7c92\u5b50"})],e.prototype,"ribbon",void 0),u([D({type:cc.Button,displayName:"\u53cc\u500d\u6309\u94ae"})],e.prototype,"btnDouble",void 0),u([F,T("\u754c\u9762/WinFrame \u80dc\u5229\u754c\u9762")],e)}(d.FrameBase);a.default=k,cc._RF.pop(),cc._RF.pop()},{}],WinRewardItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"a37e6cKvOVEmazS1klYHBms","WinRewardItem");var r=t,i=e,a=o;cc._RF.push(i,"a37e6cKvOVEmazS1klYHBms","WinRewardItem");var c,l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(a,"__esModule",{value:!0});var s=r("ImageLoader"),p=r("sdbItem"),f=r("AssetBundleHelper"),d=r("StaticDBHelper"),y=cc._decorator,h=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgImage=null,e.icon=null,e.numLabel=null,e}return l(e,t),e.prototype.setItem=function(t){var e=this,o=d.default.getData(p.default,t.id);this.bgImage.select(o.quality),f.default.setSpriteFrame(this.icon,o.icon).then(function(){e.icon.node.scale=Math.min(88/e.icon.node.width,88/e.icon.node.height)}),this.numLabel.string=t.count.toString(),this.node.opacity=0,this.node.scale=0},e.prototype.animationShow=function(){cc.tween(this.node).to(.15,{scale:1.2,opacity:255}).to(.05,{scale:1}).start()},u([m({type:s.default,displayName:"\u80cc\u666f\u56fe"})],e.prototype,"bgImage",void 0),u([m({type:cc.Sprite,displayName:"icon"})],e.prototype,"icon",void 0),u([m({type:cc.Label,displayName:"\u6570\u91cf"})],e.prototype,"numLabel",void 0),u([h],e)}(cc.Component);a.default=b,cc._RF.pop(),cc._RF.pop()},{}],YWCloundHelper:[function(t,e,o){"use strict";cc._RF.push(e,"d1bbf8YbUJC2aJqhgJCi3ex","YWCloundHelper");var n=t,r=e,i=o;cc._RF.push(r,"d1bbf8YbUJC2aJqhgJCi3ex","YWCloundHelper");var a=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function c(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}l((n=n.apply(t,e||[])).next())})},c=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return l([t,e])}}function l(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=n("NetHelper"),u=n("RunDataHelper"),s=function(){function t(){this._isInit=!1,this.scheduleTime=0,this.url="https://game.zuiqiangyingyu.net/common/game-data/",this.app_name="",this.uuid="",cc.director.getScheduler().enableForTarget(this),cc.director.getScheduler().scheduleUpdate(this,0,!1)}return t.init=function(e){return a(this,void 0,void 0,function(){var o;return c(this,function(n){switch(n.label){case 0:return this.instance||(this.instance=new t),this.instance.app_name=cc.sys.platform==cc.sys.WECHAT_GAME?"xbmgcwx":cc.sys.platform==cc.sys.BYTEDANCE_GAME?"xbmgctt":"",this.instance.uuid=e,""==this.instance.app_name||""==this.instance.uuid?[2]:[4,this.instance.getData()];case 1:return(o=n.sent())&&o.AllData?u.DataHelper.initByJSON(o.AllData):this.instance.scheduleTime=290,this.instance._isInit=!0,[2]}})})},t.save=function(){var t;null===(t=this.instance)||void 0===t||t.save()},t.prototype.save=function(){return a(this,void 0,void 0,function(){var t,e,o;return c(this,function(n){switch(n.label){case 0:return t=u.DataHelper.toJSON(),e={app_name:this.app_name,uuid:this.uuid,d_key:"AllData",d_data:t},[4,l.default.post(this.url+"save",e)];case 1:return o=n.sent(),console.log("\u4e91\u6570\u636e\u4e0a\u4f20\u6210\u529f"),0!=o.code&&console.log("save error"),[2]}})})},t.prototype.getData=function(){return a(this,void 0,void 0,function(){var t,e;return c(this,function(o){switch(o.label){case 0:return t={app_name:this.app_name,uuid:this.uuid,d_key:"AllData"},[4,l.default.post(this.url+"get",t)];case 1:return e=o.sent(),console.log("\u4e91\u6570\u636e\u4e0b\u8f7d\u6210\u529f"),[2,e.data]}})})},t.prototype.update=function(t){this._isInit&&(this.scheduleTime+=t,this.scheduleTime>=300&&(this.scheduleTime=0,this.save()))},t}();i.default=s,cc._RF.pop(),cc._RF.pop()},{}],classCallCheck:[function(t,e){"use strict";cc._RF.push(e,"9d22bwkb5FF6JjxyvLp2t37","classCallCheck"),e.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},cc._RF.pop()},{}],config:[function(t,e,o){"use strict";cc._RF.push(e,"c6cc45b/19ANJOEvNjgGrvV","config");var n=e,r=o;cc._RF.push(n,"117d4/ynR5AhppW4NL/d+9b","config"),Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_LOG_LEVEL=r.LIMIT_REPORT_INTERVAL=r.LIMIT_REPORT_COUNT=r.ONLINE_DEFAULT_INTERVAL=r.DOMAIN=r.API_SECRET=void 0,r.API_SECRET="A8VlJnyjXXdK3Csw6ZAN4KM9jFGHFk1G",r.DOMAIN="https://game.zuiqiangyingyu.net",r.ONLINE_DEFAULT_INTERVAL=1e4,r.LIMIT_REPORT_COUNT=10,r.LIMIT_REPORT_INTERVAL=10,r.DEFAULT_LOG_LEVEL="none",cc._RF.pop(),cc._RF.pop()},{}],createClass:[function(t,e){"use strict";cc._RF.push(e,"336e8lzBKFDjZvLfhpLMC77","createClass");var o=t("./toPropertyKey");function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}e.exports=function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t},cc._RF.pop()},{"./toPropertyKey":"toPropertyKey"}],function:[function(t,e,o){"use strict";cc._RF.push(e,"79b9cqxipVNv4m6sjEmwC36","function");var n=t,r=e,i=o;cc._RF.push(r,"a5578WqeqBMwYjcihGza0e+","function"),Object.defineProperty(i,"__esModule",{value:!0}),i.getServerTime=i.getClientTime=i.getNonce=i.arrSort=i.getSign=i.response=i.formatDate=i.versionFormat=void 0;var a=n("Api"),c=n("md5"),l=n("config");function u(t){var e={};return Object.keys(t).sort().forEach(function(o){e[o]=t[o]}),e}function s(){return c.md5((p()+1e3*Math.random()).toString())}function p(){return Math.round(Date.now()/1e3)}i.versionFormat=function(t){return parseInt(t.replace(".",""))},i.formatDate=function(t,e){var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12==0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"\u661f\u671f":"\u5468":"")+"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".charAt(t.getDay()))),o)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return e},i.response=function(t,e,o){return void 0===t&&(t=0),void 0===e&&(e=""),void 0===o&&(o={}),{code:t,msg:e,data:o}},i.getSign=function(t){t.timestamp=p(),t.nonce=s(),t=u(t);var e=[];for(var o in t)e.push(o+"="+t[o]);var n=e.join("&")+l.API_SECRET;return t.sign=c.md5(n),t},i.arrSort=u,i.getNonce=s,i.getClientTime=p,i.getServerTime=function(t){a.serverTime(t)},cc._RF.pop(),cc._RF.pop()},{}],md5Util:[function(t,e,o){"use strict";cc._RF.push(e,"d263cGPUmFDJronpOTj0Yo9","md5Util");var n=e,r=o;cc._RF.push(n,"d263cGPUmFDJronpOTj0Yo9","md5Util"),Object.defineProperty(r,"__esModule",{value:!0}),r.md5=void 0,r.md5=function(t){var e=function(t,e){return t<<e|t>>>32-e},o=function(t,e){var o,n,r,i,a;return r=2147483648&t,i=2147483648&e,a=(1073741823&t)+(1073741823&e),(o=1073741824&t)&(n=1073741824&e)?2147483648^a^r^i:o|n?1073741824&a?3221225472^a^r^i:1073741824^a^r^i:a^r^i},n=function(t,e,o){return t&e|~t&o},r=function(t,e,o){return t&o|e&~o},i=function(t,e,o){return t^e^o},a=function(t,e,o){return e^(t|~o)},c=function(t,r,i,a,c,l,u){return t=o(t,o(o(n(r,i,a),c),u)),o(e(t,l),r)},l=function(t,n,i,a,c,l,u){return t=o(t,o(o(r(n,i,a),c),u)),o(e(t,l),n)},u=function(t,n,r,a,c,l,u){return t=o(t,o(o(i(n,r,a),c),u)),o(e(t,l),n)},s=function(t,n,r,i,c,l,u){return t=o(t,o(o(a(n,r,i),c),u)),o(e(t,l),n)},p=function(t){for(var e,o=t.length,n=o+8,r=16*((n-n%64)/64+1),i=Array(r-1),a=0,c=0;c<o;)a=c%4*8,i[e=(c-c%4)/4]=i[e]|t.charCodeAt(c)<<a,c++;return a=c%4*8,i[e=(c-c%4)/4]=i[e]|128<<a,i[r-2]=o<<3,i[r-1]=o>>>29,i},f=function(t){var e,o="",n="";for(e=0;e<=3;e++)o+=(n="0"+(t>>>8*e&255).toString(16)).substr(n.length-2,2);return o},d=function(t){t=t.toString().replace(/\x0d\x0a/g,"\n");for(var e="",o=0;o<t.length;o++){var n=t.charCodeAt(o);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e};return function(t){var e,n,r,i,a,y,h,m,b,v=Array();for(t=d(t),v=p(t),y=1732584193,h=4023233417,m=2562383102,b=271733878,e=0;e<v.length;e+=16)n=y,r=h,i=m,a=b,y=c(y,h,m,b,v[e+0],7,3614090360),b=c(b,y,h,m,v[e+1],12,3905402710),m=c(m,b,y,h,v[e+2],17,606105819),h=c(h,m,b,y,v[e+3],22,3250441966),y=c(y,h,m,b,v[e+4],7,4118548399),b=c(b,y,h,m,v[e+5],12,1200080426),m=c(m,b,y,h,v[e+6],17,2821735955),h=c(h,m,b,y,v[e+7],22,4249261313),y=c(y,h,m,b,v[e+8],7,1770035416),b=c(b,y,h,m,v[e+9],12,2336552879),m=c(m,b,y,h,v[e+10],17,4294925233),h=c(h,m,b,y,v[e+11],22,2304563134),y=c(y,h,m,b,v[e+12],7,1804603682),b=c(b,y,h,m,v[e+13],12,4254626195),m=c(m,b,y,h,v[e+14],17,2792965006),h=c(h,m,b,y,v[e+15],22,1236535329),y=l(y,h,m,b,v[e+1],5,4129170786),b=l(b,y,h,m,v[e+6],9,3225465664),m=l(m,b,y,h,v[e+11],14,643717713),h=l(h,m,b,y,v[e+0],20,3921069994),y=l(y,h,m,b,v[e+5],5,3593408605),b=l(b,y,h,m,v[e+10],9,38016083),m=l(m,b,y,h,v[e+15],14,3634488961),h=l(h,m,b,y,v[e+4],20,3889429448),y=l(y,h,m,b,v[e+9],5,568446438),b=l(b,y,h,m,v[e+14],9,3275163606),m=l(m,b,y,h,v[e+3],14,4107603335),h=l(h,m,b,y,v[e+8],20,1163531501),y=l(y,h,m,b,v[e+13],5,2850285829),b=l(b,y,h,m,v[e+2],9,4243563512),m=l(m,b,y,h,v[e+7],14,1735328473),h=l(h,m,b,y,v[e+12],20,2368359562),y=u(y,h,m,b,v[e+5],4,4294588738),b=u(b,y,h,m,v[e+8],11,2272392833),m=u(m,b,y,h,v[e+11],16,1839030562),h=u(h,m,b,y,v[e+14],23,4259657740),y=u(y,h,m,b,v[e+1],4,2763975236),b=u(b,y,h,m,v[e+4],11,1272893353),m=u(m,b,y,h,v[e+7],16,4139469664),h=u(h,m,b,y,v[e+10],23,3200236656),y=u(y,h,m,b,v[e+13],4,681279174),b=u(b,y,h,m,v[e+0],11,3936430074),m=u(m,b,y,h,v[e+3],16,3572445317),h=u(h,m,b,y,v[e+6],23,76029189),y=u(y,h,m,b,v[e+9],4,3654602809),b=u(b,y,h,m,v[e+12],11,3873151461),m=u(m,b,y,h,v[e+15],16,530742520),h=u(h,m,b,y,v[e+2],23,3299628645),y=s(y,h,m,b,v[e+0],6,4096336452),b=s(b,y,h,m,v[e+7],10,1126891415),m=s(m,b,y,h,v[e+14],15,2878612391),h=s(h,m,b,y,v[e+5],21,4237533241),y=s(y,h,m,b,v[e+12],6,1700485571),b=s(b,y,h,m,v[e+3],10,2399980690),m=s(m,b,y,h,v[e+10],15,4293915773),h=s(h,m,b,y,v[e+1],21,2240044497),y=s(y,h,m,b,v[e+8],6,1873313359),b=s(b,y,h,m,v[e+15],10,4264355552),m=s(m,b,y,h,v[e+6],15,2734768916),h=s(h,m,b,y,v[e+13],21,1309151649),y=s(y,h,m,b,v[e+4],6,4149444226),b=s(b,y,h,m,v[e+11],10,3174756917),m=s(m,b,y,h,v[e+2],15,718787259),h=s(h,m,b,y,v[e+9],21,3951481745),y=o(y,n),h=o(h,r),m=o(m,i),b=o(b,a);return(f(y)+f(h)+f(m)+f(b)).toLowerCase()}(t)},cc._RF.pop(),cc._RF.pop()},{}],md5:[function(t,e,o){"use strict";cc._RF.push(e,"22fe6rreZJK8YBPIggZi0UF","md5");var n=e,r=o;cc._RF.push(n,"4945310xEVAjIMmN5eaULZC","md5"),Object.defineProperty(r,"__esModule",{value:!0}),r.md5=void 0,r.md5=function(t){function e(t,e){return t<<e|t>>>32-e}function o(t,e){var o,n,r,i,a;return r=2147483648&t,i=2147483648&e,a=(1073741823&t)+(1073741823&e),(o=1073741824&t)&(n=1073741824&e)?2147483648^a^r^i:o|n?1073741824&a?3221225472^a^r^i:1073741824^a^r^i:a^r^i}function n(t,e,o){return t&e|~t&o}function r(t,e,o){return t&o|e&~o}function i(t,e,o){return t^e^o}function a(t,e,o){return e^(t|~o)}function c(t,r,i,a,c,l,u){return t=o(t,o(o(n(r,i,a),c),u)),o(e(t,l),r)}function l(t,n,i,a,c,l,u){return t=o(t,o(o(r(n,i,a),c),u)),o(e(t,l),n)}function u(t,n,r,a,c,l,u){return t=o(t,o(o(i(n,r,a),c),u)),o(e(t,l),n)}function s(t,n,r,i,c,l,u){return t=o(t,o(o(a(n,r,i),c),u)),o(e(t,l),n)}function p(t){var e,o="",n="";for(e=0;3>=e;e++)o+=(n="0"+(t>>>8*e&255).toString(16)).substr(n.length-2,2);return o}var f,d,y,h,m,b,v,g,_,w;for(w=function(t){for(var e,o=t.length,n=o+8,r=16*((n-n%64)/64+1),i=new Array(r-1),a=0,c=0;o>c;)a=c%4*8,i[e=(c-c%4)/4]=i[e]|t.charCodeAt(c)<<a,c++;return a=c%4*8,i[e=(c-c%4)/4]=i[e]|128<<a,i[r-2]=o<<3,i[r-1]=o>>>29,i}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",o=0;o<t.length;o++){var n=t.charCodeAt(o);128>n?e+=String.fromCharCode(n):n>127&&2048>n?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t)),b=1732584193,v=4023233417,g=2562383102,_=271733878,f=0;f<w.length;f+=16)d=b,y=v,h=g,m=_,b=c(b,v,g,_,w[f+0],7,3614090360),_=c(_,b,v,g,w[f+1],12,3905402710),g=c(g,_,b,v,w[f+2],17,606105819),v=c(v,g,_,b,w[f+3],22,3250441966),b=c(b,v,g,_,w[f+4],7,4118548399),_=c(_,b,v,g,w[f+5],12,1200080426),g=c(g,_,b,v,w[f+6],17,2821735955),v=c(v,g,_,b,w[f+7],22,4249261313),b=c(b,v,g,_,w[f+8],7,1770035416),_=c(_,b,v,g,w[f+9],12,2336552879),g=c(g,_,b,v,w[f+10],17,4294925233),v=c(v,g,_,b,w[f+11],22,2304563134),b=c(b,v,g,_,w[f+12],7,1804603682),_=c(_,b,v,g,w[f+13],12,4254626195),g=c(g,_,b,v,w[f+14],17,2792965006),b=l(b,v=c(v,g,_,b,w[f+15],22,1236535329),g,_,w[f+1],5,4129170786),_=l(_,b,v,g,w[f+6],9,3225465664),g=l(g,_,b,v,w[f+11],14,643717713),v=l(v,g,_,b,w[f+0],20,3921069994),b=l(b,v,g,_,w[f+5],5,3593408605),_=l(_,b,v,g,w[f+10],9,38016083),g=l(g,_,b,v,w[f+15],14,3634488961),v=l(v,g,_,b,w[f+4],20,3889429448),b=l(b,v,g,_,w[f+9],5,568446438),_=l(_,b,v,g,w[f+14],9,3275163606),g=l(g,_,b,v,w[f+3],14,4107603335),v=l(v,g,_,b,w[f+8],20,1163531501),b=l(b,v,g,_,w[f+13],5,2850285829),_=l(_,b,v,g,w[f+2],9,4243563512),g=l(g,_,b,v,w[f+7],14,1735328473),b=u(b,v=l(v,g,_,b,w[f+12],20,2368359562),g,_,w[f+5],4,4294588738),_=u(_,b,v,g,w[f+8],11,2272392833),g=u(g,_,b,v,w[f+11],16,1839030562),v=u(v,g,_,b,w[f+14],23,4259657740),b=u(b,v,g,_,w[f+1],4,2763975236),_=u(_,b,v,g,w[f+4],11,1272893353),g=u(g,_,b,v,w[f+7],16,4139469664),v=u(v,g,_,b,w[f+10],23,3200236656),b=u(b,v,g,_,w[f+13],4,681279174),_=u(_,b,v,g,w[f+0],11,3936430074),g=u(g,_,b,v,w[f+3],16,3572445317),v=u(v,g,_,b,w[f+6],23,76029189),b=u(b,v,g,_,w[f+9],4,3654602809),_=u(_,b,v,g,w[f+12],11,3873151461),g=u(g,_,b,v,w[f+15],16,530742520),b=s(b,v=u(v,g,_,b,w[f+2],23,3299628645),g,_,w[f+0],6,4096336452),_=s(_,b,v,g,w[f+7],10,1126891415),g=s(g,_,b,v,w[f+14],15,2878612391),v=s(v,g,_,b,w[f+5],21,4237533241),b=s(b,v,g,_,w[f+12],6,1700485571),_=s(_,b,v,g,w[f+3],10,2399980690),g=s(g,_,b,v,w[f+10],15,4293915773),v=s(v,g,_,b,w[f+1],21,2240044497),b=s(b,v,g,_,w[f+8],6,1873313359),_=s(_,b,v,g,w[f+15],10,4264355552),g=s(g,_,b,v,w[f+6],15,2734768916),v=s(v,g,_,b,w[f+13],21,1309151649),b=s(b,v,g,_,w[f+4],6,4149444226),_=s(_,b,v,g,w[f+11],10,3174756917),g=s(g,_,b,v,w[f+2],15,718787259),v=s(v,g,_,b,w[f+9],21,3951481745),b=o(b,d),v=o(v,y),g=o(g,h),_=o(_,m);return(p(b)+p(v)+p(g)+p(_)).toLowerCase()},cc._RF.pop(),cc._RF.pop()},{}],sdbBattleLevel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"43f7an5vdxMtqMgIc0GZuOF","sdbBattleLevel");var r=t,i=e,a=o;cc._RF.push(i,"43f7an5vdxMtqMgIc0GZuOF","sdbBattleLevel");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("BattleLevel")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbBehaviours:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2048c17Y/5EhoTN2Ez2zyAd","sdbBehaviours");var r=t,i=e,a=o;cc._RF.push(i,"2048c17Y/5EhoTN2Ez2zyAd","sdbBehaviours");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Behaviours")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbBoxLv:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"1327dJzO2NBoaporgTDz8WC","sdbBoxLv");var r=t,i=e,a=o;cc._RF.push(i,"1327dJzO2NBoaporgTDz8WC","sdbBoxLv");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("BoxLv")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbCard:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"429faW/JxtAVp9QOsb/ftpr","sdbCard");var r=t,i=e,a=o;cc._RF.push(i,"429faW/JxtAVp9QOsb/ftpr","sdbCard");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Card")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbConfig:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f8da8XoQxRK+IfOq4AKWWGe","sdbConfig");var r=t,i=e,a=o;cc._RF.push(i,"f8da8XoQxRK+IfOq4AKWWGe","sdbConfig");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Config")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbDayTask:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e7650nHwwFM0bZeV2WOO5bd","sdbDayTask");var r=t,i=e,a=o;cc._RF.push(i,"e7650nHwwFM0bZeV2WOO5bd","sdbDayTask");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("DayTask")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbHeroSkin:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"00e33qn4lBJb5mhSc+aznDC","sdbHeroSkin");var r=t,i=e,a=o;cc._RF.push(i,"00e33qn4lBJb5mhSc+aznDC","sdbHeroSkin");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("HeroSkin")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbHeroStory:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"7315dxyjuNNBa3nPgqQ6LEX","sdbHeroStory");var r=t,i=e,a=o;cc._RF.push(i,"7315dxyjuNNBa3nPgqQ6LEX","sdbHeroStory");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("HeroStory")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbHero:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"efc87Evv5tKWprjwHL+Mvv3","sdbHero");var r=t,i=e,a=o;cc._RF.push(i,"efc87Evv5tKWprjwHL+Mvv3","sdbHero");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Hero")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"73209rG16NCRqoNFhtdmVOO","sdbItem");var r=t,i=e,a=o;cc._RF.push(i,"73209rG16NCRqoNFhtdmVOO","sdbItem");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Item")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbMonsterSkill:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"8f6549M0gJMpZpN1mGT4RQB","sdbMonsterSkill");var r=t,i=e,a=o;cc._RF.push(i,"8f6549M0gJMpZpN1mGT4RQB","sdbMonsterSkill");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("MonsterSkill")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbMonster:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e3043WnlERGaL2Vw43tk5of","sdbMonster");var r=t,i=e,a=o;cc._RF.push(i,"e3043WnlERGaL2Vw43tk5of","sdbMonster");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Monster")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbProb:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"59a9fK3cvhOS664huqOfNdF","sdbProb");var r=t,i=e,a=o;cc._RF.push(i,"59a9fK3cvhOS664huqOfNdF","sdbProb");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Prob")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbRoleAtt:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"b6e18iERqZKgriPcw2wBY7Z","sdbRoleAtt");var r=t,i=e,a=o;cc._RF.push(i,"b6e18iERqZKgriPcw2wBY7Z","sdbRoleAtt");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("RoleAtt")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbRoleRanked:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"10c45wi6VpKhpjpZH0CJUR5","sdbRoleRanked");var r=t,i=e,a=o;cc._RF.push(i,"10c45wi6VpKhpjpZH0CJUR5","sdbRoleRanked");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("RoleRanked")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbRoleUpReward:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ddc2eje+61Oc7VadZKvOPtM","sdbRoleUpReward");var r=t,i=e,a=o;cc._RF.push(i,"ddc2eje+61Oc7VadZKvOPtM","sdbRoleUpReward");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("RoleUpReward")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbRoleUp:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"2cc05Qc9H5DAbHsP11ZMxVe","sdbRoleUp");var r=t,i=e,a=o;cc._RF.push(i,"2cc05Qc9H5DAbHsP11ZMxVe","sdbRoleUp");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("RoleUp")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbRound:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"ab7acsu9k9KuoFR4yoIeF2t","sdbRound");var r=t,i=e,a=o;cc._RF.push(i,"ab7acsu9k9KuoFR4yoIeF2t","sdbRound");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Round")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbShop:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"02b85iklPBITbgaH1IfFodM","sdbShop");var r=t,i=e,a=o;cc._RF.push(i,"02b85iklPBITbgaH1IfFodM","sdbShop");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Shop")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbSign:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"22637oAbYVH47XI6tOjeBeV","sdbSign");var r=t,i=e,a=o;cc._RF.push(i,"22637oAbYVH47XI6tOjeBeV","sdbSign");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Sign")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbSound:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"d5998It0KtAQJ2FZl94JJRg","sdbSound");var r=t,i=e,a=o;cc._RF.push(i,"d5998It0KtAQJ2FZl94JJRg","sdbSound");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Sound")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbStage:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"57e07dQiQJPCbz9NkL6IB7Z","sdbStage");var r=t,i=e,a=o;cc._RF.push(i,"57e07dQiQJPCbz9NkL6IB7Z","sdbStage");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Stage")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbStoryItem:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"599dbdtA7hJDqTLECbYjhcb","sdbStoryItem");var r=t,i=e,a=o;cc._RF.push(i,"599dbdtA7hJDqTLECbYjhcb","sdbStoryItem");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("StoryItem")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbStory:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"e9261efy31BvKy7Kn6grdxw","sdbStory");var r=t,i=e,a=o;cc._RF.push(i,"e9261efy31BvKy7Kn6grdxw","sdbStory");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Story")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbTowerBattle:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"14081ZQfL9LDoUrlaJMlcHC","sdbTowerBattle");var r=t,i=e,a=o;cc._RF.push(i,"14081ZQfL9LDoUrlaJMlcHC","sdbTowerBattle");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("TowerBattle")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbTowerLevel:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"5e542XgzN9HM73rd9S1ftZt","sdbTowerLevel");var r=t,i=e,a=o;cc._RF.push(i,"5e542XgzN9HM73rd9S1ftZt","sdbTowerLevel");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("TowerLevel")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],sdbTower:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"859efuTIpVEOJYQnuk7jbd8","sdbTower");var r=t,i=e,a=o;cc._RF.push(i,"859efuTIpVEOJYQnuk7jbd8","sdbTower");Object.defineProperty(a,"__esModule",{value:!0});var c=function(t,e,o,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(a<3?i(c):a>3?i(e,o,c):i(e,o))||c);return a>3&&c&&Object.defineProperty(e,o,c),c}([r("StaticDBHelper").sdbClass("Tower")],function(){});a.default=c,cc._RF.pop(),cc._RF.pop()},{}],toPrimitive:[function(t,e){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return"function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?e.exports=n=function(t){return o(t)}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":o(t)},n(t)}cc._RF.push(e,"9671cq2j3FN3K/FHhnIn7x6","toPrimitive"),e.exports=function(t,e){if("object"!==n(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,e||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},cc._RF.pop()},{}],toPropertyKey:[function(t,e){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return"function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?e.exports=n=function(t){return o(t)}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":o(t)},n(t)}cc._RF.push(e,"69fcf+L4xpFhrLskdqvvBGp","toPropertyKey");var r=t("./toPrimitive");e.exports=function(t){var e=r(t,"string");return"symbol"===n(e)?e:String(e)},cc._RF.pop()},{"./toPrimitive":"toPrimitive"}],ttPostbackCtl:[function(t,e,o){"use strict";cc._RF.push(e,"a17111dVjBOrrl55ywqE4bn","ttPostbackCtl");var n=t,r=e,i=o;cc._RF.push(r,"bcab1QBhmdH64rUO09y7/ap","ttPostbackCtl"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("ywkjTT"),c=n("Report"),l=function(){function t(){this._sdk=a.default}return t.GetInstance=function(){return t.instance||(t.instance=new t),this.instance},t.prototype.init=function(){if(window.tt){var t=tt.getLaunchOptionsSync().query.mpVersion;this._sdk.initParams({app_name:"xbmgctt",channel:"tt_minigame",version:t,log_level:"info"})}},t.prototype.adRequest=function(t){c.default.adRequest(t)},t.prototype.adClick=function(t){c.default.adClick(t)},t.prototype.adImpression=function(t){c.default.adImpression(t)},t.prototype.adFill=function(t){c.default.adFill(t)},t.prototype.adImpressionDone=function(t){c.default.adImpressionDone(t)},t.instance=null,t}();i.default=l,cc._RF.pop(),cc._RF.pop()},{}],utilTools:[function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"629195+c6FLnJE5lmXai3Vb","utilTools");var r=e,i=o;cc._RF.push(r,"629195+c6FLnJE5lmXai3Vb","utilTools"),Object.defineProperty(i,"__esModule",{value:!0}),i.utilTools=void 0,i.utilTools={getRandomSign:function(){return Math.random()>.5?1:-1},radianToAngle:function(t){return t/Math.PI*180},angleToRadian:function(t){return t/180*Math.PI},forArr:function(t,e){var o=t.length;if(!(o<=0))for(var n=0;n<o;n++){var r=t[n];if(null!=r&&e(r,n))break}},waterfall:function(t,e){if(e||(e=function(){}),!Array.isArray(t)||t.length<=0)e("taskArr is null");else{var o=0,n={};(function r(){var i=t[o];i?i(n,function(t){t?e(t,null):(o++,r())}):e(null,n)})()}},valToPercent:function(t,e){return t=Math.floor(1e4*t),null==e&&(e=2),(100*(t/=1e4)).toFixed(e)+"%"},getTimeStr:function(t,e){var o="";t<0&&(t=0),t/=1e3;var n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),i=Math.floor(t-3600*n-60*r);return e?r+=60*n:o=n>=10?o+n+":":o+"0"+n+":",o=r>=10?o+r+":":o+"0"+r+":",i>=10?o+=i:o=o+"0"+i,o},getTimeStrChinese:function(t,e,o,n){void 0===e&&(e=!0),void 0===o&&(o=!0),void 0===n&&(n=!0);var r="";t<0&&(t=0),t/=1e3;var i=Math.floor(t/3600),a=Math.floor((t-3600*i)/60),c=Math.floor(t-3600*i-60*a);return i>0&&(r=r+i+"\u65f6"),r=a>=10?r+a+"\u5206":r+"0"+a+"\u5206",e&&(r=c>=10?r+c+"\u79d2":r+"0"+c+"\u79d2"),r},timeStrToDate:function(t){if("object"!=n(t)||null==t)return t;if(Array.isArray(t))for(var e in t){var o=t[e];o&&"object"==n(o)&&i.utilTools.timeStrToDate(o)}else{var r=Object.keys(t);for(var e in r){var a=r[e]+"",c=t[a];if(c&&"object"==n(c))i.utilTools.timeStrToDate(c);else try{a.length>=4&&"time"==a.substring(a.length-4,a.length).toLocaleLowerCase()&&c&&"string"==typeof c&&(t[a]=new Date(c))}catch(l){console.log("utilTools.timeStrToDate error:"+l.message,l,t)}}}return t},sortArr:function(t,e){if(!t||t.length<=1)return t;for(var o=0;o<t.length-1;o++)for(var n=o+1;n<t.length;n++){var r=t[o],i=t[n];e(r,i)&&(t[o]=i,t[n]=r)}},isProb:function(t){return t||(t=0),Math.random()<t},randomArr:function(t,e){void 0===e&&(e=!1),e||(t=JSON.parse(JSON.stringify(t)));for(var o=[];t.length>0;){var n=Math.floor(Math.random()*t.length);o.push(t[n]),t.splice(n,1)}return o},getFloatValue:function(t,e,o){var n=e-t;return 0==n?t:n<0?0:o?t+Math.floor(Math.random()*(n+1)):t+Math.random()*n},overDay:function(t,e){if(!t)return!0;e||(e=new Date);var o=!1;return t.getDate()==e.getDate()?e.getTime()-t.getTime()>=864e5&&(o=!0):o=!0,o},getRowsByWeightAndNum:function(t,e,o){e||(e=1);var n=[];t=i.utilTools.copyObj(t);for(var r=0;r<e&&!(t.length<=0);r++){var a=this.getRowByWeight(t);if(n.push(a),!o){var c=t.indexOf(a);t.splice(c,1)}}return n},getRowByWeight:function(t,e){if(!e)for(var o in e=0,t)(a=t[o].weight)||(a=0),e+=a;var n=Math.random()*e,r=0,i=null;for(var o in t){var a,c=t[o];if((a=c.weight)||(a=0),n>=r&&n<r+a){i=c;break}r+=a}return i},getRandomItemByArr:function(t,e){if(void 0===e&&(e=!1),!t||t.length<=0)return null;var o=Math.floor(Math.random()*t.length),n=t[o];return e&&t.splice(o,1),n},copyObj:function(t){return JSON.parse(JSON.stringify(t))},getUrlHref:function(t){var e=window.location.href;if(!e)return null;var o=e.substring(e.lastIndexOf("/")+1,e.length);if(o.indexOf("?")>-1)for(var n=o.substring(o.indexOf("?")+1,o.length).split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==t)return i[1]}return null}},cc._RF.pop(),cc._RF.pop()},{}],ywkjTT:[function(t,e,o){"use strict";cc._RF.push(e,"d92ad9HrhJOgYJuC2feQgCm","ywkjTT");var n=t,r=e,i=o;cc._RF.push(r,"28240w0jcVIa79DVWom88fs","ywkjTT"),Object.defineProperty(i,"__esModule",{value:!0});var a=n("Report"),c=n("Show"),l=n("Hide"),u=n("Login"),s=n("Api"),p=n("TimeManage"),f=n("config");window.wxapi=Object.assign({},window.tt);var d=n("ReportQueue");window.reportQueue=d.default;var y=n("Params");window.params=y.default;var h=n("LocalStorage"),m=n("Logger"),b=new(function(){function t(){this._initFlag=!1,this._showFlag=!1,h.default.removeItem(p.default.lockGetFirstServerTime),l.default.hide(function(){window.reportQueue.len()>0&&(window.Logger.info("## \u5904\u7406\u9000\u51fa\u672a\u4e0a\u62a5\u4e8b\u4ef6(\u5171\u8ba1"+window.reportQueue.len()+"\u6761)"),a.default.reportQueue()),window.Logger.info("## \u9000\u51fa\u4e0a\u62a5\u5728\u7ebf\u65f6\u957f\uff0c\u5f53\u524d\u5728\u7ebf\u65f6\u957f\u4e3a\uff1a",p.default.getOnlineTime()),a.default.online(),clearInterval(window.wonder_online),window.wonder_online=null})}return t.prototype.initParams=function(t){var e=this;if(window.Logger=new m.default(f.DEFAULT_LOG_LEVEL),window.Logger.setLogLevel(t.log_level),window.Logger.info("## \u521d\u59cb\u5316\u6e20\u9053\u53c2\u6570\uff1a",t,window.params),window.params.setGameParams(t),window.tt){var o=window.tt.getLaunchOptionsSync();window.Logger.info("## \u542f\u52a8\u53c2\u6570\uff1a",o.query),window.params.setShowParams(o.query),o.query&&(o.query.promotionid||o.query.adid||o.query.aid)}this.initReport(),this.setInterval(),c.default.show(function(){e.setInterval()})},t.prototype.setInterval=function(){window.wonder_online||(p.default.setStartClientTime(),window.wonder_online=setInterval(function(){p.default.setEndClientTime(),window.Logger.info("## \u5728\u7ebf\u65f6\u957f\u5fc3\u8df3:",p.default.getOnlineTime()),a.default.checkReportQueue(!1)},f.ONLINE_DEFAULT_INTERVAL))},t.prototype.report=function(t,e){window.tt&&a.default.other(t,e)},t.prototype.initReport=function(){window.tt&&(window.params.getUserParams("openid")?(window.Logger.info("## \u68c0\u67e5\u4e0a\u6b21\u662f\u5426\u6709\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u5728\u7ebf\u65f6\u957f\u672a\u4e0a\u62a5",p.default.getOnlineTime()),p.default.getOnlineTime()>0&&a.default.online(),window.Logger.info("## \u68c0\u67e5\u4e0a\u6b21\u662f\u5426\u6709\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u4e8b\u4ef6\u961f\u5217\u672a\u4e0a\u62a5",window.reportQueue.len()),window.reportQueue.len()>0&&a.default.reportQueue(),a.default.click(),a.default.active(),a.default.userInfo()):(window.Logger.info("## \u91cd\u65b0\u8c03\u7528\u767b\u5f55\u83b7\u53d6openid"),u.default.login({success:function(t){window.Logger.info("## login: ",t),window.Logger.info("## app_name: "+window.params.getGameParams("app_name")),s.getOpenid({code:t.code,app_name:window.params.getGameParams("app_name")},function(t){0==t.data.code?(window.Logger.info("## \u83b7\u53d6openid\u6210\u529f \uff1a",t.data.data.openid),window.params.setUserParams({openid:t.data.data.openid}),p.default.getOnlineTime()>0&&(window.Logger.info("## \u5904\u7406\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u672a\u4e0a\u62a5\u7684\u5728\u7ebf\u65f6\u957f"),a.default.online()),window.reportQueue.len()>0&&(window.Logger.info("## \u5904\u7406\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u672a\u4e0a\u62a5\u7684\u4e8b\u4ef6\u961f\u5217"),a.default.reportQueue()),a.default.click(),a.default.active(),a.default.userInfo()):window.Logger.warn("## \u83b7\u53d6openid\u5931\u8d25\uff0c\u8fd4\u56de\u53c2\u6570\u4e3a\uff1a",t.data)},function(t){window.Logger.warn("## \u8c03\u7528\u83b7\u53d6openid\u63a5\u53e3\u5931\u8d25\uff1a",t)})},fail:function(t){window.Logger.warn("\u8c03\u7528wx.login\u5931\u8d25\uff1a",t)}})))},t.prototype.getReportList=function(){return window.reportQueue.getList()},t.prototype.getFirstReportServerTime=function(){return p.default.getFirstReportServerTime()},t.prototype.getFirstReportClientTime=function(){return p.default.getFirstReportClientTime()},t.prototype.getOnlineTime=function(){return p.default.getOnlineTime()},t}());i.default=b,cc._RF.pop(),cc._RF.pop()},{}]},{},["TipsFrame","TopFrame","Api","Area","AreaIceRain","ArrowTower","AutoBlink","AutoHeart","AutoMove","AutoRotate","BaseTower","BattleFrame","BtnLayout","BoardCalculator","BoardData","BoardRendererItem","Boss","BossMonster","BossTip","BottomBtn","BoxInfoFrame","BoxItem","BoxNode","BoxTipNode","BtnSound","Buff","Buff_CD","Buff_Cirt","Bullet","BulletBase","BulletBat","BulletFan","BulletFanEx","BulletFireBall","BulletFlame","BulletFlameEx","BulletFlameNone","BulletFlash","BulletFlashEx","BulletFlashLeidian","BulletIceBall","BulletLight","BulletPoison","BulletPoisonJudu","BulletStraight","BulletSword","BulletTrack","ButtonSound","ByteDance","ByAddToDeskFrame","ByDanceFrame","ByShareFrame","CameraFollow","CardInfoFrame","CardIcon","ChessSpineRenderer","ChessSpriteRenderer","CoinItem","ColliderTarget","ButtonCommon","ContentScroll","FbfAnimation","FormatLabel","ImageLoader","InsetByScale","LayoutItem","LayoutList","LayoutPanel","MateralsLoader","NightRenderer","Particle","ScrollList","TabBtnBar","AutoJump","AutoRock","BetweenMove","MoveTween","EventConfig","GameDefine","DailyTaskFrame","sdbBattleLevel","sdbBoxLv","sdbCard","sdbHero","sdbHeroSkin","sdbHeroStory","sdbItem","sdbMonster","sdbMonsterSkill","sdbProb","sdbRound","sdbShop","sdbStage","sdbTower","sdbTowerBattle","sdbTowerLevel","DayItem","DayNightPanel","DayNode","DebrisItem","Debuff","DelayHide","DesktopBrowser","DragCloneManager","DragPanel","DragPanelRefreshManager","DragPanelRefresher","DungeonCoinItem","DungeonFrame","DungonCoinInfoFrame","Effect","EffectDelayRemove","EffectFby","EffectSpine","Entity","AttValue","Tower","EntityData","FanTower","FastMonster","FixShaderPackageTexture","FlameTower","FrameAnimation_Border","FrameAnimation_Opacity","FrameAnimation_Scale","ReviveFrame","TowerSelectFrame","TowerInfoFrame","FullByScale","DamageRank","DragItem","GameControl","GameStage","ItemPanel","TowerCardItem","GameBoard","GameFrame","GameGlobaled","GameItem","GameLoadingFrame","GameMgr","GetItem","GetItemFrame","GrassRenderer","GuideStep","GuideStepChooseCard","GuideStepDragFoundation","GuideStepDragTower","AbGroup","AssetBundleHelper","EventHelper","FrameHelper","GuideConfig","GuideFinger","GuideFrame","GuideGroup","GuideHelper","GuideMsg","Guide_Level_1","Guide_Level_2","LangHelper","NetHelper","PlatformHelper","RunDataHelper","SoundHelper","StaticDBHelper","HeroFrame","HeroRewardFrame","HeroSkill","HeroSkin","Hide","HpBar","IconBase","IconFly","ItemBoomFlyTween","ItemCountLabel","ItemSelectLv","LangLabel","LangSprite","Load","LocalStorage","LogUtil","Logger","CreateTask","DamageBaseNumber","DamageNumber","PathFinder","Login","LongTouchButton","LoseFrame","MagicTower","ContinueFrame","GMFrame","ItemInfoFrame","MainFrame","SetFrame","SweepFrame","BattleManager","BulletManager","DamageManager","EffectManager","HpManager","MonsterManager","TowerManager","Monster","MonsterBoom","MonsterRenderer","OnShowScale","OpenBoxFrame","Params","PathLenghtRender","PauseFrame","PoisonTower","Pool","PoolNode","RankPanel","Red","RenderUtil","BoardRenderer","ChessRenderer","LightManager","PathRenderer","RendererManager","TowerRenderer","Report","ReportQueue","Request","RotateMotion","BagData","DailyData","DailyTaskData","DungeonData","GameData","GuideData","HeroStoryData","PowerData","SettingData","StageData","SweepData","TowerData","SecondConfirmFrame","SelectCardFrame","SelectCardItem","SelectGroundFrame","SelectGroundItem","ShopBuyFrame","BuyTVFrame","ShopFrame","ShopItem","Show","Singleton","Debuff_Dizziness","Debuff_Poison","Debuff_Slow","Debuff_Vulnerable","Skill","SkillFactory","Skill_AttackCount","Skill_AttackTime","Skill_BatAttackCount","Skill_BatCount","Skill_BatCountAndCrit","Skill_BatCritByMerge","Skill_BatCritDamage","Skill_BatExplode","Skill_BatExplodeEx","Skill_BatKillAttackCount","Skill_BatPoison","Skill_BatPoisonEx","Skill_BulletBoom","Skill_BulletCount","Skill_BulletDizziness","Skill_BulletLife","Skill_BulletPoison","Skill_BulletSize","Skill_BulletSlow","Skill_BulletSpeed","Skill_BulletTransmit","Skill_BulletType","Skill_BulletVulnerable","Skill_CD","Skill_CDTemp","Skill_Crit","Skill_CritDamage","Skill_Damage","Skill_DieBoom","Skill_FanBigger","Skill_FanEx","Skill_FanPassCD","Skill_FireBallBounce","Skill_FireBallBounceEx","Skill_FireBallExtraShot","Skill_FireBallLowHpForceCrit","Skill_FireBallPowerup","Skill_FlameEx","Skill_FlameSweep","Skill_FlashEx","Skill_ForceCirt","Skill_GetCoin","Skill_IceBall","Skill_IcePenetrate","Skill_IcePriorityBoss","Skill_IceRain","Skill_IsFindNotPoisonFirst","Skill_JuDuXinXing","Skill_KillBoom","Skill_LeiDianChangYu","Skill_MagicEx","Skill_MagicResidue","Skill_MagicSweep","Skill_MoreCoin","Skill_MorePoison","Skill_Penetrate","Skill_PoisonDamage","Skill_PoisonLife","Skill_PreSword","Skill_ProPenetrate","Skill_Range","Skill_Recover","Skill_RefreshCost","Skill_SwordBoth","Skill_SwordDamageUpWithLife","Skill_SwordFire","Skill_SwordKillAddLife","Skill_SwordThunder","Skill_TowerLevelup","SoundConfig","Stain","StorageSync","SweepBtnNode","TabList","TankMonster","TaskBox","TaskBoxTipNode","TaskItem","TimeManage","TimePanel","TimeRemain","TimeTip","ToggleButtonByNode","Tools","TowerAtt","TowerBaseRenderer","TowerFlameRenderer","TowerFrame","TowerItem","TowerMagicRenderer","TowerPoisonRenderer","TowerSkill","TowerSpriteRenderer","TowerUpFrame","TrackHelper","TweenComponent","UintIcon","CocosUtil","Factory","MathUtil","RichTextUtil","StringUtil","TimeUtil","UuidUtil","utilTools","Version","Vesions","Weapon","WeaponArrow","WeaponBase","WeaponBat","WeaponBullet","WeaponFan","WeaponFireBall","WeaponFlame","WeaponFlash","WeaponIce","WeaponMagic","WeaponPoison","WeaponSword","WeaponTransmitBullet","Wechat","WechatBaoWeiWanDou","WechatGameClub","WechatGameClubButton","WechatHu","WechatPlay800","WechatYongWang","WechatZhai","WinFrame","WinRewardItem","YWCloundHelper","config","function","Arrayincludes","Objectvalues","classCallCheck","createClass","toPrimitive","toPropertyKey","md5","md5Util","sdbBehaviours","sdbConfig","sdbDayTask","sdbRoleAtt","sdbRoleRanked","sdbRoleUp","sdbRoleUpReward","sdbSign","sdbSound","sdbStory","sdbStoryItem","ttPostbackCtl","ywkjTT"]);